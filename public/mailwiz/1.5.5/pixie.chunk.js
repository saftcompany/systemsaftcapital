/*! For license information please see pixie.chunk.js.LICENSE.txt */
(self.webpackChunkmailwiz = self.webpackChunkmailwiz || []).push([[95], { 56063: function (e, t) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var n = "clock-rotate-left", r = ["history"], i = "f1da", o = "M256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C172.2 512 97.87 471.8 51.19 409.6C45.88 402.5 47.31 392.5 54.37 387.2C61.44 381.9 71.47 383.3 76.78 390.4C117.7 444.8 182.7 480 256 480C379.7 480 480 379.7 480 256C480 132.3 379.7 32 256 32C166.7 32 89.51 84.3 53.55 160H144C152.8 160 160 167.2 160 176C160 184.8 152.8 192 144 192H16C7.164 192 0 184.8 0 176V48C0 39.16 7.164 32 16 32C24.84 32 32 39.16 32 48V131.1C75.66 53.29 159.6 0 256 0zM256 128C264.8 128 272 135.2 272 144V249.4L347.3 324.7C353.6 330.9 353.6 341.1 347.3 347.3C341.1 353.6 330.9 353.6 324.7 347.3L244.7 267.3C241.7 264.3 239.1 260.2 239.1 256V144C239.1 135.2 247.2 128 255.1 128H256z"; t.definition = { prefix: "fal", iconName: n, icon: [512, 512, r, i, o] }, t.faClockRotateLeft = t.definition, t.prefix = "fal", t.iconName = n, t.width = 512, t.height = 512, t.ligatures = r, t.unicode = i, t.svgPathData = o, t.aliases = r }, 28124: function (e, t, n) { "use strict"; var r = n(56063); t.DF = { prefix: r.prefix, iconName: r.iconName, icon: [r.width, r.height, r.aliases, r.unicode, r.svgPathData] }, t.qO = t.DF, r.prefix, r.iconName, r.width, r.height, r.aliases, r.unicode, r.svgPathData, r.aliases }, 71500: function (e, t, n) { "use strict"; n.r(t), n.d(t, { default: function () { return W } }); var r = n(27378), i = n(8441), o = n(78351), a = n(36531), s = n(25773), l = n(30808), u = n(23615), c = n.n(u), f = n(60042), h = n.n(f), d = n(69166), p = ["className", "cssModule", "tag"], v = { tag: d.iC, className: c().string, cssModule: c().object }, g = function (e) { var t = e.className, n = e.cssModule, i = e.tag, o = (0, l.Z)(e, p), a = (0, d.mx)(h()(t, "modal-body"), n); return r.createElement(i, (0, s.Z)({}, o, { className: a })) }; g.propTypes = v, g.defaultProps = { tag: "div" }; var m, y, b, w = g, x = n(20743), _ = n(92739), S = n(28124), k = n(30342), C = n(46690), T = n(42831), E = n(23154), O = n.n(E); function P(e) { return P = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, P(e) } function M() { M = function () { return e }; var e = {}, t = Object.prototype, n = t.hasOwnProperty, r = Object.defineProperty || function (e, t, n) { e[t] = n.value }, i = "function" == typeof Symbol ? Symbol : {}, o = i.iterator || "@@iterator", a = i.asyncIterator || "@@asyncIterator", s = i.toStringTag || "@@toStringTag"; function l(e, t, n) { return Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }), e[t] } try { l({}, "") } catch (e) { l = function (e, t, n) { return e[t] = n } } function u(e, t, n, i) { var o = t && t.prototype instanceof h ? t : h, a = Object.create(o.prototype), s = new C(i || []); return r(a, "_invoke", { value: x(e, n, s) }), a } function c(e, t, n) { try { return { type: "normal", arg: e.call(t, n) } } catch (e) { return { type: "throw", arg: e } } } e.wrap = u; var f = {}; function h() { } function d() { } function p() { } var v = {}; l(v, o, (function () { return this })); var g = Object.getPrototypeOf, m = g && g(g(T([]))); m && m !== t && n.call(m, o) && (v = m); var y = p.prototype = h.prototype = Object.create(v); function b(e) { ["next", "throw", "return"].forEach((function (t) { l(e, t, (function (e) { return this._invoke(t, e) })) })) } function w(e, t) { function i(r, o, a, s) { var l = c(e[r], e, o); if ("throw" !== l.type) { var u = l.arg, f = u.value; return f && "object" == P(f) && n.call(f, "__await") ? t.resolve(f.__await).then((function (e) { i("next", e, a, s) }), (function (e) { i("throw", e, a, s) })) : t.resolve(f).then((function (e) { u.value = e, a(u) }), (function (e) { return i("throw", e, a, s) })) } s(l.arg) } var o; r(this, "_invoke", { value: function (e, n) { function r() { return new t((function (t, r) { i(e, n, t, r) })) } return o = o ? o.then(r, r) : r() } }) } function x(e, t, n) { var r = "suspendedStart"; return function (i, o) { if ("executing" === r) throw new Error("Generator is already running"); if ("completed" === r) { if ("throw" === i) throw o; return { value: void 0, done: !0 } } for (n.method = i, n.arg = o; ;) { var a = n.delegate; if (a) { var s = _(a, n); if (s) { if (s === f) continue; return s } } if ("next" === n.method) n.sent = n._sent = n.arg; else if ("throw" === n.method) { if ("suspendedStart" === r) throw r = "completed", n.arg; n.dispatchException(n.arg) } else "return" === n.method && n.abrupt("return", n.arg); r = "executing"; var l = c(e, t, n); if ("normal" === l.type) { if (r = n.done ? "completed" : "suspendedYield", l.arg === f) continue; return { value: l.arg, done: n.done } } "throw" === l.type && (r = "completed", n.method = "throw", n.arg = l.arg) } } } function _(e, t) { var n = e.iterator[t.method]; if (void 0 === n) { if (t.delegate = null, "throw" === t.method) { if (e.iterator.return && (t.method = "return", t.arg = void 0, _(e, t), "throw" === t.method)) return f; t.method = "throw", t.arg = new TypeError("The iterator does not provide a 'throw' method") } return f } var r = c(n, e.iterator, t.arg); if ("throw" === r.type) return t.method = "throw", t.arg = r.arg, t.delegate = null, f; var i = r.arg; return i ? i.done ? (t[e.resultName] = i.value, t.next = e.nextLoc, "return" !== t.method && (t.method = "next", t.arg = void 0), t.delegate = null, f) : i : (t.method = "throw", t.arg = new TypeError("iterator result is not an object"), t.delegate = null, f) } function S(e) { var t = { tryLoc: e[0] }; 1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t) } function k(e) { var t = e.completion || {}; t.type = "normal", delete t.arg, e.completion = t } function C(e) { this.tryEntries = [{ tryLoc: "root" }], e.forEach(S, this), this.reset(!0) } function T(e) { if (e) { var t = e[o]; if (t) return t.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var r = -1, i = function t() { for (; ++r < e.length;)if (n.call(e, r)) return t.value = e[r], t.done = !1, t; return t.value = void 0, t.done = !0, t }; return i.next = i } } return { next: E } } function E() { return { value: void 0, done: !0 } } return d.prototype = p, r(y, "constructor", { value: p, configurable: !0 }), r(p, "constructor", { value: d, configurable: !0 }), d.displayName = l(p, s, "GeneratorFunction"), e.isGeneratorFunction = function (e) { var t = "function" == typeof e && e.constructor; return !!t && (t === d || "GeneratorFunction" === (t.displayName || t.name)) }, e.mark = function (e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, p) : (e.__proto__ = p, l(e, s, "GeneratorFunction")), e.prototype = Object.create(y), e }, e.awrap = function (e) { return { __await: e } }, b(w.prototype), l(w.prototype, a, (function () { return this })), e.AsyncIterator = w, e.async = function (t, n, r, i, o) { void 0 === o && (o = Promise); var a = new w(u(t, n, r, i), o); return e.isGeneratorFunction(n) ? a : a.next().then((function (e) { return e.done ? e.value : a.next() })) }, b(y), l(y, s, "Generator"), l(y, o, (function () { return this })), l(y, "toString", (function () { return "[object Generator]" })), e.keys = function (e) { var t = Object(e), n = []; for (var r in t) n.push(r); return n.reverse(), function e() { for (; n.length;) { var r = n.pop(); if (r in t) return e.value = r, e.done = !1, e } return e.done = !0, e } }, e.values = T, C.prototype = { constructor: C, reset: function (e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = void 0, this.done = !1, this.delegate = null, this.method = "next", this.arg = void 0, this.tryEntries.forEach(k), !e) for (var t in this) "t" === t.charAt(0) && n.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = void 0) }, stop: function () { this.done = !0; var e = this.tryEntries[0].completion; if ("throw" === e.type) throw e.arg; return this.rval }, dispatchException: function (e) { if (this.done) throw e; var t = this; function r(n, r) { return a.type = "throw", a.arg = e, t.next = n, r && (t.method = "next", t.arg = void 0), !!r } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var o = this.tryEntries[i], a = o.completion; if ("root" === o.tryLoc) return r("end"); if (o.tryLoc <= this.prev) { var s = n.call(o, "catchLoc"), l = n.call(o, "finallyLoc"); if (s && l) { if (this.prev < o.catchLoc) return r(o.catchLoc, !0); if (this.prev < o.finallyLoc) return r(o.finallyLoc) } else if (s) { if (this.prev < o.catchLoc) return r(o.catchLoc, !0) } else { if (!l) throw new Error("try statement without catch or finally"); if (this.prev < o.finallyLoc) return r(o.finallyLoc) } } } }, abrupt: function (e, t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var i = this.tryEntries[r]; if (i.tryLoc <= this.prev && n.call(i, "finallyLoc") && this.prev < i.finallyLoc) { var o = i; break } } o && ("break" === e || "continue" === e) && o.tryLoc <= t && t <= o.finallyLoc && (o = null); var a = o ? o.completion : {}; return a.type = e, a.arg = t, o ? (this.method = "next", this.next = o.finallyLoc, f) : this.complete(a) }, complete: function (e, t) { if ("throw" === e.type) throw e.arg; return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg, this.method = "return", this.next = "end") : "normal" === e.type && t && (this.next = t), f }, finish: function (e) { for (var t = this.tryEntries.length - 1; t >= 0; --t) { var n = this.tryEntries[t]; if (n.finallyLoc === e) return this.complete(n.completion, n.afterLoc), k(n), f } }, catch: function (e) { for (var t = this.tryEntries.length - 1; t >= 0; --t) { var n = this.tryEntries[t]; if (n.tryLoc === e) { var r = n.completion; if ("throw" === r.type) { var i = r.arg; k(n) } return i } } throw new Error("illegal catch attempt") }, delegateYield: function (e, t, n) { return this.delegate = { iterator: T(e), resultName: t, nextLoc: n }, "next" === this.method && (this.arg = void 0), f } }, e } function A(e, t, n, r, i, o, a) { try { var s = e[o](a), l = s.value } catch (e) { return void n(e) } s.done ? t(l) : Promise.resolve(l).then(r, i) } function D(e) { return function () { var t = this, n = arguments; return new Promise((function (r, i) { var o = e.apply(t, n); function a(e) { A(o, r, i, a, s, "next", e) } function s(e) { A(o, r, i, a, s, "throw", e) } a(void 0) })) } } function L(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } function R(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } function I(e, t) { return I = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, I(e, t) } function j(e, t) { if (t && ("object" === P(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return F(e) } function F(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e } function N(e) { return N = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, N(e) } function z(e, t, n) { return t in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e } function B(e, t) { return t || (t = e.slice(0)), Object.freeze(Object.defineProperties(e, { raw: { value: Object.freeze(t) } })) } var V = i.ZP.div(m || (m = B(["\n  height: 100%;\n\n  pixie-editor {\n    height: 100%;\n    overflow: hidden;\n\n    .pixie-root {\n      > div:first-child {\n        > div:last-child {\n          button:nth-child(2) {\n            background: transparent !important;\n            color: ", " !important;\n            transition-duration: 0 !important;\n          }\n          button:nth-child(2).transition-button {\n            transition-property: border-color !important;\n          }\n\n          button:last-child {\n            span {\n              margin-left: 0 !important;\n              margin-right: 0 !important;\n            }\n          }\n        }\n      }\n\n      .tiny-scrollbar .text-xs.capitalize {\n        white-space: pre-line;\n        word-break: break-all;\n      }\n    }\n  }\n"])), (function (e) { return e.theme.panel.textColor })), U = i.ZP.div(y || (y = B(["\n  position: absolute;\n  top: 8px;\n  left: 8px;\n  z-index: 5;\n"]))), H = function (e) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && I(e, t) }(u, e); var t, n, i, a, s, l = (a = u, s = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = N(a); if (s) { var n = N(this).constructor; e = Reflect.construct(t, arguments, n) } else e = t.apply(this, arguments); return j(this, e) }); function u() { var e; L(this, u); for (var t = arguments.length, n = new Array(t), i = 0; i < t; i++)n[i] = arguments[i]; return z(F(e = l.call.apply(l, [this].concat(n))), "state", { loading: !0, saving: !1, errorMessage: "" }), z(F(e), "loadPixieEditor", D(M().mark((function t() { var n, i, o, a, s, l, u, c; return M().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return n = F(e), i = n.props, o = i.intl, a = i.imageUrl, s = i.parentProps.appearance, n.state.errorMessage, t.prev = 2, t.next = 5, (0, k.fetchImage)(a); case 5: return u = t.sent, t.next = 8, new Promise((function (e) { var t = new FileReader; t.readAsDataURL(u), t.onloadend = function () { e(t.result) } })); case 8: return c = t.sent, t.next = 11, O().init({ blankCanvasSize: { width: 1, height: 1 }, baseUrl: "./pixie/assets", selector: "pixie-editor", image: c, activeLanguage: "current", ui: { visible: !1, activeTheme: s.theme || "light", mode: "inline", showExportPanel: !1, toolbar: { hide: !1, leftItems: null }, menubar: { replaceDefault: !0, items: [{ type: "undoWidget", align: "left" }, { type: "zoomWidget", align: "center", desktopOnly: !0 }, { type: "button", icon: r.createElement(_.G, { size: "1x", icon: S.qO }), align: "right", desktopOnly: !0, action: function (e) { e.togglePanel("history") } }, { type: "button", icon: r.Fragment, label: o.formatMessage({ id: "buttons.cancel", defaultMessage: "Cancel" }), align: "right", action: function (e) { e.close() } }, { type: "button", icon: r.Fragment, label: o.formatMessage({ id: "buttons.save", defaultMessage: "Save" }), align: "right", action: function (e) { var t; null !== (t = e.state.config.ui) && void 0 !== t && t.showExportPanel ? e.state.togglePanel("export", !0) : e.tools.export.save("image") } }] } }, languages: { current: (l = { baCdKH: o.formatMessage({ id: "buttons.filter", defaultMessage: "Filter" }), F5usg6: o.formatMessage({ id: "buttons.resize", defaultMessage: "Resize" }), khFxHA: o.formatMessage({ id: "buttons.crop", defaultMessage: "Crop" }), aBdNBx: o.formatMessage({ id: "buttons.draw", defaultMessage: "Draw" }), jPQp7Q: o.formatMessage({ id: "buttons.drawing", defaultMessage: "Drawing" }), kn9SmW: o.formatMessage({ id: "editor.text.label", defaultMessage: "Text" }), "5Ws83M": o.formatMessage({ id: "buttons.shape", defaultMessage: "Shape" }), "RpVV/g": o.formatMessage({ id: "buttons.shapes", defaultMessage: "Shapes" }), "": o.formatMessage({ id: "buttons.sticker", defaultMessage: "Sticker" }), mcHXNc: o.formatMessage({ id: "buttons.stickers", defaultMessage: "Stickers" }), nuDv1J: o.formatMessage({ id: "buttons.frame", defaultMessage: "Frame" }), "+bdU7f": o.formatMessage({ id: "buttons.corners", defaultMessage: "Corners" }), XQZA8e: o.formatMessage({ id: "buttons.background", defaultMessage: "Background" }), Ln1cJu: o.formatMessage({ id: "buttons.merge", defaultMessage: "Merge" }), djJp6c: o.formatMessage({ id: "buttons.history", defaultMessage: "History" }), sWVioT: o.formatMessage({ id: "labels.objects", defaultMessage: "Objects" }), "+0zv6g": o.formatMessage({ id: "editor.image.label", defaultMessage: "Image" }), "5IP7AP": o.formatMessage({ id: "editor.width.label", defaultMessage: "Width" }), teLZyZ: o.formatMessage({ id: "editor.height.label", defaultMessage: "Height" }), "i/W1yW": o.formatMessage({ id: "editor.image.brush_color", defaultMessage: "Brush Color" }), "47FYwb": o.formatMessage({ id: "buttons.cancel", defaultMessage: "Cancel" }), rbrahO: o.formatMessage({ id: "buttons.close", defaultMessage: "Close" }), "EWw/tK": o.formatMessage({ id: "buttons.apply", defaultMessage: "Apply" }), agOXPD: o.formatMessage({ id: "labels.size", defaultMessage: "Size" }), "qfw+KX": o.formatMessage({ id: "editor.image.maintain_aspect_ratio", defaultMessage: "Maintain Aspect Ratio" }), nDRMt4: o.formatMessage({ id: "labels.radius", defaultMessage: "Radius" }), A3jj9z: o.formatMessage({ id: "labels.font", defaultMessage: "Font" }), u4jNiO: o.formatMessage({ id: "labels.shadow", defaultMessage: "Shadow" }), uMhpKe: o.formatMessage({ id: "editor.color.label", defaultMessage: "Color" }), aEhjYg: o.formatMessage({ id: "labels.outline", defaultMessage: "Outline" }) }, z(l, "XQZA8e", o.formatMessage({ id: "buttons.background", defaultMessage: "Background" })), z(l, "ktqcD5", o.formatMessage({ id: "labels.texture", defaultMessage: "Texture" })), z(l, "y/FCma", o.formatMessage({ id: "labels.gradient", defaultMessage: "Gradient" })), z(l, "CMansq", o.formatMessage({ id: "editor.background_color.label", defaultMessage: "Background Color" })), z(l, "VXV22v", o.formatMessage({ id: "labels.blur", defaultMessage: "Blur" })), z(l, "jvo0vs", o.formatMessage({ id: "buttons.save", defaultMessage: "Save" })), z(l, "Jc05Ei", o.formatMessage({ id: "editor.image.added_drawing", defaultMessage: "Added: drawing" })), z(l, "TBhTYM", o.formatMessage({ id: "editor.image.added_text", defaultMessage: "Added: text" })), z(l, "JSL/ji", o.formatMessage({ id: "editor.image.added_shape", defaultMessage: "Added: shape" })), z(l, "xDTFjk", o.formatMessage({ id: "editor.image.added_sticker", defaultMessage: "Added: sticker" })), z(l, "hgv63I", o.formatMessage({ id: "editor.image.added_frame", defaultMessage: "Added: frame" })), z(l, "cXik3L", o.formatMessage({ id: "editor.image.objects_merged", defaultMessage: "Objects: merged" })), z(l, "fCGryv", o.formatMessage({ id: "editor.image.initial", defaultMessage: "Initial" })), z(l, "UA9zHK", o.formatMessage({ id: "editor.image.loaded_state", defaultMessage: "Loaded: state" })), z(l, "33NkCL", o.formatMessage({ id: "editor.image.changed_style", defaultMessage: "Changed: style" })), l) }, onLoad: function (e) { window.postMessage("pixieLoaded", "*"), e.state.history.reset(), e.open(), n.setState({ loading: !1 }) }, onClose: function () { n.props.toggleModal() }, onSave: function () { n.updateImage() } }); case 11: b = t.sent, t.next = 18; break; case 14: t.prev = 14, t.t0 = t.catch(2), e.setState({ loading: !1, errorMessage: t.t0.message }); case 18: case "end": return t.stop() } }), t, null, [[2, 14]]) })))), z(F(e), "updateImage", D(M().mark((function t() { var n, r, i, o, a, s, l, u, c, f, h, d, p, v, g; return M().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return n = b.tools.export.getDataUrl("png"), t.next = 3, (0, k.imageHasTransparency)(n); case 3: r = t.sent, i = r ? void 0 : b.tools.export.getDataUrl("jpeg"), o = !!r || !(!n.length || null != i && i.length && !(n.length < i.length)), a = o ? n : i, s = F(e), (l = s.props).updateValue, u = l.toggleModal, l.project, c = l.onComplete, f = s.b64toBlob, e.setState({ saving: !0 }), h = a.split(";"), d = h[0].split(":")[1], p = h[1].split(",")[1], (v = f(p, d)).lastModifiedDate = new Date, g = o ? ".png" : ".jpg", v.name = Math.round(1e6 * Math.random()).toString() + g, setTimeout((function () { u() }), 1e3), c(v); case 18: case "end": return t.stop() } }), t) })))), z(F(e), "b64toBlob", (function (e, t, n) { t = t || "", n = n || 512; for (var r = atob(e), i = [], o = 0; o < r.length; o += n) { for (var a = r.slice(o, o + n), s = new Array(a.length), l = 0; l < a.length; l++)s[l] = a.charCodeAt(l); var u = new Uint8Array(s); i.push(u) } return new Blob(i, { type: t }) })), e } return t = u, n = [{ key: "componentDidMount", value: function () { (0, this.loadPixieEditor)() } }, { key: "componentDidUpdate", value: function (e) { var t = this.props.parentProps.appearance.theme; e.parentProps.appearance.theme !== t && b.setConfig({ ui: { activeTheme: t } }) } }, { key: "componentWillUnmount", value: (i = D(M().mark((function e() { return M().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, b.resetEditor(); case 2: b.state.config = b.defaultConfig, delete b.state.fabric; case 4: case "end": return e.stop() } }), e) }))), function () { return i.apply(this, arguments) }) }, { key: "render", value: function () { var e = this.props, t = (e.openModal, e.toggleModal), n = e.parentProps.appearance, i = this.state, a = i.loading, s = i.saving, l = i.errorMessage; return this.updateImage, r.createElement(V, null, r.createElement(w, { style: { height: "100%" } }, !a && r.createElement(U, null, !!l && r.createElement(r.Fragment, null, r.createElement(x.Z, { color: "danger", onClick: t }, r.createElement(o.Z, { id: "buttons.close", defaultMessage: "Close" })))), (a || s) && r.createElement(T.ZA, { theme: n.theme }, r.createElement(C.a, null)), !!l && r.createElement("p", { style: { margin: "60px 10px 20px 10px" } }, l), r.createElement("pixie-editor", null))) } }], n && R(t.prototype, n), Object.defineProperty(t, "prototype", { writable: !1 }), u }(r.Component), W = H = (0, a.ZP)(H) }, 23154: function (e, t, n) { var r, i; function o() { return o = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, n) { var r = a(e, t); if (r) { var i = Object.getOwnPropertyDescriptor(r, t); return i.get ? i.get.call(arguments.length < 3 ? e : n) : i.value } }, o.apply(this, arguments) } function a(e, t) { for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = v(e));); return e } function s(e) { var t = "function" == typeof Map ? new Map : void 0; return s = function (e) { if (null === e || (n = e, -1 === Function.toString.call(n).indexOf("[native code]"))) return e; var n; if ("function" != typeof e) throw new TypeError("Super expression must either be null or a function"); if (void 0 !== t) { if (t.has(e)) return t.get(e); t.set(e, r) } function r() { return l(e, arguments, v(this).constructor) } return r.prototype = Object.create(e.prototype, { constructor: { value: r, enumerable: !1, writable: !0, configurable: !0 } }), c(r, e) }, s(e) } function l(e, t, n) { return l = p() ? Reflect.construct.bind() : function (e, t, n) { var r = [null]; r.push.apply(r, t); var i = new (Function.bind.apply(e, r)); return n && c(i, n.prototype), i }, l.apply(null, arguments) } function u(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && c(e, t) } function c(e, t) { return c = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, c(e, t) } function f(e) { var t = p(); return function () { var n, r = v(e); if (t) { var i = v(this).constructor; n = Reflect.construct(r, arguments, i) } else n = r.apply(this, arguments); return h(this, n) } } function h(e, t) { if (t && ("object" === C(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return d(e) } function d(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e } function p() { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } } function v(e) { return v = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, v(e) } function g(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } function m(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } function y(e, t, n) { return t && m(e.prototype, t), n && m(e, n), Object.defineProperty(e, "prototype", { writable: !1 }), e } function b() { "use strict"; b = function () { return e }; var e = {}, t = Object.prototype, n = t.hasOwnProperty, r = Object.defineProperty || function (e, t, n) { e[t] = n.value }, i = "function" == typeof Symbol ? Symbol : {}, o = i.iterator || "@@iterator", a = i.asyncIterator || "@@asyncIterator", s = i.toStringTag || "@@toStringTag"; function l(e, t, n) { return Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }), e[t] } try { l({}, "") } catch (e) { l = function (e, t, n) { return e[t] = n } } function u(e, t, n, i) { var o = t && t.prototype instanceof h ? t : h, a = Object.create(o.prototype), s = new E(i || []); return r(a, "_invoke", { value: _(e, n, s) }), a } function c(e, t, n) { try { return { type: "normal", arg: e.call(t, n) } } catch (e) { return { type: "throw", arg: e } } } e.wrap = u; var f = {}; function h() { } function d() { } function p() { } var v = {}; l(v, o, (function () { return this })); var g = Object.getPrototypeOf, m = g && g(g(O([]))); m && m !== t && n.call(m, o) && (v = m); var y = p.prototype = h.prototype = Object.create(v); function w(e) { ["next", "throw", "return"].forEach((function (t) { l(e, t, (function (e) { return this._invoke(t, e) })) })) } function x(e, t) { function i(r, o, a, s) { var l = c(e[r], e, o); if ("throw" !== l.type) { var u = l.arg, f = u.value; return f && "object" == C(f) && n.call(f, "__await") ? t.resolve(f.__await).then((function (e) { i("next", e, a, s) }), (function (e) { i("throw", e, a, s) })) : t.resolve(f).then((function (e) { u.value = e, a(u) }), (function (e) { return i("throw", e, a, s) })) } s(l.arg) } var o; r(this, "_invoke", { value: function (e, n) { function r() { return new t((function (t, r) { i(e, n, t, r) })) } return o = o ? o.then(r, r) : r() } }) } function _(e, t, n) { var r = "suspendedStart"; return function (i, o) { if ("executing" === r) throw new Error("Generator is already running"); if ("completed" === r) { if ("throw" === i) throw o; return { value: void 0, done: !0 } } for (n.method = i, n.arg = o; ;) { var a = n.delegate; if (a) { var s = S(a, n); if (s) { if (s === f) continue; return s } } if ("next" === n.method) n.sent = n._sent = n.arg; else if ("throw" === n.method) { if ("suspendedStart" === r) throw r = "completed", n.arg; n.dispatchException(n.arg) } else "return" === n.method && n.abrupt("return", n.arg); r = "executing"; var l = c(e, t, n); if ("normal" === l.type) { if (r = n.done ? "completed" : "suspendedYield", l.arg === f) continue; return { value: l.arg, done: n.done } } "throw" === l.type && (r = "completed", n.method = "throw", n.arg = l.arg) } } } function S(e, t) { var n = e.iterator[t.method]; if (void 0 === n) { if (t.delegate = null, "throw" === t.method) { if (e.iterator.return && (t.method = "return", t.arg = void 0, S(e, t), "throw" === t.method)) return f; t.method = "throw", t.arg = new TypeError("The iterator does not provide a 'throw' method") } return f } var r = c(n, e.iterator, t.arg); if ("throw" === r.type) return t.method = "throw", t.arg = r.arg, t.delegate = null, f; var i = r.arg; return i ? i.done ? (t[e.resultName] = i.value, t.next = e.nextLoc, "return" !== t.method && (t.method = "next", t.arg = void 0), t.delegate = null, f) : i : (t.method = "throw", t.arg = new TypeError("iterator result is not an object"), t.delegate = null, f) } function k(e) { var t = { tryLoc: e[0] }; 1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t) } function T(e) { var t = e.completion || {}; t.type = "normal", delete t.arg, e.completion = t } function E(e) { this.tryEntries = [{ tryLoc: "root" }], e.forEach(k, this), this.reset(!0) } function O(e) { if (e) { var t = e[o]; if (t) return t.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var r = -1, i = function t() { for (; ++r < e.length;)if (n.call(e, r)) return t.value = e[r], t.done = !1, t; return t.value = void 0, t.done = !0, t }; return i.next = i } } return { next: P } } function P() { return { value: void 0, done: !0 } } return d.prototype = p, r(y, "constructor", { value: p, configurable: !0 }), r(p, "constructor", { value: d, configurable: !0 }), d.displayName = l(p, s, "GeneratorFunction"), e.isGeneratorFunction = function (e) { var t = "function" == typeof e && e.constructor; return !!t && (t === d || "GeneratorFunction" === (t.displayName || t.name)) }, e.mark = function (e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, p) : (e.__proto__ = p, l(e, s, "GeneratorFunction")), e.prototype = Object.create(y), e }, e.awrap = function (e) { return { __await: e } }, w(x.prototype), l(x.prototype, a, (function () { return this })), e.AsyncIterator = x, e.async = function (t, n, r, i, o) { void 0 === o && (o = Promise); var a = new x(u(t, n, r, i), o); return e.isGeneratorFunction(n) ? a : a.next().then((function (e) { return e.done ? e.value : a.next() })) }, w(y), l(y, s, "Generator"), l(y, o, (function () { return this })), l(y, "toString", (function () { return "[object Generator]" })), e.keys = function (e) { var t = Object(e), n = []; for (var r in t) n.push(r); return n.reverse(), function e() { for (; n.length;) { var r = n.pop(); if (r in t) return e.value = r, e.done = !1, e } return e.done = !0, e } }, e.values = O, E.prototype = { constructor: E, reset: function (e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = void 0, this.done = !1, this.delegate = null, this.method = "next", this.arg = void 0, this.tryEntries.forEach(T), !e) for (var t in this) "t" === t.charAt(0) && n.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = void 0) }, stop: function () { this.done = !0; var e = this.tryEntries[0].completion; if ("throw" === e.type) throw e.arg; return this.rval }, dispatchException: function (e) { if (this.done) throw e; var t = this; function r(n, r) { return a.type = "throw", a.arg = e, t.next = n, r && (t.method = "next", t.arg = void 0), !!r } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var o = this.tryEntries[i], a = o.completion; if ("root" === o.tryLoc) return r("end"); if (o.tryLoc <= this.prev) { var s = n.call(o, "catchLoc"), l = n.call(o, "finallyLoc"); if (s && l) { if (this.prev < o.catchLoc) return r(o.catchLoc, !0); if (this.prev < o.finallyLoc) return r(o.finallyLoc) } else if (s) { if (this.prev < o.catchLoc) return r(o.catchLoc, !0) } else { if (!l) throw new Error("try statement without catch or finally"); if (this.prev < o.finallyLoc) return r(o.finallyLoc) } } } }, abrupt: function (e, t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var i = this.tryEntries[r]; if (i.tryLoc <= this.prev && n.call(i, "finallyLoc") && this.prev < i.finallyLoc) { var o = i; break } } o && ("break" === e || "continue" === e) && o.tryLoc <= t && t <= o.finallyLoc && (o = null); var a = o ? o.completion : {}; return a.type = e, a.arg = t, o ? (this.method = "next", this.next = o.finallyLoc, f) : this.complete(a) }, complete: function (e, t) { if ("throw" === e.type) throw e.arg; return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg, this.method = "return", this.next = "end") : "normal" === e.type && t && (this.next = t), f }, finish: function (e) { for (var t = this.tryEntries.length - 1; t >= 0; --t) { var n = this.tryEntries[t]; if (n.finallyLoc === e) return this.complete(n.completion, n.afterLoc), T(n), f } }, catch: function (e) { for (var t = this.tryEntries.length - 1; t >= 0; --t) { var n = this.tryEntries[t]; if (n.tryLoc === e) { var r = n.completion; if ("throw" === r.type) { var i = r.arg; T(n) } return i } } throw new Error("illegal catch attempt") }, delegateYield: function (e, t, n) { return this.delegate = { iterator: O(e), resultName: t, nextLoc: n }, "next" === this.method && (this.arg = void 0), f } }, e } function w(e, t, n, r, i, o, a) { try { var s = e[o](a), l = s.value } catch (e) { return void n(e) } s.done ? t(l) : Promise.resolve(l).then(r, i) } function x(e) { return function () { var t = this, n = arguments; return new Promise((function (r, i) { var o = e.apply(t, n); function a(e) { w(o, r, i, a, s, "next", e) } function s(e) { w(o, r, i, a, s, "throw", e) } a(void 0) })) } } function _(e, t) { return function (e) { if (Array.isArray(e)) return e }(e) || function (e, t) { var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"]; if (null != n) { var r, i, o = [], a = !0, s = !1; try { for (n = n.call(e); !(a = (r = n.next()).done) && (o.push(r.value), !t || o.length !== t); a = !0); } catch (e) { s = !0, i = e } finally { try { a || null == n.return || n.return() } finally { if (s) throw i } } return o } }(e, t) || E(e, t) || function () { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") }() } function S(e) { return function (e) { if (Array.isArray(e)) return O(e) }(e) || function (e) { if ("undefined" != typeof Symbol && null != e[Symbol.iterator] || null != e["@@iterator"]) return Array.from(e) }(e) || E(e) || function () { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") }() } function k(e, t, n) { return t in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e } function C(e) { return C = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, C(e) } function T(e, t) { var n = "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"]; if (!n) { if (Array.isArray(e) || (n = E(e)) || t && e && "number" == typeof e.length) { n && (e = n); var r = 0, i = function () { }; return { s: i, n: function () { return r >= e.length ? { done: !0 } : { done: !1, value: e[r++] } }, e: function (e) { throw e }, f: i } } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") } var o, a = !0, s = !1; return { s: function () { n = n.call(e) }, n: function () { var e = n.next(); return a = e.done, e }, e: function (e) { s = !0, o = e }, f: function () { try { a || null == n.return || n.return() } finally { if (s) throw o } } } } function E(e, t) { if (e) { if ("string" == typeof e) return O(e, t); var n = Object.prototype.toString.call(e).slice(8, -1); return "Object" === n && e.constructor && (n = e.constructor.name), "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? O(e, t) : void 0 } } function O(e, t) { (null == t || t > e.length) && (t = e.length); for (var n = 0, r = new Array(t); n < t; n++)r[n] = e[n]; return r } e = n.nmd(e); var P, M = Object.defineProperty, A = Object.defineProperties, D = Object.getOwnPropertyDescriptors, L = Object.getOwnPropertySymbols, R = Object.prototype.hasOwnProperty, I = Object.prototype.propertyIsEnumerable, j = function (e, t, n) { return t in e ? M(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n }, F = function (e, t) { for (var n in t || (t = {})) R.call(t, n) && j(e, n, t[n]); if (L) { var r, i = T(L(t)); try { for (i.s(); !(r = i.n()).done;)n = r.value, I.call(t, n) && j(e, n, t[n]) } catch (e) { i.e(e) } finally { i.f() } } return e }, N = function (e, t) { return A(e, D(t)) }, z = function (e, t) { var n = {}; for (var r in e) R.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]); if (null != e && L) { var i, o = T(L(e)); try { for (o.s(); !(i = o.n()).done;)r = i.value, t.indexOf(r) < 0 && I.call(e, r) && (n[r] = e[r]) } catch (e) { o.e(e) } finally { o.f() } } return n }, B = function (e, t, n) { return j(e, "symbol" != C(t) ? t + "" : t, n), n }; P = function () { var t, r, i, a, l = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : void 0 !== n.g ? n.g : "undefined" != typeof self ? self : {}; function c(e) { return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e } var h = { exports: {} }, p = {}, m = Object.getOwnPropertySymbols, w = Object.prototype.hasOwnProperty, E = Object.prototype.propertyIsEnumerable; function O(e) { if (null == e) throw new TypeError("Object.assign cannot be called with null or undefined"); return Object(e) } var P = function () { try { if (!Object.assign) return !1; var e = new String("abc"); if (e[5] = "de", "5" === Object.getOwnPropertyNames(e)[0]) return !1; for (var t = {}, n = 0; n < 10; n++)t["_" + String.fromCharCode(n)] = n; if ("0123456789" !== Object.getOwnPropertyNames(t).map((function (e) { return t[e] })).join("")) return !1; var r = {}; return "abcdefghijklmnopqrst".split("").forEach((function (e) { r[e] = e })), "abcdefghijklmnopqrst" === Object.keys(Object.assign({}, r)).join("") } catch (e) { return !1 } }() ? Object.assign : function (e, t) { for (var n, r, i = O(e), o = 1; o < arguments.length; o++) { for (var a in n = Object(arguments[o])) w.call(n, a) && (i[a] = n[a]); if (m) { r = m(n); for (var s = 0; s < r.length; s++)E.call(n, r[s]) && (i[r[s]] = n[r[s]]) } } return i }, M = P, A = 60103, D = 60106; p.Fragment = 60107, p.StrictMode = 60108, p.Profiler = 60114; var L = 60109, R = 60110, I = 60112; p.Suspense = 60113; var j = 60115, V = 60116; if ("function" == typeof Symbol && Symbol.for) { var U = Symbol.for; A = U("react.element"), D = U("react.portal"), p.Fragment = U("react.fragment"), p.StrictMode = U("react.strict_mode"), p.Profiler = U("react.profiler"), L = U("react.provider"), R = U("react.context"), I = U("react.forward_ref"), p.Suspense = U("react.suspense"), j = U("react.memo"), V = U("react.lazy") } var H = "function" == typeof Symbol && Symbol.iterator; function W(e) { for (var t = "https://reactjs.org/docs/error-decoder.html?invariant=" + e, n = 1; n < arguments.length; n++)t += "&args[]=" + encodeURIComponent(arguments[n]); return "Minified React error #" + e + "; visit " + t + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings." } var K = { isMounted: function () { return !1 }, enqueueForceUpdate: function () { }, enqueueReplaceState: function () { }, enqueueSetState: function () { } }, Y = {}; function X(e, t, n) { this.props = e, this.context = t, this.refs = Y, this.updater = n || K } function G() { } function q(e, t, n) { this.props = e, this.context = t, this.refs = Y, this.updater = n || K } X.prototype.isReactComponent = {}, X.prototype.setState = function (e, t) { if ("object" != C(e) && "function" != typeof e && null != e) throw Error(W(85)); this.updater.enqueueSetState(this, e, t, "setState") }, X.prototype.forceUpdate = function (e) { this.updater.enqueueForceUpdate(this, e, "forceUpdate") }, G.prototype = X.prototype; var J = q.prototype = new G; J.constructor = q, M(J, X.prototype), J.isPureReactComponent = !0; var Z = { current: null }, $ = Object.prototype.hasOwnProperty, Q = { key: !0, ref: !0, __self: !0, __source: !0 }; function ee(e, t, n) { var r, i = {}, o = null, a = null; if (null != t) for (r in void 0 !== t.ref && (a = t.ref), void 0 !== t.key && (o = "" + t.key), t) $.call(t, r) && !Q.hasOwnProperty(r) && (i[r] = t[r]); var s = arguments.length - 2; if (1 === s) i.children = n; else if (1 < s) { for (var l = Array(s), u = 0; u < s; u++)l[u] = arguments[u + 2]; i.children = l } if (e && e.defaultProps) for (r in s = e.defaultProps) void 0 === i[r] && (i[r] = s[r]); return { $$typeof: A, type: e, key: o, ref: a, props: i, _owner: Z.current } } function te(e) { return "object" == C(e) && null !== e && e.$$typeof === A } var ne = /\/+/g; function re(e, t) { return "object" == C(e) && null !== e && null != e.key ? function (e) { var t = { "=": "=0", ":": "=2" }; return "$" + e.replace(/[=:]/g, (function (e) { return t[e] })) }("" + e.key) : t.toString(36) } function ie(e, t, n, r, i) { var o = C(e); ("undefined" === o || "boolean" === o) && (e = null); var a = !1; if (null === e) a = !0; else switch (o) { case "string": case "number": a = !0; break; case "object": switch (e.$$typeof) { case A: case D: a = !0 } }if (a) return i = i(a = e), e = "" === r ? "." + re(a, 0) : r, Array.isArray(i) ? (n = "", null != e && (n = e.replace(ne, "$&/") + "/"), ie(i, t, n, "", (function (e) { return e }))) : null != i && (te(i) && (i = function (e, t) { return { $$typeof: A, type: e.type, key: t, ref: e.ref, props: e.props, _owner: e._owner } }(i, n + (!i.key || a && a.key === i.key ? "" : ("" + i.key).replace(ne, "$&/") + "/") + e)), t.push(i)), 1; if (a = 0, r = "" === r ? "." : r + ":", Array.isArray(e)) for (var s = 0; s < e.length; s++) { var l = r + re(o = e[s], s); a += ie(o, t, n, l, i) } else if (l = function (e) { return null === e || "object" != C(e) ? null : "function" == typeof (e = H && e[H] || e["@@iterator"]) ? e : null }(e), "function" == typeof l) for (e = l.call(e), s = 0; !(o = e.next()).done;)a += ie(o = o.value, t, n, l = r + re(o, s++), i); else if ("object" === o) throw t = "" + e, Error(W(31, "[object Object]" === t ? "object with keys {" + Object.keys(e).join(", ") + "}" : t)); return a } function oe(e, t, n) { if (null == e) return e; var r = [], i = 0; return ie(e, r, "", "", (function (e) { return t.call(n, e, i++) })), r } function ae(e) { if (-1 === e._status) { var t = e._result; t = t(), e._status = 0, e._result = t, t.then((function (t) { 0 === e._status && (t = t.default, e._status = 1, e._result = t) }), (function (t) { 0 === e._status && (e._status = 2, e._result = t) })) } if (1 === e._status) return e._result; throw e._result } var se = { current: null }; function le() { var e = se.current; if (null === e) throw Error(W(321)); return e } var ue = { ReactCurrentDispatcher: se, ReactCurrentBatchConfig: { transition: 0 }, ReactCurrentOwner: Z, IsSomeRendererActing: { current: !1 }, assign: M }; p.Children = { map: oe, forEach: function (e, t, n) { oe(e, (function () { t.apply(this, arguments) }), n) }, count: function (e) { var t = 0; return oe(e, (function () { t++ })), t }, toArray: function (e) { return oe(e, (function (e) { return e })) || [] }, only: function (e) { if (!te(e)) throw Error(W(143)); return e } }, p.Component = X, p.PureComponent = q, p.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = ue, p.cloneElement = function (e, t, n) { if (null == e) throw Error(W(267, e)); var r = M({}, e.props), i = e.key, o = e.ref, a = e._owner; if (null != t) { if (void 0 !== t.ref && (o = t.ref, a = Z.current), void 0 !== t.key && (i = "" + t.key), e.type && e.type.defaultProps) var s = e.type.defaultProps; for (l in t) $.call(t, l) && !Q.hasOwnProperty(l) && (r[l] = void 0 === t[l] && void 0 !== s ? s[l] : t[l]) } var l = arguments.length - 2; if (1 === l) r.children = n; else if (1 < l) { s = Array(l); for (var u = 0; u < l; u++)s[u] = arguments[u + 2]; r.children = s } return { $$typeof: A, type: e.type, key: i, ref: o, props: r, _owner: a } }, p.createContext = function (e, t) { return void 0 === t && (t = null), (e = { $$typeof: R, _calculateChangedBits: t, _currentValue: e, _currentValue2: e, _threadCount: 0, Provider: null, Consumer: null }).Provider = { $$typeof: L, _context: e }, e.Consumer = e }, p.createElement = ee, p.createFactory = function (e) { var t = ee.bind(null, e); return t.type = e, t }, p.createRef = function () { return { current: null } }, p.forwardRef = function (e) { return { $$typeof: I, render: e } }, p.isValidElement = te, p.lazy = function (e) { return { $$typeof: V, _payload: { _status: -1, _result: e }, _init: ae } }, p.memo = function (e, t) { return { $$typeof: j, type: e, compare: void 0 === t ? null : t } }, p.useCallback = function (e, t) { return le().useCallback(e, t) }, p.useContext = function (e, t) { return le().useContext(e, t) }, p.useDebugValue = function () { }, p.useEffect = function (e, t) { return le().useEffect(e, t) }, p.useImperativeHandle = function (e, t, n) { return le().useImperativeHandle(e, t, n) }, p.useLayoutEffect = function (e, t) { return le().useLayoutEffect(e, t) }, p.useMemo = function (e, t) { return le().useMemo(e, t) }, p.useReducer = function (e, t, n) { return le().useReducer(e, t, n) }, p.useRef = function (e) { return le().useRef(e) }, p.useState = function (e) { return le().useState(e) }, p.version = "17.0.2", h.exports = p; var ce = h.exports, fe = { exports: {} }, he = {}, de = { exports: {} }, pe = {}; (function (e) { var t, n, r, i; if ("object" == ("undefined" == typeof performance ? "undefined" : C(performance)) && "function" == typeof performance.now) { var o = performance; e.unstable_now = function () { return o.now() } } else { var a = Date, s = a.now(); e.unstable_now = function () { return a.now() - s } } if ("undefined" == typeof window || "function" != typeof MessageChannel) { var l = null, u = null, c = function t() { if (null !== l) try { var n = e.unstable_now(); l(!0, n), l = null } catch (e) { throw setTimeout(t, 0), e } }; t = function (e) { null !== l ? setTimeout(t, 0, e) : (l = e, setTimeout(c, 0)) }, n = function (e, t) { u = setTimeout(e, t) }, r = function () { clearTimeout(u) }, e.unstable_shouldYield = function () { return !1 }, i = e.unstable_forceFrameRate = function () { } } else { var f = window.setTimeout, h = window.clearTimeout; if ("undefined" != typeof console) { var d = window.cancelAnimationFrame; "function" != typeof window.requestAnimationFrame && console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"), "function" != typeof d && console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills") } var p = !1, v = null, g = -1, m = 5, y = 0; e.unstable_shouldYield = function () { return e.unstable_now() >= y }, i = function () { }, e.unstable_forceFrameRate = function (e) { 0 > e || 125 < e ? console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported") : m = 0 < e ? Math.floor(1e3 / e) : 5 }; var b = new MessageChannel, w = b.port2; b.port1.onmessage = function () { if (null !== v) { var t = e.unstable_now(); y = t + m; try { v(!0, t) ? w.postMessage(null) : (p = !1, v = null) } catch (e) { throw w.postMessage(null), e } } else p = !1 }, t = function (e) { v = e, p || (p = !0, w.postMessage(null)) }, n = function (t, n) { g = f((function () { t(e.unstable_now()) }), n) }, r = function () { h(g), g = -1 } } function x(e, t) { var n = e.length; e.push(t); e: for (; ;) { var r = n - 1 >>> 1, i = e[r]; if (!(void 0 !== i && 0 < k(i, t))) break e; e[r] = t, e[n] = i, n = r } } function _(e) { return void 0 === (e = e[0]) ? null : e } function S(e) { var t = e[0]; if (void 0 !== t) { var n = e.pop(); if (n !== t) { e[0] = n; e: for (var r = 0, i = e.length; r < i;) { var o = 2 * (r + 1) - 1, a = e[o], s = o + 1, l = e[s]; if (void 0 !== a && 0 > k(a, n)) void 0 !== l && 0 > k(l, a) ? (e[r] = l, e[s] = n, r = s) : (e[r] = a, e[o] = n, r = o); else { if (!(void 0 !== l && 0 > k(l, n))) break e; e[r] = l, e[s] = n, r = s } } } return t } return null } function k(e, t) { var n = e.sortIndex - t.sortIndex; return 0 !== n ? n : e.id - t.id } var T = [], E = [], O = 1, P = null, M = 3, A = !1, D = !1, L = !1; function R(e) { for (var t = _(E); null !== t;) { if (null === t.callback) S(E); else { if (!(t.startTime <= e)) break; S(E), t.sortIndex = t.expirationTime, x(T, t) } t = _(E) } } function I(e) { if (L = !1, R(e), !D) if (null !== _(T)) D = !0, t(j); else { var r = _(E); null !== r && n(I, r.startTime - e) } } function j(t, i) { D = !1, L && (L = !1, r()), A = !0; var o = M; try { for (R(i), P = _(T); null !== P && (!(P.expirationTime > i) || t && !e.unstable_shouldYield());) { var a = P.callback; if ("function" == typeof a) { P.callback = null, M = P.priorityLevel; var s = a(P.expirationTime <= i); i = e.unstable_now(), "function" == typeof s ? P.callback = s : P === _(T) && S(T), R(i) } else S(T); P = _(T) } if (null !== P) var l = !0; else { var u = _(E); null !== u && n(I, u.startTime - i), l = !1 } return l } finally { P = null, M = o, A = !1 } } var F = i; e.unstable_IdlePriority = 5, e.unstable_ImmediatePriority = 1, e.unstable_LowPriority = 4, e.unstable_NormalPriority = 3, e.unstable_Profiling = null, e.unstable_UserBlockingPriority = 2, e.unstable_cancelCallback = function (e) { e.callback = null }, e.unstable_continueExecution = function () { D || A || (D = !0, t(j)) }, e.unstable_getCurrentPriorityLevel = function () { return M }, e.unstable_getFirstCallbackNode = function () { return _(T) }, e.unstable_next = function (e) { switch (M) { case 1: case 2: case 3: var t = 3; break; default: t = M }var n = M; M = t; try { return e() } finally { M = n } }, e.unstable_pauseExecution = function () { }, e.unstable_requestPaint = F, e.unstable_runWithPriority = function (e, t) { switch (e) { case 1: case 2: case 3: case 4: case 5: break; default: e = 3 }var n = M; M = e; try { return t() } finally { M = n } }, e.unstable_scheduleCallback = function (i, o, a) { var s = e.unstable_now(); switch (a = "object" == C(a) && null !== a && "number" == typeof (a = a.delay) && 0 < a ? s + a : s, i) { case 1: var l = -1; break; case 2: l = 250; break; case 5: l = 1073741823; break; case 4: l = 1e4; break; default: l = 5e3 }return i = { id: O++, callback: o, priorityLevel: i, startTime: a, expirationTime: l = a + l, sortIndex: -1 }, a > s ? (i.sortIndex = a, x(E, i), null === _(T) && i === _(E) && (L ? r() : L = !0, n(I, a - s))) : (i.sortIndex = l, x(T, i), D || A || (D = !0, t(j))), i }, e.unstable_wrapCallback = function (e) { var t = M; return function () { var n = M; M = t; try { return e.apply(this, arguments) } finally { M = n } } } })(pe), de.exports = pe; var ve = h.exports, ge = P, me = de.exports; function ye(e) { for (var t = "https://reactjs.org/docs/error-decoder.html?invariant=" + e, n = 1; n < arguments.length; n++)t += "&args[]=" + encodeURIComponent(arguments[n]); return "Minified React error #" + e + "; visit " + t + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings." } if (!ve) throw Error(ye(227)); var be = new Set, we = {}; function xe(e, t) { _e(e, t), _e(e + "Capture", t) } function _e(e, t) { for (we[e] = t, e = 0; e < t.length; e++)be.add(t[e]) } var Se = !("undefined" == typeof window || void 0 === window.document || void 0 === window.document.createElement), ke = /^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/, Ce = Object.prototype.hasOwnProperty, Te = {}, Ee = {}; function Oe(e, t, n, r, i, o, a) { this.acceptsBooleans = 2 === t || 3 === t || 4 === t, this.attributeName = r, this.attributeNamespace = i, this.mustUseProperty = n, this.propertyName = e, this.type = t, this.sanitizeURL = o, this.removeEmptyString = a } var Pe = {}; "children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function (e) { Pe[e] = new Oe(e, 0, !1, e, null, !1, !1) })), [["acceptCharset", "accept-charset"], ["className", "class"], ["htmlFor", "for"], ["httpEquiv", "http-equiv"]].forEach((function (e) { var t = e[0]; Pe[t] = new Oe(t, 1, !1, e[1], null, !1, !1) })), ["contentEditable", "draggable", "spellCheck", "value"].forEach((function (e) { Pe[e] = new Oe(e, 2, !1, e.toLowerCase(), null, !1, !1) })), ["autoReverse", "externalResourcesRequired", "focusable", "preserveAlpha"].forEach((function (e) { Pe[e] = new Oe(e, 2, !1, e, null, !1, !1) })), "allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function (e) { Pe[e] = new Oe(e, 3, !1, e.toLowerCase(), null, !1, !1) })), ["checked", "multiple", "muted", "selected"].forEach((function (e) { Pe[e] = new Oe(e, 3, !0, e, null, !1, !1) })), ["capture", "download"].forEach((function (e) { Pe[e] = new Oe(e, 4, !1, e, null, !1, !1) })), ["cols", "rows", "size", "span"].forEach((function (e) { Pe[e] = new Oe(e, 6, !1, e, null, !1, !1) })), ["rowSpan", "start"].forEach((function (e) { Pe[e] = new Oe(e, 5, !1, e.toLowerCase(), null, !1, !1) })); var Me = /[\-:]([a-z])/g; function Ae(e) { return e[1].toUpperCase() } function De(e, t, n, r) { var i = Pe.hasOwnProperty(t) ? Pe[t] : null; (null !== i ? 0 === i.type : !r && 2 < t.length && ("o" === t[0] || "O" === t[0]) && ("n" === t[1] || "N" === t[1])) || (function (e, t, n, r) { if (null == t || function (e, t, n, r) { if (null !== n && 0 === n.type) return !1; switch (C(t)) { case "function": case "symbol": return !0; case "boolean": return !r && (null !== n ? !n.acceptsBooleans : "data-" !== (e = e.toLowerCase().slice(0, 5)) && "aria-" !== e); default: return !1 } }(e, t, n, r)) return !0; if (r) return !1; if (null !== n) switch (n.type) { case 3: return !t; case 4: return !1 === t; case 5: return isNaN(t); case 6: return isNaN(t) || 1 > t }return !1 }(t, n, i, r) && (n = null), r || null === i ? function (e) { return !!Ce.call(Ee, e) || !Ce.call(Te, e) && (ke.test(e) ? Ee[e] = !0 : (Te[e] = !0, !1)) }(t) && (null === n ? e.removeAttribute(t) : e.setAttribute(t, "" + n)) : i.mustUseProperty ? e[i.propertyName] = null === n ? 3 !== i.type && "" : n : (t = i.attributeName, r = i.attributeNamespace, null === n ? e.removeAttribute(t) : (n = 3 === (i = i.type) || 4 === i && !0 === n ? "" : "" + n, r ? e.setAttributeNS(r, t, n) : e.setAttribute(t, n)))) } "accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function (e) { var t = e.replace(Me, Ae); Pe[t] = new Oe(t, 1, !1, e, null, !1, !1) })), "xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function (e) { var t = e.replace(Me, Ae); Pe[t] = new Oe(t, 1, !1, e, "http://www.w3.org/1999/xlink", !1, !1) })), ["xml:base", "xml:lang", "xml:space"].forEach((function (e) { var t = e.replace(Me, Ae); Pe[t] = new Oe(t, 1, !1, e, "http://www.w3.org/XML/1998/namespace", !1, !1) })), ["tabIndex", "crossOrigin"].forEach((function (e) { Pe[e] = new Oe(e, 1, !1, e.toLowerCase(), null, !1, !1) })), Pe.xlinkHref = new Oe("xlinkHref", 1, !1, "xlink:href", "http://www.w3.org/1999/xlink", !0, !1), ["src", "href", "action", "formAction"].forEach((function (e) { Pe[e] = new Oe(e, 1, !1, e.toLowerCase(), null, !0, !0) })); var Le = ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED, Re = 60103, Ie = 60106, je = 60107, Fe = 60108, Ne = 60114, ze = 60109, Be = 60110, Ve = 60112, Ue = 60113, He = 60120, We = 60115, Ke = 60116, Ye = 60121, Xe = 60128, Ge = 60129, qe = 60130, Je = 60131; if ("function" == typeof Symbol && Symbol.for) { var Ze = Symbol.for; Re = Ze("react.element"), Ie = Ze("react.portal"), je = Ze("react.fragment"), Fe = Ze("react.strict_mode"), Ne = Ze("react.profiler"), ze = Ze("react.provider"), Be = Ze("react.context"), Ve = Ze("react.forward_ref"), Ue = Ze("react.suspense"), He = Ze("react.suspense_list"), We = Ze("react.memo"), Ke = Ze("react.lazy"), Ye = Ze("react.block"), Ze("react.scope"), Xe = Ze("react.opaque.id"), Ge = Ze("react.debug_trace_mode"), qe = Ze("react.offscreen"), Je = Ze("react.legacy_hidden") } var $e, Qe = "function" == typeof Symbol && Symbol.iterator; function et(e) { return null === e || "object" != C(e) ? null : "function" == typeof (e = Qe && e[Qe] || e["@@iterator"]) ? e : null } function tt(e) { if (void 0 === $e) try { throw Error() } catch (e) { var t = e.stack.trim().match(/\n( *(at )?)/); $e = t && t[1] || "" } return "\n" + $e + e } var nt = !1; function rt(e, t) { if (!e || nt) return ""; nt = !0; var n = Error.prepareStackTrace; Error.prepareStackTrace = void 0; try { if (t) if (t = function () { throw Error() }, Object.defineProperty(t.prototype, "props", { set: function () { throw Error() } }), "object" == ("undefined" == typeof Reflect ? "undefined" : C(Reflect)) && Reflect.construct) { try { Reflect.construct(t, []) } catch (e) { var r = e } Reflect.construct(e, [], t) } else { try { t.call() } catch (e) { r = e } e.call(t.prototype) } else { try { throw Error() } catch (e) { r = e } e() } } catch (e) { if (e && r && "string" == typeof e.stack) { for (var i = e.stack.split("\n"), o = r.stack.split("\n"), a = i.length - 1, s = o.length - 1; 1 <= a && 0 <= s && i[a] !== o[s];)s--; for (; 1 <= a && 0 <= s; a--, s--)if (i[a] !== o[s]) { if (1 !== a || 1 !== s) do { if (a--, 0 > --s || i[a] !== o[s]) return "\n" + i[a].replace(" at new ", " at ") } while (1 <= a && 0 <= s); break } } } finally { nt = !1, Error.prepareStackTrace = n } return (e = e ? e.displayName || e.name : "") ? tt(e) : "" } function it(e) { switch (e.tag) { case 5: return tt(e.type); case 16: return tt("Lazy"); case 13: return tt("Suspense"); case 19: return tt("SuspenseList"); case 0: case 2: case 15: return rt(e.type, !1); case 11: return rt(e.type.render, !1); case 22: return rt(e.type._render, !1); case 1: return rt(e.type, !0); default: return "" } } function ot(e) { if (null == e) return null; if ("function" == typeof e) return e.displayName || e.name || null; if ("string" == typeof e) return e; switch (e) { case je: return "Fragment"; case Ie: return "Portal"; case Ne: return "Profiler"; case Fe: return "StrictMode"; case Ue: return "Suspense"; case He: return "SuspenseList" }if ("object" == C(e)) switch (e.$$typeof) { case Be: return (e.displayName || "Context") + ".Consumer"; case ze: return (e._context.displayName || "Context") + ".Provider"; case Ve: var t = e.render; return t = t.displayName || t.name || "", e.displayName || ("" !== t ? "ForwardRef(" + t + ")" : "ForwardRef"); case We: return ot(e.type); case Ye: return ot(e._render); case Ke: t = e._payload, e = e._init; try { return ot(e(t)) } catch (e) { } }return null } function at(e) { switch (C(e)) { case "boolean": case "number": case "object": case "string": case "undefined": return e; default: return "" } } function st(e) { var t = e.type; return (e = e.nodeName) && "input" === e.toLowerCase() && ("checkbox" === t || "radio" === t) } function lt(e) { e._valueTracker || (e._valueTracker = function (e) { var t = st(e) ? "checked" : "value", n = Object.getOwnPropertyDescriptor(e.constructor.prototype, t), r = "" + e[t]; if (!e.hasOwnProperty(t) && void 0 !== n && "function" == typeof n.get && "function" == typeof n.set) { var i = n.get, o = n.set; return Object.defineProperty(e, t, { configurable: !0, get: function () { return i.call(this) }, set: function (e) { r = "" + e, o.call(this, e) } }), Object.defineProperty(e, t, { enumerable: n.enumerable }), { getValue: function () { return r }, setValue: function (e) { r = "" + e }, stopTracking: function () { e._valueTracker = null, delete e[t] } } } }(e)) } function ut(e) { if (!e) return !1; var t = e._valueTracker; if (!t) return !0; var n = t.getValue(), r = ""; return e && (r = st(e) ? e.checked ? "true" : "false" : e.value), (e = r) !== n && (t.setValue(e), !0) } function ct(e) { if (void 0 === (e = e || ("undefined" != typeof document ? document : void 0))) return null; try { return e.activeElement || e.body } catch (t) { return e.body } } function ft(e, t) { var n = t.checked; return ge({}, t, { defaultChecked: void 0, defaultValue: void 0, value: void 0, checked: null != n ? n : e._wrapperState.initialChecked }) } function ht(e, t) { var n = null == t.defaultValue ? "" : t.defaultValue, r = null != t.checked ? t.checked : t.defaultChecked; n = at(null != t.value ? t.value : n), e._wrapperState = { initialChecked: r, initialValue: n, controlled: "checkbox" === t.type || "radio" === t.type ? null != t.checked : null != t.value } } function dt(e, t) { null != (t = t.checked) && De(e, "checked", t, !1) } function pt(e, t) { dt(e, t); var n = at(t.value), r = t.type; if (null != n) "number" === r ? (0 === n && "" === e.value || e.value != n) && (e.value = "" + n) : e.value !== "" + n && (e.value = "" + n); else if ("submit" === r || "reset" === r) return void e.removeAttribute("value"); t.hasOwnProperty("value") ? gt(e, t.type, n) : t.hasOwnProperty("defaultValue") && gt(e, t.type, at(t.defaultValue)), null == t.checked && null != t.defaultChecked && (e.defaultChecked = !!t.defaultChecked) } function vt(e, t, n) { if (t.hasOwnProperty("value") || t.hasOwnProperty("defaultValue")) { var r = t.type; if (!("submit" !== r && "reset" !== r || void 0 !== t.value && null !== t.value)) return; t = "" + e._wrapperState.initialValue, n || t === e.value || (e.value = t), e.defaultValue = t } "" !== (n = e.name) && (e.name = ""), e.defaultChecked = !!e._wrapperState.initialChecked, "" !== n && (e.name = n) } function gt(e, t, n) { ("number" !== t || ct(e.ownerDocument) !== e) && (null == n ? e.defaultValue = "" + e._wrapperState.initialValue : e.defaultValue !== "" + n && (e.defaultValue = "" + n)) } function mt(e, t) { return e = ge({ children: void 0 }, t), (t = function (e) { var t = ""; return ve.Children.forEach(e, (function (e) { null != e && (t += e) })), t }(t.children)) && (e.children = t), e } function yt(e, t, n, r) { if (e = e.options, t) { t = {}; for (var i = 0; i < n.length; i++)t["$" + n[i]] = !0; for (n = 0; n < e.length; n++)i = t.hasOwnProperty("$" + e[n].value), e[n].selected !== i && (e[n].selected = i), i && r && (e[n].defaultSelected = !0) } else { for (n = "" + at(n), t = null, i = 0; i < e.length; i++) { if (e[i].value === n) return e[i].selected = !0, void (r && (e[i].defaultSelected = !0)); null !== t || e[i].disabled || (t = e[i]) } null !== t && (t.selected = !0) } } function bt(e, t) { if (null != t.dangerouslySetInnerHTML) throw Error(ye(91)); return ge({}, t, { value: void 0, defaultValue: void 0, children: "" + e._wrapperState.initialValue }) } function wt(e, t) { var n = t.value; if (null == n) { if (n = t.children, t = t.defaultValue, null != n) { if (null != t) throw Error(ye(92)); if (Array.isArray(n)) { if (!(1 >= n.length)) throw Error(ye(93)); n = n[0] } t = n } null == t && (t = ""), n = t } e._wrapperState = { initialValue: at(n) } } function xt(e, t) { var n = at(t.value), r = at(t.defaultValue); null != n && ((n = "" + n) !== e.value && (e.value = n), null == t.defaultValue && e.defaultValue !== n && (e.defaultValue = n)), null != r && (e.defaultValue = "" + r) } function _t(e) { var t = e.textContent; t === e._wrapperState.initialValue && "" !== t && null !== t && (e.value = t) } var St = "http://www.w3.org/1999/xhtml"; function kt(e) { switch (e) { case "svg": return "http://www.w3.org/2000/svg"; case "math": return "http://www.w3.org/1998/Math/MathML"; default: return "http://www.w3.org/1999/xhtml" } } function Ct(e, t) { return null == e || "http://www.w3.org/1999/xhtml" === e ? kt(t) : "http://www.w3.org/2000/svg" === e && "foreignObject" === t ? "http://www.w3.org/1999/xhtml" : e } var Tt, Et = function (e) { return "undefined" != typeof MSApp && MSApp.execUnsafeLocalFunction ? function (t, n, r, i) { MSApp.execUnsafeLocalFunction((function () { return e(t, n) })) } : e }((function (e, t) { if ("http://www.w3.org/2000/svg" !== e.namespaceURI || "innerHTML" in e) e.innerHTML = t; else { for ((Tt = Tt || document.createElement("div")).innerHTML = "<svg>" + t.valueOf().toString() + "</svg>", t = Tt.firstChild; e.firstChild;)e.removeChild(e.firstChild); for (; t.firstChild;)e.appendChild(t.firstChild) } })); function Ot(e, t) { if (t) { var n = e.firstChild; if (n && n === e.lastChild && 3 === n.nodeType) return void (n.nodeValue = t) } e.textContent = t } var Pt = { animationIterationCount: !0, borderImageOutset: !0, borderImageSlice: !0, borderImageWidth: !0, boxFlex: !0, boxFlexGroup: !0, boxOrdinalGroup: !0, columnCount: !0, columns: !0, flex: !0, flexGrow: !0, flexPositive: !0, flexShrink: !0, flexNegative: !0, flexOrder: !0, gridArea: !0, gridRow: !0, gridRowEnd: !0, gridRowSpan: !0, gridRowStart: !0, gridColumn: !0, gridColumnEnd: !0, gridColumnSpan: !0, gridColumnStart: !0, fontWeight: !0, lineClamp: !0, lineHeight: !0, opacity: !0, order: !0, orphans: !0, tabSize: !0, widows: !0, zIndex: !0, zoom: !0, fillOpacity: !0, floodOpacity: !0, stopOpacity: !0, strokeDasharray: !0, strokeDashoffset: !0, strokeMiterlimit: !0, strokeOpacity: !0, strokeWidth: !0 }, Mt = ["Webkit", "ms", "Moz", "O"]; function At(e, t, n) { return null == t || "boolean" == typeof t || "" === t ? "" : n || "number" != typeof t || 0 === t || Pt.hasOwnProperty(e) && Pt[e] ? ("" + t).trim() : t + "px" } function Dt(e, t) { for (var n in e = e.style, t) if (t.hasOwnProperty(n)) { var r = 0 === n.indexOf("--"), i = At(n, t[n], r); "float" === n && (n = "cssFloat"), r ? e.setProperty(n, i) : e[n] = i } } Object.keys(Pt).forEach((function (e) { Mt.forEach((function (t) { t = t + e.charAt(0).toUpperCase() + e.substring(1), Pt[t] = Pt[e] })) })); var Lt = ge({ menuitem: !0 }, { area: !0, base: !0, br: !0, col: !0, embed: !0, hr: !0, img: !0, input: !0, keygen: !0, link: !0, meta: !0, param: !0, source: !0, track: !0, wbr: !0 }); function Rt(e, t) { if (t) { if (Lt[e] && (null != t.children || null != t.dangerouslySetInnerHTML)) throw Error(ye(137, e)); if (null != t.dangerouslySetInnerHTML) { if (null != t.children) throw Error(ye(60)); if ("object" != C(t.dangerouslySetInnerHTML) || !("__html" in t.dangerouslySetInnerHTML)) throw Error(ye(61)) } if (null != t.style && "object" != C(t.style)) throw Error(ye(62)) } } function It(e, t) { if (-1 === e.indexOf("-")) return "string" == typeof t.is; switch (e) { case "annotation-xml": case "color-profile": case "font-face": case "font-face-src": case "font-face-uri": case "font-face-format": case "font-face-name": case "missing-glyph": return !1; default: return !0 } } function jt(e) { return (e = e.target || e.srcElement || window).correspondingUseElement && (e = e.correspondingUseElement), 3 === e.nodeType ? e.parentNode : e } var Ft = null, Nt = null, zt = null; function Bt(e) { if (e = po(e)) { if ("function" != typeof Ft) throw Error(ye(280)); var t = e.stateNode; t && (t = go(t), Ft(e.stateNode, e.type, t)) } } function Vt(e) { Nt ? zt ? zt.push(e) : zt = [e] : Nt = e } function Ut() { if (Nt) { var e = Nt, t = zt; if (zt = Nt = null, Bt(e), t) for (e = 0; e < t.length; e++)Bt(t[e]) } } function Ht(e, t) { return e(t) } function Wt(e, t, n, r, i) { return e(t, n, r, i) } function Kt() { } var Yt = Ht, Xt = !1, Gt = !1; function qt() { (null !== Nt || null !== zt) && (Kt(), Ut()) } function Jt(e, t) { var n = e.stateNode; if (null === n) return null; var r = go(n); if (null === r) return null; n = r[t]; e: switch (t) { case "onClick": case "onClickCapture": case "onDoubleClick": case "onDoubleClickCapture": case "onMouseDown": case "onMouseDownCapture": case "onMouseMove": case "onMouseMoveCapture": case "onMouseUp": case "onMouseUpCapture": case "onMouseEnter": (r = !r.disabled) || (r = !("button" === (e = e.type) || "input" === e || "select" === e || "textarea" === e)), e = !r; break e; default: e = !1 }if (e) return null; if (n && "function" != typeof n) throw Error(ye(231, t, C(n))); return n } var Zt = !1; if (Se) try { var $t = {}; Object.defineProperty($t, "passive", { get: function () { Zt = !0 } }), window.addEventListener("test", $t, $t), window.removeEventListener("test", $t, $t) } catch (e) { Zt = !1 } function Qt(e, t, n, r, i, o, a, s, l) { var u = Array.prototype.slice.call(arguments, 3); try { t.apply(n, u) } catch (e) { this.onError(e) } } var en = !1, tn = null, nn = !1, rn = null, on = { onError: function (e) { en = !0, tn = e } }; function an(e, t, n, r, i, o, a, s, l) { en = !1, tn = null, Qt.apply(on, arguments) } function sn(e) { var t = e, n = e; if (e.alternate) for (; t.return;)t = t.return; else { e = t; do { 0 != (1026 & (t = e).flags) && (n = t.return), e = t.return } while (e) } return 3 === t.tag ? n : null } function ln(e) { if (13 === e.tag) { var t = e.memoizedState; if (null === t && null !== (e = e.alternate) && (t = e.memoizedState), null !== t) return t.dehydrated } return null } function un(e) { if (sn(e) !== e) throw Error(ye(188)) } function cn(e) { if (e = function (e) { var t = e.alternate; if (!t) { if (null === (t = sn(e))) throw Error(ye(188)); return t !== e ? null : e } for (var n = e, r = t; ;) { var i = n.return; if (null === i) break; var o = i.alternate; if (null === o) { if (null !== (r = i.return)) { n = r; continue } break } if (i.child === o.child) { for (o = i.child; o;) { if (o === n) return un(i), e; if (o === r) return un(i), t; o = o.sibling } throw Error(ye(188)) } if (n.return !== r.return) n = i, r = o; else { for (var a = !1, s = i.child; s;) { if (s === n) { a = !0, n = i, r = o; break } if (s === r) { a = !0, r = i, n = o; break } s = s.sibling } if (!a) { for (s = o.child; s;) { if (s === n) { a = !0, n = o, r = i; break } if (s === r) { a = !0, r = o, n = i; break } s = s.sibling } if (!a) throw Error(ye(189)) } } if (n.alternate !== r) throw Error(ye(190)) } if (3 !== n.tag) throw Error(ye(188)); return n.stateNode.current === n ? e : t }(e), !e) return null; for (var t = e; ;) { if (5 === t.tag || 6 === t.tag) return t; if (t.child) t.child.return = t, t = t.child; else { if (t === e) break; for (; !t.sibling;) { if (!t.return || t.return === e) return null; t = t.return } t.sibling.return = t.return, t = t.sibling } } return null } function fn(e, t) { for (var n = e.alternate; null !== t;) { if (t === e || t === n) return !0; t = t.return } return !1 } var hn, dn, pn, vn, gn = !1, mn = [], yn = null, bn = null, wn = null, xn = new Map, _n = new Map, Sn = [], kn = "mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" "); function Cn(e, t, n, r, i) { return { blockedOn: e, domEventName: t, eventSystemFlags: 16 | n, nativeEvent: i, targetContainers: [r] } } function Tn(e, t) { switch (e) { case "focusin": case "focusout": yn = null; break; case "dragenter": case "dragleave": bn = null; break; case "mouseover": case "mouseout": wn = null; break; case "pointerover": case "pointerout": xn.delete(t.pointerId); break; case "gotpointercapture": case "lostpointercapture": _n.delete(t.pointerId) } } function En(e, t, n, r, i, o) { return null === e || e.nativeEvent !== o ? (e = Cn(t, n, r, i, o), null !== t && null !== (t = po(t)) && dn(t), e) : (e.eventSystemFlags |= r, t = e.targetContainers, null !== i && -1 === t.indexOf(i) && t.push(i), e) } function On(e) { var t = ho(e.target); if (null !== t) { var n = sn(t); if (null !== n) if (13 === (t = n.tag)) { if (null !== (t = ln(n))) return e.blockedOn = t, void vn(e.lanePriority, (function () { me.unstable_runWithPriority(e.priority, (function () { pn(n) })) })) } else if (3 === t && n.stateNode.hydrate) return void (e.blockedOn = 3 === n.tag ? n.stateNode.containerInfo : null) } e.blockedOn = null } function Pn(e) { if (null !== e.blockedOn) return !1; for (var t = e.targetContainers; 0 < t.length;) { var n = cr(e.domEventName, e.eventSystemFlags, t[0], e.nativeEvent); if (null !== n) return null !== (t = po(n)) && dn(t), e.blockedOn = n, !1; t.shift() } return !0 } function Mn(e, t, n) { Pn(e) && n.delete(t) } function An() { for (gn = !1; 0 < mn.length;) { var e = mn[0]; if (null !== e.blockedOn) { null !== (e = po(e.blockedOn)) && hn(e); break } for (var t = e.targetContainers; 0 < t.length;) { var n = cr(e.domEventName, e.eventSystemFlags, t[0], e.nativeEvent); if (null !== n) { e.blockedOn = n; break } t.shift() } null === e.blockedOn && mn.shift() } null !== yn && Pn(yn) && (yn = null), null !== bn && Pn(bn) && (bn = null), null !== wn && Pn(wn) && (wn = null), xn.forEach(Mn), _n.forEach(Mn) } function Dn(e, t) { e.blockedOn === t && (e.blockedOn = null, gn || (gn = !0, me.unstable_scheduleCallback(me.unstable_NormalPriority, An))) } function Ln(e) { function t(t) { return Dn(t, e) } if (0 < mn.length) { Dn(mn[0], e); for (var n = 1; n < mn.length; n++) { var r = mn[n]; r.blockedOn === e && (r.blockedOn = null) } } for (null !== yn && Dn(yn, e), null !== bn && Dn(bn, e), null !== wn && Dn(wn, e), xn.forEach(t), _n.forEach(t), n = 0; n < Sn.length; n++)(r = Sn[n]).blockedOn === e && (r.blockedOn = null); for (; 0 < Sn.length && null === (n = Sn[0]).blockedOn;)On(n), null === n.blockedOn && Sn.shift() } function Rn(e, t) { var n = {}; return n[e.toLowerCase()] = t.toLowerCase(), n["Webkit" + e] = "webkit" + t, n["Moz" + e] = "moz" + t, n } var In = { animationend: Rn("Animation", "AnimationEnd"), animationiteration: Rn("Animation", "AnimationIteration"), animationstart: Rn("Animation", "AnimationStart"), transitionend: Rn("Transition", "TransitionEnd") }, jn = {}, Fn = {}; function Nn(e) { if (jn[e]) return jn[e]; if (!In[e]) return e; var t, n = In[e]; for (t in n) if (n.hasOwnProperty(t) && t in Fn) return jn[e] = n[t]; return e } Se && (Fn = document.createElement("div").style, "AnimationEvent" in window || (delete In.animationend.animation, delete In.animationiteration.animation, delete In.animationstart.animation), "TransitionEvent" in window || delete In.transitionend.transition); var zn = Nn("animationend"), Bn = Nn("animationiteration"), Vn = Nn("animationstart"), Un = Nn("transitionend"), Hn = new Map, Wn = new Map, Kn = ["abort", "abort", zn, "animationEnd", Bn, "animationIteration", Vn, "animationStart", "canplay", "canPlay", "canplaythrough", "canPlayThrough", "durationchange", "durationChange", "emptied", "emptied", "encrypted", "encrypted", "ended", "ended", "error", "error", "gotpointercapture", "gotPointerCapture", "load", "load", "loadeddata", "loadedData", "loadedmetadata", "loadedMetadata", "loadstart", "loadStart", "lostpointercapture", "lostPointerCapture", "playing", "playing", "progress", "progress", "seeking", "seeking", "stalled", "stalled", "suspend", "suspend", "timeupdate", "timeUpdate", Un, "transitionEnd", "waiting", "waiting"]; function Yn(e, t) { for (var n = 0; n < e.length; n += 2) { var r = e[n], i = e[n + 1]; i = "on" + (i[0].toUpperCase() + i.slice(1)), Wn.set(r, t), Hn.set(r, i), xe(i, [r]) } } (0, me.unstable_now)(); var Xn = 8; function Gn(e) { if (0 != (1 & e)) return Xn = 15, 1; if (0 != (2 & e)) return Xn = 14, 2; if (0 != (4 & e)) return Xn = 13, 4; var t = 24 & e; return 0 !== t ? (Xn = 12, t) : 0 != (32 & e) ? (Xn = 11, 32) : 0 != (t = 192 & e) ? (Xn = 10, t) : 0 != (256 & e) ? (Xn = 9, 256) : 0 != (t = 3584 & e) ? (Xn = 8, t) : 0 != (4096 & e) ? (Xn = 7, 4096) : 0 != (t = 4186112 & e) ? (Xn = 6, t) : 0 != (t = 62914560 & e) ? (Xn = 5, t) : 67108864 & e ? (Xn = 4, 67108864) : 0 != (134217728 & e) ? (Xn = 3, 134217728) : 0 != (t = 805306368 & e) ? (Xn = 2, t) : 0 != (1073741824 & e) ? (Xn = 1, 1073741824) : (Xn = 8, e) } function qn(e, t) { var n = e.pendingLanes; if (0 === n) return Xn = 0; var r = 0, i = 0, o = e.expiredLanes, a = e.suspendedLanes, s = e.pingedLanes; if (0 !== o) r = o, i = Xn = 15; else if (0 != (o = 134217727 & n)) { var l = o & ~a; 0 !== l ? (r = Gn(l), i = Xn) : 0 != (s &= o) && (r = Gn(s), i = Xn) } else 0 != (o = n & ~a) ? (r = Gn(o), i = Xn) : 0 !== s && (r = Gn(s), i = Xn); if (0 === r) return 0; if (r = n & ((0 > (r = 31 - tr(r)) ? 0 : 1 << r) << 1) - 1, 0 !== t && t !== r && 0 == (t & a)) { if (Gn(t), i <= Xn) return t; Xn = i } if (0 !== (t = e.entangledLanes)) for (e = e.entanglements, t &= r; 0 < t;)i = 1 << (n = 31 - tr(t)), r |= e[n], t &= ~i; return r } function Jn(e) { return 0 != (e = -1073741825 & e.pendingLanes) ? e : 1073741824 & e ? 1073741824 : 0 } function Zn(e, t) { switch (e) { case 15: return 1; case 14: return 2; case 12: return 0 === (e = $n(24 & ~t)) ? Zn(10, t) : e; case 10: return 0 === (e = $n(192 & ~t)) ? Zn(8, t) : e; case 8: return 0 === (e = $n(3584 & ~t)) && 0 === (e = $n(4186112 & ~t)) && (e = 512), e; case 2: return 0 === (t = $n(805306368 & ~t)) && (t = 268435456), t }throw Error(ye(358, e)) } function $n(e) { return e & -e } function Qn(e) { for (var t = [], n = 0; 31 > n; n++)t.push(e); return t } function er(e, t, n) { e.pendingLanes |= t; var r = t - 1; e.suspendedLanes &= r, e.pingedLanes &= r, (e = e.eventTimes)[t = 31 - tr(t)] = n } var tr = Math.clz32 ? Math.clz32 : function (e) { return 0 === e ? 32 : 31 - (nr(e) / rr | 0) | 0 }, nr = Math.log, rr = Math.LN2, ir = me.unstable_UserBlockingPriority, or = me.unstable_runWithPriority, ar = !0; function sr(e, t, n, r) { Xt || Kt(); var i = ur, o = Xt; Xt = !0; try { Wt(i, e, t, n, r) } finally { (Xt = o) || qt() } } function lr(e, t, n, r) { or(ir, ur.bind(null, e, t, n, r)) } function ur(e, t, n, r) { var i; if (ar) if ((i = 0 == (4 & t)) && 0 < mn.length && -1 < kn.indexOf(e)) e = Cn(null, e, t, n, r), mn.push(e); else { var o = cr(e, t, n, r); if (null === o) i && Tn(e, r); else { if (i) { if (-1 < kn.indexOf(e)) return e = Cn(o, e, t, n, r), void mn.push(e); if (function (e, t, n, r, i) { switch (t) { case "focusin": return yn = En(yn, e, t, n, r, i), !0; case "dragenter": return bn = En(bn, e, t, n, r, i), !0; case "mouseover": return wn = En(wn, e, t, n, r, i), !0; case "pointerover": var o = i.pointerId; return xn.set(o, En(xn.get(o) || null, e, t, n, r, i)), !0; case "gotpointercapture": return o = i.pointerId, _n.set(o, En(_n.get(o) || null, e, t, n, r, i)), !0 }return !1 }(o, e, t, n, r)) return; Tn(e, r) } Ki(e, t, r, null, n) } } } function cr(e, t, n, r) { var i = jt(r); if (null !== (i = ho(i))) { var o = sn(i); if (null === o) i = null; else { var a = o.tag; if (13 === a) { if (null !== (i = ln(o))) return i; i = null } else if (3 === a) { if (o.stateNode.hydrate) return 3 === o.tag ? o.stateNode.containerInfo : null; i = null } else o !== i && (i = null) } } return Ki(e, t, r, i, n), null } var fr = null, hr = null, dr = null; function pr() { if (dr) return dr; var e, t, n = hr, r = n.length, i = "value" in fr ? fr.value : fr.textContent, o = i.length; for (e = 0; e < r && n[e] === i[e]; e++); var a = r - e; for (t = 1; t <= a && n[r - t] === i[o - t]; t++); return dr = i.slice(e, 1 < t ? 1 - t : void 0) } function vr(e) { var t = e.keyCode; return "charCode" in e ? 0 === (e = e.charCode) && 13 === t && (e = 13) : e = t, 10 === e && (e = 13), 32 <= e || 13 === e ? e : 0 } function gr() { return !0 } function mr() { return !1 } function yr(e) { function t(t, n, r, i, o) { for (var a in this._reactName = t, this._targetInst = r, this.type = n, this.nativeEvent = i, this.target = o, this.currentTarget = null, e) e.hasOwnProperty(a) && (t = e[a], this[a] = t ? t(i) : i[a]); return this.isDefaultPrevented = (null != i.defaultPrevented ? i.defaultPrevented : !1 === i.returnValue) ? gr : mr, this.isPropagationStopped = mr, this } return ge(t.prototype, { preventDefault: function () { this.defaultPrevented = !0; var e = this.nativeEvent; e && (e.preventDefault ? e.preventDefault() : "unknown" != typeof e.returnValue && (e.returnValue = !1), this.isDefaultPrevented = gr) }, stopPropagation: function () { var e = this.nativeEvent; e && (e.stopPropagation ? e.stopPropagation() : "unknown" != typeof e.cancelBubble && (e.cancelBubble = !0), this.isPropagationStopped = gr) }, persist: function () { }, isPersistent: gr }), t } var br, wr, xr, _r = { eventPhase: 0, bubbles: 0, cancelable: 0, timeStamp: function (e) { return e.timeStamp || Date.now() }, defaultPrevented: 0, isTrusted: 0 }, Sr = yr(_r), kr = ge({}, _r, { view: 0, detail: 0 }), Cr = yr(kr), Tr = ge({}, kr, { screenX: 0, screenY: 0, clientX: 0, clientY: 0, pageX: 0, pageY: 0, ctrlKey: 0, shiftKey: 0, altKey: 0, metaKey: 0, getModifierState: Nr, button: 0, buttons: 0, relatedTarget: function (e) { return void 0 === e.relatedTarget ? e.fromElement === e.srcElement ? e.toElement : e.fromElement : e.relatedTarget }, movementX: function (e) { return "movementX" in e ? e.movementX : (e !== xr && (xr && "mousemove" === e.type ? (br = e.screenX - xr.screenX, wr = e.screenY - xr.screenY) : wr = br = 0, xr = e), br) }, movementY: function (e) { return "movementY" in e ? e.movementY : wr } }), Er = yr(Tr), Or = yr(ge({}, Tr, { dataTransfer: 0 })), Pr = yr(ge({}, kr, { relatedTarget: 0 })), Mr = yr(ge({}, _r, { animationName: 0, elapsedTime: 0, pseudoElement: 0 })), Ar = ge({}, _r, { clipboardData: function (e) { return "clipboardData" in e ? e.clipboardData : window.clipboardData } }), Dr = yr(Ar), Lr = yr(ge({}, _r, { data: 0 })), Rr = { Esc: "Escape", Spacebar: " ", Left: "ArrowLeft", Up: "ArrowUp", Right: "ArrowRight", Down: "ArrowDown", Del: "Delete", Win: "OS", Menu: "ContextMenu", Apps: "ContextMenu", Scroll: "ScrollLock", MozPrintableKey: "Unidentified" }, Ir = { 8: "Backspace", 9: "Tab", 12: "Clear", 13: "Enter", 16: "Shift", 17: "Control", 18: "Alt", 19: "Pause", 20: "CapsLock", 27: "Escape", 32: " ", 33: "PageUp", 34: "PageDown", 35: "End", 36: "Home", 37: "ArrowLeft", 38: "ArrowUp", 39: "ArrowRight", 40: "ArrowDown", 45: "Insert", 46: "Delete", 112: "F1", 113: "F2", 114: "F3", 115: "F4", 116: "F5", 117: "F6", 118: "F7", 119: "F8", 120: "F9", 121: "F10", 122: "F11", 123: "F12", 144: "NumLock", 145: "ScrollLock", 224: "Meta" }, jr = { Alt: "altKey", Control: "ctrlKey", Meta: "metaKey", Shift: "shiftKey" }; function Fr(e) { var t = this.nativeEvent; return t.getModifierState ? t.getModifierState(e) : !!(e = jr[e]) && !!t[e] } function Nr() { return Fr } var zr = ge({}, kr, { key: function (e) { if (e.key) { var t = Rr[e.key] || e.key; if ("Unidentified" !== t) return t } return "keypress" === e.type ? 13 === (e = vr(e)) ? "Enter" : String.fromCharCode(e) : "keydown" === e.type || "keyup" === e.type ? Ir[e.keyCode] || "Unidentified" : "" }, code: 0, location: 0, ctrlKey: 0, shiftKey: 0, altKey: 0, metaKey: 0, repeat: 0, locale: 0, getModifierState: Nr, charCode: function (e) { return "keypress" === e.type ? vr(e) : 0 }, keyCode: function (e) { return "keydown" === e.type || "keyup" === e.type ? e.keyCode : 0 }, which: function (e) { return "keypress" === e.type ? vr(e) : "keydown" === e.type || "keyup" === e.type ? e.keyCode : 0 } }), Br = yr(zr), Vr = yr(ge({}, Tr, { pointerId: 0, width: 0, height: 0, pressure: 0, tangentialPressure: 0, tiltX: 0, tiltY: 0, twist: 0, pointerType: 0, isPrimary: 0 })), Ur = yr(ge({}, kr, { touches: 0, targetTouches: 0, changedTouches: 0, altKey: 0, metaKey: 0, ctrlKey: 0, shiftKey: 0, getModifierState: Nr })), Hr = yr(ge({}, _r, { propertyName: 0, elapsedTime: 0, pseudoElement: 0 })), Wr = ge({}, Tr, { deltaX: function (e) { return "deltaX" in e ? e.deltaX : "wheelDeltaX" in e ? -e.wheelDeltaX : 0 }, deltaY: function (e) { return "deltaY" in e ? e.deltaY : "wheelDeltaY" in e ? -e.wheelDeltaY : "wheelDelta" in e ? -e.wheelDelta : 0 }, deltaZ: 0, deltaMode: 0 }), Kr = yr(Wr), Yr = [9, 13, 27, 32], Xr = Se && "CompositionEvent" in window, Gr = null; Se && "documentMode" in document && (Gr = document.documentMode); var qr = Se && "TextEvent" in window && !Gr, Jr = Se && (!Xr || Gr && 8 < Gr && 11 >= Gr), Zr = String.fromCharCode(32), $r = !1; function Qr(e, t) { switch (e) { case "keyup": return -1 !== Yr.indexOf(t.keyCode); case "keydown": return 229 !== t.keyCode; case "keypress": case "mousedown": case "focusout": return !0; default: return !1 } } function ei(e) { return "object" == C(e = e.detail) && "data" in e ? e.data : null } var ti = !1, ni = { color: !0, date: !0, datetime: !0, "datetime-local": !0, email: !0, month: !0, number: !0, password: !0, range: !0, search: !0, tel: !0, text: !0, time: !0, url: !0, week: !0 }; function ri(e) { var t = e && e.nodeName && e.nodeName.toLowerCase(); return "input" === t ? !!ni[e.type] : "textarea" === t } function ii(e, t, n, r) { Vt(r), 0 < (t = Xi(t, "onChange")).length && (n = new Sr("onChange", "change", null, n, r), e.push({ event: n, listeners: t })) } var oi = null, ai = null; function si(e) { zi(e, 0) } function li(e) { if (ut(vo(e))) return e } function ui(e, t) { if ("change" === e) return t } var ci = !1; if (Se) { var fi; if (Se) { var hi = "oninput" in document; if (!hi) { var di = document.createElement("div"); di.setAttribute("oninput", "return;"), hi = "function" == typeof di.oninput } fi = hi } else fi = !1; ci = fi && (!document.documentMode || 9 < document.documentMode) } function pi() { oi && (oi.detachEvent("onpropertychange", vi), ai = oi = null) } function vi(e) { if ("value" === e.propertyName && li(ai)) { var t = []; if (ii(t, ai, e, jt(e)), e = si, Xt) e(t); else { Xt = !0; try { Ht(e, t) } finally { Xt = !1, qt() } } } } function gi(e, t, n) { "focusin" === e ? (pi(), ai = n, (oi = t).attachEvent("onpropertychange", vi)) : "focusout" === e && pi() } function mi(e) { if ("selectionchange" === e || "keyup" === e || "keydown" === e) return li(ai) } function yi(e, t) { if ("click" === e) return li(t) } function bi(e, t) { if ("input" === e || "change" === e) return li(t) } var wi = "function" == typeof Object.is ? Object.is : function (e, t) { return e === t && (0 !== e || 1 / e == 1 / t) || e != e && t != t }, xi = Object.prototype.hasOwnProperty; function _i(e, t) { if (wi(e, t)) return !0; if ("object" != C(e) || null === e || "object" != C(t) || null === t) return !1; var n = Object.keys(e), r = Object.keys(t); if (n.length !== r.length) return !1; for (r = 0; r < n.length; r++)if (!xi.call(t, n[r]) || !wi(e[n[r]], t[n[r]])) return !1; return !0 } function Si(e) { for (; e && e.firstChild;)e = e.firstChild; return e } function ki(e, t) { var n, r = Si(e); for (e = 0; r;) { if (3 === r.nodeType) { if (n = e + r.textContent.length, e <= t && n >= t) return { node: r, offset: t - e }; e = n } e: { for (; r;) { if (r.nextSibling) { r = r.nextSibling; break e } r = r.parentNode } r = void 0 } r = Si(r) } } function Ci(e, t) { return !(!e || !t) && (e === t || (!e || 3 !== e.nodeType) && (t && 3 === t.nodeType ? Ci(e, t.parentNode) : "contains" in e ? e.contains(t) : !!e.compareDocumentPosition && !!(16 & e.compareDocumentPosition(t)))) } function Ti() { for (var e = window, t = ct(); t instanceof e.HTMLIFrameElement;) { try { var n = "string" == typeof t.contentWindow.location.href } catch (e) { n = !1 } if (!n) break; t = ct((e = t.contentWindow).document) } return t } function Ei(e) { var t = e && e.nodeName && e.nodeName.toLowerCase(); return t && ("input" === t && ("text" === e.type || "search" === e.type || "tel" === e.type || "url" === e.type || "password" === e.type) || "textarea" === t || "true" === e.contentEditable) } var Oi = Se && "documentMode" in document && 11 >= document.documentMode, Pi = null, Mi = null, Ai = null, Di = !1; function Li(e, t, n) { var r = n.window === n ? n.document : 9 === n.nodeType ? n : n.ownerDocument; Di || null == Pi || Pi !== ct(r) || (r = "selectionStart" in (r = Pi) && Ei(r) ? { start: r.selectionStart, end: r.selectionEnd } : { anchorNode: (r = (r.ownerDocument && r.ownerDocument.defaultView || window).getSelection()).anchorNode, anchorOffset: r.anchorOffset, focusNode: r.focusNode, focusOffset: r.focusOffset }, Ai && _i(Ai, r) || (Ai = r, 0 < (r = Xi(Mi, "onSelect")).length && (t = new Sr("onSelect", "select", null, t, n), e.push({ event: t, listeners: r }), t.target = Pi))) } Yn("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "), 0), Yn("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "), 1), Yn(Kn, 2); for (var Ri = "change selectionchange textInput compositionstart compositionend compositionupdate".split(" "), Ii = 0; Ii < Ri.length; Ii++)Wn.set(Ri[Ii], 0); _e("onMouseEnter", ["mouseout", "mouseover"]), _e("onMouseLeave", ["mouseout", "mouseover"]), _e("onPointerEnter", ["pointerout", "pointerover"]), _e("onPointerLeave", ["pointerout", "pointerover"]), xe("onChange", "change click focusin focusout input keydown keyup selectionchange".split(" ")), xe("onSelect", "focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")), xe("onBeforeInput", ["compositionend", "keypress", "textInput", "paste"]), xe("onCompositionEnd", "compositionend focusout keydown keypress keyup mousedown".split(" ")), xe("onCompositionStart", "compositionstart focusout keydown keypress keyup mousedown".split(" ")), xe("onCompositionUpdate", "compositionupdate focusout keydown keypress keyup mousedown".split(" ")); var ji = "abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "), Fi = new Set("cancel close invalid load scroll toggle".split(" ").concat(ji)); function Ni(e, t, n) { var r = e.type || "unknown-event"; e.currentTarget = n, function (e, t, n, r, i, o, a, s, l) { if (an.apply(this, arguments), en) { if (!en) throw Error(ye(198)); var u = tn; en = !1, tn = null, nn || (nn = !0, rn = u) } }(r, t, void 0, e), e.currentTarget = null } function zi(e, t) { t = 0 != (4 & t); for (var n = 0; n < e.length; n++) { var r = e[n], i = r.event; r = r.listeners; e: { var o = void 0; if (t) for (var a = r.length - 1; 0 <= a; a--) { var s = r[a], l = s.instance, u = s.currentTarget; if (s = s.listener, l !== o && i.isPropagationStopped()) break e; Ni(i, s, u), o = l } else for (a = 0; a < r.length; a++) { if (l = (s = r[a]).instance, u = s.currentTarget, s = s.listener, l !== o && i.isPropagationStopped()) break e; Ni(i, s, u), o = l } } } if (nn) throw e = rn, nn = !1, rn = null, e } function Bi(e, t) { var n = mo(t), r = e + "__bubble"; n.has(r) || (Wi(t, e, 2, !1), n.add(r)) } var Vi = "_reactListening" + Math.random().toString(36).slice(2); function Ui(e) { e[Vi] || (e[Vi] = !0, be.forEach((function (t) { Fi.has(t) || Hi(t, !1, e, null), Hi(t, !0, e, null) }))) } function Hi(e, t, n, r) { var i = 4 < arguments.length && void 0 !== arguments[4] ? arguments[4] : 0, o = n; if ("selectionchange" === e && 9 !== n.nodeType && (o = n.ownerDocument), null !== r && !t && Fi.has(e)) { if ("scroll" !== e) return; i |= 2, o = r } var a = mo(o), s = e + "__" + (t ? "capture" : "bubble"); a.has(s) || (t && (i |= 4), Wi(o, e, i, t), a.add(s)) } function Wi(e, t, n, r) { var i = Wn.get(t); switch (void 0 === i ? 2 : i) { case 0: i = sr; break; case 1: i = lr; break; default: i = ur }n = i.bind(null, t, n, e), i = void 0, !Zt || "touchstart" !== t && "touchmove" !== t && "wheel" !== t || (i = !0), r ? void 0 !== i ? e.addEventListener(t, n, { capture: !0, passive: i }) : e.addEventListener(t, n, !0) : void 0 !== i ? e.addEventListener(t, n, { passive: i }) : e.addEventListener(t, n, !1) } function Ki(e, t, n, r, i) { var o = r; if (0 == (1 & t) && 0 == (2 & t) && null !== r) e: for (; ;) { if (null === r) return; var a = r.tag; if (3 === a || 4 === a) { var s = r.stateNode.containerInfo; if (s === i || 8 === s.nodeType && s.parentNode === i) break; if (4 === a) for (a = r.return; null !== a;) { var l = a.tag; if ((3 === l || 4 === l) && ((l = a.stateNode.containerInfo) === i || 8 === l.nodeType && l.parentNode === i)) return; a = a.return } for (; null !== s;) { if (null === (a = ho(s))) return; if (5 === (l = a.tag) || 6 === l) { r = o = a; continue e } s = s.parentNode } } r = r.return } !function (e, t, n) { if (Gt) return e(); Gt = !0; try { Yt(e, t, n) } finally { Gt = !1, qt() } }((function () { var r = o, i = jt(n), a = []; e: { var s = Hn.get(e); if (void 0 !== s) { var l = Sr, u = e; switch (e) { case "keypress": if (0 === vr(n)) break e; case "keydown": case "keyup": l = Br; break; case "focusin": u = "focus", l = Pr; break; case "focusout": u = "blur", l = Pr; break; case "beforeblur": case "afterblur": l = Pr; break; case "click": if (2 === n.button) break e; case "auxclick": case "dblclick": case "mousedown": case "mousemove": case "mouseup": case "mouseout": case "mouseover": case "contextmenu": l = Er; break; case "drag": case "dragend": case "dragenter": case "dragexit": case "dragleave": case "dragover": case "dragstart": case "drop": l = Or; break; case "touchcancel": case "touchend": case "touchmove": case "touchstart": l = Ur; break; case zn: case Bn: case Vn: l = Mr; break; case Un: l = Hr; break; case "scroll": l = Cr; break; case "wheel": l = Kr; break; case "copy": case "cut": case "paste": l = Dr; break; case "gotpointercapture": case "lostpointercapture": case "pointercancel": case "pointerdown": case "pointermove": case "pointerout": case "pointerover": case "pointerup": l = Vr }var c = 0 != (4 & t), f = !c && "scroll" === e, h = c ? null !== s ? s + "Capture" : null : s; c = []; for (var d, p = r; null !== p;) { var v = (d = p).stateNode; if (5 === d.tag && null !== v && (d = v, null !== h && null != (v = Jt(p, h)) && c.push(Yi(p, v, d))), f) break; p = p.return } 0 < c.length && (s = new l(s, u, null, n, i), a.push({ event: s, listeners: c })) } } if (0 == (7 & t)) { if (l = "mouseout" === e || "pointerout" === e, (!(s = "mouseover" === e || "pointerover" === e) || 0 != (16 & t) || !(u = n.relatedTarget || n.fromElement) || !ho(u) && !u[co]) && (l || s) && (s = i.window === i ? i : (s = i.ownerDocument) ? s.defaultView || s.parentWindow : window, l ? (l = r, null !== (u = (u = n.relatedTarget || n.toElement) ? ho(u) : null) && (u !== (f = sn(u)) || 5 !== u.tag && 6 !== u.tag) && (u = null)) : (l = null, u = r), l !== u)) { if (c = Er, v = "onMouseLeave", h = "onMouseEnter", p = "mouse", ("pointerout" === e || "pointerover" === e) && (c = Vr, v = "onPointerLeave", h = "onPointerEnter", p = "pointer"), f = null == l ? s : vo(l), d = null == u ? s : vo(u), (s = new c(v, p + "leave", l, n, i)).target = f, s.relatedTarget = d, v = null, ho(i) === r && ((c = new c(h, p + "enter", u, n, i)).target = d, c.relatedTarget = f, v = c), f = v, l && u) e: { for (h = u, p = 0, d = c = l; d; d = Gi(d))p++; for (d = 0, v = h; v; v = Gi(v))d++; for (; 0 < p - d;)c = Gi(c), p--; for (; 0 < d - p;)h = Gi(h), d--; for (; p--;) { if (c === h || null !== h && c === h.alternate) break e; c = Gi(c), h = Gi(h) } c = null } else c = null; null !== l && qi(a, s, l, c, !1), null !== u && null !== f && qi(a, f, u, c, !0) } if ("select" === (l = (s = r ? vo(r) : window).nodeName && s.nodeName.toLowerCase()) || "input" === l && "file" === s.type) var g = ui; else if (ri(s)) if (ci) g = bi; else { g = mi; var m = gi } else (l = s.nodeName) && "input" === l.toLowerCase() && ("checkbox" === s.type || "radio" === s.type) && (g = yi); switch (g && (g = g(e, r)) ? ii(a, g, n, i) : (m && m(e, s, r), "focusout" === e && (m = s._wrapperState) && m.controlled && "number" === s.type && gt(s, "number", s.value)), m = r ? vo(r) : window, e) { case "focusin": (ri(m) || "true" === m.contentEditable) && (Pi = m, Mi = r, Ai = null); break; case "focusout": Ai = Mi = Pi = null; break; case "mousedown": Di = !0; break; case "contextmenu": case "mouseup": case "dragend": Di = !1, Li(a, n, i); break; case "selectionchange": if (Oi) break; case "keydown": case "keyup": Li(a, n, i) }var y; if (Xr) e: { switch (e) { case "compositionstart": var b = "onCompositionStart"; break e; case "compositionend": b = "onCompositionEnd"; break e; case "compositionupdate": b = "onCompositionUpdate"; break e }b = void 0 } else ti ? Qr(e, n) && (b = "onCompositionEnd") : "keydown" === e && 229 === n.keyCode && (b = "onCompositionStart"); b && (Jr && "ko" !== n.locale && (ti || "onCompositionStart" !== b ? "onCompositionEnd" === b && ti && (y = pr()) : (hr = "value" in (fr = i) ? fr.value : fr.textContent, ti = !0)), 0 < (m = Xi(r, b)).length && (b = new Lr(b, e, null, n, i), a.push({ event: b, listeners: m }), (y || null !== (y = ei(n))) && (b.data = y))), (y = qr ? function (e, t) { switch (e) { case "compositionend": return ei(t); case "keypress": return 32 !== t.which ? null : ($r = !0, Zr); case "textInput": return (e = t.data) === Zr && $r ? null : e; default: return null } }(e, n) : function (e, t) { if (ti) return "compositionend" === e || !Xr && Qr(e, t) ? (e = pr(), dr = hr = fr = null, ti = !1, e) : null; switch (e) { case "paste": default: return null; case "keypress": if (!(t.ctrlKey || t.altKey || t.metaKey) || t.ctrlKey && t.altKey) { if (t.char && 1 < t.char.length) return t.char; if (t.which) return String.fromCharCode(t.which) } return null; case "compositionend": return Jr && "ko" !== t.locale ? null : t.data } }(e, n)) && 0 < (r = Xi(r, "onBeforeInput")).length && (i = new Lr("onBeforeInput", "beforeinput", null, n, i), a.push({ event: i, listeners: r }), i.data = y) } zi(a, t) })) } function Yi(e, t, n) { return { instance: e, listener: t, currentTarget: n } } function Xi(e, t) { for (var n = t + "Capture", r = []; null !== e;) { var i = e, o = i.stateNode; 5 === i.tag && null !== o && (i = o, null != (o = Jt(e, n)) && r.unshift(Yi(e, o, i)), null != (o = Jt(e, t)) && r.push(Yi(e, o, i))), e = e.return } return r } function Gi(e) { if (null === e) return null; do { e = e.return } while (e && 5 !== e.tag); return e || null } function qi(e, t, n, r, i) { for (var o = t._reactName, a = []; null !== n && n !== r;) { var s = n, l = s.alternate, u = s.stateNode; if (null !== l && l === r) break; 5 === s.tag && null !== u && (s = u, i ? null != (l = Jt(n, o)) && a.unshift(Yi(n, l, s)) : i || null != (l = Jt(n, o)) && a.push(Yi(n, l, s))), n = n.return } 0 !== a.length && e.push({ event: t, listeners: a }) } function Ji() { } var Zi = null, $i = null; function Qi(e, t) { switch (e) { case "button": case "input": case "select": case "textarea": return !!t.autoFocus }return !1 } function eo(e, t) { return "textarea" === e || "option" === e || "noscript" === e || "string" == typeof t.children || "number" == typeof t.children || "object" == C(t.dangerouslySetInnerHTML) && null !== t.dangerouslySetInnerHTML && null != t.dangerouslySetInnerHTML.__html } var to = "function" == typeof setTimeout ? setTimeout : void 0, no = "function" == typeof clearTimeout ? clearTimeout : void 0; function ro(e) { (1 === e.nodeType || 9 === e.nodeType && null != (e = e.body)) && (e.textContent = "") } function io(e) { for (; null != e; e = e.nextSibling) { var t = e.nodeType; if (1 === t || 3 === t) break } return e } function oo(e) { e = e.previousSibling; for (var t = 0; e;) { if (8 === e.nodeType) { var n = e.data; if ("$" === n || "$!" === n || "$?" === n) { if (0 === t) return e; t-- } else "/$" === n && t++ } e = e.previousSibling } return null } var ao = 0, so = Math.random().toString(36).slice(2), lo = "__reactFiber$" + so, uo = "__reactProps$" + so, co = "__reactContainer$" + so, fo = "__reactEvents$" + so; function ho(e) { var t = e[lo]; if (t) return t; for (var n = e.parentNode; n;) { if (t = n[co] || n[lo]) { if (n = t.alternate, null !== t.child || null !== n && null !== n.child) for (e = oo(e); null !== e;) { if (n = e[lo]) return n; e = oo(e) } return t } n = (e = n).parentNode } return null } function po(e) { return !(e = e[lo] || e[co]) || 5 !== e.tag && 6 !== e.tag && 13 !== e.tag && 3 !== e.tag ? null : e } function vo(e) { if (5 === e.tag || 6 === e.tag) return e.stateNode; throw Error(ye(33)) } function go(e) { return e[uo] || null } function mo(e) { var t = e[fo]; return void 0 === t && (t = e[fo] = new Set), t } var yo = [], bo = -1; function wo(e) { return { current: e } } function xo(e) { 0 > bo || (e.current = yo[bo], yo[bo] = null, bo--) } function _o(e, t) { bo++, yo[bo] = e.current, e.current = t } var So = {}, ko = wo(So), Co = wo(!1), To = So; function Eo(e, t) { var n = e.type.contextTypes; if (!n) return So; var r = e.stateNode; if (r && r.__reactInternalMemoizedUnmaskedChildContext === t) return r.__reactInternalMemoizedMaskedChildContext; var i, o = {}; for (i in n) o[i] = t[i]; return r && ((e = e.stateNode).__reactInternalMemoizedUnmaskedChildContext = t, e.__reactInternalMemoizedMaskedChildContext = o), o } function Oo(e) { return null != e.childContextTypes } function Po() { xo(Co), xo(ko) } function Mo(e, t, n) { if (ko.current !== So) throw Error(ye(168)); _o(ko, t), _o(Co, n) } function Ao(e, t, n) { var r = e.stateNode; if (e = t.childContextTypes, "function" != typeof r.getChildContext) return n; for (var i in r = r.getChildContext()) if (!(i in e)) throw Error(ye(108, ot(t) || "Unknown", i)); return ge({}, n, r) } function Do(e) { return e = (e = e.stateNode) && e.__reactInternalMemoizedMergedChildContext || So, To = ko.current, _o(ko, e), _o(Co, Co.current), !0 } function Lo(e, t, n) { var r = e.stateNode; if (!r) throw Error(ye(169)); n ? (e = Ao(e, t, To), r.__reactInternalMemoizedMergedChildContext = e, xo(Co), xo(ko), _o(ko, e)) : xo(Co), _o(Co, n) } var Ro = null, Io = null, jo = me.unstable_runWithPriority, Fo = me.unstable_scheduleCallback, No = me.unstable_cancelCallback, zo = me.unstable_shouldYield, Bo = me.unstable_requestPaint, Vo = me.unstable_now, Uo = me.unstable_getCurrentPriorityLevel, Ho = me.unstable_ImmediatePriority, Wo = me.unstable_UserBlockingPriority, Ko = me.unstable_NormalPriority, Yo = me.unstable_LowPriority, Xo = me.unstable_IdlePriority, Go = {}, qo = void 0 !== Bo ? Bo : function () { }, Jo = null, Zo = null, $o = !1, Qo = Vo(), ea = 1e4 > Qo ? Vo : function () { return Vo() - Qo }; function ta() { switch (Uo()) { case Ho: return 99; case Wo: return 98; case Ko: return 97; case Yo: return 96; case Xo: return 95; default: throw Error(ye(332)) } } function na(e) { switch (e) { case 99: return Ho; case 98: return Wo; case 97: return Ko; case 96: return Yo; case 95: return Xo; default: throw Error(ye(332)) } } function ra(e, t) { return e = na(e), jo(e, t) } function ia(e, t, n) { return e = na(e), Fo(e, t, n) } function oa() { if (null !== Zo) { var e = Zo; Zo = null, No(e) } aa() } function aa() { if (!$o && null !== Jo) { $o = !0; var e = 0; try { var t = Jo; ra(99, (function () { for (; e < t.length; e++) { var n = t[e]; do { n = n(!0) } while (null !== n) } })), Jo = null } catch (t) { throw null !== Jo && (Jo = Jo.slice(e + 1)), Fo(Ho, oa), t } finally { $o = !1 } } } var sa = Le.ReactCurrentBatchConfig; function la(e, t) { if (e && e.defaultProps) { for (var n in t = ge({}, t), e = e.defaultProps) void 0 === t[n] && (t[n] = e[n]); return t } return t } var ua = wo(null), ca = null, fa = null, ha = null; function da() { ha = fa = ca = null } function pa(e) { var t = ua.current; xo(ua), e.type._context._currentValue = t } function va(e, t) { for (; null !== e;) { var n = e.alternate; if ((e.childLanes & t) === t) { if (null === n || (n.childLanes & t) === t) break; n.childLanes |= t } else e.childLanes |= t, null !== n && (n.childLanes |= t); e = e.return } } function ga(e, t) { ca = e, ha = fa = null, null !== (e = e.dependencies) && null !== e.firstContext && (0 != (e.lanes & t) && (Xs = !0), e.firstContext = null) } function ma(e, t) { if (ha !== e && !1 !== t && 0 !== t) if (("number" != typeof t || 1073741823 === t) && (ha = e, t = 1073741823), t = { context: e, observedBits: t, next: null }, null === fa) { if (null === ca) throw Error(ye(308)); fa = t, ca.dependencies = { lanes: 0, firstContext: t, responders: null } } else fa = fa.next = t; return e._currentValue } var ya = !1; function ba(e) { e.updateQueue = { baseState: e.memoizedState, firstBaseUpdate: null, lastBaseUpdate: null, shared: { pending: null }, effects: null } } function wa(e, t) { e = e.updateQueue, t.updateQueue === e && (t.updateQueue = { baseState: e.baseState, firstBaseUpdate: e.firstBaseUpdate, lastBaseUpdate: e.lastBaseUpdate, shared: e.shared, effects: e.effects }) } function xa(e, t) { return { eventTime: e, lane: t, tag: 0, payload: null, callback: null, next: null } } function _a(e, t) { if (null !== (e = e.updateQueue)) { var n = (e = e.shared).pending; null === n ? t.next = t : (t.next = n.next, n.next = t), e.pending = t } } function Sa(e, t) { var n = e.updateQueue, r = e.alternate; if (null !== r && n === (r = r.updateQueue)) { var i = null, o = null; if (null !== (n = n.firstBaseUpdate)) { do { var a = { eventTime: n.eventTime, lane: n.lane, tag: n.tag, payload: n.payload, callback: n.callback, next: null }; null === o ? i = o = a : o = o.next = a, n = n.next } while (null !== n); null === o ? i = o = t : o = o.next = t } else i = o = t; return n = { baseState: r.baseState, firstBaseUpdate: i, lastBaseUpdate: o, shared: r.shared, effects: r.effects }, void (e.updateQueue = n) } null === (e = n.lastBaseUpdate) ? n.firstBaseUpdate = t : e.next = t, n.lastBaseUpdate = t } function ka(e, t, n, r) { var i = e.updateQueue; ya = !1; var o = i.firstBaseUpdate, a = i.lastBaseUpdate, s = i.shared.pending; if (null !== s) { i.shared.pending = null; var l = s, u = l.next; l.next = null, null === a ? o = u : a.next = u, a = l; var c = e.alternate; if (null !== c) { var f = (c = c.updateQueue).lastBaseUpdate; f !== a && (null === f ? c.firstBaseUpdate = u : f.next = u, c.lastBaseUpdate = l) } } if (null !== o) { for (f = i.baseState, a = 0, c = u = l = null; ;) { s = o.lane; var h = o.eventTime; if ((r & s) === s) { null !== c && (c = c.next = { eventTime: h, lane: 0, tag: o.tag, payload: o.payload, callback: o.callback, next: null }); e: { var d = e, p = o; switch (s = t, h = n, p.tag) { case 1: if ("function" == typeof (d = p.payload)) { f = d.call(h, f, s); break e } f = d; break e; case 3: d.flags = -4097 & d.flags | 64; case 0: if (null == (s = "function" == typeof (d = p.payload) ? d.call(h, f, s) : d)) break e; f = ge({}, f, s); break e; case 2: ya = !0 } } null !== o.callback && (e.flags |= 32, null === (s = i.effects) ? i.effects = [o] : s.push(o)) } else h = { eventTime: h, lane: s, tag: o.tag, payload: o.payload, callback: o.callback, next: null }, null === c ? (u = c = h, l = f) : c = c.next = h, a |= s; if (null === (o = o.next)) { if (null === (s = i.shared.pending)) break; o = s.next, s.next = null, i.lastBaseUpdate = s, i.shared.pending = null } } null === c && (l = f), i.baseState = l, i.firstBaseUpdate = u, i.lastBaseUpdate = c, ql |= a, e.lanes = a, e.memoizedState = f } } function Ca(e, t, n) { if (e = t.effects, t.effects = null, null !== e) for (t = 0; t < e.length; t++) { var r = e[t], i = r.callback; if (null !== i) { if (r.callback = null, r = n, "function" != typeof i) throw Error(ye(191, i)); i.call(r) } } } var Ta = (new ve.Component).refs; function Ea(e, t, n, r) { n = null == (n = n(r, t = e.memoizedState)) ? t : ge({}, t, n), e.memoizedState = n, 0 === e.lanes && (e.updateQueue.baseState = n) } var Oa = { isMounted: function (e) { return !!(e = e._reactInternals) && sn(e) === e }, enqueueSetState: function (e, t, n) { e = e._reactInternals; var r = wu(), i = xu(e), o = xa(r, i); o.payload = t, null != n && (o.callback = n), _a(e, o), _u(e, i, r) }, enqueueReplaceState: function (e, t, n) { e = e._reactInternals; var r = wu(), i = xu(e), o = xa(r, i); o.tag = 1, o.payload = t, null != n && (o.callback = n), _a(e, o), _u(e, i, r) }, enqueueForceUpdate: function (e, t) { e = e._reactInternals; var n = wu(), r = xu(e), i = xa(n, r); i.tag = 2, null != t && (i.callback = t), _a(e, i), _u(e, r, n) } }; function Pa(e, t, n, r, i, o, a) { return "function" == typeof (e = e.stateNode).shouldComponentUpdate ? e.shouldComponentUpdate(r, o, a) : !(t.prototype && t.prototype.isPureReactComponent && _i(n, r) && _i(i, o)) } function Ma(e, t, n) { var r = !1, i = So, o = t.contextType; return "object" == C(o) && null !== o ? o = ma(o) : (i = Oo(t) ? To : ko.current, o = (r = null != (r = t.contextTypes)) ? Eo(e, i) : So), t = new t(n, o), e.memoizedState = null !== t.state && void 0 !== t.state ? t.state : null, t.updater = Oa, e.stateNode = t, t._reactInternals = e, r && ((e = e.stateNode).__reactInternalMemoizedUnmaskedChildContext = i, e.__reactInternalMemoizedMaskedChildContext = o), t } function Aa(e, t, n, r) { e = t.state, "function" == typeof t.componentWillReceiveProps && t.componentWillReceiveProps(n, r), "function" == typeof t.UNSAFE_componentWillReceiveProps && t.UNSAFE_componentWillReceiveProps(n, r), t.state !== e && Oa.enqueueReplaceState(t, t.state, null) } function Da(e, t, n, r) { var i = e.stateNode; i.props = n, i.state = e.memoizedState, i.refs = Ta, ba(e); var o = t.contextType; "object" == C(o) && null !== o ? i.context = ma(o) : (o = Oo(t) ? To : ko.current, i.context = Eo(e, o)), ka(e, n, i, r), i.state = e.memoizedState, "function" == typeof (o = t.getDerivedStateFromProps) && (Ea(e, t, o, n), i.state = e.memoizedState), "function" == typeof t.getDerivedStateFromProps || "function" == typeof i.getSnapshotBeforeUpdate || "function" != typeof i.UNSAFE_componentWillMount && "function" != typeof i.componentWillMount || (t = i.state, "function" == typeof i.componentWillMount && i.componentWillMount(), "function" == typeof i.UNSAFE_componentWillMount && i.UNSAFE_componentWillMount(), t !== i.state && Oa.enqueueReplaceState(i, i.state, null), ka(e, n, i, r), i.state = e.memoizedState), "function" == typeof i.componentDidMount && (e.flags |= 4) } var La = Array.isArray; function Ra(e, t, n) { if (null !== (e = n.ref) && "function" != typeof e && "object" != C(e)) { if (n._owner) { if (n = n._owner) { if (1 !== n.tag) throw Error(ye(309)); var r = n.stateNode } if (!r) throw Error(ye(147, e)); var i = "" + e; return null !== t && null !== t.ref && "function" == typeof t.ref && t.ref._stringRef === i ? t.ref : ((t = function (e) { var t = r.refs; t === Ta && (t = r.refs = {}), null === e ? delete t[i] : t[i] = e })._stringRef = i, t) } if ("string" != typeof e) throw Error(ye(284)); if (!n._owner) throw Error(ye(290, e)) } return e } function Ia(e, t) { if ("textarea" !== e.type) throw Error(ye(31, "[object Object]" === Object.prototype.toString.call(t) ? "object with keys {" + Object.keys(t).join(", ") + "}" : t)) } function ja(e) { function t(t, n) { if (e) { var r = t.lastEffect; null !== r ? (r.nextEffect = n, t.lastEffect = n) : t.firstEffect = t.lastEffect = n, n.nextEffect = null, n.flags = 8 } } function n(n, r) { if (!e) return null; for (; null !== r;)t(n, r), r = r.sibling; return null } function r(e, t) { for (e = new Map; null !== t;)null !== t.key ? e.set(t.key, t) : e.set(t.index, t), t = t.sibling; return e } function i(e, t) { return (e = ec(e, t)).index = 0, e.sibling = null, e } function o(t, n, r) { return t.index = r, e ? null !== (r = t.alternate) ? (r = r.index) < n ? (t.flags = 2, n) : r : (t.flags = 2, n) : n } function a(t) { return e && null === t.alternate && (t.flags = 2), t } function s(e, t, n, r) { return null === t || 6 !== t.tag ? ((t = ic(n, e.mode, r)).return = e, t) : ((t = i(t, n)).return = e, t) } function l(e, t, n, r) { return null !== t && t.elementType === n.type ? ((r = i(t, n.props)).ref = Ra(e, t, n), r.return = e, r) : ((r = tc(n.type, n.key, n.props, null, e.mode, r)).ref = Ra(e, t, n), r.return = e, r) } function u(e, t, n, r) { return null === t || 4 !== t.tag || t.stateNode.containerInfo !== n.containerInfo || t.stateNode.implementation !== n.implementation ? ((t = oc(n, e.mode, r)).return = e, t) : ((t = i(t, n.children || [])).return = e, t) } function c(e, t, n, r, o) { return null === t || 7 !== t.tag ? ((t = nc(n, e.mode, r, o)).return = e, t) : ((t = i(t, n)).return = e, t) } function f(e, t, n) { if ("string" == typeof t || "number" == typeof t) return (t = ic("" + t, e.mode, n)).return = e, t; if ("object" == C(t) && null !== t) { switch (t.$$typeof) { case Re: return (n = tc(t.type, t.key, t.props, null, e.mode, n)).ref = Ra(e, null, t), n.return = e, n; case Ie: return (t = oc(t, e.mode, n)).return = e, t }if (La(t) || et(t)) return (t = nc(t, e.mode, n, null)).return = e, t; Ia(e, t) } return null } function h(e, t, n, r) { var i = null !== t ? t.key : null; if ("string" == typeof n || "number" == typeof n) return null !== i ? null : s(e, t, "" + n, r); if ("object" == C(n) && null !== n) { switch (n.$$typeof) { case Re: return n.key === i ? n.type === je ? c(e, t, n.props.children, r, i) : l(e, t, n, r) : null; case Ie: return n.key === i ? u(e, t, n, r) : null }if (La(n) || et(n)) return null !== i ? null : c(e, t, n, r, null); Ia(e, n) } return null } function d(e, t, n, r, i) { if ("string" == typeof r || "number" == typeof r) return s(t, e = e.get(n) || null, "" + r, i); if ("object" == C(r) && null !== r) { switch (r.$$typeof) { case Re: return e = e.get(null === r.key ? n : r.key) || null, r.type === je ? c(t, e, r.props.children, i, r.key) : l(t, e, r, i); case Ie: return u(t, e = e.get(null === r.key ? n : r.key) || null, r, i) }if (La(r) || et(r)) return c(t, e = e.get(n) || null, r, i, null); Ia(t, r) } return null } return function (s, l, u, c) { var p = "object" == C(u) && null !== u && u.type === je && null === u.key; p && (u = u.props.children); var v = "object" == C(u) && null !== u; if (v) switch (u.$$typeof) { case Re: e: { for (v = u.key, p = l; null !== p;) { if (p.key === v) { if (7 === p.tag) { if (u.type === je) { n(s, p.sibling), (l = i(p, u.props.children)).return = s, s = l; break e } } else if (p.elementType === u.type) { n(s, p.sibling), (l = i(p, u.props)).ref = Ra(s, p, u), l.return = s, s = l; break e } n(s, p); break } t(s, p), p = p.sibling } u.type === je ? ((l = nc(u.props.children, s.mode, c, u.key)).return = s, s = l) : ((c = tc(u.type, u.key, u.props, null, s.mode, c)).ref = Ra(s, l, u), c.return = s, s = c) } return a(s); case Ie: e: { for (p = u.key; null !== l;) { if (l.key === p) { if (4 === l.tag && l.stateNode.containerInfo === u.containerInfo && l.stateNode.implementation === u.implementation) { n(s, l.sibling), (l = i(l, u.children || [])).return = s, s = l; break e } n(s, l); break } t(s, l), l = l.sibling } (l = oc(u, s.mode, c)).return = s, s = l } return a(s) }if ("string" == typeof u || "number" == typeof u) return u = "" + u, null !== l && 6 === l.tag ? (n(s, l.sibling), (l = i(l, u)).return = s, s = l) : (n(s, l), (l = ic(u, s.mode, c)).return = s, s = l), a(s); if (La(u)) return function (i, a, s, l) { for (var u = null, c = null, p = a, v = a = 0, g = null; null !== p && v < s.length; v++) { p.index > v ? (g = p, p = null) : g = p.sibling; var m = h(i, p, s[v], l); if (null === m) { null === p && (p = g); break } e && p && null === m.alternate && t(i, p), a = o(m, a, v), null === c ? u = m : c.sibling = m, c = m, p = g } if (v === s.length) return n(i, p), u; if (null === p) { for (; v < s.length; v++)null !== (p = f(i, s[v], l)) && (a = o(p, a, v), null === c ? u = p : c.sibling = p, c = p); return u } for (p = r(i, p); v < s.length; v++)null !== (g = d(p, i, v, s[v], l)) && (e && null !== g.alternate && p.delete(null === g.key ? v : g.key), a = o(g, a, v), null === c ? u = g : c.sibling = g, c = g); return e && p.forEach((function (e) { return t(i, e) })), u }(s, l, u, c); if (et(u)) return function (i, a, s, l) { var u = et(s); if ("function" != typeof u) throw Error(ye(150)); if (null == (s = u.call(s))) throw Error(ye(151)); for (var c = u = null, p = a, v = a = 0, g = null, m = s.next(); null !== p && !m.done; v++, m = s.next()) { p.index > v ? (g = p, p = null) : g = p.sibling; var y = h(i, p, m.value, l); if (null === y) { null === p && (p = g); break } e && p && null === y.alternate && t(i, p), a = o(y, a, v), null === c ? u = y : c.sibling = y, c = y, p = g } if (m.done) return n(i, p), u; if (null === p) { for (; !m.done; v++, m = s.next())null !== (m = f(i, m.value, l)) && (a = o(m, a, v), null === c ? u = m : c.sibling = m, c = m); return u } for (p = r(i, p); !m.done; v++, m = s.next())null !== (m = d(p, i, v, m.value, l)) && (e && null !== m.alternate && p.delete(null === m.key ? v : m.key), a = o(m, a, v), null === c ? u = m : c.sibling = m, c = m); return e && p.forEach((function (e) { return t(i, e) })), u }(s, l, u, c); if (v && Ia(s, u), void 0 === u && !p) switch (s.tag) { case 1: case 22: case 0: case 11: case 15: throw Error(ye(152, ot(s.type) || "Component")) }return n(s, l) } } var Fa = ja(!0), Na = ja(!1), za = {}, Ba = wo(za), Va = wo(za), Ua = wo(za); function Ha(e) { if (e === za) throw Error(ye(174)); return e } function Wa(e, t) { switch (_o(Ua, t), _o(Va, e), _o(Ba, za), e = t.nodeType) { case 9: case 11: t = (t = t.documentElement) ? t.namespaceURI : Ct(null, ""); break; default: t = Ct(t = (e = 8 === e ? t.parentNode : t).namespaceURI || null, e = e.tagName) }xo(Ba), _o(Ba, t) } function Ka() { xo(Ba), xo(Va), xo(Ua) } function Ya(e) { Ha(Ua.current); var t = Ha(Ba.current), n = Ct(t, e.type); t !== n && (_o(Va, e), _o(Ba, n)) } function Xa(e) { Va.current === e && (xo(Ba), xo(Va)) } var Ga = wo(0); function qa(e) { for (var t = e; null !== t;) { if (13 === t.tag) { var n = t.memoizedState; if (null !== n && (null === (n = n.dehydrated) || "$?" === n.data || "$!" === n.data)) return t } else if (19 === t.tag && void 0 !== t.memoizedProps.revealOrder) { if (0 != (64 & t.flags)) return t } else if (null !== t.child) { t.child.return = t, t = t.child; continue } if (t === e) break; for (; null === t.sibling;) { if (null === t.return || t.return === e) return null; t = t.return } t.sibling.return = t.return, t = t.sibling } return null } var Ja = null, Za = null, $a = !1; function Qa(e, t) { var n = $u(5, null, null, 0); n.elementType = "DELETED", n.type = "DELETED", n.stateNode = t, n.return = e, n.flags = 8, null !== e.lastEffect ? (e.lastEffect.nextEffect = n, e.lastEffect = n) : e.firstEffect = e.lastEffect = n } function es(e, t) { switch (e.tag) { case 5: var n = e.type; return null !== (t = 1 !== t.nodeType || n.toLowerCase() !== t.nodeName.toLowerCase() ? null : t) && (e.stateNode = t, !0); case 6: return null !== (t = "" === e.pendingProps || 3 !== t.nodeType ? null : t) && (e.stateNode = t, !0); default: return !1 } } function ts(e) { if ($a) { var t = Za; if (t) { var n = t; if (!es(e, t)) { if (!(t = io(n.nextSibling)) || !es(e, t)) return e.flags = -1025 & e.flags | 2, $a = !1, void (Ja = e); Qa(Ja, n) } Ja = e, Za = io(t.firstChild) } else e.flags = -1025 & e.flags | 2, $a = !1, Ja = e } } function ns(e) { for (e = e.return; null !== e && 5 !== e.tag && 3 !== e.tag && 13 !== e.tag;)e = e.return; Ja = e } function rs(e) { if (e !== Ja) return !1; if (!$a) return ns(e), $a = !0, !1; var t = e.type; if (5 !== e.tag || "head" !== t && "body" !== t && !eo(t, e.memoizedProps)) for (t = Za; t;)Qa(e, t), t = io(t.nextSibling); if (ns(e), 13 === e.tag) { if (!(e = null !== (e = e.memoizedState) ? e.dehydrated : null)) throw Error(ye(317)); e: { for (e = e.nextSibling, t = 0; e;) { if (8 === e.nodeType) { var n = e.data; if ("/$" === n) { if (0 === t) { Za = io(e.nextSibling); break e } t-- } else "$" !== n && "$!" !== n && "$?" !== n || t++ } e = e.nextSibling } Za = null } } else Za = Ja ? io(e.stateNode.nextSibling) : null; return !0 } function is() { Za = Ja = null, $a = !1 } var os = []; function as() { for (var e = 0; e < os.length; e++)os[e]._workInProgressVersionPrimary = null; os.length = 0 } var ss = Le.ReactCurrentDispatcher, ls = Le.ReactCurrentBatchConfig, us = 0, cs = null, fs = null, hs = null, ds = !1, ps = !1; function vs() { throw Error(ye(321)) } function gs(e, t) { if (null === t) return !1; for (var n = 0; n < t.length && n < e.length; n++)if (!wi(e[n], t[n])) return !1; return !0 } function ms(e, t, n, r, i, o) { if (us = o, cs = t, t.memoizedState = null, t.updateQueue = null, t.lanes = 0, ss.current = null === e || null === e.memoizedState ? Hs : Ws, e = n(r, i), ps) { o = 0; do { if (ps = !1, !(25 > o)) throw Error(ye(301)); o += 1, hs = fs = null, t.updateQueue = null, ss.current = Ks, e = n(r, i) } while (ps) } if (ss.current = Us, t = null !== fs && null !== fs.next, us = 0, hs = fs = cs = null, ds = !1, t) throw Error(ye(300)); return e } function ys() { var e = { memoizedState: null, baseState: null, baseQueue: null, queue: null, next: null }; return null === hs ? cs.memoizedState = hs = e : hs = hs.next = e, hs } function bs() { if (null === fs) { var e = cs.alternate; e = null !== e ? e.memoizedState : null } else e = fs.next; var t = null === hs ? cs.memoizedState : hs.next; if (null !== t) hs = t, fs = e; else { if (null === e) throw Error(ye(310)); e = { memoizedState: (fs = e).memoizedState, baseState: fs.baseState, baseQueue: fs.baseQueue, queue: fs.queue, next: null }, null === hs ? cs.memoizedState = hs = e : hs = hs.next = e } return hs } function ws(e, t) { return "function" == typeof t ? t(e) : t } function xs(e) { var t = bs(), n = t.queue; if (null === n) throw Error(ye(311)); n.lastRenderedReducer = e; var r = fs, i = r.baseQueue, o = n.pending; if (null !== o) { if (null !== i) { var a = i.next; i.next = o.next, o.next = a } r.baseQueue = i = o, n.pending = null } if (null !== i) { i = i.next, r = r.baseState; var s = a = o = null, l = i; do { var u = l.lane; if ((us & u) === u) null !== s && (s = s.next = { lane: 0, action: l.action, eagerReducer: l.eagerReducer, eagerState: l.eagerState, next: null }), r = l.eagerReducer === e ? l.eagerState : e(r, l.action); else { var c = { lane: u, action: l.action, eagerReducer: l.eagerReducer, eagerState: l.eagerState, next: null }; null === s ? (a = s = c, o = r) : s = s.next = c, cs.lanes |= u, ql |= u } l = l.next } while (null !== l && l !== i); null === s ? o = r : s.next = a, wi(r, t.memoizedState) || (Xs = !0), t.memoizedState = r, t.baseState = o, t.baseQueue = s, n.lastRenderedState = r } return [t.memoizedState, n.dispatch] } function _s(e) { var t = bs(), n = t.queue; if (null === n) throw Error(ye(311)); n.lastRenderedReducer = e; var r = n.dispatch, i = n.pending, o = t.memoizedState; if (null !== i) { n.pending = null; var a = i = i.next; do { o = e(o, a.action), a = a.next } while (a !== i); wi(o, t.memoizedState) || (Xs = !0), t.memoizedState = o, null === t.baseQueue && (t.baseState = o), n.lastRenderedState = o } return [o, r] } function Ss(e, t, n) { var r = t._getVersion; r = r(t._source); var i = t._workInProgressVersionPrimary; if (null !== i ? e = i === r : (e = e.mutableReadLanes, (e = (us & e) === e) && (t._workInProgressVersionPrimary = r, os.push(t))), e) return n(t._source); throw os.push(t), Error(ye(350)) } function ks(e, t, n, r) { var i = Vl; if (null === i) throw Error(ye(349)); var o = t._getVersion, a = o(t._source), s = ss.current, l = s.useState((function () { return Ss(i, t, n) })), u = l[1], c = l[0]; l = hs; var f = e.memoizedState, h = f.refs, d = h.getSnapshot, p = f.source; f = f.subscribe; var v = cs; return e.memoizedState = { refs: h, source: t, subscribe: r }, s.useEffect((function () { h.getSnapshot = n, h.setSnapshot = u; var e = o(t._source); if (!wi(a, e)) { e = n(t._source), wi(c, e) || (u(e), e = xu(v), i.mutableReadLanes |= e & i.pendingLanes), e = i.mutableReadLanes, i.entangledLanes |= e; for (var r = i.entanglements, s = e; 0 < s;) { var l = 31 - tr(s), f = 1 << l; r[l] |= e, s &= ~f } } }), [n, t, r]), s.useEffect((function () { return r(t._source, (function () { var e = h.getSnapshot, n = h.setSnapshot; try { n(e(t._source)); var r = xu(v); i.mutableReadLanes |= r & i.pendingLanes } catch (e) { n((function () { throw e })) } })) }), [t, r]), wi(d, n) && wi(p, t) && wi(f, r) || ((e = { pending: null, dispatch: null, lastRenderedReducer: ws, lastRenderedState: c }).dispatch = u = Vs.bind(null, cs, e), l.queue = e, l.baseQueue = null, c = Ss(i, t, n), l.memoizedState = l.baseState = c), c } function Cs(e, t, n) { return ks(bs(), e, t, n) } function Ts(e) { var t = ys(); return "function" == typeof e && (e = e()), t.memoizedState = t.baseState = e, e = (e = t.queue = { pending: null, dispatch: null, lastRenderedReducer: ws, lastRenderedState: e }).dispatch = Vs.bind(null, cs, e), [t.memoizedState, e] } function Es(e, t, n, r) { return e = { tag: e, create: t, destroy: n, deps: r, next: null }, null === (t = cs.updateQueue) ? (t = { lastEffect: null }, cs.updateQueue = t, t.lastEffect = e.next = e) : null === (n = t.lastEffect) ? t.lastEffect = e.next = e : (r = n.next, n.next = e, e.next = r, t.lastEffect = e), e } function Os(e) { return e = { current: e }, ys().memoizedState = e } function Ps() { return bs().memoizedState } function Ms(e, t, n, r) { var i = ys(); cs.flags |= e, i.memoizedState = Es(1 | t, n, void 0, void 0 === r ? null : r) } function As(e, t, n, r) { var i = bs(); r = void 0 === r ? null : r; var o = void 0; if (null !== fs) { var a = fs.memoizedState; if (o = a.destroy, null !== r && gs(r, a.deps)) return void Es(t, n, o, r) } cs.flags |= e, i.memoizedState = Es(1 | t, n, o, r) } function Ds(e, t) { return Ms(516, 4, e, t) } function Ls(e, t) { return As(516, 4, e, t) } function Rs(e, t) { return As(4, 2, e, t) } function Is(e, t) { return "function" == typeof t ? (e = e(), t(e), function () { t(null) }) : null != t ? (e = e(), t.current = e, function () { t.current = null }) : void 0 } function js(e, t, n) { return n = null != n ? n.concat([e]) : null, As(4, 2, Is.bind(null, t, e), n) } function Fs() { } function Ns(e, t) { var n = bs(); t = void 0 === t ? null : t; var r = n.memoizedState; return null !== r && null !== t && gs(t, r[1]) ? r[0] : (n.memoizedState = [e, t], e) } function zs(e, t) { var n = bs(); t = void 0 === t ? null : t; var r = n.memoizedState; return null !== r && null !== t && gs(t, r[1]) ? r[0] : (e = e(), n.memoizedState = [e, t], e) } function Bs(e, t) { var n = ta(); ra(98 > n ? 98 : n, (function () { e(!0) })), ra(97 < n ? 97 : n, (function () { var n = ls.transition; ls.transition = 1; try { e(!1), t() } finally { ls.transition = n } })) } function Vs(e, t, n) { var r = wu(), i = xu(e), o = { lane: i, action: n, eagerReducer: null, eagerState: null, next: null }, a = t.pending; if (null === a ? o.next = o : (o.next = a.next, a.next = o), t.pending = o, a = e.alternate, e === cs || null !== a && a === cs) ps = ds = !0; else { if (0 === e.lanes && (null === a || 0 === a.lanes) && null !== (a = t.lastRenderedReducer)) try { var s = t.lastRenderedState, l = a(s, n); if (o.eagerReducer = a, o.eagerState = l, wi(l, s)) return } catch (e) { } _u(e, i, r) } } var Us = { readContext: ma, useCallback: vs, useContext: vs, useEffect: vs, useImperativeHandle: vs, useLayoutEffect: vs, useMemo: vs, useReducer: vs, useRef: vs, useState: vs, useDebugValue: vs, useDeferredValue: vs, useTransition: vs, useMutableSource: vs, useOpaqueIdentifier: vs, unstable_isNewReconciler: !1 }, Hs = { readContext: ma, useCallback: function (e, t) { return ys().memoizedState = [e, void 0 === t ? null : t], e }, useContext: ma, useEffect: Ds, useImperativeHandle: function (e, t, n) { return n = null != n ? n.concat([e]) : null, Ms(4, 2, Is.bind(null, t, e), n) }, useLayoutEffect: function (e, t) { return Ms(4, 2, e, t) }, useMemo: function (e, t) { var n = ys(); return t = void 0 === t ? null : t, e = e(), n.memoizedState = [e, t], e }, useReducer: function (e, t, n) { var r = ys(); return t = void 0 !== n ? n(t) : t, r.memoizedState = r.baseState = t, e = (e = r.queue = { pending: null, dispatch: null, lastRenderedReducer: e, lastRenderedState: t }).dispatch = Vs.bind(null, cs, e), [r.memoizedState, e] }, useRef: Os, useState: Ts, useDebugValue: Fs, useDeferredValue: function (e) { var t = Ts(e), n = t[0], r = t[1]; return Ds((function () { var t = ls.transition; ls.transition = 1; try { r(e) } finally { ls.transition = t } }), [e]), n }, useTransition: function () { var e = Ts(!1), t = e[0]; return Os(e = Bs.bind(null, e[1])), [e, t] }, useMutableSource: function (e, t, n) { var r = ys(); return r.memoizedState = { refs: { getSnapshot: t, setSnapshot: null }, source: e, subscribe: n }, ks(r, e, t, n) }, useOpaqueIdentifier: function () { if ($a) { var e = !1, t = function (e) { return { $$typeof: Xe, toString: e, valueOf: e } }((function () { throw e || (e = !0, n("r:" + (ao++).toString(36))), Error(ye(355)) })), n = Ts(t)[1]; return 0 == (2 & cs.mode) && (cs.flags |= 516, Es(5, (function () { n("r:" + (ao++).toString(36)) }), void 0, null)), t } return Ts(t = "r:" + (ao++).toString(36)), t }, unstable_isNewReconciler: !1 }, Ws = { readContext: ma, useCallback: Ns, useContext: ma, useEffect: Ls, useImperativeHandle: js, useLayoutEffect: Rs, useMemo: zs, useReducer: xs, useRef: Ps, useState: function () { return xs(ws) }, useDebugValue: Fs, useDeferredValue: function (e) { var t = xs(ws), n = t[0], r = t[1]; return Ls((function () { var t = ls.transition; ls.transition = 1; try { r(e) } finally { ls.transition = t } }), [e]), n }, useTransition: function () { var e = xs(ws)[0]; return [Ps().current, e] }, useMutableSource: Cs, useOpaqueIdentifier: function () { return xs(ws)[0] }, unstable_isNewReconciler: !1 }, Ks = { readContext: ma, useCallback: Ns, useContext: ma, useEffect: Ls, useImperativeHandle: js, useLayoutEffect: Rs, useMemo: zs, useReducer: _s, useRef: Ps, useState: function () { return _s(ws) }, useDebugValue: Fs, useDeferredValue: function (e) { var t = _s(ws), n = t[0], r = t[1]; return Ls((function () { var t = ls.transition; ls.transition = 1; try { r(e) } finally { ls.transition = t } }), [e]), n }, useTransition: function () { var e = _s(ws)[0]; return [Ps().current, e] }, useMutableSource: Cs, useOpaqueIdentifier: function () { return _s(ws)[0] }, unstable_isNewReconciler: !1 }, Ys = Le.ReactCurrentOwner, Xs = !1; function Gs(e, t, n, r) { t.child = null === e ? Na(t, null, n, r) : Fa(t, e.child, n, r) } function qs(e, t, n, r, i) { n = n.render; var o = t.ref; return ga(t, i), r = ms(e, t, n, r, o, i), null === e || Xs ? (t.flags |= 1, Gs(e, t, r, i), t.child) : (t.updateQueue = e.updateQueue, t.flags &= -517, e.lanes &= ~i, dl(e, t, i)) } function Js(e, t, n, r, i, o) { if (null === e) { var a = n.type; return "function" != typeof a || Qu(a) || void 0 !== a.defaultProps || null !== n.compare || void 0 !== n.defaultProps ? ((e = tc(n.type, null, r, t, t.mode, o)).ref = t.ref, e.return = t, t.child = e) : (t.tag = 15, t.type = a, Zs(e, t, a, r, i, o)) } return a = e.child, 0 == (i & o) && (i = a.memoizedProps, (n = null !== (n = n.compare) ? n : _i)(i, r) && e.ref === t.ref) ? dl(e, t, o) : (t.flags |= 1, (e = ec(a, r)).ref = t.ref, e.return = t, t.child = e) } function Zs(e, t, n, r, i, o) { if (null !== e && _i(e.memoizedProps, r) && e.ref === t.ref) { if (Xs = !1, 0 == (o & i)) return t.lanes = e.lanes, dl(e, t, o); 0 != (16384 & e.flags) && (Xs = !0) } return el(e, t, n, r, o) } function $s(e, t, n) { var r = t.pendingProps, i = r.children, o = null !== e ? e.memoizedState : null; if ("hidden" === r.mode || "unstable-defer-without-hiding" === r.mode) if (0 == (4 & t.mode)) t.memoizedState = { baseLanes: 0 }, Mu(0, n); else { if (0 == (1073741824 & n)) return e = null !== o ? o.baseLanes | n : n, t.lanes = t.childLanes = 1073741824, t.memoizedState = { baseLanes: e }, Mu(0, e), null; t.memoizedState = { baseLanes: 0 }, Mu(0, null !== o ? o.baseLanes : n) } else null !== o ? (r = o.baseLanes | n, t.memoizedState = null) : r = n, Mu(0, r); return Gs(e, t, i, n), t.child } function Qs(e, t) { var n = t.ref; (null === e && null !== n || null !== e && e.ref !== n) && (t.flags |= 128) } function el(e, t, n, r, i) { var o = Oo(n) ? To : ko.current; return o = Eo(t, o), ga(t, i), n = ms(e, t, n, r, o, i), null === e || Xs ? (t.flags |= 1, Gs(e, t, n, i), t.child) : (t.updateQueue = e.updateQueue, t.flags &= -517, e.lanes &= ~i, dl(e, t, i)) } function tl(e, t, n, r, i) { if (Oo(n)) { var o = !0; Do(t) } else o = !1; if (ga(t, i), null === t.stateNode) null !== e && (e.alternate = null, t.alternate = null, t.flags |= 2), Ma(t, n, r), Da(t, n, r, i), r = !0; else if (null === e) { var a = t.stateNode, s = t.memoizedProps; a.props = s; var l = a.context, u = n.contextType; u = "object" == C(u) && null !== u ? ma(u) : Eo(t, u = Oo(n) ? To : ko.current); var c = n.getDerivedStateFromProps, f = "function" == typeof c || "function" == typeof a.getSnapshotBeforeUpdate; f || "function" != typeof a.UNSAFE_componentWillReceiveProps && "function" != typeof a.componentWillReceiveProps || (s !== r || l !== u) && Aa(t, a, r, u), ya = !1; var h = t.memoizedState; a.state = h, ka(t, r, a, i), l = t.memoizedState, s !== r || h !== l || Co.current || ya ? ("function" == typeof c && (Ea(t, n, c, r), l = t.memoizedState), (s = ya || Pa(t, n, s, r, h, l, u)) ? (f || "function" != typeof a.UNSAFE_componentWillMount && "function" != typeof a.componentWillMount || ("function" == typeof a.componentWillMount && a.componentWillMount(), "function" == typeof a.UNSAFE_componentWillMount && a.UNSAFE_componentWillMount()), "function" == typeof a.componentDidMount && (t.flags |= 4)) : ("function" == typeof a.componentDidMount && (t.flags |= 4), t.memoizedProps = r, t.memoizedState = l), a.props = r, a.state = l, a.context = u, r = s) : ("function" == typeof a.componentDidMount && (t.flags |= 4), r = !1) } else { a = t.stateNode, wa(e, t), s = t.memoizedProps, u = t.type === t.elementType ? s : la(t.type, s), a.props = u, f = t.pendingProps, h = a.context, l = "object" == C(l = n.contextType) && null !== l ? ma(l) : Eo(t, l = Oo(n) ? To : ko.current); var d = n.getDerivedStateFromProps; (c = "function" == typeof d || "function" == typeof a.getSnapshotBeforeUpdate) || "function" != typeof a.UNSAFE_componentWillReceiveProps && "function" != typeof a.componentWillReceiveProps || (s !== f || h !== l) && Aa(t, a, r, l), ya = !1, h = t.memoizedState, a.state = h, ka(t, r, a, i); var p = t.memoizedState; s !== f || h !== p || Co.current || ya ? ("function" == typeof d && (Ea(t, n, d, r), p = t.memoizedState), (u = ya || Pa(t, n, u, r, h, p, l)) ? (c || "function" != typeof a.UNSAFE_componentWillUpdate && "function" != typeof a.componentWillUpdate || ("function" == typeof a.componentWillUpdate && a.componentWillUpdate(r, p, l), "function" == typeof a.UNSAFE_componentWillUpdate && a.UNSAFE_componentWillUpdate(r, p, l)), "function" == typeof a.componentDidUpdate && (t.flags |= 4), "function" == typeof a.getSnapshotBeforeUpdate && (t.flags |= 256)) : ("function" != typeof a.componentDidUpdate || s === e.memoizedProps && h === e.memoizedState || (t.flags |= 4), "function" != typeof a.getSnapshotBeforeUpdate || s === e.memoizedProps && h === e.memoizedState || (t.flags |= 256), t.memoizedProps = r, t.memoizedState = p), a.props = r, a.state = p, a.context = l, r = u) : ("function" != typeof a.componentDidUpdate || s === e.memoizedProps && h === e.memoizedState || (t.flags |= 4), "function" != typeof a.getSnapshotBeforeUpdate || s === e.memoizedProps && h === e.memoizedState || (t.flags |= 256), r = !1) } return nl(e, t, n, r, o, i) } function nl(e, t, n, r, i, o) { Qs(e, t); var a = 0 != (64 & t.flags); if (!r && !a) return i && Lo(t, n, !1), dl(e, t, o); r = t.stateNode, Ys.current = t; var s = a && "function" != typeof n.getDerivedStateFromError ? null : r.render(); return t.flags |= 1, null !== e && a ? (t.child = Fa(t, e.child, null, o), t.child = Fa(t, null, s, o)) : Gs(e, t, s, o), t.memoizedState = r.state, i && Lo(t, n, !0), t.child } function rl(e) { var t = e.stateNode; t.pendingContext ? Mo(0, t.pendingContext, t.pendingContext !== t.context) : t.context && Mo(0, t.context, !1), Wa(e, t.containerInfo) } var il, ol, al, sl = { dehydrated: null, retryLane: 0 }; function ll(e, t, n) { var r, i = t.pendingProps, o = Ga.current, a = !1; return (r = 0 != (64 & t.flags)) || (r = (null === e || null !== e.memoizedState) && 0 != (2 & o)), r ? (a = !0, t.flags &= -65) : null !== e && null === e.memoizedState || void 0 === i.fallback || !0 === i.unstable_avoidThisFallback || (o |= 1), _o(Ga, 1 & o), null === e ? (void 0 !== i.fallback && ts(t), e = i.children, o = i.fallback, a ? (e = ul(t, e, o, n), t.child.memoizedState = { baseLanes: n }, t.memoizedState = sl, e) : "number" == typeof i.unstable_expectedLoadTime ? (e = ul(t, e, o, n), t.child.memoizedState = { baseLanes: n }, t.memoizedState = sl, t.lanes = 33554432, e) : ((n = rc({ mode: "visible", children: e }, t.mode, n, null)).return = t, t.child = n)) : (e.memoizedState, a ? (i = function (e, t, n, r, i) { var o = t.mode, a = e.child; e = a.sibling; var s = { mode: "hidden", children: n }; return 0 == (2 & o) && t.child !== a ? ((n = t.child).childLanes = 0, n.pendingProps = s, null !== (a = n.lastEffect) ? (t.firstEffect = n.firstEffect, t.lastEffect = a, a.nextEffect = null) : t.firstEffect = t.lastEffect = null) : n = ec(a, s), null !== e ? r = ec(e, r) : (r = nc(r, o, i, null)).flags |= 2, r.return = t, n.return = t, n.sibling = r, t.child = n, r }(e, t, i.children, i.fallback, n), a = t.child, o = e.child.memoizedState, a.memoizedState = null === o ? { baseLanes: n } : { baseLanes: o.baseLanes | n }, a.childLanes = e.childLanes & ~n, t.memoizedState = sl, i) : (n = function (e, t, n, r) { var i = e.child; return e = i.sibling, n = ec(i, { mode: "visible", children: n }), 0 == (2 & t.mode) && (n.lanes = r), n.return = t, n.sibling = null, null !== e && (e.nextEffect = null, e.flags = 8, t.firstEffect = t.lastEffect = e), t.child = n }(e, t, i.children, n), t.memoizedState = null, n)) } function ul(e, t, n, r) { var i = e.mode, o = e.child; return t = { mode: "hidden", children: t }, 0 == (2 & i) && null !== o ? (o.childLanes = 0, o.pendingProps = t) : o = rc(t, i, 0, null), n = nc(n, i, r, null), o.return = e, n.return = e, o.sibling = n, e.child = o, n } function cl(e, t) { e.lanes |= t; var n = e.alternate; null !== n && (n.lanes |= t), va(e.return, t) } function fl(e, t, n, r, i, o) { var a = e.memoizedState; null === a ? e.memoizedState = { isBackwards: t, rendering: null, renderingStartTime: 0, last: r, tail: n, tailMode: i, lastEffect: o } : (a.isBackwards = t, a.rendering = null, a.renderingStartTime = 0, a.last = r, a.tail = n, a.tailMode = i, a.lastEffect = o) } function hl(e, t, n) { var r = t.pendingProps, i = r.revealOrder, o = r.tail; if (Gs(e, t, r.children, n), 0 != (2 & (r = Ga.current))) r = 1 & r | 2, t.flags |= 64; else { if (null !== e && 0 != (64 & e.flags)) e: for (e = t.child; null !== e;) { if (13 === e.tag) null !== e.memoizedState && cl(e, n); else if (19 === e.tag) cl(e, n); else if (null !== e.child) { e.child.return = e, e = e.child; continue } if (e === t) break e; for (; null === e.sibling;) { if (null === e.return || e.return === t) break e; e = e.return } e.sibling.return = e.return, e = e.sibling } r &= 1 } if (_o(Ga, r), 0 == (2 & t.mode)) t.memoizedState = null; else switch (i) { case "forwards": for (n = t.child, i = null; null !== n;)null !== (e = n.alternate) && null === qa(e) && (i = n), n = n.sibling; null === (n = i) ? (i = t.child, t.child = null) : (i = n.sibling, n.sibling = null), fl(t, !1, i, n, o, t.lastEffect); break; case "backwards": for (n = null, i = t.child, t.child = null; null !== i;) { if (null !== (e = i.alternate) && null === qa(e)) { t.child = i; break } e = i.sibling, i.sibling = n, n = i, i = e } fl(t, !0, n, null, o, t.lastEffect); break; case "together": fl(t, !1, null, null, void 0, t.lastEffect); break; default: t.memoizedState = null }return t.child } function dl(e, t, n) { if (null !== e && (t.dependencies = e.dependencies), ql |= t.lanes, 0 != (n & t.childLanes)) { if (null !== e && t.child !== e.child) throw Error(ye(153)); if (null !== t.child) { for (n = ec(e = t.child, e.pendingProps), t.child = n, n.return = t; null !== e.sibling;)e = e.sibling, (n = n.sibling = ec(e, e.pendingProps)).return = t; n.sibling = null } return t.child } return null } function pl(e, t) { if (!$a) switch (e.tailMode) { case "hidden": t = e.tail; for (var n = null; null !== t;)null !== t.alternate && (n = t), t = t.sibling; null === n ? e.tail = null : n.sibling = null; break; case "collapsed": n = e.tail; for (var r = null; null !== n;)null !== n.alternate && (r = n), n = n.sibling; null === r ? t || null === e.tail ? e.tail = null : e.tail.sibling = null : r.sibling = null } } function vl(e, t, n) { var r = t.pendingProps; switch (t.tag) { case 2: case 16: case 15: case 0: case 11: case 7: case 8: case 12: case 9: case 14: return null; case 1: case 17: return Oo(t.type) && Po(), null; case 3: return Ka(), xo(Co), xo(ko), as(), (r = t.stateNode).pendingContext && (r.context = r.pendingContext, r.pendingContext = null), (null === e || null === e.child) && (rs(t) ? t.flags |= 4 : r.hydrate || (t.flags |= 256)), null; case 5: Xa(t); var i = Ha(Ua.current); if (n = t.type, null !== e && null != t.stateNode) ol(e, t, n, r), e.ref !== t.ref && (t.flags |= 128); else { if (!r) { if (null === t.stateNode) throw Error(ye(166)); return null } if (e = Ha(Ba.current), rs(t)) { r = t.stateNode, n = t.type; var o = t.memoizedProps; switch (r[lo] = t, r[uo] = o, n) { case "dialog": Bi("cancel", r), Bi("close", r); break; case "iframe": case "object": case "embed": Bi("load", r); break; case "video": case "audio": for (e = 0; e < ji.length; e++)Bi(ji[e], r); break; case "source": Bi("error", r); break; case "img": case "image": case "link": Bi("error", r), Bi("load", r); break; case "details": Bi("toggle", r); break; case "input": ht(r, o), Bi("invalid", r); break; case "select": r._wrapperState = { wasMultiple: !!o.multiple }, Bi("invalid", r); break; case "textarea": wt(r, o), Bi("invalid", r) }for (var a in Rt(n, o), e = null, o) o.hasOwnProperty(a) && (i = o[a], "children" === a ? "string" == typeof i ? r.textContent !== i && (e = ["children", i]) : "number" == typeof i && r.textContent !== "" + i && (e = ["children", "" + i]) : we.hasOwnProperty(a) && null != i && "onScroll" === a && Bi("scroll", r)); switch (n) { case "input": lt(r), vt(r, o, !0); break; case "textarea": lt(r), _t(r); break; case "select": case "option": break; default: "function" == typeof o.onClick && (r.onclick = Ji) }r = e, t.updateQueue = r, null !== r && (t.flags |= 4) } else { switch (a = 9 === i.nodeType ? i : i.ownerDocument, e === St && (e = kt(n)), e === St ? "script" === n ? ((e = a.createElement("div")).innerHTML = "<script><\/script>", e = e.removeChild(e.firstChild)) : "string" == typeof r.is ? e = a.createElement(n, { is: r.is }) : (e = a.createElement(n), "select" === n && (a = e, r.multiple ? a.multiple = !0 : r.size && (a.size = r.size))) : e = a.createElementNS(e, n), e[lo] = t, e[uo] = r, il(e, t), t.stateNode = e, a = It(n, r), n) { case "dialog": Bi("cancel", e), Bi("close", e), i = r; break; case "iframe": case "object": case "embed": Bi("load", e), i = r; break; case "video": case "audio": for (i = 0; i < ji.length; i++)Bi(ji[i], e); i = r; break; case "source": Bi("error", e), i = r; break; case "img": case "image": case "link": Bi("error", e), Bi("load", e), i = r; break; case "details": Bi("toggle", e), i = r; break; case "input": ht(e, r), i = ft(e, r), Bi("invalid", e); break; case "option": i = mt(e, r); break; case "select": e._wrapperState = { wasMultiple: !!r.multiple }, i = ge({}, r, { value: void 0 }), Bi("invalid", e); break; case "textarea": wt(e, r), i = bt(e, r), Bi("invalid", e); break; default: i = r }Rt(n, i); var s = i; for (o in s) if (s.hasOwnProperty(o)) { var l = s[o]; "style" === o ? Dt(e, l) : "dangerouslySetInnerHTML" === o ? null != (l = l ? l.__html : void 0) && Et(e, l) : "children" === o ? "string" == typeof l ? ("textarea" !== n || "" !== l) && Ot(e, l) : "number" == typeof l && Ot(e, "" + l) : "suppressContentEditableWarning" !== o && "suppressHydrationWarning" !== o && "autoFocus" !== o && (we.hasOwnProperty(o) ? null != l && "onScroll" === o && Bi("scroll", e) : null != l && De(e, o, l, a)) } switch (n) { case "input": lt(e), vt(e, r, !1); break; case "textarea": lt(e), _t(e); break; case "option": null != r.value && e.setAttribute("value", "" + at(r.value)); break; case "select": e.multiple = !!r.multiple, null != (o = r.value) ? yt(e, !!r.multiple, o, !1) : null != r.defaultValue && yt(e, !!r.multiple, r.defaultValue, !0); break; default: "function" == typeof i.onClick && (e.onclick = Ji) }Qi(n, r) && (t.flags |= 4) } null !== t.ref && (t.flags |= 128) } return null; case 6: if (e && null != t.stateNode) al(0, t, e.memoizedProps, r); else { if ("string" != typeof r && null === t.stateNode) throw Error(ye(166)); n = Ha(Ua.current), Ha(Ba.current), rs(t) ? (r = t.stateNode, n = t.memoizedProps, r[lo] = t, r.nodeValue !== n && (t.flags |= 4)) : ((r = (9 === n.nodeType ? n : n.ownerDocument).createTextNode(r))[lo] = t, t.stateNode = r) } return null; case 13: return xo(Ga), r = t.memoizedState, 0 != (64 & t.flags) ? (t.lanes = n, t) : (r = null !== r, n = !1, null === e ? void 0 !== t.memoizedProps.fallback && rs(t) : n = null !== e.memoizedState, r && !n && 0 != (2 & t.mode) && (null === e && !0 !== t.memoizedProps.unstable_avoidThisFallback || 0 != (1 & Ga.current) ? 0 === Yl && (Yl = 3) : ((0 === Yl || 3 === Yl) && (Yl = 4), null === Vl || 0 == (134217727 & ql) && 0 == (134217727 & Jl) || Tu(Vl, Hl))), (r || n) && (t.flags |= 4), null); case 4: return Ka(), null === e && Ui(t.stateNode.containerInfo), null; case 10: return pa(t), null; case 19: if (xo(Ga), null === (r = t.memoizedState)) return null; if (o = 0 != (64 & t.flags), null === (a = r.rendering)) if (o) pl(r, !1); else { if (0 !== Yl || null !== e && 0 != (64 & e.flags)) for (e = t.child; null !== e;) { if (null !== (a = qa(e))) { for (t.flags |= 64, pl(r, !1), null !== (o = a.updateQueue) && (t.updateQueue = o, t.flags |= 4), null === r.lastEffect && (t.firstEffect = null), t.lastEffect = r.lastEffect, r = n, n = t.child; null !== n;)e = r, (o = n).flags &= 2, o.nextEffect = null, o.firstEffect = null, o.lastEffect = null, null === (a = o.alternate) ? (o.childLanes = 0, o.lanes = e, o.child = null, o.memoizedProps = null, o.memoizedState = null, o.updateQueue = null, o.dependencies = null, o.stateNode = null) : (o.childLanes = a.childLanes, o.lanes = a.lanes, o.child = a.child, o.memoizedProps = a.memoizedProps, o.memoizedState = a.memoizedState, o.updateQueue = a.updateQueue, o.type = a.type, e = a.dependencies, o.dependencies = null === e ? null : { lanes: e.lanes, firstContext: e.firstContext }), n = n.sibling; return _o(Ga, 1 & Ga.current | 2), t.child } e = e.sibling } null !== r.tail && ea() > eu && (t.flags |= 64, o = !0, pl(r, !1), t.lanes = 33554432) } else { if (!o) if (null !== (e = qa(a))) { if (t.flags |= 64, o = !0, null !== (n = e.updateQueue) && (t.updateQueue = n, t.flags |= 4), pl(r, !0), null === r.tail && "hidden" === r.tailMode && !a.alternate && !$a) return null !== (t = t.lastEffect = r.lastEffect) && (t.nextEffect = null), null } else 2 * ea() - r.renderingStartTime > eu && 1073741824 !== n && (t.flags |= 64, o = !0, pl(r, !1), t.lanes = 33554432); r.isBackwards ? (a.sibling = t.child, t.child = a) : (null !== (n = r.last) ? n.sibling = a : t.child = a, r.last = a) } return null !== r.tail ? (n = r.tail, r.rendering = n, r.tail = n.sibling, r.lastEffect = t.lastEffect, r.renderingStartTime = ea(), n.sibling = null, t = Ga.current, _o(Ga, o ? 1 & t | 2 : 1 & t), n) : null; case 23: case 24: return Au(), null !== e && null !== e.memoizedState != (null !== t.memoizedState) && "unstable-defer-without-hiding" !== r.mode && (t.flags |= 4), null }throw Error(ye(156, t.tag)) } function gl(e) { switch (e.tag) { case 1: Oo(e.type) && Po(); var t = e.flags; return 4096 & t ? (e.flags = -4097 & t | 64, e) : null; case 3: if (Ka(), xo(Co), xo(ko), as(), 0 != (64 & (t = e.flags))) throw Error(ye(285)); return e.flags = -4097 & t | 64, e; case 5: return Xa(e), null; case 13: return xo(Ga), 4096 & (t = e.flags) ? (e.flags = -4097 & t | 64, e) : null; case 19: return xo(Ga), null; case 4: return Ka(), null; case 10: return pa(e), null; case 23: case 24: return Au(), null; default: return null } } function ml(e, t) { try { var n = "", r = t; do { n += it(r), r = r.return } while (r); var i = n } catch (e) { i = "\nError generating stack: " + e.message + "\n" + e.stack } return { value: e, source: t, stack: i } } function yl(e, t) { try { console.error(t.value) } catch (e) { setTimeout((function () { throw e })) } } il = function (e, t) { for (var n = t.child; null !== n;) { if (5 === n.tag || 6 === n.tag) e.appendChild(n.stateNode); else if (4 !== n.tag && null !== n.child) { n.child.return = n, n = n.child; continue } if (n === t) break; for (; null === n.sibling;) { if (null === n.return || n.return === t) return; n = n.return } n.sibling.return = n.return, n = n.sibling } }, ol = function (e, t, n, r) { var i = e.memoizedProps; if (i !== r) { e = t.stateNode, Ha(Ba.current); var o, a = null; switch (n) { case "input": i = ft(e, i), r = ft(e, r), a = []; break; case "option": i = mt(e, i), r = mt(e, r), a = []; break; case "select": i = ge({}, i, { value: void 0 }), r = ge({}, r, { value: void 0 }), a = []; break; case "textarea": i = bt(e, i), r = bt(e, r), a = []; break; default: "function" != typeof i.onClick && "function" == typeof r.onClick && (e.onclick = Ji) }for (u in Rt(n, r), n = null, i) if (!r.hasOwnProperty(u) && i.hasOwnProperty(u) && null != i[u]) if ("style" === u) { var s = i[u]; for (o in s) s.hasOwnProperty(o) && (n || (n = {}), n[o] = "") } else "dangerouslySetInnerHTML" !== u && "children" !== u && "suppressContentEditableWarning" !== u && "suppressHydrationWarning" !== u && "autoFocus" !== u && (we.hasOwnProperty(u) ? a || (a = []) : (a = a || []).push(u, null)); for (u in r) { var l = r[u]; if (s = null != i ? i[u] : void 0, r.hasOwnProperty(u) && l !== s && (null != l || null != s)) if ("style" === u) if (s) { for (o in s) !s.hasOwnProperty(o) || l && l.hasOwnProperty(o) || (n || (n = {}), n[o] = ""); for (o in l) l.hasOwnProperty(o) && s[o] !== l[o] && (n || (n = {}), n[o] = l[o]) } else n || (a || (a = []), a.push(u, n)), n = l; else "dangerouslySetInnerHTML" === u ? (l = l ? l.__html : void 0, s = s ? s.__html : void 0, null != l && s !== l && (a = a || []).push(u, l)) : "children" === u ? "string" != typeof l && "number" != typeof l || (a = a || []).push(u, "" + l) : "suppressContentEditableWarning" !== u && "suppressHydrationWarning" !== u && (we.hasOwnProperty(u) ? (null != l && "onScroll" === u && Bi("scroll", e), a || s === l || (a = [])) : "object" == C(l) && null !== l && l.$$typeof === Xe ? l.toString() : (a = a || []).push(u, l)) } n && (a = a || []).push("style", n); var u = a; (t.updateQueue = u) && (t.flags |= 4) } }, al = function (e, t, n, r) { n !== r && (t.flags |= 4) }; var bl = "function" == typeof WeakMap ? WeakMap : Map; function wl(e, t, n) { (n = xa(-1, n)).tag = 3, n.payload = { element: null }; var r = t.value; return n.callback = function () { iu || (iu = !0, ou = r), yl(0, t) }, n } function xl(e, t, n) { (n = xa(-1, n)).tag = 3; var r = e.type.getDerivedStateFromError; if ("function" == typeof r) { var i = t.value; n.payload = function () { return yl(0, t), r(i) } } var o = e.stateNode; return null !== o && "function" == typeof o.componentDidCatch && (n.callback = function () { "function" != typeof r && (null === au ? au = new Set([this]) : au.add(this), yl(0, t)); var e = t.stack; this.componentDidCatch(t.value, { componentStack: null !== e ? e : "" }) }), n } var _l = "function" == typeof WeakSet ? WeakSet : Set; function Sl(e) { var t = e.ref; if (null !== t) if ("function" == typeof t) try { t(null) } catch (t) { Gu(e, t) } else t.current = null } function kl(e, t) { switch (t.tag) { case 0: case 11: case 15: case 22: case 5: case 6: case 4: case 17: return; case 1: if (256 & t.flags && null !== e) { var n = e.memoizedProps, r = e.memoizedState; t = (e = t.stateNode).getSnapshotBeforeUpdate(t.elementType === t.type ? n : la(t.type, n), r), e.__reactInternalSnapshotBeforeUpdate = t } return; case 3: return void (256 & t.flags && ro(t.stateNode.containerInfo)) }throw Error(ye(163)) } function Cl(e, t, n) { switch (n.tag) { case 0: case 11: case 15: case 22: if (null !== (t = null !== (t = n.updateQueue) ? t.lastEffect : null)) { e = t = t.next; do { if (3 == (3 & e.tag)) { var r = e.create; e.destroy = r() } e = e.next } while (e !== t) } if (null !== (t = null !== (t = n.updateQueue) ? t.lastEffect : null)) { e = t = t.next; do { var i = e; r = i.next, 0 != (4 & (i = i.tag)) && 0 != (1 & i) && (Ku(n, e), Wu(n, e)), e = r } while (e !== t) } return; case 1: return e = n.stateNode, 4 & n.flags && (null === t ? e.componentDidMount() : (r = n.elementType === n.type ? t.memoizedProps : la(n.type, t.memoizedProps), e.componentDidUpdate(r, t.memoizedState, e.__reactInternalSnapshotBeforeUpdate))), void (null !== (t = n.updateQueue) && Ca(n, t, e)); case 3: if (null !== (t = n.updateQueue)) { if (e = null, null !== n.child) switch (n.child.tag) { case 5: case 1: e = n.child.stateNode }Ca(n, t, e) } return; case 5: return e = n.stateNode, void (null === t && 4 & n.flags && Qi(n.type, n.memoizedProps) && e.focus()); case 6: case 4: case 12: case 19: case 17: case 20: case 21: case 23: case 24: return; case 13: return void (null === n.memoizedState && (n = n.alternate, null !== n && (n = n.memoizedState, null !== n && (n = n.dehydrated, null !== n && Ln(n))))) }throw Error(ye(163)) } function Tl(e, t) { for (var n = e; ;) { if (5 === n.tag) { var r = n.stateNode; if (t) "function" == typeof (r = r.style).setProperty ? r.setProperty("display", "none", "important") : r.display = "none"; else { r = n.stateNode; var i = n.memoizedProps.style; i = null != i && i.hasOwnProperty("display") ? i.display : null, r.style.display = At("display", i) } } else if (6 === n.tag) n.stateNode.nodeValue = t ? "" : n.memoizedProps; else if ((23 !== n.tag && 24 !== n.tag || null === n.memoizedState || n === e) && null !== n.child) { n.child.return = n, n = n.child; continue } if (n === e) break; for (; null === n.sibling;) { if (null === n.return || n.return === e) return; n = n.return } n.sibling.return = n.return, n = n.sibling } } function El(e, t) { if (Io && "function" == typeof Io.onCommitFiberUnmount) try { Io.onCommitFiberUnmount(Ro, t) } catch (e) { } switch (t.tag) { case 0: case 11: case 14: case 15: case 22: if (null !== (e = t.updateQueue) && null !== (e = e.lastEffect)) { var n = e = e.next; do { var r = n, i = r.destroy; if (r = r.tag, void 0 !== i) if (0 != (4 & r)) Ku(t, n); else { r = t; try { i() } catch (e) { Gu(r, e) } } n = n.next } while (n !== e) } break; case 1: if (Sl(t), "function" == typeof (e = t.stateNode).componentWillUnmount) try { e.props = t.memoizedProps, e.state = t.memoizedState, e.componentWillUnmount() } catch (e) { Gu(t, e) } break; case 5: Sl(t); break; case 4: Ll(e, t) } } function Ol(e) { e.alternate = null, e.child = null, e.dependencies = null, e.firstEffect = null, e.lastEffect = null, e.memoizedProps = null, e.memoizedState = null, e.pendingProps = null, e.return = null, e.updateQueue = null } function Pl(e) { return 5 === e.tag || 3 === e.tag || 4 === e.tag } function Ml(e) { e: { for (var t = e.return; null !== t;) { if (Pl(t)) break e; t = t.return } throw Error(ye(160)) } var n = t; switch (t = n.stateNode, n.tag) { case 5: var r = !1; break; case 3: case 4: t = t.containerInfo, r = !0; break; default: throw Error(ye(161)) }16 & n.flags && (Ot(t, ""), n.flags &= -17); e: t: for (n = e; ;) { for (; null === n.sibling;) { if (null === n.return || Pl(n.return)) { n = null; break e } n = n.return } for (n.sibling.return = n.return, n = n.sibling; 5 !== n.tag && 6 !== n.tag && 18 !== n.tag;) { if (2 & n.flags || null === n.child || 4 === n.tag) continue t; n.child.return = n, n = n.child } if (!(2 & n.flags)) { n = n.stateNode; break e } } r ? Al(e, n, t) : Dl(e, n, t) } function Al(e, t, n) { var r = e.tag, i = 5 === r || 6 === r; if (i) e = i ? e.stateNode : e.stateNode.instance, t ? 8 === n.nodeType ? n.parentNode.insertBefore(e, t) : n.insertBefore(e, t) : (8 === n.nodeType ? (t = n.parentNode).insertBefore(e, n) : (t = n).appendChild(e), null != (n = n._reactRootContainer) || null !== t.onclick || (t.onclick = Ji)); else if (4 !== r && null !== (e = e.child)) for (Al(e, t, n), e = e.sibling; null !== e;)Al(e, t, n), e = e.sibling } function Dl(e, t, n) { var r = e.tag, i = 5 === r || 6 === r; if (i) e = i ? e.stateNode : e.stateNode.instance, t ? n.insertBefore(e, t) : n.appendChild(e); else if (4 !== r && null !== (e = e.child)) for (Dl(e, t, n), e = e.sibling; null !== e;)Dl(e, t, n), e = e.sibling } function Ll(e, t) { for (var n, r, i = t, o = !1; ;) { if (!o) { o = i.return; e: for (; ;) { if (null === o) throw Error(ye(160)); switch (n = o.stateNode, o.tag) { case 5: r = !1; break e; case 3: case 4: n = n.containerInfo, r = !0; break e }o = o.return } o = !0 } if (5 === i.tag || 6 === i.tag) { e: for (var a = e, s = i, l = s; ;)if (El(a, l), null !== l.child && 4 !== l.tag) l.child.return = l, l = l.child; else { if (l === s) break e; for (; null === l.sibling;) { if (null === l.return || l.return === s) break e; l = l.return } l.sibling.return = l.return, l = l.sibling } r ? (a = n, s = i.stateNode, 8 === a.nodeType ? a.parentNode.removeChild(s) : a.removeChild(s)) : n.removeChild(i.stateNode) } else if (4 === i.tag) { if (null !== i.child) { n = i.stateNode.containerInfo, r = !0, i.child.return = i, i = i.child; continue } } else if (El(e, i), null !== i.child) { i.child.return = i, i = i.child; continue } if (i === t) break; for (; null === i.sibling;) { if (null === i.return || i.return === t) return; 4 === (i = i.return).tag && (o = !1) } i.sibling.return = i.return, i = i.sibling } } function Rl(e, t) { switch (t.tag) { case 0: case 11: case 14: case 15: case 22: var n = t.updateQueue; if (null !== (n = null !== n ? n.lastEffect : null)) { var r = n = n.next; do { 3 == (3 & r.tag) && (e = r.destroy, r.destroy = void 0, void 0 !== e && e()), r = r.next } while (r !== n) } return; case 1: case 12: case 17: return; case 5: if (null != (n = t.stateNode)) { r = t.memoizedProps; var i = null !== e ? e.memoizedProps : r; e = t.type; var o = t.updateQueue; if (t.updateQueue = null, null !== o) { for (n[uo] = r, "input" === e && "radio" === r.type && null != r.name && dt(n, r), It(e, i), t = It(e, r), i = 0; i < o.length; i += 2) { var a = o[i], s = o[i + 1]; "style" === a ? Dt(n, s) : "dangerouslySetInnerHTML" === a ? Et(n, s) : "children" === a ? Ot(n, s) : De(n, a, s, t) } switch (e) { case "input": pt(n, r); break; case "textarea": xt(n, r); break; case "select": e = n._wrapperState.wasMultiple, n._wrapperState.wasMultiple = !!r.multiple, null != (o = r.value) ? yt(n, !!r.multiple, o, !1) : e !== !!r.multiple && (null != r.defaultValue ? yt(n, !!r.multiple, r.defaultValue, !0) : yt(n, !!r.multiple, r.multiple ? [] : "", !1)) } } } return; case 6: if (null === t.stateNode) throw Error(ye(162)); return void (t.stateNode.nodeValue = t.memoizedProps); case 3: return void ((n = t.stateNode).hydrate && (n.hydrate = !1, Ln(n.containerInfo))); case 13: return null !== t.memoizedState && (Ql = ea(), Tl(t.child, !0)), void Il(t); case 19: return void Il(t); case 23: case 24: return void Tl(t, null !== t.memoizedState) }throw Error(ye(163)) } function Il(e) { var t = e.updateQueue; if (null !== t) { e.updateQueue = null; var n = e.stateNode; null === n && (n = e.stateNode = new _l), t.forEach((function (t) { var r = Ju.bind(null, e, t); n.has(t) || (n.add(t), t.then(r, r)) })) } } function jl(e, t) { return null !== e && (null === (e = e.memoizedState) || null !== e.dehydrated) && null !== (t = t.memoizedState) && null === t.dehydrated } var Fl = Math.ceil, Nl = Le.ReactCurrentDispatcher, zl = Le.ReactCurrentOwner, Bl = 0, Vl = null, Ul = null, Hl = 0, Wl = 0, Kl = wo(0), Yl = 0, Xl = null, Gl = 0, ql = 0, Jl = 0, Zl = 0, $l = null, Ql = 0, eu = 1 / 0; function tu() { eu = ea() + 500 } var nu, ru = null, iu = !1, ou = null, au = null, su = !1, lu = null, uu = 90, cu = [], fu = [], hu = null, du = 0, pu = null, vu = -1, gu = 0, mu = 0, yu = null, bu = !1; function wu() { return 0 != (48 & Bl) ? ea() : -1 !== vu ? vu : vu = ea() } function xu(e) { if (0 == (2 & (e = e.mode))) return 1; if (0 == (4 & e)) return 99 === ta() ? 1 : 2; if (0 === gu && (gu = Gl), 0 !== sa.transition) { 0 !== mu && (mu = null !== $l ? $l.pendingLanes : 0), e = gu; var t = 4186112 & ~mu; return 0 == (t &= -t) && 0 == (t = (e = 4186112 & ~e) & -e) && (t = 8192), t } return e = ta(), Zn(0 != (4 & Bl) && 98 === e ? 12 : e = function (e) { switch (e) { case 99: return 15; case 98: return 10; case 97: case 96: return 8; case 95: return 2; default: return 0 } }(e), gu) } function _u(e, t, n) { if (50 < du) throw du = 0, pu = null, Error(ye(185)); if (null === (e = Su(e, t))) return null; er(e, t, n), e === Vl && (Jl |= t, 4 === Yl && Tu(e, Hl)); var r = ta(); 1 === t ? 0 != (8 & Bl) && 0 == (48 & Bl) ? Eu(e) : (ku(e, n), 0 === Bl && (tu(), oa())) : (0 == (4 & Bl) || 98 !== r && 99 !== r || (null === hu ? hu = new Set([e]) : hu.add(e)), ku(e, n)), $l = e } function Su(e, t) { e.lanes |= t; var n = e.alternate; for (null !== n && (n.lanes |= t), n = e, e = e.return; null !== e;)e.childLanes |= t, null !== (n = e.alternate) && (n.childLanes |= t), n = e, e = e.return; return 3 === n.tag ? n.stateNode : null } function ku(e, t) { for (var n = e.callbackNode, r = e.suspendedLanes, i = e.pingedLanes, o = e.expirationTimes, a = e.pendingLanes; 0 < a;) { var s = 31 - tr(a), l = 1 << s, u = o[s]; if (-1 === u) { if (0 == (l & r) || 0 != (l & i)) { u = t, Gn(l); var c = Xn; o[s] = 10 <= c ? u + 250 : 6 <= c ? u + 5e3 : -1 } } else u <= t && (e.expiredLanes |= l); a &= ~l } if (r = qn(e, e === Vl ? Hl : 0), t = Xn, 0 === r) null !== n && (n !== Go && No(n), e.callbackNode = null, e.callbackPriority = 0); else { if (null !== n) { if (e.callbackPriority === t) return; n !== Go && No(n) } 15 === t ? (n = Eu.bind(null, e), null === Jo ? (Jo = [n], Zo = Fo(Ho, aa)) : Jo.push(n), n = Go) : 14 === t ? n = ia(99, Eu.bind(null, e)) : (n = function (e) { switch (e) { case 15: case 14: return 99; case 13: case 12: case 11: case 10: return 98; case 9: case 8: case 7: case 6: case 4: case 5: return 97; case 3: case 2: case 1: return 95; case 0: return 90; default: throw Error(ye(358, e)) } }(t), n = ia(n, Cu.bind(null, e))), e.callbackPriority = t, e.callbackNode = n } } function Cu(e) { if (vu = -1, mu = gu = 0, 0 != (48 & Bl)) throw Error(ye(327)); var t = e.callbackNode; if (Hu() && e.callbackNode !== t) return null; var n = qn(e, e === Vl ? Hl : 0); if (0 === n) return null; var r = n, i = Bl; Bl |= 16; var o = Ru(); for ((Vl !== e || Hl !== r) && (tu(), Du(e, r)); ;)try { Fu(); break } catch (t) { Lu(e, t) } if (da(), Nl.current = o, Bl = i, null !== Ul ? r = 0 : (Vl = null, Hl = 0, r = Yl), 0 != (Gl & Jl)) Du(e, 0); else if (0 !== r) { if (2 === r && (Bl |= 64, e.hydrate && (e.hydrate = !1, ro(e.containerInfo)), 0 !== (n = Jn(e)) && (r = Iu(e, n))), 1 === r) throw t = Xl, Du(e, 0), Tu(e, n), ku(e, ea()), t; switch (e.finishedWork = e.current.alternate, e.finishedLanes = n, r) { case 0: case 1: throw Error(ye(345)); case 2: case 5: Bu(e); break; case 3: if (Tu(e, n), (62914560 & n) === n && 10 < (r = Ql + 500 - ea())) { if (0 !== qn(e, 0)) break; if (((i = e.suspendedLanes) & n) !== n) { wu(), e.pingedLanes |= e.suspendedLanes & i; break } e.timeoutHandle = to(Bu.bind(null, e), r); break } Bu(e); break; case 4: if (Tu(e, n), (4186112 & n) === n) break; for (r = e.eventTimes, i = -1; 0 < n;) { var a = 31 - tr(n); o = 1 << a, (a = r[a]) > i && (i = a), n &= ~o } if (n = i, 10 < (n = (120 > (n = ea() - n) ? 120 : 480 > n ? 480 : 1080 > n ? 1080 : 1920 > n ? 1920 : 3e3 > n ? 3e3 : 4320 > n ? 4320 : 1960 * Fl(n / 1960)) - n)) { e.timeoutHandle = to(Bu.bind(null, e), n); break } Bu(e); break; default: throw Error(ye(329)) } } return ku(e, ea()), e.callbackNode === t ? Cu.bind(null, e) : null } function Tu(e, t) { for (t &= ~Zl, t &= ~Jl, e.suspendedLanes |= t, e.pingedLanes &= ~t, e = e.expirationTimes; 0 < t;) { var n = 31 - tr(t), r = 1 << n; e[n] = -1, t &= ~r } } function Eu(e) { if (0 != (48 & Bl)) throw Error(ye(327)); if (Hu(), e === Vl && 0 != (e.expiredLanes & Hl)) { var t = Hl, n = Iu(e, t); 0 != (Gl & Jl) && (n = Iu(e, t = qn(e, t))) } else n = Iu(e, t = qn(e, 0)); if (0 !== e.tag && 2 === n && (Bl |= 64, e.hydrate && (e.hydrate = !1, ro(e.containerInfo)), 0 !== (t = Jn(e)) && (n = Iu(e, t))), 1 === n) throw n = Xl, Du(e, 0), Tu(e, t), ku(e, ea()), n; return e.finishedWork = e.current.alternate, e.finishedLanes = t, Bu(e), ku(e, ea()), null } function Ou(e, t) { var n = Bl; Bl |= 1; try { return e(t) } finally { 0 === (Bl = n) && (tu(), oa()) } } function Pu(e, t) { var n = Bl; Bl &= -2, Bl |= 8; try { return e(t) } finally { 0 === (Bl = n) && (tu(), oa()) } } function Mu(e, t) { _o(Kl, Wl), Wl |= t, Gl |= t } function Au() { Wl = Kl.current, xo(Kl) } function Du(e, t) { e.finishedWork = null, e.finishedLanes = 0; var n = e.timeoutHandle; if (-1 !== n && (e.timeoutHandle = -1, no(n)), null !== Ul) for (n = Ul.return; null !== n;) { var r = n; switch (r.tag) { case 1: null != (r = r.type.childContextTypes) && Po(); break; case 3: Ka(), xo(Co), xo(ko), as(); break; case 5: Xa(r); break; case 4: Ka(); break; case 13: case 19: xo(Ga); break; case 10: pa(r); break; case 23: case 24: Au() }n = n.return } Vl = e, Ul = ec(e.current, null), Hl = Wl = Gl = t, Yl = 0, Xl = null, Zl = Jl = ql = 0 } function Lu(e, t) { for (; ;) { var n = Ul; try { if (da(), ss.current = Us, ds) { for (var r = cs.memoizedState; null !== r;) { var i = r.queue; null !== i && (i.pending = null), r = r.next } ds = !1 } if (us = 0, hs = fs = cs = null, ps = !1, zl.current = null, null === n || null === n.return) { Yl = 1, Xl = t, Ul = null; break } e: { var o = e, a = n.return, s = n, l = t; if (t = Hl, s.flags |= 2048, s.firstEffect = s.lastEffect = null, null !== l && "object" == C(l) && "function" == typeof l.then) { var u = l; if (0 == (2 & s.mode)) { var c = s.alternate; c ? (s.updateQueue = c.updateQueue, s.memoizedState = c.memoizedState, s.lanes = c.lanes) : (s.updateQueue = null, s.memoizedState = null) } var f = 0 != (1 & Ga.current), h = a; do { var d; if (d = 13 === h.tag) { var p = h.memoizedState; if (null !== p) d = null !== p.dehydrated; else { var v = h.memoizedProps; d = void 0 !== v.fallback && (!0 !== v.unstable_avoidThisFallback || !f) } } if (d) { var g = h.updateQueue; if (null === g) { var m = new Set; m.add(u), h.updateQueue = m } else g.add(u); if (0 == (2 & h.mode)) { if (h.flags |= 64, s.flags |= 16384, s.flags &= -2981, 1 === s.tag) if (null === s.alternate) s.tag = 17; else { var y = xa(-1, 1); y.tag = 2, _a(s, y) } s.lanes |= 1; break e } l = void 0, s = t; var b = o.pingCache; if (null === b ? (b = o.pingCache = new bl, l = new Set, b.set(u, l)) : void 0 === (l = b.get(u)) && (l = new Set, b.set(u, l)), !l.has(s)) { l.add(s); var w = qu.bind(null, o, u, s); u.then(w, w) } h.flags |= 4096, h.lanes = t; break e } h = h.return } while (null !== h); l = Error((ot(s.type) || "A React component") + " suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.") } 5 !== Yl && (Yl = 2), l = ml(l, s), h = a; do { switch (h.tag) { case 3: o = l, h.flags |= 4096, t &= -t, h.lanes |= t, Sa(h, wl(0, o, t)); break e; case 1: o = l; var x = h.type, _ = h.stateNode; if (0 == (64 & h.flags) && ("function" == typeof x.getDerivedStateFromError || null !== _ && "function" == typeof _.componentDidCatch && (null === au || !au.has(_)))) { h.flags |= 4096, t &= -t, h.lanes |= t, Sa(h, xl(h, o, t)); break e } }h = h.return } while (null !== h) } zu(n) } catch (e) { t = e, Ul === n && null !== n && (Ul = n = n.return); continue } break } } function Ru() { var e = Nl.current; return Nl.current = Us, null === e ? Us : e } function Iu(e, t) { var n = Bl; Bl |= 16; var r = Ru(); for (Vl === e && Hl === t || Du(e, t); ;)try { ju(); break } catch (t) { Lu(e, t) } if (da(), Bl = n, Nl.current = r, null !== Ul) throw Error(ye(261)); return Vl = null, Hl = 0, Yl } function ju() { for (; null !== Ul;)Nu(Ul) } function Fu() { for (; null !== Ul && !zo();)Nu(Ul) } function Nu(e) { var t = nu(e.alternate, e, Wl); e.memoizedProps = e.pendingProps, null === t ? zu(e) : Ul = t, zl.current = null } function zu(e) { var t = e; do { var n = t.alternate; if (e = t.return, 0 == (2048 & t.flags)) { if (null !== (n = vl(n, t, Wl))) return void (Ul = n); if (24 !== (n = t).tag && 23 !== n.tag || null === n.memoizedState || 0 != (1073741824 & Wl) || 0 == (4 & n.mode)) { for (var r = 0, i = n.child; null !== i;)r |= i.lanes | i.childLanes, i = i.sibling; n.childLanes = r } null !== e && 0 == (2048 & e.flags) && (null === e.firstEffect && (e.firstEffect = t.firstEffect), null !== t.lastEffect && (null !== e.lastEffect && (e.lastEffect.nextEffect = t.firstEffect), e.lastEffect = t.lastEffect), 1 < t.flags && (null !== e.lastEffect ? e.lastEffect.nextEffect = t : e.firstEffect = t, e.lastEffect = t)) } else { if (null !== (n = gl(t))) return n.flags &= 2047, void (Ul = n); null !== e && (e.firstEffect = e.lastEffect = null, e.flags |= 2048) } if (null !== (t = t.sibling)) return void (Ul = t); Ul = t = e } while (null !== t); 0 === Yl && (Yl = 5) } function Bu(e) { var t = ta(); return ra(99, Vu.bind(null, e, t)), null } function Vu(e, t) { do { Hu() } while (null !== lu); if (0 != (48 & Bl)) throw Error(ye(327)); var n = e.finishedWork; if (null === n) return null; if (e.finishedWork = null, e.finishedLanes = 0, n === e.current) throw Error(ye(177)); e.callbackNode = null; var r = n.lanes | n.childLanes, i = r, o = e.pendingLanes & ~i; e.pendingLanes = i, e.suspendedLanes = 0, e.pingedLanes = 0, e.expiredLanes &= i, e.mutableReadLanes &= i, e.entangledLanes &= i, i = e.entanglements; for (var a = e.eventTimes, s = e.expirationTimes; 0 < o;) { var l = 31 - tr(o), u = 1 << l; i[l] = 0, a[l] = -1, s[l] = -1, o &= ~u } if (null !== hu && 0 == (24 & r) && hu.has(e) && hu.delete(e), e === Vl && (Ul = Vl = null, Hl = 0), 1 < n.flags ? null !== n.lastEffect ? (n.lastEffect.nextEffect = n, r = n.firstEffect) : r = n : r = n.firstEffect, null !== r) { if (i = Bl, Bl |= 32, zl.current = null, Zi = ar, Ei(a = Ti())) { if ("selectionStart" in a) s = { start: a.selectionStart, end: a.selectionEnd }; else e: if (s = (s = a.ownerDocument) && s.defaultView || window, (u = s.getSelection && s.getSelection()) && 0 !== u.rangeCount) { s = u.anchorNode, o = u.anchorOffset, l = u.focusNode, u = u.focusOffset; try { s.nodeType, l.nodeType } catch (e) { s = null; break e } var c = 0, f = -1, h = -1, d = 0, p = 0, v = a, g = null; t: for (; ;) { for (var m; v !== s || 0 !== o && 3 !== v.nodeType || (f = c + o), v !== l || 0 !== u && 3 !== v.nodeType || (h = c + u), 3 === v.nodeType && (c += v.nodeValue.length), null !== (m = v.firstChild);)g = v, v = m; for (; ;) { if (v === a) break t; if (g === s && ++d === o && (f = c), g === l && ++p === u && (h = c), null !== (m = v.nextSibling)) break; g = (v = g).parentNode } v = m } s = -1 === f || -1 === h ? null : { start: f, end: h } } else s = null; s = s || { start: 0, end: 0 } } else s = null; $i = { focusedElem: a, selectionRange: s }, ar = !1, yu = null, bu = !1, ru = r; do { try { Uu() } catch (e) { if (null === ru) throw Error(ye(330)); Gu(ru, e), ru = ru.nextEffect } } while (null !== ru); yu = null, ru = r; do { try { for (a = e; null !== ru;) { var y = ru.flags; if (16 & y && Ot(ru.stateNode, ""), 128 & y) { var b = ru.alternate; if (null !== b) { var w = b.ref; null !== w && ("function" == typeof w ? w(null) : w.current = null) } } switch (1038 & y) { case 2: Ml(ru), ru.flags &= -3; break; case 6: Ml(ru), ru.flags &= -3, Rl(ru.alternate, ru); break; case 1024: ru.flags &= -1025; break; case 1028: ru.flags &= -1025, Rl(ru.alternate, ru); break; case 4: Rl(ru.alternate, ru); break; case 8: Ll(a, s = ru); var x = s.alternate; Ol(s), null !== x && Ol(x) }ru = ru.nextEffect } } catch (e) { if (null === ru) throw Error(ye(330)); Gu(ru, e), ru = ru.nextEffect } } while (null !== ru); if (w = $i, b = Ti(), y = w.focusedElem, a = w.selectionRange, b !== y && y && y.ownerDocument && Ci(y.ownerDocument.documentElement, y)) { for ((null !== a && Ei(y) && (b = a.start, void 0 === (w = a.end) && (w = b), "selectionStart" in y ? (y.selectionStart = b, y.selectionEnd = Math.min(w, y.value.length)) : (w = (b = y.ownerDocument || document) && b.defaultView || window).getSelection && (w = w.getSelection(), s = y.textContent.length, x = Math.min(a.start, s), a = void 0 === a.end ? x : Math.min(a.end, s), !w.extend && x > a && (s = a, a = x, x = s), s = ki(y, x), o = ki(y, a), s && o && (1 !== w.rangeCount || w.anchorNode !== s.node || w.anchorOffset !== s.offset || w.focusNode !== o.node || w.focusOffset !== o.offset) && ((b = b.createRange()).setStart(s.node, s.offset), w.removeAllRanges(), x > a ? (w.addRange(b), w.extend(o.node, o.offset)) : (b.setEnd(o.node, o.offset), w.addRange(b))))), b = [], w = y); w = w.parentNode;)1 === w.nodeType && b.push({ element: w, left: w.scrollLeft, top: w.scrollTop }); for ("function" == typeof y.focus && y.focus(), y = 0; y < b.length; y++)(w = b[y]).element.scrollLeft = w.left, w.element.scrollTop = w.top } ar = !!Zi, $i = Zi = null, e.current = n, ru = r; do { try { for (y = e; null !== ru;) { var _ = ru.flags; if (36 & _ && Cl(y, ru.alternate, ru), 128 & _) { b = void 0; var S = ru.ref; if (null !== S) { var k = ru.stateNode; ru.tag, b = k, "function" == typeof S ? S(b) : S.current = b } } ru = ru.nextEffect } } catch (e) { if (null === ru) throw Error(ye(330)); Gu(ru, e), ru = ru.nextEffect } } while (null !== ru); ru = null, qo(), Bl = i } else e.current = n; if (su) su = !1, lu = e, uu = t; else for (ru = r; null !== ru;)t = ru.nextEffect, ru.nextEffect = null, 8 & ru.flags && ((_ = ru).sibling = null, _.stateNode = null), ru = t; if (0 === (r = e.pendingLanes) && (au = null), 1 === r ? e === pu ? du++ : (du = 0, pu = e) : du = 0, n = n.stateNode, Io && "function" == typeof Io.onCommitFiberRoot) try { Io.onCommitFiberRoot(Ro, n, void 0, 64 == (64 & n.current.flags)) } catch (e) { } if (ku(e, ea()), iu) throw iu = !1, e = ou, ou = null, e; return 0 != (8 & Bl) || oa(), null } function Uu() { for (; null !== ru;) { var e = ru.alternate; bu || null === yu || (0 != (8 & ru.flags) ? fn(ru, yu) && (bu = !0) : 13 === ru.tag && jl(e, ru) && fn(ru, yu) && (bu = !0)); var t = ru.flags; 0 != (256 & t) && kl(e, ru), 0 == (512 & t) || su || (su = !0, ia(97, (function () { return Hu(), null }))), ru = ru.nextEffect } } function Hu() { if (90 !== uu) { var e = 97 < uu ? 97 : uu; return uu = 90, ra(e, Yu) } return !1 } function Wu(e, t) { cu.push(t, e), su || (su = !0, ia(97, (function () { return Hu(), null }))) } function Ku(e, t) { fu.push(t, e), su || (su = !0, ia(97, (function () { return Hu(), null }))) } function Yu() { if (null === lu) return !1; var e = lu; if (lu = null, 0 != (48 & Bl)) throw Error(ye(331)); var t = Bl; Bl |= 32; var n = fu; fu = []; for (var r = 0; r < n.length; r += 2) { var i = n[r], o = n[r + 1], a = i.destroy; if (i.destroy = void 0, "function" == typeof a) try { a() } catch (e) { if (null === o) throw Error(ye(330)); Gu(o, e) } } for (n = cu, cu = [], r = 0; r < n.length; r += 2) { i = n[r], o = n[r + 1]; try { var s = i.create; i.destroy = s() } catch (e) { if (null === o) throw Error(ye(330)); Gu(o, e) } } for (s = e.current.firstEffect; null !== s;)e = s.nextEffect, s.nextEffect = null, 8 & s.flags && (s.sibling = null, s.stateNode = null), s = e; return Bl = t, oa(), !0 } function Xu(e, t, n) { _a(e, t = wl(0, t = ml(n, t), 1)), t = wu(), null !== (e = Su(e, 1)) && (er(e, 1, t), ku(e, t)) } function Gu(e, t) { if (3 === e.tag) Xu(e, e, t); else for (var n = e.return; null !== n;) { if (3 === n.tag) { Xu(n, e, t); break } if (1 === n.tag) { var r = n.stateNode; if ("function" == typeof n.type.getDerivedStateFromError || "function" == typeof r.componentDidCatch && (null === au || !au.has(r))) { var i = xl(n, e = ml(t, e), 1); if (_a(n, i), i = wu(), null !== (n = Su(n, 1))) er(n, 1, i), ku(n, i); else if ("function" == typeof r.componentDidCatch && (null === au || !au.has(r))) try { r.componentDidCatch(t, e) } catch (e) { } break } } n = n.return } } function qu(e, t, n) { var r = e.pingCache; null !== r && r.delete(t), t = wu(), e.pingedLanes |= e.suspendedLanes & n, Vl === e && (Hl & n) === n && (4 === Yl || 3 === Yl && (62914560 & Hl) === Hl && 500 > ea() - Ql ? Du(e, 0) : Zl |= n), ku(e, t) } function Ju(e, t) { var n = e.stateNode; null !== n && n.delete(t), 0 == (t = 0) && (0 == (2 & (t = e.mode)) ? t = 1 : 0 == (4 & t) ? t = 99 === ta() ? 1 : 2 : (0 === gu && (gu = Gl), 0 === (t = $n(62914560 & ~gu)) && (t = 4194304))), n = wu(), null !== (e = Su(e, t)) && (er(e, t, n), ku(e, n)) } function Zu(e, t, n, r) { this.tag = e, this.key = n, this.sibling = this.child = this.return = this.stateNode = this.type = this.elementType = null, this.index = 0, this.ref = null, this.pendingProps = t, this.dependencies = this.memoizedState = this.updateQueue = this.memoizedProps = null, this.mode = r, this.flags = 0, this.lastEffect = this.firstEffect = this.nextEffect = null, this.childLanes = this.lanes = 0, this.alternate = null } function $u(e, t, n, r) { return new Zu(e, t, n, r) } function Qu(e) { return !(!(e = e.prototype) || !e.isReactComponent) } function ec(e, t) { var n = e.alternate; return null === n ? ((n = $u(e.tag, t, e.key, e.mode)).elementType = e.elementType, n.type = e.type, n.stateNode = e.stateNode, n.alternate = e, e.alternate = n) : (n.pendingProps = t, n.type = e.type, n.flags = 0, n.nextEffect = null, n.firstEffect = null, n.lastEffect = null), n.childLanes = e.childLanes, n.lanes = e.lanes, n.child = e.child, n.memoizedProps = e.memoizedProps, n.memoizedState = e.memoizedState, n.updateQueue = e.updateQueue, t = e.dependencies, n.dependencies = null === t ? null : { lanes: t.lanes, firstContext: t.firstContext }, n.sibling = e.sibling, n.index = e.index, n.ref = e.ref, n } function tc(e, t, n, r, i, o) { var a = 2; if (r = e, "function" == typeof e) Qu(e) && (a = 1); else if ("string" == typeof e) a = 5; else e: switch (e) { case je: return nc(n.children, i, o, t); case Ge: a = 8, i |= 16; break; case Fe: a = 8, i |= 1; break; case Ne: return (e = $u(12, n, t, 8 | i)).elementType = Ne, e.type = Ne, e.lanes = o, e; case Ue: return (e = $u(13, n, t, i)).type = Ue, e.elementType = Ue, e.lanes = o, e; case He: return (e = $u(19, n, t, i)).elementType = He, e.lanes = o, e; case qe: return rc(n, i, o, t); case Je: return (e = $u(24, n, t, i)).elementType = Je, e.lanes = o, e; default: if ("object" == C(e) && null !== e) switch (e.$$typeof) { case ze: a = 10; break e; case Be: a = 9; break e; case Ve: a = 11; break e; case We: a = 14; break e; case Ke: a = 16, r = null; break e; case Ye: a = 22; break e }throw Error(ye(130, null == e ? e : C(e), "")) }return (t = $u(a, n, t, i)).elementType = e, t.type = r, t.lanes = o, t } function nc(e, t, n, r) { return (e = $u(7, e, r, t)).lanes = n, e } function rc(e, t, n, r) { return (e = $u(23, e, r, t)).elementType = qe, e.lanes = n, e } function ic(e, t, n) { return (e = $u(6, e, null, t)).lanes = n, e } function oc(e, t, n) { return (t = $u(4, null !== e.children ? e.children : [], e.key, t)).lanes = n, t.stateNode = { containerInfo: e.containerInfo, pendingChildren: null, implementation: e.implementation }, t } function ac(e, t, n) { this.tag = t, this.containerInfo = e, this.finishedWork = this.pingCache = this.current = this.pendingChildren = null, this.timeoutHandle = -1, this.pendingContext = this.context = null, this.hydrate = n, this.callbackNode = null, this.callbackPriority = 0, this.eventTimes = Qn(0), this.expirationTimes = Qn(-1), this.entangledLanes = this.finishedLanes = this.mutableReadLanes = this.expiredLanes = this.pingedLanes = this.suspendedLanes = this.pendingLanes = 0, this.entanglements = Qn(0), this.mutableSourceEagerHydrationData = null } function sc(e, t, n) { var r = 3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : null; return { $$typeof: Ie, key: null == r ? null : "" + r, children: e, containerInfo: t, implementation: n } } function lc(e, t, n, r) { var i = t.current, o = wu(), a = xu(i); e: if (n) { t: { if (sn(n = n._reactInternals) !== n || 1 !== n.tag) throw Error(ye(170)); var s = n; do { switch (s.tag) { case 3: s = s.stateNode.context; break t; case 1: if (Oo(s.type)) { s = s.stateNode.__reactInternalMemoizedMergedChildContext; break t } }s = s.return } while (null !== s); throw Error(ye(171)) } if (1 === n.tag) { var l = n.type; if (Oo(l)) { n = Ao(n, l, s); break e } } n = s } else n = So; return null === t.context ? t.context = n : t.pendingContext = n, (t = xa(o, a)).payload = { element: e }, null !== (r = void 0 === r ? null : r) && (t.callback = r), _a(i, t), _u(i, a, o), a } function uc(e) { return (e = e.current).child ? (e.child.tag, e.child.stateNode) : null } function cc(e, t) { if (null !== (e = e.memoizedState) && null !== e.dehydrated) { var n = e.retryLane; e.retryLane = 0 !== n && n < t ? n : t } } function fc(e, t) { cc(e, t), (e = e.alternate) && cc(e, t) } function hc(e, t, n) { var r = null != n && null != n.hydrationOptions && n.hydrationOptions.mutableSources || null; if (n = new ac(e, t, null != n && !0 === n.hydrate), t = $u(3, null, null, 2 === t ? 7 : 1 === t ? 3 : 0), n.current = t, t.stateNode = n, ba(t), e[co] = n.current, Ui(8 === e.nodeType ? e.parentNode : e), r) for (e = 0; e < r.length; e++) { var i = (t = r[e])._getVersion; i = i(t._source), null == n.mutableSourceEagerHydrationData ? n.mutableSourceEagerHydrationData = [t, i] : n.mutableSourceEagerHydrationData.push(t, i) } this._internalRoot = n } function dc(e) { return !(!e || 1 !== e.nodeType && 9 !== e.nodeType && 11 !== e.nodeType && (8 !== e.nodeType || " react-mount-point-unstable " !== e.nodeValue)) } function pc(e, t, n, r, i) { var o = n._reactRootContainer; if (o) { var a = o._internalRoot; if ("function" == typeof i) { var s = i; i = function () { var e = uc(a); s.call(e) } } lc(t, a, e, i) } else { if (o = n._reactRootContainer = function (e, t) { if (t || (t = !(!(t = e ? 9 === e.nodeType ? e.documentElement : e.firstChild : null) || 1 !== t.nodeType || !t.hasAttribute("data-reactroot"))), !t) for (var n; n = e.lastChild;)e.removeChild(n); return new hc(e, 0, t ? { hydrate: !0 } : void 0) }(n, r), a = o._internalRoot, "function" == typeof i) { var l = i; i = function () { var e = uc(a); l.call(e) } } Pu((function () { lc(t, a, e, i) })) } return uc(a) } function vc(e, t) { var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null; if (!dc(t)) throw Error(ye(200)); return sc(e, t, null, n) } nu = function (e, t, n) { var r = t.lanes; if (null !== e) if (e.memoizedProps !== t.pendingProps || Co.current) Xs = !0; else { if (0 == (n & r)) { switch (Xs = !1, t.tag) { case 3: rl(t), is(); break; case 5: Ya(t); break; case 1: Oo(t.type) && Do(t); break; case 4: Wa(t, t.stateNode.containerInfo); break; case 10: r = t.memoizedProps.value; var i = t.type._context; _o(ua, i._currentValue), i._currentValue = r; break; case 13: if (null !== t.memoizedState) return 0 != (n & t.child.childLanes) ? ll(e, t, n) : (_o(Ga, 1 & Ga.current), null !== (t = dl(e, t, n)) ? t.sibling : null); _o(Ga, 1 & Ga.current); break; case 19: if (r = 0 != (n & t.childLanes), 0 != (64 & e.flags)) { if (r) return hl(e, t, n); t.flags |= 64 } if (null !== (i = t.memoizedState) && (i.rendering = null, i.tail = null, i.lastEffect = null), _o(Ga, Ga.current), r) break; return null; case 23: case 24: return t.lanes = 0, $s(e, t, n) }return dl(e, t, n) } Xs = 0 != (16384 & e.flags) } else Xs = !1; switch (t.lanes = 0, t.tag) { case 2: if (r = t.type, null !== e && (e.alternate = null, t.alternate = null, t.flags |= 2), e = t.pendingProps, i = Eo(t, ko.current), ga(t, n), i = ms(null, t, r, e, i, n), t.flags |= 1, "object" == C(i) && null !== i && "function" == typeof i.render && void 0 === i.$$typeof) { if (t.tag = 1, t.memoizedState = null, t.updateQueue = null, Oo(r)) { var o = !0; Do(t) } else o = !1; t.memoizedState = null !== i.state && void 0 !== i.state ? i.state : null, ba(t); var a = r.getDerivedStateFromProps; "function" == typeof a && Ea(t, r, a, e), i.updater = Oa, t.stateNode = i, i._reactInternals = t, Da(t, r, e, n), t = nl(null, t, r, !0, o, n) } else t.tag = 0, Gs(null, t, i, n), t = t.child; return t; case 16: i = t.elementType; e: { switch (null !== e && (e.alternate = null, t.alternate = null, t.flags |= 2), e = t.pendingProps, i = (o = i._init)(i._payload), t.type = i, o = t.tag = function (e) { if ("function" == typeof e) return Qu(e) ? 1 : 0; if (null != e) { if ((e = e.$$typeof) === Ve) return 11; if (e === We) return 14 } return 2 }(i), e = la(i, e), o) { case 0: t = el(null, t, i, e, n); break e; case 1: t = tl(null, t, i, e, n); break e; case 11: t = qs(null, t, i, e, n); break e; case 14: t = Js(null, t, i, la(i.type, e), r, n); break e }throw Error(ye(306, i, "")) } return t; case 0: return r = t.type, i = t.pendingProps, el(e, t, r, i = t.elementType === r ? i : la(r, i), n); case 1: return r = t.type, i = t.pendingProps, tl(e, t, r, i = t.elementType === r ? i : la(r, i), n); case 3: if (rl(t), r = t.updateQueue, null === e || null === r) throw Error(ye(282)); if (r = t.pendingProps, i = null !== (i = t.memoizedState) ? i.element : null, wa(e, t), ka(t, r, null, n), (r = t.memoizedState.element) === i) is(), t = dl(e, t, n); else { if ((o = (i = t.stateNode).hydrate) && (Za = io(t.stateNode.containerInfo.firstChild), Ja = t, o = $a = !0), o) { if (null != (e = i.mutableSourceEagerHydrationData)) for (i = 0; i < e.length; i += 2)(o = e[i])._workInProgressVersionPrimary = e[i + 1], os.push(o); for (n = Na(t, null, r, n), t.child = n; n;)n.flags = -3 & n.flags | 1024, n = n.sibling } else Gs(e, t, r, n), is(); t = t.child } return t; case 5: return Ya(t), null === e && ts(t), r = t.type, i = t.pendingProps, o = null !== e ? e.memoizedProps : null, a = i.children, eo(r, i) ? a = null : null !== o && eo(r, o) && (t.flags |= 16), Qs(e, t), Gs(e, t, a, n), t.child; case 6: return null === e && ts(t), null; case 13: return ll(e, t, n); case 4: return Wa(t, t.stateNode.containerInfo), r = t.pendingProps, null === e ? t.child = Fa(t, null, r, n) : Gs(e, t, r, n), t.child; case 11: return r = t.type, i = t.pendingProps, qs(e, t, r, i = t.elementType === r ? i : la(r, i), n); case 7: return Gs(e, t, t.pendingProps, n), t.child; case 8: case 12: return Gs(e, t, t.pendingProps.children, n), t.child; case 10: e: { r = t.type._context, i = t.pendingProps, a = t.memoizedProps, o = i.value; var s = t.type._context; if (_o(ua, s._currentValue), s._currentValue = o, null !== a) if (s = a.value, 0 == (o = wi(s, o) ? 0 : 0 | ("function" == typeof r._calculateChangedBits ? r._calculateChangedBits(s, o) : 1073741823))) { if (a.children === i.children && !Co.current) { t = dl(e, t, n); break e } } else for (null !== (s = t.child) && (s.return = t); null !== s;) { var l = s.dependencies; if (null !== l) { a = s.child; for (var u = l.firstContext; null !== u;) { if (u.context === r && 0 != (u.observedBits & o)) { 1 === s.tag && ((u = xa(-1, n & -n)).tag = 2, _a(s, u)), s.lanes |= n, null !== (u = s.alternate) && (u.lanes |= n), va(s.return, n), l.lanes |= n; break } u = u.next } } else a = 10 === s.tag && s.type === t.type ? null : s.child; if (null !== a) a.return = s; else for (a = s; null !== a;) { if (a === t) { a = null; break } if (null !== (s = a.sibling)) { s.return = a.return, a = s; break } a = a.return } s = a } Gs(e, t, i.children, n), t = t.child } return t; case 9: return i = t.type, r = (o = t.pendingProps).children, ga(t, n), r = r(i = ma(i, o.unstable_observedBits)), t.flags |= 1, Gs(e, t, r, n), t.child; case 14: return o = la(i = t.type, t.pendingProps), Js(e, t, i, o = la(i.type, o), r, n); case 15: return Zs(e, t, t.type, t.pendingProps, r, n); case 17: return r = t.type, i = t.pendingProps, i = t.elementType === r ? i : la(r, i), null !== e && (e.alternate = null, t.alternate = null, t.flags |= 2), t.tag = 1, Oo(r) ? (e = !0, Do(t)) : e = !1, ga(t, n), Ma(t, r, i), Da(t, r, i, n), nl(null, t, r, !0, e, n); case 19: return hl(e, t, n); case 23: case 24: return $s(e, t, n) }throw Error(ye(156, t.tag)) }, hc.prototype.render = function (e) { lc(e, this._internalRoot, null, null) }, hc.prototype.unmount = function () { var e = this._internalRoot, t = e.containerInfo; lc(null, e, null, (function () { t[co] = null })) }, hn = function (e) { 13 === e.tag && (_u(e, 4, wu()), fc(e, 4)) }, dn = function (e) { 13 === e.tag && (_u(e, 67108864, wu()), fc(e, 67108864)) }, pn = function (e) { if (13 === e.tag) { var t = wu(), n = xu(e); _u(e, n, t), fc(e, n) } }, vn = function (e, t) { return t() }, Ft = function (e, t, n) { switch (t) { case "input": if (pt(e, n), t = n.name, "radio" === n.type && null != t) { for (n = e; n.parentNode;)n = n.parentNode; for (n = n.querySelectorAll("input[name=" + JSON.stringify("" + t) + '][type="radio"]'), t = 0; t < n.length; t++) { var r = n[t]; if (r !== e && r.form === e.form) { var i = go(r); if (!i) throw Error(ye(90)); ut(r), pt(r, i) } } } break; case "textarea": xt(e, n); break; case "select": null != (t = n.value) && yt(e, !!n.multiple, t, !1) } }, Ht = Ou, Wt = function (e, t, n, r, i) { var o = Bl; Bl |= 4; try { return ra(98, e.bind(null, t, n, r, i)) } finally { 0 === (Bl = o) && (tu(), oa()) } }, Kt = function () { 0 == (49 & Bl) && (function () { if (null !== hu) { var e = hu; hu = null, e.forEach((function (e) { e.expiredLanes |= 24 & e.pendingLanes, ku(e, ea()) })) } oa() }(), Hu()) }, Yt = function (e, t) { var n = Bl; Bl |= 2; try { return e(t) } finally { 0 === (Bl = n) && (tu(), oa()) } }; var gc = { Events: [po, vo, go, Vt, Ut, Hu, { current: !1 }] }, mc = { findFiberByHostInstance: ho, bundleType: 0, version: "17.0.2", rendererPackageName: "react-dom" }, yc = { bundleType: mc.bundleType, version: mc.version, rendererPackageName: mc.rendererPackageName, rendererConfig: mc.rendererConfig, overrideHookState: null, overrideHookStateDeletePath: null, overrideHookStateRenamePath: null, overrideProps: null, overridePropsDeletePath: null, overridePropsRenamePath: null, setSuspenseHandler: null, scheduleUpdate: null, currentDispatcherRef: Le.ReactCurrentDispatcher, findHostInstanceByFiber: function (e) { return null === (e = cn(e)) ? null : e.stateNode }, findFiberByHostInstance: mc.findFiberByHostInstance || function () { return null }, findHostInstancesForRefresh: null, scheduleRefresh: null, scheduleRoot: null, setRefreshHandler: null, getCurrentFiber: null }; if ("undefined" != typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) { var bc = __REACT_DEVTOOLS_GLOBAL_HOOK__; if (!bc.isDisabled && bc.supportsFiber) try { Ro = bc.inject(yc), Io = bc } catch (e) { } } he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = gc, he.createPortal = vc, he.findDOMNode = function (e) { if (null == e) return null; if (1 === e.nodeType) return e; var t = e._reactInternals; if (void 0 === t) throw "function" == typeof e.render ? Error(ye(188)) : Error(ye(268, Object.keys(e))); return null === (e = cn(t)) ? null : e.stateNode }, he.flushSync = function (e, t) { var n = Bl; if (0 != (48 & n)) return e(t); Bl |= 1; try { if (e) return ra(99, e.bind(null, t)) } finally { Bl = n, oa() } }, he.hydrate = function (e, t, n) { if (!dc(t)) throw Error(ye(200)); return pc(null, e, t, !0, n) }, he.render = function (e, t, n) { if (!dc(t)) throw Error(ye(200)); return pc(null, e, t, !1, n) }, he.unmountComponentAtNode = function (e) { if (!dc(e)) throw Error(ye(40)); return !!e._reactRootContainer && (Pu((function () { pc(null, null, e, !1, (function () { e._reactRootContainer = null, e[co] = null })) })), !0) }, he.unstable_batchedUpdates = Ou, he.unstable_createPortal = function (e, t) { return vc(e, t, 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null) }, he.unstable_renderSubtreeIntoContainer = function (e, t, n, r) { if (!dc(n)) throw Error(ye(200)); if (null == e || void 0 === e._reactInternals) throw Error(ye(38)); return pc(e, t, n, !1, r) }, he.version = "17.0.2", function e() { if ("undefined" != typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ && "function" == typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE) try { __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e) } catch (e) { console.error(e) } }(), fe.exports = he; var wc = fe.exports, xc = function (e) { return function (e) { return !!e && "object" == C(e) }(e) && !function (e) { var t = Object.prototype.toString.call(e); return "[object RegExp]" === t || "[object Date]" === t || function (e) { return e.$$typeof === _c }(e) }(e) }, _c = "function" == typeof Symbol && Symbol.for ? Symbol.for("react.element") : 60103; function Sc(e, t) { return !1 !== t.clone && t.isMergeableObject(e) ? Ec(function (e) { return Array.isArray(e) ? [] : {} }(e), e, t) : e } function kc(e, t, n) { return e.concat(t).map((function (e) { return Sc(e, n) })) } function Cc(e) { return Object.keys(e).concat(function (e) { return Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols(e).filter((function (t) { return e.propertyIsEnumerable(t) })) : [] }(e)) } function Tc(e, t) { try { return t in e } catch (e) { return !1 } } function Ec(e, t, n) { (n = n || {}).arrayMerge = n.arrayMerge || kc, n.isMergeableObject = n.isMergeableObject || xc, n.cloneUnlessOtherwiseSpecified = Sc; var r = Array.isArray(t); return r === Array.isArray(e) ? r ? n.arrayMerge(e, t, n) : function (e, t, n) { var r = {}; return n.isMergeableObject(e) && Cc(e).forEach((function (t) { r[t] = Sc(e[t], n) })), Cc(t).forEach((function (i) { (function (e, t) { return Tc(e, t) && !(Object.hasOwnProperty.call(e, t) && Object.propertyIsEnumerable.call(e, t)) })(e, i) || (Tc(e, i) && n.isMergeableObject(t[i]) ? r[i] = function (e, t) { if (!t.customMerge) return Ec; var n = t.customMerge(e); return "function" == typeof n ? n : Ec }(i, n)(e[i], t[i], n) : r[i] = Sc(t[i], n)) })), r }(e, t, n) : Sc(t, n) } Ec.all = function (e, t) { if (!Array.isArray(e)) throw new Error("first argument should be an array"); return e.reduce((function (e, n) { return Ec(e, n, t) }), {}) }; var Oc = Ec; function Pc(e, t) { return void 0 === t && (t = 15), +parseFloat(Number(e).toPrecision(t)) } function Mc(e) { var t = e.toString().split(/[eE]/), n = (t[0].split(".")[1] || "").length - +(t[1] || 0); return n > 0 ? n : 0 } function Ac(e) { if (-1 === e.toString().indexOf("e")) return Number(e.toString().replace(".", "")); var t = Mc(e); return t > 0 ? Pc(Number(e) * Math.pow(10, t)) : Number(e) } function Dc(e) { jc && (e > Number.MAX_SAFE_INTEGER || e < Number.MIN_SAFE_INTEGER) && console.warn(e + " is beyond boundary when transfer to integer, the results may not be accurate") } function Lc(e, t) { var n = e[0], r = e[1], i = e.slice(2), o = t(n, r); return i.forEach((function (e) { o = t(o, e) })), o } function Rc() { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; if (e.length > 2) return Lc(e, Rc); var n = e[0], r = e[1], i = Ac(n), o = Ac(r), a = Mc(n) + Mc(r), s = i * o; return Dc(s), s / Math.pow(10, a) } function Ic() { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; if (e.length > 2) return Lc(e, Ic); var n = e[0], r = e[1], i = Ac(n), o = Ac(r); return Dc(i), Dc(o), Rc(i / o, Pc(Math.pow(10, Mc(r) - Mc(n)))) } var jc = !0, Fc = function (e, t) { var n = Math.pow(10, t), r = Ic(Math.round(Math.abs(Rc(e, n))), n); return e < 0 && 0 !== r && (r = Rc(r, -1)), r }, Nc = function (e) { void 0 === e && (e = !0), jc = e }, zc = function (e, t) { return zc = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]) }, zc(e, t) }; function Bc(e, t) { function n() { this.constructor = e } zc(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n) } var Vc, Uc = function () { return Uc = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var i in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }, Uc.apply(this, arguments) }; function Hc(e) { var t = "function" == typeof Symbol && Symbol.iterator, n = t && e[t], r = 0; if (n) return n.call(e); if (e && "number" == typeof e.length) return { next: function () { return e && r >= e.length && (e = void 0), { value: e && e[r++], done: !e } } }; throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.") } function Wc(e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, i, o = n.call(e), a = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)a.push(r.value) } catch (e) { i = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (i) throw i.error } } return a } function Kc() { for (var e = [], t = 0; t < arguments.length; t++)e = e.concat(Wc(arguments[t])); return e } function Yc(e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, i, o = n.call(e), a = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)a.push(r.value) } catch (e) { i = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (i) throw i.error } } return a } function Xc() { for (var e = [], t = 0; t < arguments.length; t++)e = e.concat(Yc(arguments[t])); return e } !function (e) { e.Fatal = "fatal", e.Error = "error", e.Warning = "warning", e.Log = "log", e.Info = "info", e.Debug = "debug", e.Critical = "critical" }(Vc || (Vc = {})); var Gc = function () { return Gc = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var i in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }, Gc.apply(this, arguments) }; function qc(e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, i, o = n.call(e), a = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)a.push(r.value) } catch (e) { i = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (i) throw i.error } } return a } function Jc() { for (var e = [], t = 0; t < arguments.length; t++)e = e.concat(qc(arguments[t])); return e } function Zc() { return "undefined" != typeof __SENTRY_NO_DEBUG__ && !__SENTRY_BROWSER_BUNDLE__ } function $c() { return !("undefined" != typeof __SENTRY_BROWSER_BUNDLE__ && __SENTRY_BROWSER_BUNDLE__) && "[object process]" === Object.prototype.toString.call("undefined" != typeof process ? process : 0) } function Qc(e, t) { return e.require(t) } var ef = {}; function tf() { return $c() ? n.g : "undefined" != typeof window ? window : "undefined" != typeof self ? self : ef } var nf = Object.prototype.toString; function rf(e) { switch (nf.call(e)) { case "[object Error]": case "[object Exception]": case "[object DOMException]": return !0; default: return pf(e, Error) } } function of(e, t) { return nf.call(e) === "[object " + t + "]" } function af(e) { return of(e, "ErrorEvent") } function sf(e) { return of(e, "DOMError") } function lf(e) { return of(e, "String") } function uf(e) { return null === e || "object" != C(e) && "function" != typeof e } function cf(e) { return of(e, "Object") } function ff(e) { return "undefined" != typeof Event && pf(e, Event) } function hf(e) { return "undefined" != typeof Element && pf(e, Element) } function df(e) { return Boolean(e && e.then && "function" == typeof e.then) } function pf(e, t) { try { return e instanceof t } catch (e) { return !1 } } function vf(e, t) { try { for (var n = e, r = [], i = 0, o = 0, a = " > ".length, s = void 0; n && i++ < 5 && !("html" === (s = gf(n, t)) || i > 1 && o + r.length * a + s.length >= 80);)r.push(s), o += s.length, n = n.parentNode; return r.reverse().join(" > ") } catch (e) { return "<unknown>" } } function gf(e, t) { var n, r, i, o, a, s = e, l = []; if (!s || !s.tagName) return ""; l.push(s.tagName.toLowerCase()); var u = t && t.length ? t.filter((function (e) { return s.getAttribute(e) })).map((function (e) { return [e, s.getAttribute(e)] })) : null; if (u && u.length) u.forEach((function (e) { l.push("[" + e[0] + '="' + e[1] + '"]') })); else if (s.id && l.push("#" + s.id), (n = s.className) && lf(n)) for (r = n.split(/\s+/), a = 0; a < r.length; a++)l.push("." + r[a]); var c = ["type", "name", "title", "alt"]; for (a = 0; a < c.length; a++)i = c[a], (o = s.getAttribute(i)) && l.push("[" + i + '="' + o + '"]'); return l.join("") } var mf = function (e, t) { return mf = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]) }, mf(e, t) }, yf = function () { return yf = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var i in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }, yf.apply(this, arguments) }; function bf(e) { var t = "function" == typeof Symbol && Symbol.iterator, n = t && e[t], r = 0; if (n) return n.call(e); if (e && "number" == typeof e.length) return { next: function () { return e && r >= e.length && (e = void 0), { value: e && e[r++], done: !e } } }; throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.") } var wf = Object.setPrototypeOf || ({ __proto__: [] } instanceof Array ? function (e, t) { return e.__proto__ = t, e } : function (e, t) { for (var n in t) Object.prototype.hasOwnProperty.call(e, n) || (e[n] = t[n]); return e }), xf = function (e) { function t(t) { var n = this.constructor, r = e.call(this, t) || this; return r.message = t, r.name = n.prototype.constructor.name, wf(r, n.prototype), r } return function (e, t) { function n() { this.constructor = e } mf(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n) }(t, e), t }(Error), _f = /^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/; function Sf(e, t) { void 0 === t && (t = !1); var n = e.host, r = e.path, i = e.pass, o = e.port, a = e.projectId; return e.protocol + "://" + e.publicKey + (t && i ? ":" + i : "") + "@" + n + (o ? ":" + o : "") + "/" + (r && r + "/") + a } function kf(e) { return "user" in e && !("publicKey" in e) && (e.publicKey = e.user), { user: e.publicKey || "", protocol: e.protocol, publicKey: e.publicKey || "", pass: e.pass || "", host: e.host, port: e.port || "", path: e.path || "", projectId: e.projectId } } function Cf(e) { var t = "string" == typeof e ? function (e) { var t = _f.exec(e); if (!t) throw new xf("Invalid Sentry Dsn: " + e); var n = function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, i, o = n.call(e), a = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)a.push(r.value) } catch (e) { i = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (i) throw i.error } } return a }(t.slice(1), 6), r = n[0], i = n[1], o = n[2], a = void 0 === o ? "" : o, s = n[3], l = n[4], u = void 0 === l ? "" : l, c = "", f = n[5], h = f.split("/"); if (h.length > 1 && (c = h.slice(0, -1).join("/"), f = h.pop()), f) { var d = f.match(/^\d+/); d && (f = d[0]) } return kf({ host: s, pass: a, path: c, projectId: f, port: u, protocol: r, publicKey: i }) }(e) : kf(e); return function (e) { if (Zc()) { var t = e.port, n = e.projectId, r = e.protocol; if (["protocol", "publicKey", "host", "projectId"].forEach((function (t) { if (!e[t]) throw new xf("Invalid Sentry Dsn: " + t + " missing") })), !n.match(/^\d+$/)) throw new xf("Invalid Sentry Dsn: Invalid projectId " + n); if (!function (e) { return "http" === e || "https" === e }(r)) throw new xf("Invalid Sentry Dsn: Invalid protocol " + r); if (t && isNaN(parseInt(t, 10))) throw new xf("Invalid Sentry Dsn: Invalid port " + t) } }(t), t } var Tf = ["fatal", "error", "warning", "log", "info", "debug", "critical"], Ef = tf(), Of = "Sentry Logger "; function Pf(e) { var t = tf(); if (!("console" in t)) return e(); var n = t.console, r = {};["debug", "info", "warn", "error", "log", "assert"].forEach((function (e) { e in t.console && n[e].__sentry_original__ && (r[e] = n[e], n[e] = n[e].__sentry_original__) })); var i = e(); return Object.keys(r).forEach((function (e) { n[e] = r[e] })), i } var Mf = function () { function e() { this._enabled = !1 } return e.prototype.disable = function () { this._enabled = !1 }, e.prototype.enable = function () { this._enabled = !0 }, e.prototype.log = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; !this._enabled || Pf((function () { Ef.console.log(Of + "[Log]: " + e.join(" ")) })) }, e.prototype.warn = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; !this._enabled || Pf((function () { Ef.console.warn(Of + "[Warn]: " + e.join(" ")) })) }, e.prototype.error = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; !this._enabled || Pf((function () { Ef.console.error(Of + "[Error]: " + e.join(" ")) })) }, e }(); Ef.__SENTRY__ = Ef.__SENTRY__ || {}; var Af = Ef.__SENTRY__.logger || (Ef.__SENTRY__.logger = new Mf); function Df(e) { if (!e.length) return []; var t = e, n = t[0].function || "", r = t[t.length - 1].function || ""; return (-1 !== n.indexOf("captureMessage") || -1 !== n.indexOf("captureException")) && (t = t.slice(1)), -1 !== r.indexOf("sentryWrapped") && (t = t.slice(0, -1)), t.slice(0, 50).map((function (e) { return yf(yf({}, e), { filename: e.filename || t[0].filename, function: e.function || "?" }) })).reverse() } var Lf = "<anonymous>"; function Rf(e) { try { return e && "function" == typeof e && e.name || Lf } catch (e) { return Lf } } function If(e, t) { return void 0 === t && (t = 0), "string" != typeof e || 0 === t || e.length <= t ? e : e.substr(0, t) + "..." } function jf(e, t) { if (!Array.isArray(e)) return ""; for (var n = [], r = 0; r < e.length; r++) { var i = e[r]; try { n.push(String(i)) } catch (e) { n.push("[value cannot be serialized]") } } return n.join(t) } function Ff(e, t) { return !!lf(e) && (function (e) { return of(e, "RegExp") }(t) ? t.test(e) : "string" == typeof t && -1 !== e.indexOf(t)) } function Nf(e, t, n) { if (t in e) { var r = e[t], i = n(r); if ("function" == typeof i) try { Bf(i, r) } catch (e) { } e[t] = i } } function zf(e, t, n) { Object.defineProperty(e, t, { value: n, writable: !0, configurable: !0 }) } function Bf(e, t) { var n = t.prototype || {}; e.prototype = t.prototype = n, zf(e, "__sentry_original__", t) } function Vf(e) { return e.__sentry_original__ } function Uf(e) { if (rf(e)) { var t = e, n = { message: t.message, name: t.name, stack: t.stack }; for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (n[r] = t[r]); return n } if (ff(e)) { var i = e, o = {}; o.type = i.type; try { o.target = hf(i.target) ? vf(i.target) : Object.prototype.toString.call(i.target) } catch (e) { o.target = "<unknown>" } try { o.currentTarget = hf(i.currentTarget) ? vf(i.currentTarget) : Object.prototype.toString.call(i.currentTarget) } catch (e) { o.currentTarget = "<unknown>" } for (var a in "undefined" != typeof CustomEvent && pf(e, CustomEvent) && (o.detail = i.detail), i) Object.prototype.hasOwnProperty.call(i, a) && (o[a] = i[a]); return o } return e } function Hf(e, t, n) { void 0 === t && (t = 3), void 0 === n && (n = 102400); var r = Yf(e, t); return function (e) { return function (e) { return ~-encodeURI(e).split(/%..|./).length }(JSON.stringify(e)) }(r) > n ? Hf(e, t - 1, n) : r } function Wf(e, t) { return "domain" === t && e && "object" == C(e) && e._events ? "[Domain]" : "domainEmitter" === t ? "[DomainEmitter]" : void 0 !== n.g && e === n.g ? "[Global]" : "undefined" != typeof window && e === window ? "[Window]" : "undefined" != typeof document && e === document ? "[Document]" : function (e) { return cf(e) && "nativeEvent" in e && "preventDefault" in e && "stopPropagation" in e }(e) ? "[SyntheticEvent]" : "number" == typeof e && e != e ? "[NaN]" : void 0 === e ? "[undefined]" : "function" == typeof e ? "[Function: " + Rf(e) + "]" : "symbol" == C(e) ? "[" + String(e) + "]" : "bigint" == typeof e ? "[BigInt: " + String(e) + "]" : e } function Kf(e, t, n, r) { if (void 0 === n && (n = 1 / 0), void 0 === r && (r = function () { var e = "function" == typeof WeakSet, t = e ? new WeakSet : []; return [function (n) { if (e) return !!t.has(n) || (t.add(n), !1); for (var r = 0; r < t.length; r++)if (t[r] === n) return !0; return t.push(n), !1 }, function (n) { if (e) t.delete(n); else for (var r = 0; r < t.length; r++)if (t[r] === n) { t.splice(r, 1); break } }] }()), 0 === n) return function (e) { if ("string" == typeof e) return e; var t = Object.prototype.toString.call(e); if ("[object Object]" === t) return "[Object]"; if ("[object Array]" === t) return "[Array]"; var n = Wf(e); return uf(n) ? n : t }(t); if (null != t && "function" == typeof t.toJSON) return t.toJSON(); var i = Wf(t, e); if (uf(i)) return i; var o = Uf(t), a = Array.isArray(t) ? [] : {}; if (r[0](t)) return "[Circular ~]"; for (var s in o) !Object.prototype.hasOwnProperty.call(o, s) || (a[s] = Kf(s, o[s], n - 1, r)); return r[1](t), a } function Yf(e, t) { try { return JSON.parse(JSON.stringify(e, (function (e, n) { return Kf(e, n, t) }))) } catch (e) { return "**non-serializable**" } } function Xf(e, t) { void 0 === t && (t = 40); var n = Object.keys(Uf(e)); if (n.sort(), !n.length) return "[object has no keys]"; if (n[0].length >= t) return If(n[0], t); for (var r = n.length; r > 0; r--) { var i = n.slice(0, r).join(", "); if (!(i.length > t)) return r === n.length ? i : If(i, t) } return "" } function Gf(e) { var t, n; if (cf(e)) { var r = e, i = {}; try { for (var o = bf(Object.keys(r)), a = o.next(); !a.done; a = o.next()) { var s = a.value; void 0 !== r[s] && (i[s] = Gf(r[s])) } } catch (e) { t = { error: e } } finally { try { a && !a.done && (n = o.return) && n.call(o) } finally { if (t) throw t.error } } return i } return Array.isArray(e) ? e.map(Gf) : e } function qf() { if (!("fetch" in tf())) return !1; try { return new Headers, new Request(""), new Response, !0 } catch (e) { return !1 } } function Jf(e) { return e && /^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString()) } function Zf() { if (!qf()) return !1; try { return new Request("_", { referrerPolicy: "origin" }), !0 } catch (e) { return !1 } } var $f, Qf, eh, th = tf(), nh = {}, rh = {}; function ih(e, t) { nh[e] = nh[e] || [], nh[e].push(t), function (e) { if (!rh[e]) switch (rh[e] = !0, e) { case "console": "console" in th && ["debug", "info", "warn", "error", "log", "assert"].forEach((function (e) { e in th.console && Nf(th.console, e, (function (t) { return function () { for (var n = [], r = 0; r < arguments.length; r++)n[r] = arguments[r]; oh("console", { args: n, level: e }), t && t.apply(th.console, n) } })) })); break; case "dom": !function () { if ("document" in th) { var e = oh.bind(null, "dom"), t = lh(e, !0); th.document.addEventListener("click", t, !1), th.document.addEventListener("keypress", t, !1), ["EventTarget", "Node"].forEach((function (t) { var n = th[t] && th[t].prototype; !n || !n.hasOwnProperty || !n.hasOwnProperty("addEventListener") || (Nf(n, "addEventListener", (function (t) { return function (n, r, i) { if ("click" === n || "keypress" == n) try { var o = this.__sentry_instrumentation_handlers__ = this.__sentry_instrumentation_handlers__ || {}, a = o[n] = o[n] || { refCount: 0 }; if (!a.handler) { var s = lh(e); a.handler = s, t.call(this, n, s, i) } a.refCount += 1 } catch (e) { } return t.call(this, n, r, i) } })), Nf(n, "removeEventListener", (function (e) { return function (t, n, r) { if ("click" === t || "keypress" == t) try { var i = this.__sentry_instrumentation_handlers__ || {}, o = i[t]; o && (o.refCount -= 1, o.refCount <= 0 && (e.call(this, t, o.handler, r), o.handler = void 0, delete i[t]), 0 === Object.keys(i).length && delete this.__sentry_instrumentation_handlers__) } catch (e) { } return e.call(this, t, n, r) } }))) })) } }(); break; case "xhr": !function () { if ("XMLHttpRequest" in th) { var e = XMLHttpRequest.prototype; Nf(e, "open", (function (e) { return function () { for (var t = [], n = 0; n < arguments.length; n++)t[n] = arguments[n]; var r = this, i = t[1], o = r.__sentry_xhr__ = { method: lf(t[0]) ? t[0].toUpperCase() : t[0], url: t[1] }; lf(i) && "POST" === o.method && i.match(/sentry_key/) && (r.__sentry_own_request__ = !0); var a = function () { if (4 === r.readyState) { try { o.status_code = r.status } catch (e) { } oh("xhr", { args: t, endTimestamp: Date.now(), startTimestamp: Date.now(), xhr: r }) } }; return "onreadystatechange" in r && "function" == typeof r.onreadystatechange ? Nf(r, "onreadystatechange", (function (e) { return function () { for (var t = [], n = 0; n < arguments.length; n++)t[n] = arguments[n]; return a(), e.apply(r, t) } })) : r.addEventListener("readystatechange", a), e.apply(r, t) } })), Nf(e, "send", (function (e) { return function () { for (var t = [], n = 0; n < arguments.length; n++)t[n] = arguments[n]; return this.__sentry_xhr__ && void 0 !== t[0] && (this.__sentry_xhr__.body = t[0]), oh("xhr", { args: t, startTimestamp: Date.now(), xhr: this }), e.apply(this, t) } })) } }(); break; case "fetch": !function () { if (!qf()) return !1; var e = tf(); if (Jf(e.fetch)) return !0; var t = !1, n = e.document; if (n && "function" == typeof n.createElement) try { var r = n.createElement("iframe"); r.hidden = !0, n.head.appendChild(r), r.contentWindow && r.contentWindow.fetch && (t = Jf(r.contentWindow.fetch)), n.head.removeChild(r) } catch (e) { Zc() && Af.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ", e) } return t }() || Nf(th, "fetch", (function (e) { return function () { for (var t = [], n = 0; n < arguments.length; n++)t[n] = arguments[n]; var r = { args: t, fetchData: { method: ah(t), url: sh(t) }, startTimestamp: Date.now() }; return oh("fetch", yf({}, r)), e.apply(th, t).then((function (e) { return oh("fetch", yf(yf({}, r), { endTimestamp: Date.now(), response: e })), e }), (function (e) { throw oh("fetch", yf(yf({}, r), { endTimestamp: Date.now(), error: e })), e })) } })); break; case "history": !function () { if (function () { var e = tf(), t = e.chrome, n = t && t.app && t.app.runtime, r = "history" in e && !!e.history.pushState && !!e.history.replaceState; return !n && r }()) { var e = th.onpopstate; th.onpopstate = function () { for (var t = [], n = 0; n < arguments.length; n++)t[n] = arguments[n]; var r = th.location.href, i = $f; if ($f = r, oh("history", { from: i, to: r }), e) try { return e.apply(this, t) } catch (e) { } }, Nf(th.history, "pushState", t), Nf(th.history, "replaceState", t) } function t(e) { return function () { for (var t = [], n = 0; n < arguments.length; n++)t[n] = arguments[n]; var r = t.length > 2 ? t[2] : void 0; if (r) { var i = $f, o = String(r); $f = o, oh("history", { from: i, to: o }) } return e.apply(this, t) } } }(); break; case "error": uh = th.onerror, th.onerror = function (e, t, n, r, i) { return oh("error", { column: r, error: i, line: n, msg: e, url: t }), !!uh && uh.apply(this, arguments) }; break; case "unhandledrejection": ch = th.onunhandledrejection, th.onunhandledrejection = function (e) { return oh("unhandledrejection", e), !ch || ch.apply(this, arguments) }; break; default: Af.warn("unknown instrumentation type:", e) } }(e) } function oh(e, t) { var n, r; if (e && nh[e]) try { for (var i = bf(nh[e] || []), o = i.next(); !o.done; o = i.next()) { var a = o.value; try { a(t) } catch (t) { Zc() && Af.error("Error while triggering instrumentation handler.\nType: " + e + "\nName: " + Rf(a) + "\nError: " + t) } } } catch (e) { n = { error: e } } finally { try { o && !o.done && (r = i.return) && r.call(i) } finally { if (n) throw n.error } } } function ah(e) { return void 0 === e && (e = []), "Request" in th && pf(e[0], Request) && e[0].method ? String(e[0].method).toUpperCase() : e[1] && e[1].method ? String(e[1].method).toUpperCase() : "GET" } function sh(e) { return void 0 === e && (e = []), "string" == typeof e[0] ? e[0] : "Request" in th && pf(e[0], Request) ? e[0].url : String(e[0]) } function lh(e, t) { return void 0 === t && (t = !1), function (n) { if (n && eh !== n && !function (e) { if ("keypress" !== e.type) return !1; try { var t = e.target; if (!t || !t.tagName) return !0; if ("INPUT" === t.tagName || "TEXTAREA" === t.tagName || t.isContentEditable) return !1 } catch (e) { } return !0 }(n)) { var r = "keypress" === n.type ? "input" : n.type; (void 0 === Qf || function (e, t) { if (!e || e.type !== t.type) return !0; try { if (e.target !== t.target) return !0 } catch (e) { } return !1 }(eh, n)) && (e({ event: n, name: r, global: t }), eh = n), clearTimeout(Qf), Qf = th.setTimeout((function () { Qf = void 0 }), 1e3) } } } var uh = null, ch = null; function fh() { var e = tf(), t = e.crypto || e.msCrypto; if (void 0 !== t && t.getRandomValues) { var n = new Uint16Array(8); t.getRandomValues(n), n[3] = 4095 & n[3] | 16384, n[4] = 16383 & n[4] | 32768; var r = function (e) { for (var t = e.toString(16); t.length < 4;)t = "0" + t; return t }; return r(n[0]) + r(n[1]) + r(n[2]) + r(n[3]) + r(n[4]) + r(n[5]) + r(n[6]) + r(n[7]) } return "xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g, (function (e) { var t = 16 * Math.random() | 0; return ("x" === e ? t : 3 & t | 8).toString(16) })) } function hh(e) { if (!e) return {}; var t = e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/); if (!t) return {}; var n = t[6] || "", r = t[8] || ""; return { host: t[4], path: t[5], protocol: t[2], relative: t[5] + n + r } } function dh(e) { return e.exception && e.exception.values ? e.exception.values[0] : void 0 } function ph(e) { var t = e.message, n = e.event_id; if (t) return t; var r = dh(e); return r ? r.type && r.value ? r.type + ": " + r.value : r.type || r.value || n || "<unknown>" : n || "<unknown>" } function vh(e, t, n) { var r = e.exception = e.exception || {}, i = r.values = r.values || [], o = i[0] = i[0] || {}; o.value || (o.value = t || ""), o.type || (o.type = n || "Error") } function gh(e, t) { var n = dh(e); if (n) { var r = n.mechanism; if (n.mechanism = yf(yf(yf({}, { type: "generic", handled: !0 }), r), t), t && "data" in t) { var i = yf(yf({}, r && r.data), t.data); n.mechanism.data = i } } } function mh(e) { if (e && e.__sentry_captured__) return !0; try { zf(e, "__sentry_captured__", !0) } catch (e) { } return !1 } function yh(e) { return new wh((function (t) { t(e) })) } function bh(e) { return new wh((function (t, n) { n(e) })) } var wh = function () { function e(e) { var t = this; this._state = 0, this._handlers = [], this._resolve = function (e) { t._setResult(1, e) }, this._reject = function (e) { t._setResult(2, e) }, this._setResult = function (e, n) { if (0 === t._state) { if (df(n)) return void n.then(t._resolve, t._reject); t._state = e, t._value = n, t._executeHandlers() } }, this._executeHandlers = function () { if (0 !== t._state) { var e = t._handlers.slice(); t._handlers = [], e.forEach((function (e) { e[0] || (1 === t._state && e[1](t._value), 2 === t._state && e[2](t._value), e[0] = !0) })) } }; try { e(this._resolve, this._reject) } catch (e) { this._reject(e) } } return e.prototype.then = function (t, n) { var r = this; return new e((function (e, i) { r._handlers.push([!1, function (n) { if (t) try { e(t(n)) } catch (e) { i(e) } else e(n) }, function (t) { if (n) try { e(n(t)) } catch (e) { i(e) } else i(t) }]), r._executeHandlers() })) }, e.prototype.catch = function (e) { return this.then((function (e) { return e }), e) }, e.prototype.finally = function (t) { var n = this; return new e((function (e, r) { var i, o; return n.then((function (e) { o = !1, i = e, t && t() }), (function (e) { o = !0, i = e, t && t() })).then((function () { o ? r(i) : e(i) })) })) }, e }(); function xh(e) { return "warn" === e ? Vc.Warning : function (e) { return -1 !== Tf.indexOf(e) }(e) ? e : Vc.Log } var _h = { nowSeconds: function () { return Date.now() / 1e3 } }, Sh = $c() ? function () { try { return Qc(e, "perf_hooks").performance } catch (e) { return } }() : function () { var e = tf().performance; if (e && e.now) return { now: function () { return e.now() }, timeOrigin: Date.now() - e.now() } }(), kh = void 0 === Sh ? _h : { nowSeconds: function () { return (Sh.timeOrigin + Sh.now()) / 1e3 } }, Ch = _h.nowSeconds.bind(_h), Th = kh.nowSeconds.bind(kh), Eh = Th, Oh = function () { var e = tf().performance; if (e && e.now) { var t = 36e5, n = e.now(), r = Date.now(), i = e.timeOrigin ? Math.abs(e.timeOrigin + n - r) : t, o = i < t, a = e.timing && e.timing.navigationStart, s = "number" == typeof a ? Math.abs(a + n - r) : t; return o || s < t ? i <= s ? e.timeOrigin : a : r } }(), Ph = function () { function e() { this._notifyingListeners = !1, this._scopeListeners = [], this._eventProcessors = [], this._breadcrumbs = [], this._user = {}, this._tags = {}, this._extra = {}, this._contexts = {}, this._sdkProcessingMetadata = {} } return e.clone = function (t) { var n = new e; return t && (n._breadcrumbs = Jc(t._breadcrumbs), n._tags = Gc({}, t._tags), n._extra = Gc({}, t._extra), n._contexts = Gc({}, t._contexts), n._user = t._user, n._level = t._level, n._span = t._span, n._session = t._session, n._transactionName = t._transactionName, n._fingerprint = t._fingerprint, n._eventProcessors = Jc(t._eventProcessors), n._requestSession = t._requestSession), n }, e.prototype.addScopeListener = function (e) { this._scopeListeners.push(e) }, e.prototype.addEventProcessor = function (e) { return this._eventProcessors.push(e), this }, e.prototype.setUser = function (e) { return this._user = e || {}, this._session && this._session.update({ user: e }), this._notifyScopeListeners(), this }, e.prototype.getUser = function () { return this._user }, e.prototype.getRequestSession = function () { return this._requestSession }, e.prototype.setRequestSession = function (e) { return this._requestSession = e, this }, e.prototype.setTags = function (e) { return this._tags = Gc(Gc({}, this._tags), e), this._notifyScopeListeners(), this }, e.prototype.setTag = function (e, t) { var n; return this._tags = Gc(Gc({}, this._tags), ((n = {})[e] = t, n)), this._notifyScopeListeners(), this }, e.prototype.setExtras = function (e) { return this._extra = Gc(Gc({}, this._extra), e), this._notifyScopeListeners(), this }, e.prototype.setExtra = function (e, t) { var n; return this._extra = Gc(Gc({}, this._extra), ((n = {})[e] = t, n)), this._notifyScopeListeners(), this }, e.prototype.setFingerprint = function (e) { return this._fingerprint = e, this._notifyScopeListeners(), this }, e.prototype.setLevel = function (e) { return this._level = e, this._notifyScopeListeners(), this }, e.prototype.setTransactionName = function (e) { return this._transactionName = e, this._notifyScopeListeners(), this }, e.prototype.setTransaction = function (e) { return this.setTransactionName(e) }, e.prototype.setContext = function (e, t) { var n; return null === t ? delete this._contexts[e] : this._contexts = Gc(Gc({}, this._contexts), ((n = {})[e] = t, n)), this._notifyScopeListeners(), this }, e.prototype.setSpan = function (e) { return this._span = e, this._notifyScopeListeners(), this }, e.prototype.getSpan = function () { return this._span }, e.prototype.getTransaction = function () { var e = this.getSpan(); return e && e.transaction }, e.prototype.setSession = function (e) { return e ? this._session = e : delete this._session, this._notifyScopeListeners(), this }, e.prototype.getSession = function () { return this._session }, e.prototype.update = function (t) { if (!t) return this; if ("function" == typeof t) { var n = t(this); return n instanceof e ? n : this } return t instanceof e ? (this._tags = Gc(Gc({}, this._tags), t._tags), this._extra = Gc(Gc({}, this._extra), t._extra), this._contexts = Gc(Gc({}, this._contexts), t._contexts), t._user && Object.keys(t._user).length && (this._user = t._user), t._level && (this._level = t._level), t._fingerprint && (this._fingerprint = t._fingerprint), t._requestSession && (this._requestSession = t._requestSession)) : cf(t) && (this._tags = Gc(Gc({}, this._tags), t.tags), this._extra = Gc(Gc({}, this._extra), t.extra), this._contexts = Gc(Gc({}, this._contexts), t.contexts), t.user && (this._user = t.user), t.level && (this._level = t.level), t.fingerprint && (this._fingerprint = t.fingerprint), t.requestSession && (this._requestSession = t.requestSession)), this }, e.prototype.clear = function () { return this._breadcrumbs = [], this._tags = {}, this._extra = {}, this._user = {}, this._contexts = {}, this._level = void 0, this._transactionName = void 0, this._fingerprint = void 0, this._requestSession = void 0, this._span = void 0, this._session = void 0, this._notifyScopeListeners(), this }, e.prototype.addBreadcrumb = function (e, t) { var n = "number" == typeof t ? Math.min(t, 100) : 100; if (n <= 0) return this; var r = Gc({ timestamp: Ch() }, e); return this._breadcrumbs = Jc(this._breadcrumbs, [r]).slice(-n), this._notifyScopeListeners(), this }, e.prototype.clearBreadcrumbs = function () { return this._breadcrumbs = [], this._notifyScopeListeners(), this }, e.prototype.applyToEvent = function (e, t) { if (this._extra && Object.keys(this._extra).length && (e.extra = Gc(Gc({}, this._extra), e.extra)), this._tags && Object.keys(this._tags).length && (e.tags = Gc(Gc({}, this._tags), e.tags)), this._user && Object.keys(this._user).length && (e.user = Gc(Gc({}, this._user), e.user)), this._contexts && Object.keys(this._contexts).length && (e.contexts = Gc(Gc({}, this._contexts), e.contexts)), this._level && (e.level = this._level), this._transactionName && (e.transaction = this._transactionName), this._span) { e.contexts = Gc({ trace: this._span.getTraceContext() }, e.contexts); var n = this._span.transaction && this._span.transaction.name; n && (e.tags = Gc({ transaction: n }, e.tags)) } return this._applyFingerprint(e), e.breadcrumbs = Jc(e.breadcrumbs || [], this._breadcrumbs), e.breadcrumbs = e.breadcrumbs.length > 0 ? e.breadcrumbs : void 0, e.sdkProcessingMetadata = this._sdkProcessingMetadata, this._notifyEventProcessors(Jc(Mh(), this._eventProcessors), e, t) }, e.prototype.setSDKProcessingMetadata = function (e) { return this._sdkProcessingMetadata = Gc(Gc({}, this._sdkProcessingMetadata), e), this }, e.prototype._notifyEventProcessors = function (e, t, n, r) { var i = this; return void 0 === r && (r = 0), new wh((function (o, a) { var s = e[r]; if (null === t || "function" != typeof s) o(t); else { var l = s(Gc({}, t), n); df(l) ? l.then((function (t) { return i._notifyEventProcessors(e, t, n, r + 1).then(o) })).then(null, a) : i._notifyEventProcessors(e, l, n, r + 1).then(o).then(null, a) } })) }, e.prototype._notifyScopeListeners = function () { var e = this; this._notifyingListeners || (this._notifyingListeners = !0, this._scopeListeners.forEach((function (t) { t(e) })), this._notifyingListeners = !1) }, e.prototype._applyFingerprint = function (e) { e.fingerprint = e.fingerprint ? Array.isArray(e.fingerprint) ? e.fingerprint : [e.fingerprint] : [], this._fingerprint && (e.fingerprint = e.fingerprint.concat(this._fingerprint)), e.fingerprint && !e.fingerprint.length && delete e.fingerprint }, e }(); function Mh() { var e = tf(); return e.__SENTRY__ = e.__SENTRY__ || {}, e.__SENTRY__.globalEventProcessors = e.__SENTRY__.globalEventProcessors || [], e.__SENTRY__.globalEventProcessors } function Ah(e) { Mh().push(e) } var Dh = function () { function e(e) { this.errors = 0, this.sid = fh(), this.duration = 0, this.status = "ok", this.init = !0, this.ignoreDuration = !1; var t = Th(); this.timestamp = t, this.started = t, e && this.update(e) } return e.prototype.update = function (e) { if (void 0 === e && (e = {}), e.user && (!this.ipAddress && e.user.ip_address && (this.ipAddress = e.user.ip_address), !this.did && !e.did && (this.did = e.user.id || e.user.email || e.user.username)), this.timestamp = e.timestamp || Th(), e.ignoreDuration && (this.ignoreDuration = e.ignoreDuration), e.sid && (this.sid = 32 === e.sid.length ? e.sid : fh()), void 0 !== e.init && (this.init = e.init), !this.did && e.did && (this.did = "" + e.did), "number" == typeof e.started && (this.started = e.started), this.ignoreDuration) this.duration = void 0; else if ("number" == typeof e.duration) this.duration = e.duration; else { var t = this.timestamp - this.started; this.duration = t >= 0 ? t : 0 } e.release && (this.release = e.release), e.environment && (this.environment = e.environment), !this.ipAddress && e.ipAddress && (this.ipAddress = e.ipAddress), !this.userAgent && e.userAgent && (this.userAgent = e.userAgent), "number" == typeof e.errors && (this.errors = e.errors), e.status && (this.status = e.status) }, e.prototype.close = function (e) { e ? this.update({ status: e }) : "ok" === this.status ? this.update({ status: "exited" }) : this.update() }, e.prototype.toJSON = function () { return Gf({ sid: "" + this.sid, init: this.init, started: new Date(1e3 * this.started).toISOString(), timestamp: new Date(1e3 * this.timestamp).toISOString(), status: this.status, errors: this.errors, did: "number" == typeof this.did || "string" == typeof this.did ? "" + this.did : void 0, duration: this.duration, attrs: { release: this.release, environment: this.environment, ip_address: this.ipAddress, user_agent: this.userAgent } }) }, e }(), Lh = function () { function e(e, t, n) { void 0 === t && (t = new Ph), void 0 === n && (n = 4), this._version = n, this._stack = [{}], this.getStackTop().scope = t, e && this.bindClient(e) } return e.prototype.isOlderThan = function (e) { return this._version < e }, e.prototype.bindClient = function (e) { this.getStackTop().client = e, e && e.setupIntegrations && e.setupIntegrations() }, e.prototype.pushScope = function () { var e = Ph.clone(this.getScope()); return this.getStack().push({ client: this.getClient(), scope: e }), e }, e.prototype.popScope = function () { return !(this.getStack().length <= 1 || !this.getStack().pop()) }, e.prototype.withScope = function (e) { var t = this.pushScope(); try { e(t) } finally { this.popScope() } }, e.prototype.getClient = function () { return this.getStackTop().client }, e.prototype.getScope = function () { return this.getStackTop().scope }, e.prototype.getStack = function () { return this._stack }, e.prototype.getStackTop = function () { return this._stack[this._stack.length - 1] }, e.prototype.captureException = function (e, t) { var n = this._lastEventId = fh(), r = t; if (!t) { var i = void 0; try { throw new Error("Sentry syntheticException") } catch (e) { i = e } r = { originalException: e, syntheticException: i } } return this._invokeClient("captureException", e, Gc(Gc({}, r), { event_id: n })), n }, e.prototype.captureMessage = function (e, t, n) { var r = this._lastEventId = fh(), i = n; if (!n) { var o = void 0; try { throw new Error(e) } catch (e) { o = e } i = { originalException: e, syntheticException: o } } return this._invokeClient("captureMessage", e, t, Gc(Gc({}, i), { event_id: r })), r }, e.prototype.captureEvent = function (e, t) { var n = fh(); return "transaction" !== e.type && (this._lastEventId = n), this._invokeClient("captureEvent", e, Gc(Gc({}, t), { event_id: n })), n }, e.prototype.lastEventId = function () { return this._lastEventId }, e.prototype.addBreadcrumb = function (e, t) { var n = this.getStackTop(), r = n.scope, i = n.client; if (r && i) { var o = i.getOptions && i.getOptions() || {}, a = o.beforeBreadcrumb, s = void 0 === a ? null : a, l = o.maxBreadcrumbs, u = void 0 === l ? 100 : l; if (!(u <= 0)) { var c = Ch(), f = Gc({ timestamp: c }, e), h = s ? Pf((function () { return s(f, t) })) : f; null !== h && r.addBreadcrumb(h, u) } } }, e.prototype.setUser = function (e) { var t = this.getScope(); t && t.setUser(e) }, e.prototype.setTags = function (e) { var t = this.getScope(); t && t.setTags(e) }, e.prototype.setExtras = function (e) { var t = this.getScope(); t && t.setExtras(e) }, e.prototype.setTag = function (e, t) { var n = this.getScope(); n && n.setTag(e, t) }, e.prototype.setExtra = function (e, t) { var n = this.getScope(); n && n.setExtra(e, t) }, e.prototype.setContext = function (e, t) { var n = this.getScope(); n && n.setContext(e, t) }, e.prototype.configureScope = function (e) { var t = this.getStackTop(), n = t.scope, r = t.client; n && r && e(n) }, e.prototype.run = function (e) { var t = Ih(this); try { e(this) } finally { Ih(t) } }, e.prototype.getIntegration = function (e) { var t = this.getClient(); if (!t) return null; try { return t.getIntegration(e) } catch (t) { return Af.warn("Cannot retrieve integration " + e.id + " from the current Hub"), null } }, e.prototype.startSpan = function (e) { return this._callExtensionMethod("startSpan", e) }, e.prototype.startTransaction = function (e, t) { return this._callExtensionMethod("startTransaction", e, t) }, e.prototype.traceHeaders = function () { return this._callExtensionMethod("traceHeaders") }, e.prototype.captureSession = function (e) { if (void 0 === e && (e = !1), e) return this.endSession(); this._sendSessionUpdate() }, e.prototype.endSession = function () { var e = this.getStackTop(), t = e && e.scope, n = t && t.getSession(); n && n.close(), this._sendSessionUpdate(), t && t.setSession() }, e.prototype.startSession = function (e) { var t = this.getStackTop(), n = t.scope, r = t.client, i = r && r.getOptions() || {}, o = i.release, a = i.environment, s = (tf().navigator || {}).userAgent, l = new Dh(Gc(Gc(Gc({ release: o, environment: a }, n && { user: n.getUser() }), s && { userAgent: s }), e)); if (n) { var u = n.getSession && n.getSession(); u && "ok" === u.status && u.update({ status: "exited" }), this.endSession(), n.setSession(l) } return l }, e.prototype._sendSessionUpdate = function () { var e = this.getStackTop(), t = e.scope, n = e.client; if (t) { var r = t.getSession && t.getSession(); r && n && n.captureSession && n.captureSession(r) } }, e.prototype._invokeClient = function (e) { for (var t, n = [], r = 1; r < arguments.length; r++)n[r - 1] = arguments[r]; var i = this.getStackTop(), o = i.scope, a = i.client; a && a[e] && (t = a)[e].apply(t, Jc(n, [o])) }, e.prototype._callExtensionMethod = function (e) { for (var t = [], n = 1; n < arguments.length; n++)t[n - 1] = arguments[n]; var r = Rh(), i = r.__SENTRY__; if (i && i.extensions && "function" == typeof i.extensions[e]) return i.extensions[e].apply(this, t); Af.warn("Extension method " + e + " couldn't be found, doing nothing.") }, e }(); function Rh() { var e = tf(); return e.__SENTRY__ = e.__SENTRY__ || { extensions: {}, hub: void 0 }, e } function Ih(e) { var t = Rh(), n = Nh(t); return zh(t, e), n } function jh() { var e = Rh(); return (!Fh(e) || Nh(e).isOlderThan(4)) && zh(e, new Lh), $c() ? function (e) { try { var t = Rh().__SENTRY__, n = t && t.extensions && t.extensions.domain && t.extensions.domain.active; if (!n) return Nh(e); if (!Fh(n) || Nh(n).isOlderThan(4)) { var r = Nh(e).getStackTop(); zh(n, new Lh(r.client, Ph.clone(r.scope))) } return Nh(n) } catch (t) { return Nh(e) } }(e) : Nh(e) } function Fh(e) { return !!(e && e.__SENTRY__ && e.__SENTRY__.hub) } function Nh(e) { return e && e.__SENTRY__ && e.__SENTRY__.hub || (e.__SENTRY__ = e.__SENTRY__ || {}, e.__SENTRY__.hub = new Lh), e.__SENTRY__.hub } function zh(e, t) { return !!e && (e.__SENTRY__ = e.__SENTRY__ || {}, e.__SENTRY__.hub = t, !0) } function Bh(e) { for (var t = [], n = 1; n < arguments.length; n++)t[n - 1] = arguments[n]; var r = jh(); if (r && r[e]) return r[e].apply(r, Xc(t)); throw new Error("No hub defined or " + e + " was not found on the hub, please open a bug report.") } function Vh(e, t) { var n; try { throw new Error("Sentry syntheticException") } catch (e) { n = e } return Bh("captureException", e, { captureContext: t, originalException: e, syntheticException: n }) } function Uh(e) { Bh("withScope", e) } function Hh(e) { var t = e.protocol ? e.protocol + ":" : "", n = e.port ? ":" + e.port : ""; return t + "//" + e.host + n + (e.path ? "/" + e.path : "") + "/api/" } function Wh(e, t) { return "" + Hh(e) + e.projectId + "/" + t + "/" } function Kh(e) { return function (e) { return Object.keys(e).map((function (t) { return encodeURIComponent(t) + "=" + encodeURIComponent(e[t]) })).join("&") }({ sentry_key: e.publicKey, sentry_version: "7" }) } function Yh(e) { return function (e) { return Wh(e, "store") }(e) + "?" + Kh(e) } function Xh(e, t) { return t || function (e) { return Wh(e, "envelope") }(e) + "?" + Kh(e) } var Gh = function () { return Gh = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var i in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }, Gh.apply(this, arguments) }; function qh(e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, i, o = n.call(e), a = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)a.push(r.value) } catch (e) { i = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (i) throw i.error } } return a } function Jh() { for (var e = [], t = 0; t < arguments.length; t++)e = e.concat(qh(arguments[t])); return e } var Zh = []; function $h(e) { return e.reduce((function (e, t) { return e.every((function (e) { return t.name !== e.name })) && e.push(t), e }), []) } var Qh = "Not capturing exception because it's already been captured.", ed = function () { function e(e, t) { this._integrations = {}, this._numProcessing = 0, this._backend = new e(t), this._options = t, t.dsn && (this._dsn = Cf(t.dsn)) } return e.prototype.captureException = function (e, t, n) { var r = this; if (!mh(e)) { var i = t && t.event_id; return this._process(this._getBackend().eventFromException(e, t).then((function (e) { return r._captureEvent(e, t, n) })).then((function (e) { i = e }))), i } Af.log(Qh) }, e.prototype.captureMessage = function (e, t, n, r) { var i = this, o = n && n.event_id, a = uf(e) ? this._getBackend().eventFromMessage(String(e), t, n) : this._getBackend().eventFromException(e, n); return this._process(a.then((function (e) { return i._captureEvent(e, n, r) })).then((function (e) { o = e }))), o }, e.prototype.captureEvent = function (e, t, n) { if (!(t && t.originalException && mh(t.originalException))) { var r = t && t.event_id; return this._process(this._captureEvent(e, t, n).then((function (e) { r = e }))), r } Af.log(Qh) }, e.prototype.captureSession = function (e) { this._isEnabled() ? "string" != typeof e.release ? Zc() && Af.warn("Discarded session because of missing or non-string release") : (this._sendSession(e), e.update({ init: !1 })) : Zc() && Af.warn("SDK not enabled, will not capture session.") }, e.prototype.getDsn = function () { return this._dsn }, e.prototype.getOptions = function () { return this._options }, e.prototype.getTransport = function () { return this._getBackend().getTransport() }, e.prototype.flush = function (e) { var t = this; return this._isClientDoneProcessing(e).then((function (n) { return t.getTransport().close(e).then((function (e) { return n && e })) })) }, e.prototype.close = function (e) { var t = this; return this.flush(e).then((function (e) { return t.getOptions().enabled = !1, e })) }, e.prototype.setupIntegrations = function () { this._isEnabled() && !this._integrations.initialized && (this._integrations = function (e) { var t = {}; return function (e) { var t = e.defaultIntegrations && Jh(e.defaultIntegrations) || [], n = e.integrations, r = Jh($h(t)); Array.isArray(n) ? r = Jh(r.filter((function (e) { return n.every((function (t) { return t.name !== e.name })) })), $h(n)) : "function" == typeof n && (r = n(r), r = Array.isArray(r) ? r : [r]); var i = r.map((function (e) { return e.name })), o = "Debug"; return -1 !== i.indexOf(o) && r.push.apply(r, Jh(r.splice(i.indexOf(o), 1))), r }(e).forEach((function (e) { t[e.name] = e, function (e) { -1 === Zh.indexOf(e.name) && (e.setupOnce(Ah, jh), Zh.push(e.name), Af.log("Integration installed: " + e.name)) }(e) })), zf(t, "initialized", !0), t }(this._options)) }, e.prototype.getIntegration = function (e) { try { return this._integrations[e.id] || null } catch (t) { return Af.warn("Cannot retrieve integration " + e.id + " from the current Client"), null } }, e.prototype._updateSessionFromEvent = function (e, t) { var n, r, i = !1, o = !1, a = t.exception && t.exception.values; if (a) { o = !0; try { for (var s = function (e) { var t = "function" == typeof Symbol && Symbol.iterator, n = t && e[t], r = 0; if (n) return n.call(e); if (e && "number" == typeof e.length) return { next: function () { return e && r >= e.length && (e = void 0), { value: e && e[r++], done: !e } } }; throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.") }(a), l = s.next(); !l.done; l = s.next()) { var u = l.value.mechanism; if (u && !1 === u.handled) { i = !0; break } } } catch (e) { n = { error: e } } finally { try { l && !l.done && (r = s.return) && r.call(s) } finally { if (n) throw n.error } } } var c = "ok" === e.status; (c && 0 === e.errors || c && i) && (e.update(Gh(Gh({}, i && { status: "crashed" }), { errors: e.errors || Number(o || i) })), this.captureSession(e)) }, e.prototype._sendSession = function (e) { this._getBackend().sendSession(e) }, e.prototype._isClientDoneProcessing = function (e) { var t = this; return new wh((function (n) { var r = 0, i = setInterval((function () { 0 == t._numProcessing ? (clearInterval(i), n(!0)) : (r += 1, e && r >= e && (clearInterval(i), n(!1))) }), 1) })) }, e.prototype._getBackend = function () { return this._backend }, e.prototype._isEnabled = function () { return !1 !== this.getOptions().enabled && void 0 !== this._dsn }, e.prototype._prepareEvent = function (e, t, n) { var r = this, i = this.getOptions().normalizeDepth, o = void 0 === i ? 3 : i, a = Gh(Gh({}, e), { event_id: e.event_id || (n && n.event_id ? n.event_id : fh()), timestamp: e.timestamp || Ch() }); this._applyClientOptions(a), this._applyIntegrationsMetadata(a); var s = t; n && n.captureContext && (s = Ph.clone(s).update(n.captureContext)); var l = yh(a); return s && (l = s.applyToEvent(a, n)), l.then((function (e) { return e && (e.sdkProcessingMetadata = Gh(Gh({}, e.sdkProcessingMetadata), { normalizeDepth: Yf(o) })), "number" == typeof o && o > 0 ? r._normalizeEvent(e, o) : e })) }, e.prototype._normalizeEvent = function (e, t) { if (!e) return null; var n = Gh(Gh(Gh(Gh(Gh({}, e), e.breadcrumbs && { breadcrumbs: e.breadcrumbs.map((function (e) { return Gh(Gh({}, e), e.data && { data: Yf(e.data, t) }) })) }), e.user && { user: Yf(e.user, t) }), e.contexts && { contexts: Yf(e.contexts, t) }), e.extra && { extra: Yf(e.extra, t) }); return e.contexts && e.contexts.trace && (n.contexts.trace = e.contexts.trace), e.sdkProcessingMetadata = Gh(Gh({}, e.sdkProcessingMetadata), { baseClientNormalized: !0 }), n }, e.prototype._applyClientOptions = function (e) { var t = this.getOptions(), n = t.environment, r = t.release, i = t.dist, o = t.maxValueLength, a = void 0 === o ? 250 : o; "environment" in e || (e.environment = "environment" in t ? n : "production"), void 0 === e.release && void 0 !== r && (e.release = r), void 0 === e.dist && void 0 !== i && (e.dist = i), e.message && (e.message = If(e.message, a)); var s = e.exception && e.exception.values && e.exception.values[0]; s && s.value && (s.value = If(s.value, a)); var l = e.request; l && l.url && (l.url = If(l.url, a)) }, e.prototype._applyIntegrationsMetadata = function (e) { var t = Object.keys(this._integrations); t.length > 0 && (e.sdk = e.sdk || {}, e.sdk.integrations = Jh(e.sdk.integrations || [], t)) }, e.prototype._sendEvent = function (e) { this._getBackend().sendEvent(e) }, e.prototype._captureEvent = function (e, t, n) { return this._processEvent(e, t, n).then((function (e) { return e.event_id }), (function (e) { Af.error(e) })) }, e.prototype._processEvent = function (e, t, n) { var r = this, i = this.getOptions(), o = i.beforeSend, a = i.sampleRate, s = this.getTransport(); function l(e, t) { s.recordLostEvent && s.recordLostEvent(e, t) } if (!this._isEnabled()) return bh(new xf("SDK not enabled, will not capture event.")); var u = "transaction" === e.type; return !u && "number" == typeof a && Math.random() > a ? (l("sample_rate", "event"), bh(new xf("Discarding event because it's not included in the random sample (sampling rate = " + a + ")"))) : this._prepareEvent(e, n, t).then((function (n) { if (null === n) throw l("event_processor", e.type || "event"), new xf("An event processor returned null, will not send event."); return t && t.data && !0 === t.data.__sentry__ || u || !o ? n : function (e) { var t = "`beforeSend` method has to return `null` or a valid event."; if (df(e)) return e.then((function (e) { if (!cf(e) && null !== e) throw new xf(t); return e }), (function (e) { throw new xf("beforeSend rejected with " + e) })); if (!cf(e) && null !== e) throw new xf(t); return e }(o(n, t)) })).then((function (t) { if (null === t) throw l("before_send", e.type || "event"), new xf("`beforeSend` returned `null`, will not send event."); var i = n && n.getSession && n.getSession(); return !u && i && r._updateSessionFromEvent(i, t), r._sendEvent(t), t })).then(null, (function (e) { throw e instanceof xf ? e : (r.captureException(e, { data: { __sentry__: !0 }, originalException: e }), new xf("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: " + e)) })) }, e.prototype._process = function (e) { var t = this; this._numProcessing += 1, e.then((function (e) { return t._numProcessing -= 1, e }), (function (e) { return t._numProcessing -= 1, e })) }, e }(), td = function () { function e() { } return e.prototype.sendEvent = function (e) { return yh({ reason: "NoopTransport: Event has been skipped because no Dsn is configured.", status: "skipped" }) }, e.prototype.close = function (e) { return yh(!0) }, e }(), nd = function () { function e(e) { this._options = e, this._options.dsn || Af.warn("No DSN provided, backend will not do anything."), this._transport = this._setupTransport() } return e.prototype.eventFromException = function (e, t) { throw new xf("Backend has to implement `eventFromException` method") }, e.prototype.eventFromMessage = function (e, t, n) { throw new xf("Backend has to implement `eventFromMessage` method") }, e.prototype.sendEvent = function (e) { this._transport.sendEvent(e).then(null, (function (e) { Zc() && Af.error("Error while sending event: " + e) })) }, e.prototype.sendSession = function (e) { this._transport.sendSession ? this._transport.sendSession(e).then(null, (function (e) { Zc() && Af.error("Error while sending session: " + e) })) : Zc() && Af.warn("Dropping session because custom transport doesn't implement sendSession") }, e.prototype.getTransport = function () { return this._transport }, e.prototype._setupTransport = function () { return new td }, e }(); function rd(e) { if (e.metadata && e.metadata.sdk) { var t = e.metadata.sdk; return { name: t.name, version: t.version } } } var id, od = "6.17.9", ad = function () { function e() { this.name = e.id } return e.prototype.setupOnce = function () { id = Function.prototype.toString, Function.prototype.toString = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; var n = Vf(this) || this; return id.apply(n, e) } }, e.id = "FunctionToString", e }(), sd = [/^Script error\.?$/, /^Javascript error: Script error\.? on line 0$/], ld = function () { function e(t) { void 0 === t && (t = {}), this._options = t, this.name = e.id } return e.prototype.setupOnce = function () { Ah((function (t) { var n = jh(); if (!n) return t; var r = n.getIntegration(e); if (r) { var i = n.getClient(), o = i ? i.getOptions() : {}, a = "function" == typeof r._mergeOptions ? r._mergeOptions(o) : {}; return "function" != typeof r._shouldDropEvent ? t : r._shouldDropEvent(t, a) ? null : t } return t })) }, e.prototype._shouldDropEvent = function (e, t) { return this._isSentryError(e, t) ? (Zc() && Af.warn("Event dropped due to being internal Sentry Error.\nEvent: " + ph(e)), !0) : this._isIgnoredError(e, t) ? (Zc() && Af.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: " + ph(e)), !0) : this._isDeniedUrl(e, t) ? (Zc() && Af.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: " + ph(e) + ".\nUrl: " + this._getEventFilterUrl(e)), !0) : !this._isAllowedUrl(e, t) && (Zc() && Af.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: " + ph(e) + ".\nUrl: " + this._getEventFilterUrl(e)), !0) }, e.prototype._isSentryError = function (e, t) { if (!t.ignoreInternal) return !1; try { return "SentryError" === e.exception.values[0].type } catch (e) { } return !1 }, e.prototype._isIgnoredError = function (e, t) { return !(!t.ignoreErrors || !t.ignoreErrors.length) && this._getPossibleEventMessages(e).some((function (e) { return t.ignoreErrors.some((function (t) { return Ff(e, t) })) })) }, e.prototype._isDeniedUrl = function (e, t) { if (!t.denyUrls || !t.denyUrls.length) return !1; var n = this._getEventFilterUrl(e); return !!n && t.denyUrls.some((function (e) { return Ff(n, e) })) }, e.prototype._isAllowedUrl = function (e, t) { if (!t.allowUrls || !t.allowUrls.length) return !0; var n = this._getEventFilterUrl(e); return !n || t.allowUrls.some((function (e) { return Ff(n, e) })) }, e.prototype._mergeOptions = function (e) { return void 0 === e && (e = {}), { allowUrls: Jh(this._options.whitelistUrls || [], this._options.allowUrls || [], e.whitelistUrls || [], e.allowUrls || []), denyUrls: Jh(this._options.blacklistUrls || [], this._options.denyUrls || [], e.blacklistUrls || [], e.denyUrls || []), ignoreErrors: Jh(this._options.ignoreErrors || [], e.ignoreErrors || [], sd), ignoreInternal: void 0 === this._options.ignoreInternal || this._options.ignoreInternal } }, e.prototype._getPossibleEventMessages = function (e) { if (e.message) return [e.message]; if (e.exception) try { var t = e.exception.values && e.exception.values[0] || {}, n = t.type, r = void 0 === n ? "" : n, i = t.value, o = void 0 === i ? "" : i; return ["" + o, r + ": " + o] } catch (t) { return Zc() && Af.error("Cannot extract message for event " + ph(e)), [] } return [] }, e.prototype._getLastValidUrl = function (e) { void 0 === e && (e = []); for (var t = e.length - 1; t >= 0; t--) { var n = e[t]; if (n && "<anonymous>" !== n.filename && "[native code]" !== n.filename) return n.filename || null } return null }, e.prototype._getEventFilterUrl = function (e) { try { if (e.stacktrace) return this._getLastValidUrl(e.stacktrace.frames); var t; try { t = e.exception.values[0].stacktrace.frames } catch (e) { } return t ? this._getLastValidUrl(t) : null } catch (t) { return Zc() && Af.error("Cannot extract url for event " + ph(e)), null } }, e.id = "InboundFilters", e }(), ud = "?"; function cd(e, t, n, r) { var i = { filename: e, function: t, in_app: !0 }; return void 0 !== n && (i.lineno = n), void 0 !== r && (i.colno = r), i } var fd = /^\s*at (?:(.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i, hd = /\((\S*)(?::(\d+))(?::(\d+))\)/, dd = function (e) { var t = fd.exec(e); if (t) { if (t[2] && 0 === t[2].indexOf("eval")) { var n = hd.exec(t[2]); n && (t[2] = n[1], t[3] = n[2], t[4] = n[3]) } var r = Wc(Sd(t[1] || ud, t[2]), 2), i = r[0]; return cd(r[1], i, t[3] ? +t[3] : void 0, t[4] ? +t[4] : void 0) } }, pd = /^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i, vd = /(\S+) line (\d+)(?: > eval line \d+)* > eval/i, gd = function (e) { var t, n = pd.exec(e); if (n) { if (n[3] && n[3].indexOf(" > eval") > -1) { var r = vd.exec(n[3]); r && (n[1] = n[1] || "eval", n[3] = r[1], n[4] = r[2], n[5] = "") } var i = n[3], o = n[1] || ud; return o = (t = Wc(Sd(o, i), 2))[0], cd(i = t[1], o, n[4] ? +n[4] : void 0, n[5] ? +n[5] : void 0) } }, md = /^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i, yd = function (e) { var t = md.exec(e); return t ? cd(t[2], t[1] || ud, +t[3], t[4] ? +t[4] : void 0) : void 0 }, bd = / line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i, wd = function (e) { var t = bd.exec(e); return t ? cd(t[2], t[3] || ud, +t[1]) : void 0 }, xd = / line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i, _d = function (e) { var t = xd.exec(e); return t ? cd(t[5], t[3] || t[4] || ud, +t[1], +t[2]) : void 0 }, Sd = function (e, t) { var n = -1 !== e.indexOf("safari-extension"), r = -1 !== e.indexOf("safari-web-extension"); return n || r ? [-1 !== e.indexOf("@") ? e.split("@")[0] : ud, n ? "safari-extension:" + t : "safari-web-extension:" + t] : [e, t] }; function kd(e) { var t = Td(e), n = { type: e && e.name, value: Od(e) }; return t && t.length && (n.stacktrace = { frames: t }), void 0 === n.type && "" === n.value && (n.value = "Unrecoverable error caught"), n } function Cd(e) { return { exception: { values: [kd(e)] } } } function Td(e) { var t = e.stacktrace || e.stack || "", n = function (e) { if (e) { if ("number" == typeof e.framesToPop) return e.framesToPop; if (Ed.test(e.message)) return 1 } return 0 }(e); try { return function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; return function (t, n) { var r, i, o, a; void 0 === n && (n = 0); var s = []; try { for (var l = bf(t.split("\n").slice(n)), u = l.next(); !u.done; u = l.next()) { var c = u.value; try { for (var f = (o = void 0, bf(e)), h = f.next(); !h.done; h = f.next()) { var d = (0, h.value)(c); if (d) { s.push(d); break } } } catch (e) { o = { error: e } } finally { try { h && !h.done && (a = f.return) && a.call(f) } finally { if (o) throw o.error } } } } catch (e) { r = { error: e } } finally { try { u && !u.done && (i = l.return) && i.call(l) } finally { if (r) throw r.error } } return Df(s) } }(wd, _d, dd, yd, gd)(t, n) } catch (e) { } return [] } var Ed = /Minified React error #\d+;/i; function Od(e) { var t = e && e.message; return t ? t.error && "string" == typeof t.error.message ? t.error.message : t : "No error message" } function Pd(e, t, n) { var r; if (void 0 === n && (n = {}), af(e) && e.error) return Cd(e.error); if (sf(e) || function (e) { return of(e, "DOMException") }(e)) { var i = e; if ("stack" in e) r = Cd(e); else { var o = i.name || (sf(i) ? "DOMError" : "DOMException"), a = i.message ? o + ": " + i.message : o; vh(r = Md(a, t, n), a) } return "code" in i && (r.tags = Uc(Uc({}, r.tags), { "DOMException.code": "" + i.code })), r } return rf(e) ? Cd(e) : cf(e) || ff(e) ? (r = function (e, t, n) { var r = { exception: { values: [{ type: ff(e) ? e.constructor.name : n ? "UnhandledRejection" : "Error", value: "Non-Error " + (n ? "promise rejection" : "exception") + " captured with keys: " + Xf(e) }] }, extra: { __serialized__: Hf(e) } }; return t && (r.stacktrace = { frames: Td(t) }), r }(e, t, n.isRejection), gh(r, { synthetic: !0 }), r) : (vh(r = Md(e, t, n), "" + e, void 0), gh(r, { synthetic: !0 }), r) } function Md(e, t, n) { void 0 === n && (n = {}); var r = { message: e }; return n.attachStacktrace && t && (r.stacktrace = { frames: Td(t) }), r } var Ad, Dd = tf(); function Ld() { if (Ad) return Ad; if (Jf(Dd.fetch)) return Ad = Dd.fetch.bind(Dd); var e = Dd.document, t = Dd.fetch; if (e && "function" == typeof e.createElement) try { var n = e.createElement("iframe"); n.hidden = !0, e.head.appendChild(n); var r = n.contentWindow; r && r.fetch && (t = r.fetch), e.head.removeChild(n) } catch (e) { Zc() && Af.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ", e) } return Ad = t.bind(Dd) } function Rd(e) { return "event" === e ? "error" : e } var Id = tf(), jd = function () { function e(e) { var t = this; this.options = e, this._buffer = function (e) { var t = []; function n(e) { return t.splice(t.indexOf(e), 1)[0] } return { $: t, add: function (r) { if (!(void 0 === e || t.length < e)) return bh(new xf("Not adding Promise due to buffer limit reached.")); var i = r(); return -1 === t.indexOf(i) && t.push(i), i.then((function () { return n(i) })).then(null, (function () { return n(i).then(null, (function () { })) })), i }, drain: function (e) { return new wh((function (n, r) { var i = t.length; if (!i) return n(!0); var o = setTimeout((function () { e && e > 0 && n(!1) }), e); t.forEach((function (e) { yh(e).then((function () { --i || (clearTimeout(o), n(!0)) }), r) })) })) } } }(30), this._rateLimits = {}, this._outcomes = {}, this._api = function (e, t, n) { return { initDsn: e, metadata: t || {}, dsn: Cf(e), tunnel: n } }(e.dsn, e._metadata, e.tunnel), this.url = Yh(this._api.dsn), this.options.sendClientReports && Id.document && Id.document.addEventListener("visibilitychange", (function () { "hidden" === Id.document.visibilityState && t._flushOutcomes() })) } return e.prototype.sendEvent = function (e) { return this._sendRequest(function (e, t) { var n, r = rd(t), i = e.type || "event", o = "transaction" === i || !!t.tunnel, a = (e.sdkProcessingMetadata || {}).transactionSampling || {}, s = a.method, l = a.rate; (function (e, t) { t && (e.sdk = e.sdk || {}, e.sdk.name = e.sdk.name || t.name, e.sdk.version = e.sdk.version || t.version, e.sdk.integrations = Jh(e.sdk.integrations || [], t.integrations || []), e.sdk.packages = Jh(e.sdk.packages || [], t.packages || [])) })(e, t.metadata.sdk), e.tags = e.tags || {}, e.extra = e.extra || {}, e.sdkProcessingMetadata && e.sdkProcessingMetadata.baseClientNormalized || (e.tags.skippedNormalization = !0, e.extra.normalizeDepth = e.sdkProcessingMetadata ? e.sdkProcessingMetadata.normalizeDepth : "unset"), delete e.sdkProcessingMetadata; try { n = JSON.stringify(e) } catch (t) { e.tags.JSONStringifyError = !0, e.extra.JSONStringifyError = t; try { n = JSON.stringify(Yf(e)) } catch (e) { var u = e; n = JSON.stringify({ message: "JSON.stringify error after renormalization", extra: { message: u.message, stack: u.stack } }) } } var c = { body: n, type: i, url: o ? Xh(t.dsn, t.tunnel) : Yh(t.dsn) }; if (o) { var f = JSON.stringify(Gh(Gh({ event_id: e.event_id, sent_at: (new Date).toISOString() }, r && { sdk: r }), !!t.tunnel && { dsn: Sf(t.dsn) })) + "\n" + JSON.stringify({ type: i, sample_rates: [{ id: s, rate: l }] }) + "\n" + c.body; c.body = f } return c }(e, this._api), e) }, e.prototype.sendSession = function (e) { return this._sendRequest(function (e, t) { var n = rd(t), r = "aggregates" in e ? "sessions" : "session"; return { body: JSON.stringify(Gh(Gh({ sent_at: (new Date).toISOString() }, n && { sdk: n }), !!t.tunnel && { dsn: Sf(t.dsn) })) + "\n" + JSON.stringify({ type: r }) + "\n" + JSON.stringify(e), type: r, url: Xh(t.dsn, t.tunnel) } }(e, this._api), e) }, e.prototype.close = function (e) { return this._buffer.drain(e) }, e.prototype.recordLostEvent = function (e, t) { var n; if (this.options.sendClientReports) { var r = Rd(t) + ":" + e; Af.log("Adding outcome: " + r), this._outcomes[r] = (null != (n = this._outcomes[r]) ? n : 0) + 1 } }, e.prototype._flushOutcomes = function () { if (this.options.sendClientReports) { var e = this._outcomes; if (this._outcomes = {}, !Object.keys(e).length) return void Af.log("No outcomes to flush"); Af.log("Flushing outcomes:\n" + JSON.stringify(e, null, 2)); var t = Xh(this._api.dsn, this._api.tunnel), n = JSON.stringify(Uc({}, this._api.tunnel && { dsn: Sf(this._api.dsn) })) + "\n" + JSON.stringify({ type: "client_report" }) + "\n" + JSON.stringify({ timestamp: Ch(), discarded_events: Object.keys(e).map((function (t) { var n = Wc(t.split(":"), 2), r = n[0]; return { reason: n[1], category: r, quantity: e[t] } })) }); try { !function (e, t) { "[object Navigator]" === Object.prototype.toString.call(Dd && Dd.navigator) && "function" == typeof Dd.navigator.sendBeacon ? Dd.navigator.sendBeacon.bind(Dd.navigator)(e, t) : qf() && function (e) { e.then(null, (function (e) { console.error(e) })) }(Ld()(e, { body: t, method: "POST", credentials: "omit", keepalive: !0 })) }(t, n) } catch (e) { Af.error(e) } } }, e.prototype._handleResponse = function (e) { var t = e.requestType, n = e.response, r = e.headers, i = e.resolve, o = e.reject, a = function (e) { return e >= 200 && e < 300 ? "success" : 429 === e ? "rate_limit" : e >= 400 && e < 500 ? "invalid" : e >= 500 ? "failed" : "unknown" }(n.status); this._handleRateLimit(r) && Zc() && Af.warn("Too many " + t + " requests, backing off until: " + this._disabledUntil(t)), "success" !== a ? o(n) : i({ status: a }) }, e.prototype._disabledUntil = function (e) { var t = Rd(e); return this._rateLimits[t] || this._rateLimits.all }, e.prototype._isRateLimited = function (e) { return this._disabledUntil(e) > new Date(Date.now()) }, e.prototype._handleRateLimit = function (e) { var t, n, r, i, o = Date.now(), a = e["x-sentry-rate-limits"], s = e["retry-after"]; if (a) { try { for (var l = Hc(a.trim().split(",")), u = l.next(); !u.done; u = l.next()) { var c = u.value.split(":", 2), f = parseInt(c[0], 10), h = 1e3 * (isNaN(f) ? 60 : f); try { for (var d = (r = void 0, Hc(c[1].split(";"))), p = d.next(); !p.done; p = d.next()) { var v = p.value; this._rateLimits[v || "all"] = new Date(o + h) } } catch (e) { r = { error: e } } finally { try { p && !p.done && (i = d.return) && i.call(d) } finally { if (r) throw r.error } } } } catch (e) { t = { error: e } } finally { try { u && !u.done && (n = l.return) && n.call(l) } finally { if (t) throw t.error } } return !0 } return !!s && (this._rateLimits.all = new Date(o + function (e, t) { if (!t) return 6e4; var n = parseInt("" + t, 10); if (!isNaN(n)) return 1e3 * n; var r = Date.parse("" + t); return isNaN(r) ? 6e4 : r - e }(o, s)), !0) }, e }(), Fd = function (e) { function t(t, n) { void 0 === n && (n = Ld()); var r = e.call(this, t) || this; return r._fetch = n, r } return Bc(t, e), t.prototype._sendRequest = function (e, t) { var n = this; if (this._isRateLimited(e.type)) return this.recordLostEvent("ratelimit_backoff", e.type), Promise.reject({ event: t, type: e.type, reason: "Transport for " + e.type + " requests locked till " + this._disabledUntil(e.type) + " due to too many requests.", status: 429 }); var r = { body: e.body, method: "POST", referrerPolicy: Zf() ? "origin" : "" }; return void 0 !== this.options.fetchParameters && Object.assign(r, this.options.fetchParameters), void 0 !== this.options.headers && (r.headers = this.options.headers), this._buffer.add((function () { return new wh((function (t, i) { n._fetch(e.url, r).then((function (r) { var o = { "x-sentry-rate-limits": r.headers.get("X-Sentry-Rate-Limits"), "retry-after": r.headers.get("Retry-After") }; n._handleResponse({ requestType: e.type, response: r, headers: o, resolve: t, reject: i }) })).catch(i) })) })).then(void 0, (function (t) { throw t instanceof xf ? n.recordLostEvent("queue_overflow", e.type) : n.recordLostEvent("network_error", e.type), t })) }, t }(jd), Nd = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Bc(t, e), t.prototype._sendRequest = function (e, t) { var n = this; return this._isRateLimited(e.type) ? (this.recordLostEvent("ratelimit_backoff", e.type), Promise.reject({ event: t, type: e.type, reason: "Transport for " + e.type + " requests locked till " + this._disabledUntil(e.type) + " due to too many requests.", status: 429 })) : this._buffer.add((function () { return new wh((function (t, r) { var i = new XMLHttpRequest; for (var o in i.onreadystatechange = function () { if (4 === i.readyState) { var o = { "x-sentry-rate-limits": i.getResponseHeader("X-Sentry-Rate-Limits"), "retry-after": i.getResponseHeader("Retry-After") }; n._handleResponse({ requestType: e.type, response: i, headers: o, resolve: t, reject: r }) } }, i.open("POST", e.url), n.options.headers) Object.prototype.hasOwnProperty.call(n.options.headers, o) && i.setRequestHeader(o, n.options.headers[o]); i.send(e.body) })) })).then(void 0, (function (t) { throw t instanceof xf ? n.recordLostEvent("queue_overflow", e.type) : n.recordLostEvent("network_error", e.type), t })) }, t }(jd), zd = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Bc(t, e), t.prototype.eventFromException = function (e, t) { return function (e, t, n) { var r = Pd(t, n && n.syntheticException || void 0, { attachStacktrace: e.attachStacktrace }); return gh(r), r.level = Vc.Error, n && n.event_id && (r.event_id = n.event_id), yh(r) }(this._options, e, t) }, t.prototype.eventFromMessage = function (e, t, n) { return void 0 === t && (t = Vc.Info), function (e, t, n, r) { void 0 === n && (n = Vc.Info); var i = Md(t, r && r.syntheticException || void 0, { attachStacktrace: e.attachStacktrace }); return i.level = n, r && r.event_id && (i.event_id = r.event_id), yh(i) }(this._options, e, t, n) }, t.prototype._setupTransport = function () { if (!this._options.dsn) return e.prototype._setupTransport.call(this); var t = Uc(Uc({}, this._options.transportOptions), { dsn: this._options.dsn, tunnel: this._options.tunnel, sendClientReports: this._options.sendClientReports, _metadata: this._options._metadata }); return this._options.transport ? new this._options.transport(t) : qf() ? new Fd(t) : new Nd(t) }, t }(nd), Bd = tf(), Vd = 0; function Ud() { return Vd > 0 } function Hd() { Vd += 1, setTimeout((function () { Vd -= 1 })) } function Wd(e, t, n) { if (void 0 === t && (t = {}), "function" != typeof e) return e; try { var r = e.__sentry_wrapped__; if (r) return r; if (Vf(e)) return e } catch (t) { return e } var i = function () { var r = Array.prototype.slice.call(arguments); try { n && "function" == typeof n && n.apply(this, arguments); var i = r.map((function (e) { return Wd(e, t) })); return e.apply(this, i) } catch (e) { throw Hd(), Uh((function (n) { n.addEventProcessor((function (e) { return t.mechanism && (vh(e, void 0, void 0), gh(e, t.mechanism)), e.extra = Uc(Uc({}, e.extra), { arguments: r }), e })), Vh(e) })), e } }; try { for (var o in e) Object.prototype.hasOwnProperty.call(e, o) && (i[o] = e[o]) } catch (e) { } Bf(i, e), zf(e, "__sentry_wrapped__", i); try { Object.getOwnPropertyDescriptor(i, "name").configurable && Object.defineProperty(i, "name", { get: function () { return e.name } }) } catch (e) { } return i } var Kd = function () { function e(t) { this.name = e.id, this._installFunc = { onerror: Yd, onunhandledrejection: Xd }, this._options = Uc({ onerror: !0, onunhandledrejection: !0 }, t) } return e.prototype.setupOnce = function () { Error.stackTraceLimit = 50; var e = this._options; for (var t in e) { var n = this._installFunc[t]; n && e[t] && (qd(t), n(), this._installFunc[t] = void 0) } }, e.id = "GlobalHandlers", e }(); function Yd() { ih("error", (function (e) { var t = Wc(Zd(), 2), n = t[0], r = t[1]; if (n.getIntegration(Kd)) { var i = e.msg, o = e.url, a = e.line, s = e.column, l = e.error; if (!(Ud() || l && l.__sentry_own_request__)) { var u = void 0 === l && lf(i) ? function (e, t, n, r) { var i = af(e) ? e.message : e, o = "Error", a = i.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i); return a && (o = a[1], i = a[2]), Gd({ exception: { values: [{ type: o, value: i }] } }, t, n, r) }(i, o, a, s) : Gd(Pd(l || i, void 0, { attachStacktrace: r, isRejection: !1 }), o, a, s); u.level = Vc.Error, Jd(n, l, u, "onerror") } } })) } function Xd() { ih("unhandledrejection", (function (e) { var t = Wc(Zd(), 2), n = t[0], r = t[1]; if (n.getIntegration(Kd)) { var i = e; try { "reason" in e ? i = e.reason : "detail" in e && "reason" in e.detail && (i = e.detail.reason) } catch (e) { } if (Ud() || i && i.__sentry_own_request__) return !0; var o = uf(i) ? function (e) { return { exception: { values: [{ type: "UnhandledRejection", value: "Non-Error promise rejection captured with value: " + String(e) }] } } }(i) : Pd(i, void 0, { attachStacktrace: r, isRejection: !0 }); o.level = Vc.Error, Jd(n, i, o, "onunhandledrejection") } })) } function Gd(e, t, n, r) { var i = e.exception = e.exception || {}, o = i.values = i.values || [], a = o[0] = o[0] || {}, s = a.stacktrace = a.stacktrace || {}, l = s.frames = s.frames || [], u = isNaN(parseInt(r, 10)) ? void 0 : r, c = isNaN(parseInt(n, 10)) ? void 0 : n, f = lf(t) && t.length > 0 ? t : function () { var e = tf(); try { return e.document.location.href } catch (e) { return "" } }(); return 0 === l.length && l.push({ colno: u, filename: f, function: "?", in_app: !0, lineno: c }), e } function qd(e) { Zc() && Af.log("Global Handler attached: " + e) } function Jd(e, t, n, r) { gh(n, { handled: !1, type: r }), e.captureEvent(n, { originalException: t }) } function Zd() { var e = jh(), t = e.getClient(); return [e, t && t.getOptions().attachStacktrace] } var $d = ["EventTarget", "Window", "Node", "ApplicationCache", "AudioTrackList", "ChannelMergerNode", "CryptoOperation", "EventSource", "FileReader", "HTMLUnknownElement", "IDBDatabase", "IDBRequest", "IDBTransaction", "KeyOperation", "MediaController", "MessagePort", "ModalWindow", "Notification", "SVGElementInstance", "Screen", "TextTrack", "TextTrackCue", "TextTrackList", "WebSocket", "WebSocketWorker", "Worker", "XMLHttpRequest", "XMLHttpRequestEventTarget", "XMLHttpRequestUpload"], Qd = function () { function e(t) { this.name = e.id, this._options = Uc({ XMLHttpRequest: !0, eventTarget: !0, requestAnimationFrame: !0, setInterval: !0, setTimeout: !0 }, t) } return e.prototype.setupOnce = function () { var e = tf(); this._options.setTimeout && Nf(e, "setTimeout", ep), this._options.setInterval && Nf(e, "setInterval", ep), this._options.requestAnimationFrame && Nf(e, "requestAnimationFrame", tp), this._options.XMLHttpRequest && "XMLHttpRequest" in e && Nf(XMLHttpRequest.prototype, "send", np); var t = this._options.eventTarget; t && (Array.isArray(t) ? t : $d).forEach(rp) }, e.id = "TryCatch", e }(); function ep(e) { return function () { for (var t = [], n = 0; n < arguments.length; n++)t[n] = arguments[n]; var r = t[0]; return t[0] = Wd(r, { mechanism: { data: { function: Rf(e) }, handled: !0, type: "instrument" } }), e.apply(this, t) } } function tp(e) { return function (t) { return e.call(this, Wd(t, { mechanism: { data: { function: "requestAnimationFrame", handler: Rf(e) }, handled: !0, type: "instrument" } })) } } function np(e) { return function () { for (var t = [], n = 0; n < arguments.length; n++)t[n] = arguments[n]; var r = this, i = ["onload", "onerror", "onprogress", "onreadystatechange"]; return i.forEach((function (e) { e in r && "function" == typeof r[e] && Nf(r, e, (function (t) { var n = { mechanism: { data: { function: e, handler: Rf(t) }, handled: !0, type: "instrument" } }, r = Vf(t); return r && (n.mechanism.data.handler = Rf(r)), Wd(t, n) })) })), e.apply(this, t) } } function rp(e) { var t = tf(), n = t[e] && t[e].prototype; !n || !n.hasOwnProperty || !n.hasOwnProperty("addEventListener") || (Nf(n, "addEventListener", (function (t) { return function (n, r, i) { try { "function" == typeof r.handleEvent && (r.handleEvent = Wd(r.handleEvent.bind(r), { mechanism: { data: { function: "handleEvent", handler: Rf(r), target: e }, handled: !0, type: "instrument" } })) } catch (e) { } return t.call(this, n, Wd(r, { mechanism: { data: { function: "addEventListener", handler: Rf(r), target: e }, handled: !0, type: "instrument" } }), i) } })), Nf(n, "removeEventListener", (function (e) { return function (t, n, r) { var i = n; try { var o = i && i.__sentry_wrapped__; o && e.call(this, t, o, r) } catch (e) { } return e.call(this, t, i, r) } }))) } var ip = function () { function e(t) { this.name = e.id, this._options = Uc({ console: !0, dom: !0, fetch: !0, history: !0, sentry: !0, xhr: !0 }, t) } return e.prototype.addSentryBreadcrumb = function (e) { !this._options.sentry || jh().addBreadcrumb({ category: "sentry." + ("transaction" === e.type ? "transaction" : "event"), event_id: e.event_id, level: e.level, message: ph(e) }, { event: e }) }, e.prototype.setupOnce = function () { this._options.console && ih("console", op), this._options.dom && ih("dom", function (e) { return function (t) { var n, r = "object" == C(e) ? e.serializeAttribute : void 0; "string" == typeof r && (r = [r]); try { n = t.event.target ? vf(t.event.target, r) : vf(t.event, r) } catch (e) { n = "<unknown>" } 0 !== n.length && jh().addBreadcrumb({ category: "ui." + t.name, message: n }, { event: t.event, name: t.name, global: t.global }) } }(this._options.dom)), this._options.xhr && ih("xhr", ap), this._options.fetch && ih("fetch", sp), this._options.history && ih("history", lp) }, e.id = "Breadcrumbs", e }(); function op(e) { var t = { category: "console", data: { arguments: e.args, logger: "console" }, level: xh(e.level), message: jf(e.args, " ") }; if ("assert" === e.level) { if (!1 !== e.args[0]) return; t.message = "Assertion failed: " + (jf(e.args.slice(1), " ") || "console.assert"), t.data.arguments = e.args.slice(1) } jh().addBreadcrumb(t, { input: e.args, level: e.level }) } function ap(e) { if (e.endTimestamp) { if (e.xhr.__sentry_own_request__) return; var t = e.xhr.__sentry_xhr__ || {}, n = t.method, r = t.url, i = t.status_code, o = t.body; jh().addBreadcrumb({ category: "xhr", data: { method: n, url: r, status_code: i }, type: "http" }, { xhr: e.xhr, input: o }) } } function sp(e) { !e.endTimestamp || e.fetchData.url.match(/sentry_key/) && "POST" === e.fetchData.method || (e.error ? jh().addBreadcrumb({ category: "fetch", data: e.fetchData, level: Vc.Error, type: "http" }, { data: e.error, input: e.args }) : jh().addBreadcrumb({ category: "fetch", data: Uc(Uc({}, e.fetchData), { status_code: e.response.status }), type: "http" }, { input: e.args, response: e.response })) } function lp(e) { var t = tf(), n = e.from, r = e.to, i = hh(t.location.href), o = hh(n), a = hh(r); o.path || (o = i), i.protocol === a.protocol && i.host === a.host && (r = a.relative), i.protocol === o.protocol && i.host === o.host && (n = o.relative), jh().addBreadcrumb({ category: "navigation", data: { from: n, to: r } }) } var up = function () { function e(t) { void 0 === t && (t = {}), this.name = e.id, this._key = t.key || "cause", this._limit = t.limit || 5 } return e.prototype.setupOnce = function () { Ah((function (t, n) { var r = jh().getIntegration(e); return r ? function (e, t, n, r) { if (!(n.exception && n.exception.values && r && pf(r.originalException, Error))) return n; var i = cp(t, r.originalException, e); return n.exception.values = Kc(i, n.exception.values), n }(r._key, r._limit, t, n) : t })) }, e.id = "LinkedErrors", e }(); function cp(e, t, n, r) { if (void 0 === r && (r = []), !pf(t[n], Error) || r.length + 1 >= e) return r; var i = kd(t[n]); return cp(e, t[n], n, Kc([i], r)) } var fp = tf(), hp = function () { function e() { this.name = e.id } return e.prototype.setupOnce = function () { Ah((function (t) { if (jh().getIntegration(e)) { if (!fp.navigator && !fp.location && !fp.document) return t; var n = t.request && t.request.url || fp.location && fp.location.href, r = (fp.document || {}).referrer, i = (fp.navigator || {}).userAgent, o = Uc(Uc(Uc({}, t.request && t.request.headers), r && { Referer: r }), i && { "User-Agent": i }), a = Uc(Uc({}, n && { url: n }), { headers: o }); return Uc(Uc({}, t), { request: a }) } return t })) }, e.id = "UserAgent", e }(), dp = function () { function e() { this.name = e.id } return e.prototype.setupOnce = function (t, n) { t((function (t) { var r = n().getIntegration(e); if (r) { try { if (function (e, t) { return !(!t || !function (e, t) { var n = e.message, r = t.message; return !(!n && !r || n && !r || !n && r || n !== r || !vp(e, t) || !pp(e, t)) }(e, t) && !function (e, t) { var n = gp(t), r = gp(e); return !!(n && r && n.type === r.type && n.value === r.value && vp(e, t) && pp(e, t)) }(e, t)) }(t, r._previousEvent)) return Af.warn("Event dropped due to being a duplicate of previously captured event."), null } catch (e) { return r._previousEvent = t } return r._previousEvent = t } return t })) }, e.id = "Dedupe", e }(); function pp(e, t) { var n = mp(e), r = mp(t); if (!n && !r) return !0; if (n && !r || !n && r || r.length !== n.length) return !1; for (var i = 0; i < r.length; i++) { var o = r[i], a = n[i]; if (o.filename !== a.filename || o.lineno !== a.lineno || o.colno !== a.colno || o.function !== a.function) return !1 } return !0 } function vp(e, t) { var n = e.fingerprint, r = t.fingerprint; if (!n && !r) return !0; if (n && !r || !n && r) return !1; try { return n.join("") === r.join("") } catch (e) { return !1 } } function gp(e) { return e.exception && e.exception.values && e.exception.values[0] } function mp(e) { var t = e.exception; if (t) try { return t.values[0].stacktrace.frames } catch (e) { return } else if (e.stacktrace) return e.stacktrace.frames } var yp = function (e) { function t(t) { return void 0 === t && (t = {}), t._metadata = t._metadata || {}, t._metadata.sdk = t._metadata.sdk || { name: "sentry.javascript.browser", packages: [{ name: "npm:@sentry/browser", version: od }], version: od }, e.call(this, zd, t) || this } return Bc(t, e), t.prototype.showReportDialog = function (e) { if (void 0 === e && (e = {}), tf().document) { if (!this._isEnabled()) return void Af.error("Trying to call showReportDialog with Sentry Client disabled"); !function (e) { if (void 0 === e && (e = {}), Bd.document) { if (!e.eventId) return void (Zc() && Af.error("Missing eventId option in showReportDialog call")); if (!e.dsn) return void (Zc() && Af.error("Missing dsn option in showReportDialog call")); var t = Bd.document.createElement("script"); t.async = !0, t.src = function (e, t) { var n = Cf(e), r = Hh(n) + "embed/error-page/", i = "dsn=" + Sf(n); for (var o in t) if ("dsn" !== o) if ("user" === o) { if (!t.user) continue; t.user.name && (i += "&name=" + encodeURIComponent(t.user.name)), t.user.email && (i += "&email=" + encodeURIComponent(t.user.email)) } else i += "&" + encodeURIComponent(o) + "=" + encodeURIComponent(t[o]); return r + "?" + i }(e.dsn, e), e.onLoad && (t.onload = e.onLoad); var n = Bd.document.head || Bd.document.body; n && n.appendChild(t) } }(Uc(Uc({}, e), { dsn: e.dsn || this.getDsn() })) } }, t.prototype._prepareEvent = function (t, n, r) { return t.platform = t.platform || "javascript", e.prototype._prepareEvent.call(this, t, n, r) }, t.prototype._sendEvent = function (t) { var n = this.getIntegration(ip); n && n.addSentryBreadcrumb(t), e.prototype._sendEvent.call(this, t) }, t }(ed), bp = [new ld, new ad, new Qd, new ip, new Kd, new up, new dp, new hp]; function wp(e) { e.startSession({ ignoreDuration: !0 }), e.captureSession() } var xp = { exports: {} }, _p = {}, Sp = "function" == typeof Symbol && Symbol.for, kp = Sp ? Symbol.for("react.element") : 60103, Cp = Sp ? Symbol.for("react.portal") : 60106, Tp = Sp ? Symbol.for("react.fragment") : 60107, Ep = Sp ? Symbol.for("react.strict_mode") : 60108, Op = Sp ? Symbol.for("react.profiler") : 60114, Pp = Sp ? Symbol.for("react.provider") : 60109, Mp = Sp ? Symbol.for("react.context") : 60110, Ap = Sp ? Symbol.for("react.async_mode") : 60111, Dp = Sp ? Symbol.for("react.concurrent_mode") : 60111, Lp = Sp ? Symbol.for("react.forward_ref") : 60112, Rp = Sp ? Symbol.for("react.suspense") : 60113, Ip = Sp ? Symbol.for("react.suspense_list") : 60120, jp = Sp ? Symbol.for("react.memo") : 60115, Fp = Sp ? Symbol.for("react.lazy") : 60116, Np = Sp ? Symbol.for("react.block") : 60121, zp = Sp ? Symbol.for("react.fundamental") : 60117, Bp = Sp ? Symbol.for("react.responder") : 60118, Vp = Sp ? Symbol.for("react.scope") : 60119; function Up(e) { if ("object" == C(e) && null !== e) { var t = e.$$typeof; switch (t) { case kp: switch (e = e.type) { case Ap: case Dp: case Tp: case Op: case Ep: case Rp: return e; default: switch (e = e && e.$$typeof) { case Mp: case Lp: case Fp: case jp: case Pp: return e; default: return t } }case Cp: return t } } } function Hp(e) { return Up(e) === Dp } _p.AsyncMode = Ap, _p.ConcurrentMode = Dp, _p.ContextConsumer = Mp, _p.ContextProvider = Pp, _p.Element = kp, _p.ForwardRef = Lp, _p.Fragment = Tp, _p.Lazy = Fp, _p.Memo = jp, _p.Portal = Cp, _p.Profiler = Op, _p.StrictMode = Ep, _p.Suspense = Rp, _p.isAsyncMode = function (e) { return Hp(e) || Up(e) === Ap }, _p.isConcurrentMode = Hp, _p.isContextConsumer = function (e) { return Up(e) === Mp }, _p.isContextProvider = function (e) { return Up(e) === Pp }, _p.isElement = function (e) { return "object" == C(e) && null !== e && e.$$typeof === kp }, _p.isForwardRef = function (e) { return Up(e) === Lp }, _p.isFragment = function (e) { return Up(e) === Tp }, _p.isLazy = function (e) { return Up(e) === Fp }, _p.isMemo = function (e) { return Up(e) === jp }, _p.isPortal = function (e) { return Up(e) === Cp }, _p.isProfiler = function (e) { return Up(e) === Op }, _p.isStrictMode = function (e) { return Up(e) === Ep }, _p.isSuspense = function (e) { return Up(e) === Rp }, _p.isValidElementType = function (e) { return "string" == typeof e || "function" == typeof e || e === Tp || e === Dp || e === Op || e === Ep || e === Rp || e === Ip || "object" == C(e) && null !== e && (e.$$typeof === Fp || e.$$typeof === jp || e.$$typeof === Pp || e.$$typeof === Mp || e.$$typeof === Lp || e.$$typeof === zp || e.$$typeof === Bp || e.$$typeof === Vp || e.$$typeof === Np) }, _p.typeOf = Up, xp.exports = _p; var Wp = xp.exports, Kp = {}; Kp[Wp.ForwardRef] = { $$typeof: !0, render: !0, defaultProps: !0, displayName: !0, propTypes: !0 }, Kp[Wp.Memo] = { $$typeof: !0, compare: !0, defaultProps: !0, displayName: !0, propTypes: !0, type: !0 }; var Yp = function (e, t) { return Yp = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]) }, Yp(e, t) }; function Xp(e, t) { function n() { this.constructor = e } Yp(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n) } var Gp = function () { return Gp = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var i in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }, Gp.apply(this, arguments) }; function qp(e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, i, o = n.call(e), a = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)a.push(r.value) } catch (e) { i = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (i) throw i.error } } return a } function Jp() { for (var e = [], t = 0; t < arguments.length; t++)e = e.concat(qp(arguments[t])); return e } var Zp = new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$"); function $p(e) { var t = jh().getClient(), n = e || t && t.getOptions(); return !!n && ("tracesSampleRate" in n || "tracesSampler" in n) } function Qp(e) { var t = (e || jh()).getScope(); return t && t.getTransaction() } function ev(e) { return e / 1e3 } function tv() { var e = Qp(); if (e) { var t = "internal_error"; Af.log("[Tracing] Transaction: " + t + " -> Global error occured"), e.setStatus(t) } } var nv = "finishReason", rv = ["heartbeatFailed", "idleTimeout", "documentHidden"], iv = function () { function e(e) { void 0 === e && (e = 1e3), this.spans = [], this._maxlen = e } return e.prototype.add = function (e) { this.spans.length > this._maxlen ? e.spanRecorder = void 0 : this.spans.push(e) }, e }(), ov = function () { function e(e) { if (this.traceId = fh(), this.spanId = fh().substring(16), this.startTimestamp = Eh(), this.tags = {}, this.data = {}, !e) return this; e.traceId && (this.traceId = e.traceId), e.spanId && (this.spanId = e.spanId), e.parentSpanId && (this.parentSpanId = e.parentSpanId), "sampled" in e && (this.sampled = e.sampled), e.op && (this.op = e.op), e.description && (this.description = e.description), e.data && (this.data = e.data), e.tags && (this.tags = e.tags), e.status && (this.status = e.status), e.startTimestamp && (this.startTimestamp = e.startTimestamp), e.endTimestamp && (this.endTimestamp = e.endTimestamp) } return e.prototype.child = function (e) { return this.startChild(e) }, e.prototype.startChild = function (t) { var n = new e(Gp(Gp({}, t), { parentSpanId: this.spanId, sampled: this.sampled, traceId: this.traceId })); return n.spanRecorder = this.spanRecorder, n.spanRecorder && n.spanRecorder.add(n), n.transaction = this.transaction, n }, e.prototype.setTag = function (e, t) { var n; return this.tags = Gp(Gp({}, this.tags), ((n = {})[e] = t, n)), this }, e.prototype.setData = function (e, t) { var n; return this.data = Gp(Gp({}, this.data), ((n = {})[e] = t, n)), this }, e.prototype.setStatus = function (e) { return this.status = e, this }, e.prototype.setHttpStatus = function (e) { this.setTag("http.status_code", String(e)); var t = function (e) { if (e < 400 && e >= 100) return "ok"; if (e >= 400 && e < 500) switch (e) { case 401: return "unauthenticated"; case 403: return "permission_denied"; case 404: return "not_found"; case 409: return "already_exists"; case 413: return "failed_precondition"; case 429: return "resource_exhausted"; default: return "invalid_argument" }if (e >= 500 && e < 600) switch (e) { case 501: return "unimplemented"; case 503: return "unavailable"; case 504: return "deadline_exceeded"; default: return "internal_error" }return "unknown_error" }(e); return "unknown_error" !== t && this.setStatus(t), this }, e.prototype.isSuccess = function () { return "ok" === this.status }, e.prototype.finish = function (e) { this.endTimestamp = "number" == typeof e ? e : Eh() }, e.prototype.toTraceparent = function () { var e = ""; return void 0 !== this.sampled && (e = this.sampled ? "-1" : "-0"), this.traceId + "-" + this.spanId + e }, e.prototype.toContext = function () { return Gf({ data: this.data, description: this.description, endTimestamp: this.endTimestamp, op: this.op, parentSpanId: this.parentSpanId, sampled: this.sampled, spanId: this.spanId, startTimestamp: this.startTimestamp, status: this.status, tags: this.tags, traceId: this.traceId }) }, e.prototype.updateWithContext = function (e) { var t, n, r, i, o; return this.data = null != (t = e.data) ? t : {}, this.description = e.description, this.endTimestamp = e.endTimestamp, this.op = e.op, this.parentSpanId = e.parentSpanId, this.sampled = e.sampled, this.spanId = null != (n = e.spanId) ? n : this.spanId, this.startTimestamp = null != (r = e.startTimestamp) ? r : this.startTimestamp, this.status = e.status, this.tags = null != (i = e.tags) ? i : {}, this.traceId = null != (o = e.traceId) ? o : this.traceId, this }, e.prototype.getTraceContext = function () { return Gf({ data: Object.keys(this.data).length > 0 ? this.data : void 0, description: this.description, op: this.op, parent_span_id: this.parentSpanId, span_id: this.spanId, status: this.status, tags: Object.keys(this.tags).length > 0 ? this.tags : void 0, trace_id: this.traceId }) }, e.prototype.toJSON = function () { return Gf({ data: Object.keys(this.data).length > 0 ? this.data : void 0, description: this.description, op: this.op, parent_span_id: this.parentSpanId, span_id: this.spanId, start_timestamp: this.startTimestamp, status: this.status, tags: Object.keys(this.tags).length > 0 ? this.tags : void 0, timestamp: this.endTimestamp, trace_id: this.traceId }) }, e }(), av = function (e) { function t(t, n) { var r = e.call(this, t) || this; return r._measurements = {}, r._hub = jh(), pf(n, Lh) && (r._hub = n), r.name = t.name || "", r.metadata = t.metadata || {}, r._trimEnd = t.trimEnd, r.transaction = r, r } return Xp(t, e), t.prototype.setName = function (e) { this.name = e }, t.prototype.initSpanRecorder = function (e) { void 0 === e && (e = 1e3), this.spanRecorder || (this.spanRecorder = new iv(e)), this.spanRecorder.add(this) }, t.prototype.setMeasurements = function (e) { this._measurements = Gp({}, e) }, t.prototype.setMetadata = function (e) { this.metadata = Gp(Gp({}, this.metadata), e) }, t.prototype.finish = function (t) { var n = this; if (void 0 === this.endTimestamp) { if (this.name || (Af.warn("Transaction has no name, falling back to `<unlabeled transaction>`."), this.name = "<unlabeled transaction>"), e.prototype.finish.call(this, t), !0 !== this.sampled) { Af.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."); var r = this._hub.getClient(), i = r && r.getTransport && r.getTransport(); return void (i && i.recordLostEvent && i.recordLostEvent("sample_rate", "transaction")) } var o = this.spanRecorder ? this.spanRecorder.spans.filter((function (e) { return e !== n && e.endTimestamp })) : []; this._trimEnd && o.length > 0 && (this.endTimestamp = o.reduce((function (e, t) { return e.endTimestamp && t.endTimestamp ? e.endTimestamp > t.endTimestamp ? e : t : e })).endTimestamp); var a = { contexts: { trace: this.getTraceContext() }, spans: o, start_timestamp: this.startTimestamp, tags: this.tags, timestamp: this.endTimestamp, transaction: this.name, type: "transaction", sdkProcessingMetadata: this.metadata }; return Object.keys(this._measurements).length > 0 && (Af.log("[Measurements] Adding measurements to transaction", JSON.stringify(this._measurements, void 0, 2)), a.measurements = this._measurements), Af.log("[Tracing] Finishing " + this.op + " transaction: " + this.name + "."), this._hub.captureEvent(a) } }, t.prototype.toContext = function () { var t = e.prototype.toContext.call(this); return Gf(Gp(Gp({}, t), { name: this.name, trimEnd: this._trimEnd })) }, t.prototype.updateWithContext = function (t) { var n; return e.prototype.updateWithContext.call(this, t), this.name = null != (n = t.name) ? n : "", this._trimEnd = t.trimEnd, this }, t }(ov), sv = function (e) { function t(t, n, r, i) { void 0 === r && (r = ""); var o = e.call(this, i) || this; return o._pushActivity = t, o._popActivity = n, o.transactionSpanId = r, o } return Xp(t, e), t.prototype.add = function (t) { var n = this; t.spanId !== this.transactionSpanId && (t.finish = function (e) { t.endTimestamp = "number" == typeof e ? e : Eh(), n._popActivity(t.spanId) }, void 0 === t.endTimestamp && this._pushActivity(t.spanId)), e.prototype.add.call(this, t) }, t }(iv), lv = function (e) { function t(t, n, r, i) { void 0 === r && (r = 1e3), void 0 === i && (i = !1); var o = e.call(this, t, n) || this; return o._idleHub = n, o._idleTimeout = r, o._onScope = i, o.activities = {}, o._heartbeatCounter = 0, o._finished = !1, o._beforeFinishCallbacks = [], n && i && (uv(n), Af.log("Setting idle transaction on scope. Span ID: " + o.spanId), n.configureScope((function (e) { return e.setSpan(o) }))), o._initTimeout = setTimeout((function () { o._finished || o.finish() }), o._idleTimeout), o } return Xp(t, e), t.prototype.finish = function (t) { var n, r, i = this; if (void 0 === t && (t = Eh()), this._finished = !0, this.activities = {}, this.spanRecorder) { Af.log("[Tracing] finishing IdleTransaction", new Date(1e3 * t).toISOString(), this.op); try { for (var o = function (e) { var t = "function" == typeof Symbol && Symbol.iterator, n = t && e[t], r = 0; if (n) return n.call(e); if (e && "number" == typeof e.length) return { next: function () { return e && r >= e.length && (e = void 0), { value: e && e[r++], done: !e } } }; throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.") }(this._beforeFinishCallbacks), a = o.next(); !a.done; a = o.next())(0, a.value)(this, t) } catch (e) { n = { error: e } } finally { try { a && !a.done && (r = o.return) && r.call(o) } finally { if (n) throw n.error } } this.spanRecorder.spans = this.spanRecorder.spans.filter((function (e) { if (e.spanId === i.spanId) return !0; e.endTimestamp || (e.endTimestamp = t, e.setStatus("cancelled"), Af.log("[Tracing] cancelling span since transaction ended early", JSON.stringify(e, void 0, 2))); var n = e.startTimestamp < t; return n || Af.log("[Tracing] discarding Span since it happened after Transaction was finished", JSON.stringify(e, void 0, 2)), n })), Af.log("[Tracing] flushing IdleTransaction") } else Af.log("[Tracing] No active IdleTransaction"); return this._onScope && uv(this._idleHub), e.prototype.finish.call(this, t) }, t.prototype.registerBeforeFinishCallback = function (e) { this._beforeFinishCallbacks.push(e) }, t.prototype.initSpanRecorder = function (e) { var t = this; this.spanRecorder || (this.spanRecorder = new sv((function (e) { t._finished || t._pushActivity(e) }), (function (e) { t._finished || t._popActivity(e) }), this.spanId, e), Af.log("Starting heartbeat"), this._pingHeartbeat()), this.spanRecorder.add(this) }, t.prototype._pushActivity = function (e) { this._initTimeout && (clearTimeout(this._initTimeout), this._initTimeout = void 0), Af.log("[Tracing] pushActivity: " + e), this.activities[e] = !0, Af.log("[Tracing] new activities count", Object.keys(this.activities).length) }, t.prototype._popActivity = function (e) { var t = this; if (this.activities[e] && (Af.log("[Tracing] popActivity " + e), delete this.activities[e], Af.log("[Tracing] new activities count", Object.keys(this.activities).length)), 0 === Object.keys(this.activities).length) { var n = this._idleTimeout, r = Eh() + n / 1e3; setTimeout((function () { t._finished || (t.setTag(nv, rv[1]), t.finish(r)) }), n) } }, t.prototype._beat = function () { if (!this._finished) { var e = Object.keys(this.activities).join(""); e === this._prevHeartbeatString ? this._heartbeatCounter += 1 : this._heartbeatCounter = 1, this._prevHeartbeatString = e, this._heartbeatCounter >= 3 ? (Af.log("[Tracing] Transaction finished because of no change for 3 heart beats"), this.setStatus("deadline_exceeded"), this.setTag(nv, rv[0]), this.finish()) : this._pingHeartbeat() } }, t.prototype._pingHeartbeat = function () { var e = this; Af.log("pinging Heartbeat -> current counter: " + this._heartbeatCounter), setTimeout((function () { e._beat() }), 5e3) }, t }(av); function uv(e) { if (e) { var t = e.getScope(); t && t.getTransaction() && t.setSpan(void 0) } } function cv() { var e = this.getScope(); if (e) { var t = e.getSpan(); if (t) return { "sentry-trace": t.toTraceparent() } } return {} } function fv(e, t, n) { return $p(t) ? void 0 !== e.sampled ? (e.setMetadata({ transactionSampling: { method: "explicitly_set" } }), e) : ("function" == typeof t.tracesSampler ? (r = t.tracesSampler(n), e.setMetadata({ transactionSampling: { method: "client_sampler", rate: Number(r) } })) : void 0 !== n.parentSampled ? (r = n.parentSampled, e.setMetadata({ transactionSampling: { method: "inheritance" } })) : (r = t.tracesSampleRate, e.setMetadata({ transactionSampling: { method: "client_rate", rate: Number(r) } })), function (e) { return isNaN(e) || "number" != typeof e && "boolean" != typeof e ? (Af.warn("[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got " + JSON.stringify(e) + " of type " + JSON.stringify(C(e)) + "."), !1) : !(e < 0 || e > 1) || (Af.warn("[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got " + e + "."), !1) }(r) ? r ? (e.sampled = Math.random() < r, e.sampled ? (Af.log("[Tracing] starting " + e.op + " transaction - " + e.name), e) : (Af.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = " + Number(r) + ")"), e)) : (Af.log("[Tracing] Discarding transaction because " + ("function" == typeof t.tracesSampler ? "tracesSampler returned 0 or false" : "a negative sampling decision was inherited or tracesSampleRate is set to 0")), e.sampled = !1, e) : (Af.warn("[Tracing] Discarding transaction because of invalid sample rate."), e.sampled = !1, e)) : (e.sampled = !1, e); var r } function hv(e, t) { var n = this.getClient(), r = n && n.getOptions() || {}, i = new av(e, this); return (i = fv(i, r, Gp({ parentSampled: e.parentSampled, transactionContext: e }, t))).sampled && i.initSpanRecorder(r._experiments && r._experiments.maxSpans), i } var dv = tf(), pv = function (e, t, n) { var r; return function (i) { t.value >= 0 && (i || n) && (t.delta = t.value - (r || 0), (t.delta || void 0 === r) && (r = t.value, e(t))) } }, vv = function (e, t) { return { name: e, value: null != t ? t : -1, delta: 0, entries: [], id: "v2-" + Date.now() + "-" + (Math.floor(8999999999999 * Math.random()) + 1e12) } }, gv = function (e, t) { try { if (PerformanceObserver.supportedEntryTypes.includes(e)) { if ("first-input" === e && !("PerformanceEventTiming" in self)) return; var n = new PerformanceObserver((function (e) { return e.getEntries().map(t) })); return n.observe({ type: e, buffered: !0 }), n } } catch (e) { } }, mv = function (e, t) { var n = function n(r) { ("pagehide" === r.type || "hidden" === tf().document.visibilityState) && (e(r), t && (removeEventListener("visibilitychange", n, !0), removeEventListener("pagehide", n, !0))) }; addEventListener("visibilitychange", n, !0), addEventListener("pagehide", n, !0) }, yv = -1, bv = function () { return yv < 0 && (yv = "hidden" === tf().document.visibilityState ? 0 : 1 / 0, mv((function (e) { var t = e.timeStamp; yv = t }), !0)), { get firstHiddenTime() { return yv } } }, wv = {}, xv = tf(), _v = function () { function e(e) { void 0 === e && (e = !1), this._reportAllChanges = e, this._measurements = {}, this._performanceCursor = 0, !$c() && xv && xv.performance && xv.document && (xv.performance.mark && xv.performance.mark("sentry-tracing-init"), this._trackCLS(), this._trackLCP(), this._trackFID()) } return e.prototype.addPerformanceEntries = function (e) { var t = this; if (xv && xv.performance && xv.performance.getEntries && Oh) { Af.log("[Tracing] Adding & adjusting spans using Performance API"); var n, r, i = ev(Oh); if (xv.performance.getEntries().slice(this._performanceCursor).forEach((function (o) { var a = ev(o.startTime), s = ev(o.duration); if (!("navigation" === e.op && i + a < e.startTimestamp)) switch (o.entryType) { case "navigation": (function (e, t, n) { ["unloadEvent", "redirect", "domContentLoadedEvent", "loadEvent", "connect"].forEach((function (r) { Sv(e, t, r, n) })), Sv(e, t, "secureConnection", n, "TLS/SSL", "connectEnd"), Sv(e, t, "fetch", n, "cache", "domainLookupStart"), Sv(e, t, "domainLookup", n, "DNS"), function (e, t, n) { kv(e, { op: "browser", description: "request", startTimestamp: n + ev(t.requestStart), endTimestamp: n + ev(t.responseEnd) }), kv(e, { op: "browser", description: "response", startTimestamp: n + ev(t.responseStart), endTimestamp: n + ev(t.responseEnd) }) }(e, t, n) })(e, o, i), n = i + ev(o.responseStart), r = i + ev(o.requestStart); break; case "mark": case "paint": case "measure": var l = function (e, t, n, r, i) { var o = i + n, a = o + r; return kv(e, { description: t.name, endTimestamp: a, op: t.entryType, startTimestamp: o }), o }(e, o, a, s, i), u = bv(), c = o.startTime < u.firstHiddenTime; "first-paint" === o.name && c && (Af.log("[Measurements] Adding FP"), t._measurements.fp = { value: o.startTime }, t._measurements["mark.fp"] = { value: l }), "first-contentful-paint" === o.name && c && (Af.log("[Measurements] Adding FCP"), t._measurements.fcp = { value: o.startTime }, t._measurements["mark.fcp"] = { value: l }); break; case "resource": var f = o.name.replace(xv.location.origin, ""); !function (e, t, n, r, i, o) { if ("xmlhttprequest" !== t.initiatorType && "fetch" !== t.initiatorType) { var a = {}; "transferSize" in t && (a["Transfer Size"] = t.transferSize), "encodedBodySize" in t && (a["Encoded Body Size"] = t.encodedBodySize), "decodedBodySize" in t && (a["Decoded Body Size"] = t.decodedBodySize); var s = o + r; kv(e, { description: n, endTimestamp: s + i, op: t.initiatorType ? "resource." + t.initiatorType : "resource", startTimestamp: s, data: a }) } }(e, o, f, a, s, i) } })), this._performanceCursor = Math.max(performance.getEntries().length - 1, 0), this._trackNavigator(e), "pageload" === e.op) { var o = ev(Oh); "number" == typeof n && (Af.log("[Measurements] Adding TTFB"), this._measurements.ttfb = { value: 1e3 * (n - e.startTimestamp) }, "number" == typeof r && r <= n && (this._measurements["ttfb.requestTime"] = { value: 1e3 * (n - r) })), ["fcp", "fp", "lcp"].forEach((function (n) { if (t._measurements[n] && !(o >= e.startTimestamp)) { var r = t._measurements[n].value, i = o + ev(r), a = Math.abs(1e3 * (i - e.startTimestamp)), s = a - r; Af.log("[Measurements] Normalized " + n + " from " + r + " to " + a + " (" + s + ")"), t._measurements[n].value = a } })), this._measurements["mark.fid"] && this._measurements.fid && kv(e, { description: "first input delay", endTimestamp: this._measurements["mark.fid"].value + ev(this._measurements.fid.value), op: "web.vitals", startTimestamp: this._measurements["mark.fid"].value }), "fcp" in this._measurements || delete this._measurements.cls, e.setMeasurements(this._measurements), function (e, t, n) { t && (Af.log("[Measurements] Adding LCP Data"), t.element && e.setTag("lcp.element", vf(t.element)), t.id && e.setTag("lcp.id", t.id), t.url && e.setTag("lcp.url", t.url.trim().slice(0, 200)), e.setTag("lcp.size", t.size)), n && n.sources && (Af.log("[Measurements] Adding CLS Data"), n.sources.forEach((function (t, n) { return e.setTag("cls.source." + (n + 1), vf(t.node)) }))) }(e, this._lcpEntry, this._clsEntry), e.setTag("sentry_reportAllChanges", this._reportAllChanges) } } }, e.prototype._trackNavigator = function (e) { var t = xv.navigator; if (t) { var n = t.connection; n && (n.effectiveType && e.setTag("effectiveConnectionType", n.effectiveType), n.type && e.setTag("connectionType", n.type), Cv(n.rtt) && (this._measurements["connection.rtt"] = { value: n.rtt }), Cv(n.downlink) && (this._measurements["connection.downlink"] = { value: n.downlink })), Cv(t.deviceMemory) && e.setTag("deviceMemory", String(t.deviceMemory)), Cv(t.hardwareConcurrency) && e.setTag("hardwareConcurrency", String(t.hardwareConcurrency)) } }, e.prototype._trackCLS = function () { var e = this; !function (e, t) { var n, r = vv("CLS", 0), i = 0, o = [], a = function (e) { if (e && !e.hadRecentInput) { var t = o[0], a = o[o.length - 1]; i && 0 !== o.length && e.startTime - a.startTime < 1e3 && e.startTime - t.startTime < 5e3 ? (i += e.value, o.push(e)) : (i = e.value, o = [e]), i > r.value && (r.value = i, r.entries = o, n && n()) } }, s = gv("layout-shift", a); s && (n = pv(e, r, void 0), mv((function () { s.takeRecords().map(a), n(!0) }))) }((function (t) { var n = t.entries.pop(); !n || (Af.log("[Measurements] Adding CLS"), e._measurements.cls = { value: t.value }, e._clsEntry = n) })) }, e.prototype._trackLCP = function () { var e = this; !function (e, t) { var n, r = bv(), i = vv("LCP"), o = function (e) { var t = e.startTime; t < r.firstHiddenTime && (i.value = t, i.entries.push(e)), n && n() }, a = gv("largest-contentful-paint", o); if (a) { n = pv(e, i, t); var s = function () { wv[i.id] || (a.takeRecords().map(o), a.disconnect(), wv[i.id] = !0, n(!0)) };["keydown", "click"].forEach((function (e) { addEventListener(e, s, { once: !0, capture: !0 }) })), mv(s, !0) } }((function (t) { var n = t.entries.pop(); if (n) { var r = ev(Oh), i = ev(n.startTime); Af.log("[Measurements] Adding LCP"), e._measurements.lcp = { value: t.value }, e._measurements["mark.lcp"] = { value: r + i }, e._lcpEntry = n } }), this._reportAllChanges) }, e.prototype._trackFID = function () { var e = this; !function (e, t) { var n, r = bv(), i = vv("FID"), o = function (e) { n && e.startTime < r.firstHiddenTime && (i.value = e.processingStart - e.startTime, i.entries.push(e), n(!0)) }, a = gv("first-input", o); a && (n = pv(e, i, void 0), mv((function () { a.takeRecords().map(o), a.disconnect() }), !0)) }((function (t) { var n = t.entries.pop(); if (n) { var r = ev(Oh), i = ev(n.startTime); Af.log("[Measurements] Adding FID"), e._measurements.fid = { value: t.value }, e._measurements["mark.fid"] = { value: r + i } } })) }, e }(); function Sv(e, t, n, r, i, o) { var a = o ? t[o] : t[n + "End"], s = t[n + "Start"]; !s || !a || kv(e, { op: "browser", description: null != i ? i : n, startTimestamp: r + ev(s), endTimestamp: r + ev(a) }) } function kv(e, t) { var n = t.startTimestamp, r = function (e, t) { var n = {}; for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]); if (null != e && "function" == typeof Object.getOwnPropertySymbols) { var i = 0; for (r = Object.getOwnPropertySymbols(e); i < r.length; i++)t.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[i]) && (n[r[i]] = e[r[i]]) } return n }(t, ["startTimestamp"]); return n && e.startTimestamp > n && (e.startTimestamp = n), e.startChild(Gp({ startTimestamp: n }, r)) } function Cv(e) { return "number" == typeof e && isFinite(e) } var Tv = { traceFetch: !0, traceXHR: !0, tracingOrigins: ["localhost", /^\//] }; var Ev = tf(), Ov = Gp({ idleTimeout: 1e3, markBackgroundTransactions: !0, maxTransactionDuration: 600, routingInstrumentation: function (e, t, n) { if (void 0 === t && (t = !0), void 0 === n && (n = !0), Ev && Ev.location) { var r, i = Ev.location.href; t && (r = e({ name: Ev.location.pathname, op: "pageload" })), n && ih("history", (function (t) { var n = t.to, o = t.from; void 0 === o && i && -1 !== i.indexOf(n) ? i = void 0 : o !== n && (i = void 0, r && (Af.log("[Tracing] Finishing current transaction with op: " + r.op), r.finish()), r = e({ name: Ev.location.pathname, op: "navigation" })) })) } else Af.warn("Could not initialize routing instrumentation due to invalid location") }, startTransactionOnLocationChange: !0, startTransactionOnPageLoad: !0 }, Tv), Pv = function () { function e(t) { this.name = e.id, this._emitOptionsWarning = !1, this._configuredIdleTimeout = void 0; var n = Tv.tracingOrigins; t && (this._configuredIdleTimeout = t.idleTimeout, t.tracingOrigins && Array.isArray(t.tracingOrigins) && 0 !== t.tracingOrigins.length ? n = t.tracingOrigins : this._emitOptionsWarning = !0), this.options = Gp(Gp(Gp({}, Ov), t), { tracingOrigins: n }); var r = this.options._metricOptions; this._metrics = new _v(r && r._reportAllChanges) } return e.prototype.setupOnce = function (e, t) { var n = this; this._getCurrentHub = t, this._emitOptionsWarning && (Af.warn("[Tracing] You need to define `tracingOrigins` in the options. Set an array of urls or patterns to trace."), Af.warn("[Tracing] We added a reasonable default for you: " + Tv.tracingOrigins)); var r = this.options, i = r.routingInstrumentation, o = r.startTransactionOnLocationChange, a = r.startTransactionOnPageLoad, s = r.markBackgroundTransactions, l = r.traceFetch, u = r.traceXHR, c = r.tracingOrigins, f = r.shouldCreateSpanForRequest; i((function (e) { return n._createRouteTransaction(e) }), a, o), s && (dv && dv.document ? dv.document.addEventListener("visibilitychange", (function () { var e = Qp(); if (dv.document.hidden && e) { var t = "cancelled"; Af.log("[Tracing] Transaction: " + t + " -> since tab moved to the background, op: " + e.op), e.status || e.setStatus(t), e.setTag("visibilitychange", "document.hidden"), e.setTag(nv, rv[2]), e.finish() } })) : Af.warn("[Tracing] Could not set up background tab detection due to lack of global document")), function (e) { var t = Gp(Gp({}, Tv), e), n = t.traceFetch, r = t.traceXHR, i = t.tracingOrigins, o = t.shouldCreateSpanForRequest, a = {}, s = function (e) { if (a[e]) return a[e]; var t = i; return a[e] = t.some((function (t) { return Ff(e, t) })) && !Ff(e, "sentry_key"), a[e] }, l = s; "function" == typeof o && (l = function (e) { return s(e) && o(e) }); var u = {}; n && ih("fetch", (function (e) { !function (e, t, n) { if ($p() && e.fetchData && t(e.fetchData.url)) { if (e.endTimestamp) { var r = e.fetchData.__span; if (!r) return; return void ((o = n[r]) && (e.response ? o.setHttpStatus(e.response.status) : e.error && o.setStatus("internal_error"), o.finish(), delete n[r])) } var i = Qp(); if (i) { var o = i.startChild({ data: Gp(Gp({}, e.fetchData), { type: "fetch" }), description: e.fetchData.method + " " + e.fetchData.url, op: "http.client" }); e.fetchData.__span = o.spanId, n[o.spanId] = o; var a = e.args[0] = e.args[0], s = e.args[1] = e.args[1] || {}, l = s.headers; pf(a, Request) && (l = a.headers), l ? "function" == typeof l.append ? l.append("sentry-trace", o.toTraceparent()) : l = Array.isArray(l) ? Jp(l, [["sentry-trace", o.toTraceparent()]]) : Gp(Gp({}, l), { "sentry-trace": o.toTraceparent() }) : l = { "sentry-trace": o.toTraceparent() }, s.headers = l } } }(e, l, u) })), r && ih("xhr", (function (e) { !function (e, t, n) { if (!(!$p() || e.xhr && e.xhr.__sentry_own_request__) && e.xhr && e.xhr.__sentry_xhr__ && t(e.xhr.__sentry_xhr__.url)) { var r = e.xhr.__sentry_xhr__; if (e.endTimestamp) { var i = e.xhr.__sentry_xhr_span_id__; if (!i) return; return void ((a = n[i]) && (a.setHttpStatus(r.status_code), a.finish(), delete n[i])) } var o = Qp(); if (o) { var a = o.startChild({ data: Gp(Gp({}, r.data), { type: "xhr", method: r.method, url: r.url }), description: r.method + " " + r.url, op: "http.client" }); if (e.xhr.__sentry_xhr_span_id__ = a.spanId, n[e.xhr.__sentry_xhr_span_id__] = a, e.xhr.setRequestHeader) try { e.xhr.setRequestHeader("sentry-trace", a.toTraceparent()) } catch (e) { } } } }(e, l, u) })) }({ traceFetch: l, traceXHR: u, tracingOrigins: c, shouldCreateSpanForRequest: f }) }, e.prototype._createRouteTransaction = function (e) { var t = this; if (this._getCurrentHub) { var n = this.options, r = n.beforeNavigate, i = n.idleTimeout, o = n.maxTransactionDuration, a = "pageload" === e.op ? function () { var e = function (e) { var t = tf().document.querySelector("meta[name=sentry-trace]"); return t ? t.getAttribute("content") : null }(); if (e) return function (e) { var t = e.match(Zp); if (t) { var n = void 0; return "1" === t[3] ? n = !0 : "0" === t[3] && (n = !1), { traceId: t[1], parentSampled: n, parentSpanId: t[2] } } }(e) }() : void 0, s = Gp(Gp(Gp({}, e), a), { trimEnd: !0 }), l = "function" == typeof r ? r(s) : s, u = void 0 === l ? Gp(Gp({}, s), { sampled: !1 }) : l; !1 === u.sampled && Af.log("[Tracing] Will not send " + u.op + " transaction because of beforeNavigate."), Af.log("[Tracing] Starting " + u.op + " transaction on scope"); var c = function (e, t, n, r, i) { var o = e.getClient(), a = o && o.getOptions() || {}, s = new lv(t, e, n, !0); return (s = fv(s, a, Gp({ parentSampled: t.parentSampled, transactionContext: t }, i))).sampled && s.initSpanRecorder(a._experiments && a._experiments.maxSpans), s }(this._getCurrentHub(), u, i, 0, { location: tf().location }); return c.registerBeforeFinishCallback((function (e, n) { t._metrics.addPerformanceEntries(e), function (e, t, n) { var r = n - t.startTimestamp; n && (r > e || r < 0) && (t.setStatus("deadline_exceeded"), t.setTag("maxTransactionDurationExceeded", "true")) }(function (e) { return 1e3 * e }(o), e, n) })), c.setTag("idleTimeout", this._configuredIdleTimeout), c } Af.warn("[Tracing] Did not create " + e.op + " transaction because _getCurrentHub is invalid.") }, e.id = "BrowserTracing", e }(); (function () { var e = Rh(); !e.__SENTRY__ || (e.__SENTRY__.extensions = e.__SENTRY__.extensions || {}, e.__SENTRY__.extensions.startTransaction || (e.__SENTRY__.extensions.startTransaction = hv), e.__SENTRY__.extensions.traceHeaders || (e.__SENTRY__.extensions.traceHeaders = cv)) })(), $c() && function () { var t = Rh(); if (t.__SENTRY__) { var n = { mongodb: function () { return new (Qc(e, "./integrations/node/mongo").Mongo) }, mongoose: function () { return new (Qc(e, "./integrations/node/mongo").Mongo)({ mongoose: !0 }) }, mysql: function () { return new (Qc(e, "./integrations/node/mysql").Mysql) }, pg: function () { return new (Qc(e, "./integrations/node/postgres").Postgres) } }, r = Object.keys(n).filter((function (t) { return !!function (t) { var n; try { n = Qc(e, t) } catch (e) { } try { var r = Qc(e, "process").cwd; n = Qc(e, r() + "/node_modules/" + t) } catch (e) { } return n }(t) })).map((function (e) { try { return n[e]() } catch (e) { return } })).filter((function (e) { return e })); r.length > 0 && (t.__SENTRY__.integrations = Jp(t.__SENTRY__.integrations || [], r)) } }(), ih("error", tv), ih("unhandledrejection", tv); var Mv = function (e, t) { return Mv = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]) }, Mv(e, t) }; function Av(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null"); function n() { this.constructor = e } Mv(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n) } var Dv, Lv, Rv, Iv = function () { return Iv = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var i in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }, Iv.apply(this, arguments) }; function jv(e, t) { var n = {}; for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]); if (null != e && "function" == typeof Object.getOwnPropertySymbols) { var i = 0; for (r = Object.getOwnPropertySymbols(e); i < r.length; i++)t.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[i]) && (n[r[i]] = e[r[i]]) } return n } function Fv(e, t, n, r) { return new (n || (n = Promise))((function (i, o) { function a(e) { try { l(r.next(e)) } catch (e) { o(e) } } function s(e) { try { l(r.throw(e)) } catch (e) { o(e) } } function l(e) { e.done ? i(e.value) : function (e) { return e instanceof n ? e : new n((function (t) { t(e) })) }(e.value).then(a, s) } l((r = r.apply(e, t || [])).next()) })) } function Nv(e, t) { var n, r, i, o, a = { label: 0, sent: function () { if (1 & i[0]) throw i[1]; return i[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; a;)try { if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i; switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) { case 0: case 1: i = o; break; case 4: return a.label++, { value: o[1], done: !1 }; case 5: a.label++, r = o[1], o = [0]; continue; case 7: o = a.ops.pop(), a.trys.pop(); continue; default: if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) { a = 0; continue } if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) { a.label = o[1]; break } if (6 === o[0] && a.label < i[1]) { a.label = i[1], i = o; break } if (i && a.label < i[2]) { a.label = i[2], a.ops.push(o); break } i[2] && a.ops.pop(), a.trys.pop(); continue }o = t.call(e, a) } catch (e) { o = [6, e], r = 0 } finally { n = i = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, s]) } } } function zv(e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, i, o = n.call(e), a = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)a.push(r.value) } catch (e) { i = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (i) throw i.error } } return a } function Bv(e, t, n) { if (n || 2 === arguments.length) for (var r, i = 0, o = t.length; i < o; i++)(r || !(i in t)) && (r || (r = Array.prototype.slice.call(t, 0, i)), r[i] = t[i]); return e.concat(r || Array.prototype.slice.call(t)) } function Vv(e, t, n) { if (void 0 === n && (n = Error), !e) throw new n(t) } function Uv(e) { return e.type === Lv.literal } function Hv(e) { return e.type === Lv.argument } function Wv(e) { return e.type === Lv.number } function Kv(e) { return e.type === Lv.date } function Yv(e) { return e.type === Lv.time } function Xv(e) { return e.type === Lv.select } function Gv(e) { return e.type === Lv.plural } function qv(e) { return e.type === Lv.pound } function Jv(e) { return e.type === Lv.tag } function Zv(e) { return !(!e || "object" != C(e) || e.type !== Rv.number) } function $v(e) { return !(!e || "object" != C(e) || e.type !== Rv.dateTime) } !function (e) { e[e.EXPECT_ARGUMENT_CLOSING_BRACE = 1] = "EXPECT_ARGUMENT_CLOSING_BRACE", e[e.EMPTY_ARGUMENT = 2] = "EMPTY_ARGUMENT", e[e.MALFORMED_ARGUMENT = 3] = "MALFORMED_ARGUMENT", e[e.EXPECT_ARGUMENT_TYPE = 4] = "EXPECT_ARGUMENT_TYPE", e[e.INVALID_ARGUMENT_TYPE = 5] = "INVALID_ARGUMENT_TYPE", e[e.EXPECT_ARGUMENT_STYLE = 6] = "EXPECT_ARGUMENT_STYLE", e[e.INVALID_NUMBER_SKELETON = 7] = "INVALID_NUMBER_SKELETON", e[e.INVALID_DATE_TIME_SKELETON = 8] = "INVALID_DATE_TIME_SKELETON", e[e.EXPECT_NUMBER_SKELETON = 9] = "EXPECT_NUMBER_SKELETON", e[e.EXPECT_DATE_TIME_SKELETON = 10] = "EXPECT_DATE_TIME_SKELETON", e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE = 11] = "UNCLOSED_QUOTE_IN_ARGUMENT_STYLE", e[e.EXPECT_SELECT_ARGUMENT_OPTIONS = 12] = "EXPECT_SELECT_ARGUMENT_OPTIONS", e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE = 13] = "EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE", e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE = 14] = "INVALID_PLURAL_ARGUMENT_OFFSET_VALUE", e[e.EXPECT_SELECT_ARGUMENT_SELECTOR = 15] = "EXPECT_SELECT_ARGUMENT_SELECTOR", e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR = 16] = "EXPECT_PLURAL_ARGUMENT_SELECTOR", e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT = 17] = "EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT", e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT = 18] = "EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT", e[e.INVALID_PLURAL_ARGUMENT_SELECTOR = 19] = "INVALID_PLURAL_ARGUMENT_SELECTOR", e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR = 20] = "DUPLICATE_PLURAL_ARGUMENT_SELECTOR", e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR = 21] = "DUPLICATE_SELECT_ARGUMENT_SELECTOR", e[e.MISSING_OTHER_CLAUSE = 22] = "MISSING_OTHER_CLAUSE", e[e.INVALID_TAG = 23] = "INVALID_TAG", e[e.INVALID_TAG_NAME = 25] = "INVALID_TAG_NAME", e[e.UNMATCHED_CLOSING_TAG = 26] = "UNMATCHED_CLOSING_TAG", e[e.UNCLOSED_TAG = 27] = "UNCLOSED_TAG" }(Dv || (Dv = {})), function (e) { e[e.literal = 0] = "literal", e[e.argument = 1] = "argument", e[e.number = 2] = "number", e[e.date = 3] = "date", e[e.time = 4] = "time", e[e.select = 5] = "select", e[e.plural = 6] = "plural", e[e.pound = 7] = "pound", e[e.tag = 8] = "tag" }(Lv || (Lv = {})), function (e) { e[e.number = 0] = "number", e[e.dateTime = 1] = "dateTime" }(Rv || (Rv = {})); var Qv = /[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/, eg = /(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g; function tg(e) { var t = {}; return e.replace(eg, (function (e) { var n = e.length; switch (e[0]) { case "G": t.era = 4 === n ? "long" : 5 === n ? "narrow" : "short"; break; case "y": t.year = 2 === n ? "2-digit" : "numeric"; break; case "Y": case "u": case "U": case "r": throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead"); case "q": case "Q": throw new RangeError("`q/Q` (quarter) patterns are not supported"); case "M": case "L": t.month = ["numeric", "2-digit", "short", "long", "narrow"][n - 1]; break; case "w": case "W": throw new RangeError("`w/W` (week) patterns are not supported"); case "d": t.day = ["numeric", "2-digit"][n - 1]; break; case "D": case "F": case "g": throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead"); case "E": t.weekday = 4 === n ? "short" : 5 === n ? "narrow" : "short"; break; case "e": if (n < 4) throw new RangeError("`e..eee` (weekday) patterns are not supported"); t.weekday = ["short", "long", "narrow", "short"][n - 4]; break; case "c": if (n < 4) throw new RangeError("`c..ccc` (weekday) patterns are not supported"); t.weekday = ["short", "long", "narrow", "short"][n - 4]; break; case "a": t.hour12 = !0; break; case "b": case "B": throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead"); case "h": t.hourCycle = "h12", t.hour = ["numeric", "2-digit"][n - 1]; break; case "H": t.hourCycle = "h23", t.hour = ["numeric", "2-digit"][n - 1]; break; case "K": t.hourCycle = "h11", t.hour = ["numeric", "2-digit"][n - 1]; break; case "k": t.hourCycle = "h24", t.hour = ["numeric", "2-digit"][n - 1]; break; case "j": case "J": case "C": throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead"); case "m": t.minute = ["numeric", "2-digit"][n - 1]; break; case "s": t.second = ["numeric", "2-digit"][n - 1]; break; case "S": case "A": throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead"); case "z": t.timeZoneName = n < 4 ? "short" : "long"; break; case "Z": case "O": case "v": case "V": case "X": case "x": throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead") }return "" })), t } var ng = /[\t-\r \x85\u200E\u200F\u2028\u2029]/i; function rg(e) { return e.replace(/^(.*?)-/, "") } var ig = /^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g, og = /^(@+)?(\+|#+)?[rs]?$/g, ag = /(\*)(0+)|(#+)(0+)|(0+)/g, sg = /^(0+)$/; function lg(e) { var t = {}; return "r" === e[e.length - 1] ? t.roundingPriority = "morePrecision" : "s" === e[e.length - 1] && (t.roundingPriority = "lessPrecision"), e.replace(og, (function (e, n, r) { return "string" != typeof r ? (t.minimumSignificantDigits = n.length, t.maximumSignificantDigits = n.length) : "+" === r ? t.minimumSignificantDigits = n.length : "#" === n[0] ? t.maximumSignificantDigits = n.length : (t.minimumSignificantDigits = n.length, t.maximumSignificantDigits = n.length + ("string" == typeof r ? r.length : 0)), "" })), t } function ug(e) { switch (e) { case "sign-auto": return { signDisplay: "auto" }; case "sign-accounting": case "()": return { currencySign: "accounting" }; case "sign-always": case "+!": return { signDisplay: "always" }; case "sign-accounting-always": case "()!": return { signDisplay: "always", currencySign: "accounting" }; case "sign-except-zero": case "+?": return { signDisplay: "exceptZero" }; case "sign-accounting-except-zero": case "()?": return { signDisplay: "exceptZero", currencySign: "accounting" }; case "sign-never": case "+_": return { signDisplay: "never" } } } function cg(e) { var t; if ("E" === e[0] && "E" === e[1] ? (t = { notation: "engineering" }, e = e.slice(2)) : "E" === e[0] && (t = { notation: "scientific" }, e = e.slice(1)), t) { var n = e.slice(0, 2); if ("+!" === n ? (t.signDisplay = "always", e = e.slice(2)) : "+?" === n && (t.signDisplay = "exceptZero", e = e.slice(2)), !sg.test(e)) throw new Error("Malformed concise eng/scientific notation"); t.minimumIntegerDigits = e.length } return t } function fg(e) { return ug(e) || {} } function hg(e) { for (var t = {}, n = 0, r = e; n < r.length; n++) { var i = r[n]; switch (i.stem) { case "percent": case "%": t.style = "percent"; continue; case "%x100": t.style = "percent", t.scale = 100; continue; case "currency": t.style = "currency", t.currency = i.options[0]; continue; case "group-off": case ",_": t.useGrouping = !1; continue; case "precision-integer": case ".": t.maximumFractionDigits = 0; continue; case "measure-unit": case "unit": t.style = "unit", t.unit = rg(i.options[0]); continue; case "compact-short": case "K": t.notation = "compact", t.compactDisplay = "short"; continue; case "compact-long": case "KK": t.notation = "compact", t.compactDisplay = "long"; continue; case "scientific": t = Iv(Iv(Iv({}, t), { notation: "scientific" }), i.options.reduce((function (e, t) { return Iv(Iv({}, e), fg(t)) }), {})); continue; case "engineering": t = Iv(Iv(Iv({}, t), { notation: "engineering" }), i.options.reduce((function (e, t) { return Iv(Iv({}, e), fg(t)) }), {})); continue; case "notation-simple": t.notation = "standard"; continue; case "unit-width-narrow": t.currencyDisplay = "narrowSymbol", t.unitDisplay = "narrow"; continue; case "unit-width-short": t.currencyDisplay = "code", t.unitDisplay = "short"; continue; case "unit-width-full-name": t.currencyDisplay = "name", t.unitDisplay = "long"; continue; case "unit-width-iso-code": t.currencyDisplay = "symbol"; continue; case "scale": t.scale = parseFloat(i.options[0]); continue; case "integer-width": if (i.options.length > 1) throw new RangeError("integer-width stems only accept a single optional option"); i.options[0].replace(ag, (function (e, n, r, i, o, a) { if (n) t.minimumIntegerDigits = r.length; else { if (i && o) throw new Error("We currently do not support maximum integer digits"); if (a) throw new Error("We currently do not support exact integer digits") } return "" })); continue }if (sg.test(i.stem)) t.minimumIntegerDigits = i.stem.length; else if (ig.test(i.stem)) { if (i.options.length > 1) throw new RangeError("Fraction-precision stems only accept a single optional option"); i.stem.replace(ig, (function (e, n, r, i, o, a) { return "*" === r ? t.minimumFractionDigits = n.length : i && "#" === i[0] ? t.maximumFractionDigits = i.length : o && a ? (t.minimumFractionDigits = o.length, t.maximumFractionDigits = o.length + a.length) : (t.minimumFractionDigits = n.length, t.maximumFractionDigits = n.length), "" })); var o = i.options[0]; "w" === o ? t = Iv(Iv({}, t), { trailingZeroDisplay: "stripIfInteger" }) : o && (t = Iv(Iv({}, t), lg(o))) } else if (og.test(i.stem)) t = Iv(Iv({}, t), lg(i.stem)); else { var a = ug(i.stem); a && (t = Iv(Iv({}, t), a)); var s = cg(i.stem); s && (t = Iv(Iv({}, t), s)) } } return t } var dg, pg = new RegExp("^".concat(Qv.source, "*")), vg = new RegExp("".concat(Qv.source, "*$")); function gg(e, t) { return { start: e, end: t } } var mg = !!String.prototype.startsWith, yg = !!String.fromCodePoint, bg = !!Object.fromEntries, wg = !!String.prototype.codePointAt, xg = !!String.prototype.trimStart, _g = !!String.prototype.trimEnd, Sg = Number.isSafeInteger ? Number.isSafeInteger : function (e) { return "number" == typeof e && isFinite(e) && Math.floor(e) === e && Math.abs(e) <= 9007199254740991 }, kg = !0; try { kg = "a" === (null === (dg = Dg("([^\\p{White_Space}\\p{Pattern_Syntax}]*)", "yu").exec("a")) || void 0 === dg ? void 0 : dg[0]) } catch (e) { kg = !1 } var Cg, Tg = mg ? function (e, t, n) { return e.startsWith(t, n) } : function (e, t, n) { return e.slice(n, n + t.length) === t }, Eg = yg ? String.fromCodePoint : function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; for (var n, r = "", i = e.length, o = 0; i > o;) { if ((n = e[o++]) > 1114111) throw RangeError(n + " is not a valid code point"); r += n < 65536 ? String.fromCharCode(n) : String.fromCharCode(55296 + ((n -= 65536) >> 10), n % 1024 + 56320) } return r }, Og = bg ? Object.fromEntries : function (e) { for (var t = {}, n = 0, r = e; n < r.length; n++) { var i = r[n], o = i[0], a = i[1]; t[o] = a } return t }, Pg = wg ? function (e, t) { return e.codePointAt(t) } : function (e, t) { var n = e.length; if (!(t < 0 || t >= n)) { var r, i = e.charCodeAt(t); return i < 55296 || i > 56319 || t + 1 === n || (r = e.charCodeAt(t + 1)) < 56320 || r > 57343 ? i : r - 56320 + (i - 55296 << 10) + 65536 } }, Mg = xg ? function (e) { return e.trimStart() } : function (e) { return e.replace(pg, "") }, Ag = _g ? function (e) { return e.trimEnd() } : function (e) { return e.replace(vg, "") }; function Dg(e, t) { return new RegExp(e, t) } if (kg) { var Lg = Dg("([^\\p{White_Space}\\p{Pattern_Syntax}]*)", "yu"); Cg = function (e, t) { var n; return Lg.lastIndex = t, null !== (n = Lg.exec(e)[1]) && void 0 !== n ? n : "" } } else Cg = function (e, t) { for (var n = []; ;) { var r = Pg(e, t); if (void 0 === r || Fg(r) || Ng(r)) break; n.push(r), t += r >= 65536 ? 2 : 1 } return Eg.apply(void 0, n) }; var Rg = function () { function e(e, t) { void 0 === t && (t = {}), this.message = e, this.position = { offset: 0, line: 1, column: 1 }, this.ignoreTag = !!t.ignoreTag, this.requiresOtherClause = !!t.requiresOtherClause, this.shouldParseSkeletons = !!t.shouldParseSkeletons } return e.prototype.parse = function () { if (0 !== this.offset()) throw Error("parser can only be used once"); return this.parseMessage(0, "", !1) }, e.prototype.parseMessage = function (e, t, n) { for (var r = []; !this.isEOF();) { var i = this.char(); if (123 === i) { if ((o = this.parseArgument(e, n)).err) return o; r.push(o.val) } else { if (125 === i && e > 0) break; if (35 !== i || "plural" !== t && "selectordinal" !== t) { if (60 === i && !this.ignoreTag && 47 === this.peek()) { if (n) break; return this.error(Dv.UNMATCHED_CLOSING_TAG, gg(this.clonePosition(), this.clonePosition())) } if (60 === i && !this.ignoreTag && Ig(this.peek() || 0)) { if ((o = this.parseTag(e, t)).err) return o; r.push(o.val) } else { var o; if ((o = this.parseLiteral(e, t)).err) return o; r.push(o.val) } } else { var a = this.clonePosition(); this.bump(), r.push({ type: Lv.pound, location: gg(a, this.clonePosition()) }) } } } return { val: r, err: null } }, e.prototype.parseTag = function (e, t) { var n = this.clonePosition(); this.bump(); var r = this.parseTagName(); if (this.bumpSpace(), this.bumpIf("/>")) return { val: { type: Lv.literal, value: "<".concat(r, "/>"), location: gg(n, this.clonePosition()) }, err: null }; if (this.bumpIf(">")) { var i = this.parseMessage(e + 1, t, !0); if (i.err) return i; var o = i.val, a = this.clonePosition(); if (this.bumpIf("</")) { if (this.isEOF() || !Ig(this.char())) return this.error(Dv.INVALID_TAG, gg(a, this.clonePosition())); var s = this.clonePosition(); return r !== this.parseTagName() ? this.error(Dv.UNMATCHED_CLOSING_TAG, gg(s, this.clonePosition())) : (this.bumpSpace(), this.bumpIf(">") ? { val: { type: Lv.tag, value: r, children: o, location: gg(n, this.clonePosition()) }, err: null } : this.error(Dv.INVALID_TAG, gg(a, this.clonePosition()))) } return this.error(Dv.UNCLOSED_TAG, gg(n, this.clonePosition())) } return this.error(Dv.INVALID_TAG, gg(n, this.clonePosition())) }, e.prototype.parseTagName = function () { var e = this.offset(); for (this.bump(); !this.isEOF() && jg(this.char());)this.bump(); return this.message.slice(e, this.offset()) }, e.prototype.parseLiteral = function (e, t) { for (var n = this.clonePosition(), r = ""; ;) { var i = this.tryParseQuote(t); if (i) r += i; else { var o = this.tryParseUnquoted(e, t); if (o) r += o; else { var a = this.tryParseLeftAngleBracket(); if (!a) break; r += a } } } var s = gg(n, this.clonePosition()); return { val: { type: Lv.literal, value: r, location: s }, err: null } }, e.prototype.tryParseLeftAngleBracket = function () { return this.isEOF() || 60 !== this.char() || !this.ignoreTag && function (e) { return Ig(e) || 47 === e }(this.peek() || 0) ? null : (this.bump(), "<") }, e.prototype.tryParseQuote = function (e) { if (this.isEOF() || 39 !== this.char()) return null; switch (this.peek()) { case 39: return this.bump(), this.bump(), "'"; case 123: case 60: case 62: case 125: break; case 35: if ("plural" === e || "selectordinal" === e) break; return null; default: return null }this.bump(); var t = [this.char()]; for (this.bump(); !this.isEOF();) { var n = this.char(); if (39 === n) { if (39 !== this.peek()) { this.bump(); break } t.push(39), this.bump() } else t.push(n); this.bump() } return Eg.apply(void 0, t) }, e.prototype.tryParseUnquoted = function (e, t) { if (this.isEOF()) return null; var n = this.char(); return 60 === n || 123 === n || 35 === n && ("plural" === t || "selectordinal" === t) || 125 === n && e > 0 ? null : (this.bump(), Eg(n)) }, e.prototype.parseArgument = function (e, t) { var n = this.clonePosition(); if (this.bump(), this.bumpSpace(), this.isEOF()) return this.error(Dv.EXPECT_ARGUMENT_CLOSING_BRACE, gg(n, this.clonePosition())); if (125 === this.char()) return this.bump(), this.error(Dv.EMPTY_ARGUMENT, gg(n, this.clonePosition())); var r = this.parseIdentifierIfPossible().value; if (!r) return this.error(Dv.MALFORMED_ARGUMENT, gg(n, this.clonePosition())); if (this.bumpSpace(), this.isEOF()) return this.error(Dv.EXPECT_ARGUMENT_CLOSING_BRACE, gg(n, this.clonePosition())); switch (this.char()) { case 125: return this.bump(), { val: { type: Lv.argument, value: r, location: gg(n, this.clonePosition()) }, err: null }; case 44: return this.bump(), this.bumpSpace(), this.isEOF() ? this.error(Dv.EXPECT_ARGUMENT_CLOSING_BRACE, gg(n, this.clonePosition())) : this.parseArgumentOptions(e, t, r, n); default: return this.error(Dv.MALFORMED_ARGUMENT, gg(n, this.clonePosition())) } }, e.prototype.parseIdentifierIfPossible = function () { var e = this.clonePosition(), t = this.offset(), n = Cg(this.message, t), r = t + n.length; return this.bumpTo(r), { value: n, location: gg(e, this.clonePosition()) } }, e.prototype.parseArgumentOptions = function (e, t, n, r) { var i, o = this.clonePosition(), a = this.parseIdentifierIfPossible().value, s = this.clonePosition(); switch (a) { case "": return this.error(Dv.EXPECT_ARGUMENT_TYPE, gg(o, s)); case "number": case "date": case "time": this.bumpSpace(); var l = null; if (this.bumpIf(",")) { this.bumpSpace(); var u = this.clonePosition(); if ((g = this.parseSimpleArgStyleIfPossible()).err) return g; if (0 === (h = Ag(g.val)).length) return this.error(Dv.EXPECT_ARGUMENT_STYLE, gg(this.clonePosition(), this.clonePosition())); l = { style: h, styleLocation: gg(u, this.clonePosition()) } } if ((m = this.tryParseArgumentClose(r)).err) return m; var c = gg(r, this.clonePosition()); if (l && Tg(null == l ? void 0 : l.style, "::", 0)) { var f = Mg(l.style.slice(2)); if ("number" === a) return (g = this.parseNumberSkeletonFromString(f, l.styleLocation)).err ? g : { val: { type: Lv.number, value: n, location: c, style: g.val }, err: null }; if (0 === f.length) return this.error(Dv.EXPECT_DATE_TIME_SKELETON, c); var h = { type: Rv.dateTime, pattern: f, location: l.styleLocation, parsedOptions: this.shouldParseSkeletons ? tg(f) : {} }; return { val: { type: "date" === a ? Lv.date : Lv.time, value: n, location: c, style: h }, err: null } } return { val: { type: "number" === a ? Lv.number : "date" === a ? Lv.date : Lv.time, value: n, location: c, style: null !== (i = null == l ? void 0 : l.style) && void 0 !== i ? i : null }, err: null }; case "plural": case "selectordinal": case "select": var d = this.clonePosition(); if (this.bumpSpace(), !this.bumpIf(",")) return this.error(Dv.EXPECT_SELECT_ARGUMENT_OPTIONS, gg(d, Iv({}, d))); this.bumpSpace(); var p = this.parseIdentifierIfPossible(), v = 0; if ("select" !== a && "offset" === p.value) { if (!this.bumpIf(":")) return this.error(Dv.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE, gg(this.clonePosition(), this.clonePosition())); var g; if (this.bumpSpace(), (g = this.tryParseDecimalInteger(Dv.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE, Dv.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE)).err) return g; this.bumpSpace(), p = this.parseIdentifierIfPossible(), v = g.val } var m, y = this.tryParsePluralOrSelectOptions(e, a, t, p); if (y.err) return y; if ((m = this.tryParseArgumentClose(r)).err) return m; var b = gg(r, this.clonePosition()); return "select" === a ? { val: { type: Lv.select, value: n, options: Og(y.val), location: b }, err: null } : { val: { type: Lv.plural, value: n, options: Og(y.val), offset: v, pluralType: "plural" === a ? "cardinal" : "ordinal", location: b }, err: null }; default: return this.error(Dv.INVALID_ARGUMENT_TYPE, gg(o, s)) } }, e.prototype.tryParseArgumentClose = function (e) { return this.isEOF() || 125 !== this.char() ? this.error(Dv.EXPECT_ARGUMENT_CLOSING_BRACE, gg(e, this.clonePosition())) : (this.bump(), { val: !0, err: null }) }, e.prototype.parseSimpleArgStyleIfPossible = function () { for (var e = 0, t = this.clonePosition(); !this.isEOF();)switch (this.char()) { case 39: this.bump(); var n = this.clonePosition(); if (!this.bumpUntil("'")) return this.error(Dv.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE, gg(n, this.clonePosition())); this.bump(); break; case 123: e += 1, this.bump(); break; case 125: if (!(e > 0)) return { val: this.message.slice(t.offset, this.offset()), err: null }; e -= 1; break; default: this.bump() }return { val: this.message.slice(t.offset, this.offset()), err: null } }, e.prototype.parseNumberSkeletonFromString = function (e, t) { var n = []; try { n = function (e) { if (0 === e.length) throw new Error("Number skeleton cannot be empty"); for (var t = [], n = 0, r = e.split(ng).filter((function (e) { return e.length > 0 })); n < r.length; n++) { var i = r[n].split("/"); if (0 === i.length) throw new Error("Invalid number skeleton"); for (var o = i[0], a = i.slice(1), s = 0, l = a; s < l.length; s++)if (0 === l[s].length) throw new Error("Invalid number skeleton"); t.push({ stem: o, options: a }) } return t }(e) } catch (e) { return this.error(Dv.INVALID_NUMBER_SKELETON, t) } return { val: { type: Rv.number, tokens: n, location: t, parsedOptions: this.shouldParseSkeletons ? hg(n) : {} }, err: null } }, e.prototype.tryParsePluralOrSelectOptions = function (e, t, n, r) { for (var i, o = !1, a = [], s = new Set, l = r.value, u = r.location; ;) { if (0 === l.length) { var c = this.clonePosition(); if ("select" === t || !this.bumpIf("=")) break; var f = this.tryParseDecimalInteger(Dv.EXPECT_PLURAL_ARGUMENT_SELECTOR, Dv.INVALID_PLURAL_ARGUMENT_SELECTOR); if (f.err) return f; u = gg(c, this.clonePosition()), l = this.message.slice(c.offset, this.offset()) } if (s.has(l)) return this.error("select" === t ? Dv.DUPLICATE_SELECT_ARGUMENT_SELECTOR : Dv.DUPLICATE_PLURAL_ARGUMENT_SELECTOR, u); "other" === l && (o = !0), this.bumpSpace(); var h = this.clonePosition(); if (!this.bumpIf("{")) return this.error("select" === t ? Dv.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT : Dv.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT, gg(this.clonePosition(), this.clonePosition())); var d = this.parseMessage(e + 1, t, n); if (d.err) return d; var p = this.tryParseArgumentClose(h); if (p.err) return p; a.push([l, { value: d.val, location: gg(h, this.clonePosition()) }]), s.add(l), this.bumpSpace(), l = (i = this.parseIdentifierIfPossible()).value, u = i.location } return 0 === a.length ? this.error("select" === t ? Dv.EXPECT_SELECT_ARGUMENT_SELECTOR : Dv.EXPECT_PLURAL_ARGUMENT_SELECTOR, gg(this.clonePosition(), this.clonePosition())) : this.requiresOtherClause && !o ? this.error(Dv.MISSING_OTHER_CLAUSE, gg(this.clonePosition(), this.clonePosition())) : { val: a, err: null } }, e.prototype.tryParseDecimalInteger = function (e, t) { var n = 1, r = this.clonePosition(); this.bumpIf("+") || this.bumpIf("-") && (n = -1); for (var i = !1, o = 0; !this.isEOF();) { var a = this.char(); if (!(a >= 48 && a <= 57)) break; i = !0, o = 10 * o + (a - 48), this.bump() } var s = gg(r, this.clonePosition()); return i ? Sg(o *= n) ? { val: o, err: null } : this.error(t, s) : this.error(e, s) }, e.prototype.offset = function () { return this.position.offset }, e.prototype.isEOF = function () { return this.offset() === this.message.length }, e.prototype.clonePosition = function () { return { offset: this.position.offset, line: this.position.line, column: this.position.column } }, e.prototype.char = function () { var e = this.position.offset; if (e >= this.message.length) throw Error("out of bound"); var t = Pg(this.message, e); if (void 0 === t) throw Error("Offset ".concat(e, " is at invalid UTF-16 code unit boundary")); return t }, e.prototype.error = function (e, t) { return { val: null, err: { kind: e, message: this.message, location: t } } }, e.prototype.bump = function () { if (!this.isEOF()) { var e = this.char(); 10 === e ? (this.position.line += 1, this.position.column = 1, this.position.offset += 1) : (this.position.column += 1, this.position.offset += e < 65536 ? 1 : 2) } }, e.prototype.bumpIf = function (e) { if (Tg(this.message, e, this.offset())) { for (var t = 0; t < e.length; t++)this.bump(); return !0 } return !1 }, e.prototype.bumpUntil = function (e) { var t = this.offset(), n = this.message.indexOf(e, t); return n >= 0 ? (this.bumpTo(n), !0) : (this.bumpTo(this.message.length), !1) }, e.prototype.bumpTo = function (e) { if (this.offset() > e) throw Error("targetOffset ".concat(e, " must be greater than or equal to the current offset ").concat(this.offset())); for (e = Math.min(e, this.message.length); ;) { var t = this.offset(); if (t === e) break; if (t > e) throw Error("targetOffset ".concat(e, " is at invalid UTF-16 code unit boundary")); if (this.bump(), this.isEOF()) break } }, e.prototype.bumpSpace = function () { for (; !this.isEOF() && Fg(this.char());)this.bump() }, e.prototype.peek = function () { if (this.isEOF()) return null; var e = this.char(), t = this.offset(), n = this.message.charCodeAt(t + (e >= 65536 ? 2 : 1)); return null != n ? n : null }, e }(); function Ig(e) { return e >= 97 && e <= 122 || e >= 65 && e <= 90 } function jg(e) { return 45 === e || 46 === e || e >= 48 && e <= 57 || 95 === e || e >= 97 && e <= 122 || e >= 65 && e <= 90 || 183 == e || e >= 192 && e <= 214 || e >= 216 && e <= 246 || e >= 248 && e <= 893 || e >= 895 && e <= 8191 || e >= 8204 && e <= 8205 || e >= 8255 && e <= 8256 || e >= 8304 && e <= 8591 || e >= 11264 && e <= 12271 || e >= 12289 && e <= 55295 || e >= 63744 && e <= 64975 || e >= 65008 && e <= 65533 || e >= 65536 && e <= 983039 } function Fg(e) { return e >= 9 && e <= 13 || 32 === e || 133 === e || e >= 8206 && e <= 8207 || 8232 === e || 8233 === e } function Ng(e) { return e >= 33 && e <= 35 || 36 === e || e >= 37 && e <= 39 || 40 === e || 41 === e || 42 === e || 43 === e || 44 === e || 45 === e || e >= 46 && e <= 47 || e >= 58 && e <= 59 || e >= 60 && e <= 62 || e >= 63 && e <= 64 || 91 === e || 92 === e || 93 === e || 94 === e || 96 === e || 123 === e || 124 === e || 125 === e || 126 === e || 161 === e || e >= 162 && e <= 165 || 166 === e || 167 === e || 169 === e || 171 === e || 172 === e || 174 === e || 176 === e || 177 === e || 182 === e || 187 === e || 191 === e || 215 === e || 247 === e || e >= 8208 && e <= 8213 || e >= 8214 && e <= 8215 || 8216 === e || 8217 === e || 8218 === e || e >= 8219 && e <= 8220 || 8221 === e || 8222 === e || 8223 === e || e >= 8224 && e <= 8231 || e >= 8240 && e <= 8248 || 8249 === e || 8250 === e || e >= 8251 && e <= 8254 || e >= 8257 && e <= 8259 || 8260 === e || 8261 === e || 8262 === e || e >= 8263 && e <= 8273 || 8274 === e || 8275 === e || e >= 8277 && e <= 8286 || e >= 8592 && e <= 8596 || e >= 8597 && e <= 8601 || e >= 8602 && e <= 8603 || e >= 8604 && e <= 8607 || 8608 === e || e >= 8609 && e <= 8610 || 8611 === e || e >= 8612 && e <= 8613 || 8614 === e || e >= 8615 && e <= 8621 || 8622 === e || e >= 8623 && e <= 8653 || e >= 8654 && e <= 8655 || e >= 8656 && e <= 8657 || 8658 === e || 8659 === e || 8660 === e || e >= 8661 && e <= 8691 || e >= 8692 && e <= 8959 || e >= 8960 && e <= 8967 || 8968 === e || 8969 === e || 8970 === e || 8971 === e || e >= 8972 && e <= 8991 || e >= 8992 && e <= 8993 || e >= 8994 && e <= 9e3 || 9001 === e || 9002 === e || e >= 9003 && e <= 9083 || 9084 === e || e >= 9085 && e <= 9114 || e >= 9115 && e <= 9139 || e >= 9140 && e <= 9179 || e >= 9180 && e <= 9185 || e >= 9186 && e <= 9254 || e >= 9255 && e <= 9279 || e >= 9280 && e <= 9290 || e >= 9291 && e <= 9311 || e >= 9472 && e <= 9654 || 9655 === e || e >= 9656 && e <= 9664 || 9665 === e || e >= 9666 && e <= 9719 || e >= 9720 && e <= 9727 || e >= 9728 && e <= 9838 || 9839 === e || e >= 9840 && e <= 10087 || 10088 === e || 10089 === e || 10090 === e || 10091 === e || 10092 === e || 10093 === e || 10094 === e || 10095 === e || 10096 === e || 10097 === e || 10098 === e || 10099 === e || 10100 === e || 10101 === e || e >= 10132 && e <= 10175 || e >= 10176 && e <= 10180 || 10181 === e || 10182 === e || e >= 10183 && e <= 10213 || 10214 === e || 10215 === e || 10216 === e || 10217 === e || 10218 === e || 10219 === e || 10220 === e || 10221 === e || 10222 === e || 10223 === e || e >= 10224 && e <= 10239 || e >= 10240 && e <= 10495 || e >= 10496 && e <= 10626 || 10627 === e || 10628 === e || 10629 === e || 10630 === e || 10631 === e || 10632 === e || 10633 === e || 10634 === e || 10635 === e || 10636 === e || 10637 === e || 10638 === e || 10639 === e || 10640 === e || 10641 === e || 10642 === e || 10643 === e || 10644 === e || 10645 === e || 10646 === e || 10647 === e || 10648 === e || e >= 10649 && e <= 10711 || 10712 === e || 10713 === e || 10714 === e || 10715 === e || e >= 10716 && e <= 10747 || 10748 === e || 10749 === e || e >= 10750 && e <= 11007 || e >= 11008 && e <= 11055 || e >= 11056 && e <= 11076 || e >= 11077 && e <= 11078 || e >= 11079 && e <= 11084 || e >= 11085 && e <= 11123 || e >= 11124 && e <= 11125 || e >= 11126 && e <= 11157 || 11158 === e || e >= 11159 && e <= 11263 || e >= 11776 && e <= 11777 || 11778 === e || 11779 === e || 11780 === e || 11781 === e || e >= 11782 && e <= 11784 || 11785 === e || 11786 === e || 11787 === e || 11788 === e || 11789 === e || e >= 11790 && e <= 11798 || 11799 === e || e >= 11800 && e <= 11801 || 11802 === e || 11803 === e || 11804 === e || 11805 === e || e >= 11806 && e <= 11807 || 11808 === e || 11809 === e || 11810 === e || 11811 === e || 11812 === e || 11813 === e || 11814 === e || 11815 === e || 11816 === e || 11817 === e || e >= 11818 && e <= 11822 || 11823 === e || e >= 11824 && e <= 11833 || e >= 11834 && e <= 11835 || e >= 11836 && e <= 11839 || 11840 === e || 11841 === e || 11842 === e || e >= 11843 && e <= 11855 || e >= 11856 && e <= 11857 || 11858 === e || e >= 11859 && e <= 11903 || e >= 12289 && e <= 12291 || 12296 === e || 12297 === e || 12298 === e || 12299 === e || 12300 === e || 12301 === e || 12302 === e || 12303 === e || 12304 === e || 12305 === e || e >= 12306 && e <= 12307 || 12308 === e || 12309 === e || 12310 === e || 12311 === e || 12312 === e || 12313 === e || 12314 === e || 12315 === e || 12316 === e || 12317 === e || e >= 12318 && e <= 12319 || 12320 === e || 12336 === e || 64830 === e || 64831 === e || e >= 65093 && e <= 65094 } function zg(e) { e.forEach((function (e) { if (delete e.location, Xv(e) || Gv(e)) for (var t in e.options) delete e.options[t].location, zg(e.options[t].value); else Wv(e) && Zv(e.style) || (Kv(e) || Yv(e)) && $v(e.style) ? delete e.style.location : Jv(e) && zg(e.children) })) } function Bg(e, t) { void 0 === t && (t = {}), t = Iv({ shouldParseSkeletons: !0, requiresOtherClause: !0 }, t); var n = new Rg(e, t).parse(); if (n.err) { var r = SyntaxError(Dv[n.err.kind]); throw r.location = n.err.location, r.originalMessage = n.err.message, r } return (null == t ? void 0 : t.captureLocation) || zg(n.val), n.val } function Vg(e, t) { var n = t && t.cache ? t.cache : qg, r = t && t.serializer ? t.serializer : Yg; return (t && t.strategy ? t.strategy : Kg)(e, { cache: n, serializer: r }) } function Ug(e, t, n, r) { var i = function (e) { return null == e || "number" == typeof e || "boolean" == typeof e }(r) ? r : n(r), o = t.get(i); return void 0 === o && (o = e.call(this, r), t.set(i, o)), o } function Hg(e, t, n) { var r = Array.prototype.slice.call(arguments, 3), i = n(r), o = t.get(i); return void 0 === o && (o = e.apply(this, r), t.set(i, o)), o } function Wg(e, t, n, r, i) { return n.bind(t, e, r, i) } function Kg(e, t) { return Wg(e, this, 1 === e.length ? Ug : Hg, t.cache.create(), t.serializer) } var Yg = function () { return JSON.stringify(arguments) }; function Xg() { this.cache = Object.create(null) } Xg.prototype.get = function (e) { return this.cache[e] }, Xg.prototype.set = function (e, t) { this.cache[e] = t }; var Gg, qg = { create: function () { return new Xg } }, Jg = { variadic: function (e, t) { return Wg(e, this, Hg, t.cache.create(), t.serializer) }, monadic: function (e, t) { return Wg(e, this, Ug, t.cache.create(), t.serializer) } }; !function (e) { e.MISSING_VALUE = "MISSING_VALUE", e.INVALID_VALUE = "INVALID_VALUE", e.MISSING_INTL_API = "MISSING_INTL_API" }(Gg || (Gg = {})); var Zg, $g = function (e) { function t(t, n, r) { var i = e.call(this, t) || this; return i.code = n, i.originalMessage = r, i } return Av(t, e), t.prototype.toString = function () { return "[formatjs Error: ".concat(this.code, "] ").concat(this.message) }, t }(Error), Qg = function (e) { function t(t, n, r, i) { return e.call(this, 'Invalid values for "'.concat(t, '": "').concat(n, '". Options are "').concat(Object.keys(r).join('", "'), '"'), Gg.INVALID_VALUE, i) || this } return Av(t, e), t }($g), em = function (e) { function t(t, n, r) { return e.call(this, 'Value for "'.concat(t, '" must be of type ').concat(n), Gg.INVALID_VALUE, r) || this } return Av(t, e), t }($g), tm = function (e) { function t(t, n) { return e.call(this, 'The intl string context variable "'.concat(t, '" was not provided to the string "').concat(n, '"'), Gg.MISSING_VALUE, n) || this } return Av(t, e), t }($g); function nm(e) { return "function" == typeof e } function rm(e, t, n, r, i, o, a) { if (1 === e.length && Uv(e[0])) return [{ type: Zg.literal, value: e[0].value }]; for (var s = [], l = 0, u = e; l < u.length; l++) { var c = u[l]; if (Uv(c)) s.push({ type: Zg.literal, value: c.value }); else if (qv(c)) "number" == typeof o && s.push({ type: Zg.literal, value: n.getNumberFormat(t).format(o) }); else { var f = c.value; if (!i || !(f in i)) throw new tm(f, a); var h = i[f]; if (Hv(c)) (!h || "string" == typeof h || "number" == typeof h) && (h = "string" == typeof h || "number" == typeof h ? String(h) : ""), s.push({ type: "string" == typeof h ? Zg.literal : Zg.object, value: h }); else if (Kv(c)) { var d = "string" == typeof c.style ? r.date[c.style] : $v(c.style) ? c.style.parsedOptions : void 0; s.push({ type: Zg.literal, value: n.getDateTimeFormat(t, d).format(h) }) } else if (Yv(c)) d = "string" == typeof c.style ? r.time[c.style] : $v(c.style) ? c.style.parsedOptions : void 0, s.push({ type: Zg.literal, value: n.getDateTimeFormat(t, d).format(h) }); else if (Wv(c)) (d = "string" == typeof c.style ? r.number[c.style] : Zv(c.style) ? c.style.parsedOptions : void 0) && d.scale && (h *= d.scale || 1), s.push({ type: Zg.literal, value: n.getNumberFormat(t, d).format(h) }); else { if (Jv(c)) { var p = c.children, v = c.value, g = i[v]; if (!nm(g)) throw new em(v, "function", a); var m = g(rm(p, t, n, r, i, o).map((function (e) { return e.value }))); Array.isArray(m) || (m = [m]), s.push.apply(s, m.map((function (e) { return { type: "string" == typeof e ? Zg.literal : Zg.object, value: e } }))) } if (Xv(c)) { if (!(y = c.options[h] || c.options.other)) throw new Qg(c.value, h, Object.keys(c.options), a); s.push.apply(s, rm(y.value, t, n, r, i)) } else if (Gv(c)) { var y; if (!(y = c.options["=".concat(h)])) { if (!Intl.PluralRules) throw new $g('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n', Gg.MISSING_INTL_API, a); var b = n.getPluralRules(t, { type: c.pluralType }).select(h - (c.offset || 0)); y = c.options[b] || c.options.other } if (!y) throw new Qg(c.value, h, Object.keys(c.options), a); s.push.apply(s, rm(y.value, t, n, r, i, h - (c.offset || 0))) } } } } return function (e) { return e.length < 2 ? e : e.reduce((function (e, t) { var n = e[e.length - 1]; return n && n.type === Zg.literal && t.type === Zg.literal ? n.value += t.value : e.push(t), e }), []) }(s) } function im(e) { return { create: function () { return { get: function (t) { return e[t] }, set: function (t, n) { e[t] = n } } } } } !function (e) { e[e.literal = 0] = "literal", e[e.object = 1] = "object" }(Zg || (Zg = {})); var om, am = function () { function e(t, n, r, i) { var o = this; if (void 0 === n && (n = e.defaultLocale), this.formatterCache = { number: {}, dateTime: {}, pluralRules: {} }, this.format = function (e) { var t = o.formatToParts(e); if (1 === t.length) return t[0].value; var n = t.reduce((function (e, t) { return e.length && t.type === Zg.literal && "string" == typeof e[e.length - 1] ? e[e.length - 1] += t.value : e.push(t.value), e }), []); return n.length <= 1 ? n[0] || "" : n }, this.formatToParts = function (e) { return rm(o.ast, o.locales, o.formatters, o.formats, e, void 0, o.message) }, this.resolvedOptions = function () { return { locale: Intl.NumberFormat.supportedLocalesOf(o.locales)[0] } }, this.getAst = function () { return o.ast }, "string" == typeof t) { if (this.message = t, !e.__parse) throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`"); this.ast = e.__parse(t, { ignoreTag: null == i ? void 0 : i.ignoreTag }) } else this.ast = t; if (!Array.isArray(this.ast)) throw new TypeError("A message must be provided as a String or AST."); this.formats = function (e, t) { return t ? Object.keys(e).reduce((function (n, r) { return n[r] = function (e, t) { return t ? Iv(Iv(Iv({}, e || {}), t || {}), Object.keys(e).reduce((function (n, r) { return n[r] = Iv(Iv({}, e[r]), t[r] || {}), n }), {})) : e }(e[r], t[r]), n }), Iv({}, e)) : e }(e.formats, r), this.locales = n, this.formatters = i && i.formatters || function (e) { return void 0 === e && (e = { number: {}, dateTime: {}, pluralRules: {} }), { getNumberFormat: Vg((function () { for (var e, t = [], n = 0; n < arguments.length; n++)t[n] = arguments[n]; return new ((e = Intl.NumberFormat).bind.apply(e, Bv([void 0], t, !1))) }), { cache: im(e.number), strategy: Jg.variadic }), getDateTimeFormat: Vg((function () { for (var e, t = [], n = 0; n < arguments.length; n++)t[n] = arguments[n]; return new ((e = Intl.DateTimeFormat).bind.apply(e, Bv([void 0], t, !1))) }), { cache: im(e.dateTime), strategy: Jg.variadic }), getPluralRules: Vg((function () { for (var e, t = [], n = 0; n < arguments.length; n++)t[n] = arguments[n]; return new ((e = Intl.PluralRules).bind.apply(e, Bv([void 0], t, !1))) }), { cache: im(e.pluralRules), strategy: Jg.variadic }) } }(this.formatterCache) } return Object.defineProperty(e, "defaultLocale", { get: function () { return e.memoizedDefaultLocale || (e.memoizedDefaultLocale = (new Intl.NumberFormat).resolvedOptions().locale), e.memoizedDefaultLocale }, enumerable: !1, configurable: !0 }), e.memoizedDefaultLocale = null, e.__parse = Bg, e.formats = { number: { integer: { maximumFractionDigits: 0 }, currency: { style: "currency" }, percent: { style: "percent" } }, date: { short: { month: "numeric", day: "numeric", year: "2-digit" }, medium: { month: "short", day: "numeric", year: "numeric" }, long: { month: "long", day: "numeric", year: "numeric" }, full: { weekday: "long", month: "long", day: "numeric", year: "numeric" } }, time: { short: { hour: "numeric", minute: "numeric" }, medium: { hour: "numeric", minute: "numeric", second: "numeric" }, long: { hour: "numeric", minute: "numeric", second: "numeric", timeZoneName: "short" }, full: { hour: "numeric", minute: "numeric", second: "numeric", timeZoneName: "short" } } }, e }(), sm = am; !function (e) { e.FORMAT_ERROR = "FORMAT_ERROR", e.UNSUPPORTED_FORMATTER = "UNSUPPORTED_FORMATTER", e.INVALID_CONFIG = "INVALID_CONFIG", e.MISSING_DATA = "MISSING_DATA", e.MISSING_TRANSLATION = "MISSING_TRANSLATION" }(om || (om = {})); var lm = function (e) { function t(n, r, i) { var o = this, a = i ? i instanceof Error ? i : new Error(String(i)) : void 0; return (o = e.call(this, "[@formatjs/intl Error ".concat(n, "] ").concat(r, " \n").concat(a ? "\n".concat(a.message, "\n").concat(a.stack) : "")) || this).code = n, "function" == typeof Error.captureStackTrace && Error.captureStackTrace(o, t), o } return Av(t, e), t }(Error), um = function (e) { function t(t, n) { return e.call(this, om.UNSUPPORTED_FORMATTER, t, n) || this } return Av(t, e), t }(lm), cm = function (e) { function t(t, n) { return e.call(this, om.INVALID_CONFIG, t, n) || this } return Av(t, e), t }(lm), fm = function (e) { function t(t, n) { return e.call(this, om.MISSING_DATA, t, n) || this } return Av(t, e), t }(lm), hm = function (e) { function t(t, n, r) { return e.call(this, om.FORMAT_ERROR, "".concat(t, " \nLocale: ").concat(n, "\n"), r) || this } return Av(t, e), t }(lm), dm = function (e) { function t(t, n, r, i) { var o = e.call(this, "".concat(t, " \nMessageID: ").concat(null == r ? void 0 : r.id, "\nDefault Message: ").concat(null == r ? void 0 : r.defaultMessage, "\nDescription: ").concat(null == r ? void 0 : r.description, " \n"), n, i) || this; return o.descriptor = r, o } return Av(t, e), t }(hm), pm = function (e) { function t(t, n) { var r = e.call(this, om.MISSING_TRANSLATION, 'Missing message: "'.concat(t.id, '" for locale "').concat(n, '", using ').concat(t.defaultMessage ? "default message" : "id", " as fallback.")) || this; return r.descriptor = t, r } return Av(t, e), t }(lm); function vm(e, t, n) { return void 0 === n && (n = {}), t.reduce((function (t, r) { return r in e ? t[r] = e[r] : r in n && (t[r] = n[r]), t }), {}) } var gm = { formats: {}, messages: {}, timeZone: void 0, defaultLocale: "en", defaultFormats: {}, fallbackOnEmptyString: !0, onError: function (e) { } }; function mm(e) { return { create: function () { return { get: function (t) { return e[t] }, set: function (t, n) { e[t] = n } } } } } function ym(e, t, n, r) { var i, o = e && e[t]; if (o && (i = o[n]), i) return i; r(new um("No ".concat(t, " format named: ").concat(n))) } function bm(e, t) { return Object.keys(e).reduce((function (n, r) { return n[r] = Iv({ timeZone: t }, e[r]), n }), {}) } function wm(e, t) { return Object.keys(Iv(Iv({}, e), t)).reduce((function (n, r) { return n[r] = Iv(Iv({}, e[r] || {}), t[r] || {}), n }), {}) } function xm(e, t) { if (!t) return e; var n = am.formats; return Iv(Iv(Iv({}, n), e), { date: wm(bm(n.date, t), bm(e.date || {}, t)), time: wm(bm(n.time, t), bm(e.time || {}, t)) }) } function _m(e, t, n, r, i) { var o = e.locale, a = e.formats, s = e.messages, l = e.defaultLocale, u = e.defaultFormats, c = e.fallbackOnEmptyString, f = e.onError, h = e.timeZone, d = e.defaultRichTextElements; void 0 === n && (n = { id: "" }); var p = n.id, v = n.defaultMessage; Vv(!!p, "[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.io/docs/tooling/linter#enforce-id)\nto autofix this issue"); var g = String(p), m = s && Object.prototype.hasOwnProperty.call(s, g) && s[g]; if (Array.isArray(m) && 1 === m.length && m[0].type === Lv.literal) return m[0].value; if (!r && m && "string" == typeof m && !d) return m.replace(/'\{(.*?)\}'/gi, "{$1}"); if (r = Iv(Iv({}, d), r || {}), a = xm(a, h), u = xm(u, h), !m) { if (!1 === c && "" === m) return m; if ((!v || o && o.toLowerCase() !== l.toLowerCase()) && f(new pm(n, o)), v) try { return t.getMessageFormat(v, l, u, i).format(r) } catch (e) { return f(new dm('Error formatting default message for: "'.concat(g, '", rendering default message verbatim'), o, n, e)), "string" == typeof v ? v : g } return g } try { return t.getMessageFormat(m, o, a, Iv({ formatters: t }, i || {})).format(r) } catch (e) { f(new dm('Error formatting message: "'.concat(g, '", using ').concat(v ? "default message" : "id", " as fallback."), o, n, e)) } if (v) try { return t.getMessageFormat(v, l, u, i).format(r) } catch (e) { f(new dm('Error formatting the default message for: "'.concat(g, '", rendering message verbatim'), o, n, e)) } return "string" == typeof m ? m : "string" == typeof v ? v : g } var Sm = ["localeMatcher", "formatMatcher", "timeZone", "hour12", "weekday", "era", "year", "month", "day", "hour", "minute", "second", "timeZoneName", "hourCycle", "dateStyle", "timeStyle", "calendar", "numberingSystem"]; function km(e, t, n, r) { var i = e.locale, o = e.formats, a = e.onError, s = e.timeZone; void 0 === r && (r = {}); var l = r.format, u = Iv(Iv({}, s && { timeZone: s }), l && ym(o, t, l, a)), c = vm(r, Sm, u); return "time" === t && !c.hour && !c.minute && !c.second && !c.timeStyle && !c.dateStyle && (c = Iv(Iv({}, c), { hour: "numeric", minute: "numeric" })), n(i, c) } function Cm(e, t) { for (var n = [], r = 2; r < arguments.length; r++)n[r - 2] = arguments[r]; var i = n[0], o = n[1], a = void 0 === o ? {} : o, s = "string" == typeof i ? new Date(i || 0) : i; try { return km(e, "date", t, a).format(s) } catch (t) { e.onError(new lm(om.FORMAT_ERROR, "Error formatting date.", t)) } return String(s) } function Tm(e, t) { for (var n = [], r = 2; r < arguments.length; r++)n[r - 2] = arguments[r]; var i = n[0], o = n[1], a = void 0 === o ? {} : o, s = "string" == typeof i ? new Date(i || 0) : i; try { return km(e, "time", t, a).format(s) } catch (t) { e.onError(new lm(om.FORMAT_ERROR, "Error formatting time.", t)) } return String(s) } function Em(e, t) { for (var n = [], r = 2; r < arguments.length; r++)n[r - 2] = arguments[r]; var i = n[0], o = n[1], a = n[2], s = void 0 === a ? {} : a, l = e.timeZone, u = e.locale, c = e.onError, f = vm(s, Sm, l ? { timeZone: l } : {}); try { return t(u, f).formatRange(i, o) } catch (e) { c(new lm(om.FORMAT_ERROR, "Error formatting date time range.", e)) } return String(i) } function Om(e, t) { for (var n = [], r = 2; r < arguments.length; r++)n[r - 2] = arguments[r]; var i = n[0], o = n[1], a = void 0 === o ? {} : o, s = "string" == typeof i ? new Date(i || 0) : i; try { return km(e, "date", t, a).formatToParts(s) } catch (t) { e.onError(new lm(om.FORMAT_ERROR, "Error formatting date.", t)) } return [] } function Pm(e, t) { for (var n = [], r = 2; r < arguments.length; r++)n[r - 2] = arguments[r]; var i = n[0], o = n[1], a = void 0 === o ? {} : o, s = "string" == typeof i ? new Date(i || 0) : i; try { return km(e, "time", t, a).formatToParts(s) } catch (t) { e.onError(new lm(om.FORMAT_ERROR, "Error formatting time.", t)) } return [] } var Mm = ["localeMatcher", "style", "type", "fallback"]; function Am(e, t, n, r) { var i = e.locale, o = e.onError; Intl.DisplayNames || o(new $g('Intl.DisplayNames is not available in this environment.\nTry polyfilling it using "@formatjs/intl-displaynames"\n', Gg.MISSING_INTL_API)); var a = vm(r, Mm); try { return t(i, a).of(n) } catch (e) { o(new lm(om.FORMAT_ERROR, "Error formatting display name.", e)) } } var Dm = ["localeMatcher", "type", "style"], Lm = Date.now(); function Rm(e, t, n, r) { void 0 === r && (r = {}); var i = Im(e, t, n, r).reduce((function (e, t) { var n = t.value; return "string" != typeof n ? e.push(n) : "string" == typeof e[e.length - 1] ? e[e.length - 1] += n : e.push(n), e }), []); return 1 === i.length ? i[0] : i } function Im(e, t, n, r) { var i = e.locale, o = e.onError; void 0 === r && (r = {}), Intl.ListFormat || o(new $g('Intl.ListFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-listformat"\n', Gg.MISSING_INTL_API)); var a = vm(r, Dm); try { var s = {}, l = n.map((function (e, t) { if ("object" == C(e)) { var n = function (e) { return "".concat(Lm, "_").concat(e, "_").concat(Lm) }(t); return s[n] = e, n } return String(e) })); return t(i, a).formatToParts(l).map((function (e) { return "literal" === e.type ? e : Iv(Iv({}, e), { value: s[e.value] || e.value }) })) } catch (e) { o(new lm(om.FORMAT_ERROR, "Error formatting list.", e)) } return n } var jm = ["localeMatcher", "type"]; function Fm(e, t, n, r) { var i = e.locale, o = e.onError; void 0 === r && (r = {}), Intl.PluralRules || o(new $g('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n', Gg.MISSING_INTL_API)); var a = vm(r, jm); try { return t(i, a).select(n) } catch (e) { o(new hm("Error formatting plural.", i, e)) } return "other" } var Nm = ["numeric", "style"]; function zm(e, t, n, r, i) { void 0 === i && (i = {}), r || (r = "second"), Intl.RelativeTimeFormat || e.onError(new $g('Intl.RelativeTimeFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-relativetimeformat"\n', Gg.MISSING_INTL_API)); try { return function (e, t, n) { var r = e.locale, i = e.formats, o = e.onError; void 0 === n && (n = {}); var a = n.format, s = !!a && ym(i, "relative", a, o) || {}; return t(r, vm(n, Nm, s)) }(e, t, i).format(n, r) } catch (t) { e.onError(new hm("Error formatting relative time.", e.locale, t)) } return String(n) } var Bm = ["localeMatcher", "style", "currency", "currencyDisplay", "unit", "unitDisplay", "useGrouping", "minimumIntegerDigits", "minimumFractionDigits", "maximumFractionDigits", "minimumSignificantDigits", "maximumSignificantDigits", "compactDisplay", "currencyDisplay", "currencySign", "notation", "signDisplay", "unit", "unitDisplay", "numberingSystem"]; function Vm(e, t, n) { var r = e.locale, i = e.formats, o = e.onError; void 0 === n && (n = {}); var a = n.format, s = a && ym(i, "number", a, o) || {}; return t(r, vm(n, Bm, s)) } function Um(e, t, n, r) { void 0 === r && (r = {}); try { return Vm(e, t, r).format(n) } catch (t) { e.onError(new lm(om.FORMAT_ERROR, "Error formatting number.", t)) } return String(n) } function Hm(e, t, n, r) { void 0 === r && (r = {}); try { return Vm(e, t, r).formatToParts(n) } catch (t) { e.onError(new lm(om.FORMAT_ERROR, "Error formatting number.", t)) } return [] } function Wm(e, t) { var n = function (e) { void 0 === e && (e = { dateTime: {}, number: {}, message: {}, relativeTime: {}, pluralRules: {}, list: {}, displayNames: {} }); var t = Intl.RelativeTimeFormat, n = Intl.ListFormat, r = Intl.DisplayNames, i = Vg((function () { for (var e, t = [], n = 0; n < arguments.length; n++)t[n] = arguments[n]; return new ((e = Intl.DateTimeFormat).bind.apply(e, Bv([void 0], t, !1))) }), { cache: mm(e.dateTime), strategy: Jg.variadic }), o = Vg((function () { for (var e, t = [], n = 0; n < arguments.length; n++)t[n] = arguments[n]; return new ((e = Intl.NumberFormat).bind.apply(e, Bv([void 0], t, !1))) }), { cache: mm(e.number), strategy: Jg.variadic }), a = Vg((function () { for (var e, t = [], n = 0; n < arguments.length; n++)t[n] = arguments[n]; return new ((e = Intl.PluralRules).bind.apply(e, Bv([void 0], t, !1))) }), { cache: mm(e.pluralRules), strategy: Jg.variadic }); return { getDateTimeFormat: i, getNumberFormat: o, getMessageFormat: Vg((function (e, t, n, r) { return new am(e, t, n, Iv({ formatters: { getNumberFormat: o, getDateTimeFormat: i, getPluralRules: a } }, r || {})) }), { cache: mm(e.message), strategy: Jg.variadic }), getRelativeTimeFormat: Vg((function () { for (var e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return new (t.bind.apply(t, Bv([void 0], e, !1))) }), { cache: mm(e.relativeTime), strategy: Jg.variadic }), getPluralRules: a, getListFormat: Vg((function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; return new (n.bind.apply(n, Bv([void 0], e, !1))) }), { cache: mm(e.list), strategy: Jg.variadic }), getDisplayNames: Vg((function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; return new (r.bind.apply(r, Bv([void 0], e, !1))) }), { cache: mm(e.displayNames), strategy: Jg.variadic }) } }(t), r = Iv(Iv({}, gm), e), i = r.locale, o = r.defaultLocale, a = r.onError; return i ? !Intl.NumberFormat.supportedLocalesOf(i).length && a ? a(new fm('Missing locale data for locale: "'.concat(i, '" in Intl.NumberFormat. Using default locale: "').concat(o, '" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))) : !Intl.DateTimeFormat.supportedLocalesOf(i).length && a && a(new fm('Missing locale data for locale: "'.concat(i, '" in Intl.DateTimeFormat. Using default locale: "').concat(o, '" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))) : (a && a(new cm('"locale" was not configured, using "'.concat(o, '" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details'))), r.locale = r.defaultLocale || "en"), function (e) { e.defaultRichTextElements && function (e) { return "string" == typeof (e ? e[Object.keys(e)[0]] : void 0) }(e.messages || {}) && console.warn('[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. \nPlease consider using "@formatjs/cli" to pre-compile your messages for performance.\nFor more details see https://formatjs.io/docs/getting-started/message-distribution') }(r), Iv(Iv({}, r), { formatters: n, formatNumber: Um.bind(null, r, n.getNumberFormat), formatNumberToParts: Hm.bind(null, r, n.getNumberFormat), formatRelativeTime: zm.bind(null, r, n.getRelativeTimeFormat), formatDate: Cm.bind(null, r, n.getDateTimeFormat), formatDateToParts: Om.bind(null, r, n.getDateTimeFormat), formatTime: Tm.bind(null, r, n.getDateTimeFormat), formatDateTimeRange: Em.bind(null, r, n.getDateTimeFormat), formatTimeToParts: Pm.bind(null, r, n.getDateTimeFormat), formatPlural: Fm.bind(null, r, n.getPluralRules), formatMessage: _m.bind(null, r, n), formatList: Rm.bind(null, r, n.getListFormat), formatListToParts: Im.bind(null, r, n.getListFormat), formatDisplayName: Am.bind(null, r, n.getDisplayNames) }) } function Km(e) { Vv(e, "[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.") } var Ym = Iv(Iv({}, gm), { textComponent: h.exports.Fragment }); function Xm(e, t) { if (e === t) return !0; if (!e || !t) return !1; var n = Object.keys(e), r = Object.keys(t), i = n.length; if (r.length !== i) return !1; for (var o = 0; o < i; o++) { var a = n[o]; if (e[a] !== t[a] || !Object.prototype.hasOwnProperty.call(t, a)) return !1 } return !0 } var Gm = h.exports.createContext(null); Gm.Consumer; var qm = Gm.Provider, Jm = Gm; function Zm() { var e = h.exports.useContext(Jm); return Km(e), e } function $m(e) { return { locale: e.locale, timeZone: e.timeZone, fallbackOnEmptyString: e.fallbackOnEmptyString, formats: e.formats, textComponent: e.textComponent, messages: e.messages, defaultLocale: e.defaultLocale, defaultFormats: e.defaultFormats, onError: e.onError, wrapRichTextChunksInFragment: e.wrapRichTextChunksInFragment, defaultRichTextElements: e.defaultRichTextElements } } function Qm(e) { return e && Object.keys(e).reduce((function (t, n) { var r = e[n]; return t[n] = nm(r) ? function (e) { return function (t) { return e(h.exports.Children.toArray(t)) } }(r) : r, t }), {}) } var ey = function (e, t, n, r) { for (var i = [], o = 4; o < arguments.length; o++)i[o - 4] = arguments[o]; var a = Qm(r), s = _m.apply(void 0, Bv([e, t, n, a], i, !1)); return Array.isArray(s) ? h.exports.Children.toArray(s) : s }, ty = function (e, t) { var n = e.defaultRichTextElements, r = jv(e, ["defaultRichTextElements"]), i = Qm(n), o = Wm(Iv(Iv(Iv({}, Ym), r), { defaultRichTextElements: i }), t); return Iv(Iv({}, o), { formatMessage: ey.bind(null, { locale: o.locale, timeZone: o.timeZone, fallbackOnEmptyString: o.fallbackOnEmptyString, formats: o.formats, defaultLocale: o.defaultLocale, defaultFormats: o.defaultFormats, messages: o.messages, onError: o.onError, defaultRichTextElements: i }, o.formatters) }) }, ny = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.cache = { dateTime: {}, number: {}, message: {}, relativeTime: {}, pluralRules: {}, list: {}, displayNames: {} }, t.state = { cache: t.cache, intl: ty($m(t.props), t.cache), prevConfig: $m(t.props) }, t } return Av(t, e), t.getDerivedStateFromProps = function (e, t) { var n = t.prevConfig, r = t.cache, i = $m(e); return Xm(n, i) ? null : { intl: ty(i, r), prevConfig: i } }, t.prototype.render = function () { return Km(this.state.intl), h.exports.createElement(qm, { value: this.state.intl }, this.props.children) }, t.displayName = "IntlProvider", t.defaultProps = Ym, t }(h.exports.PureComponent), ry = ny; function iy(e) { var t = Zm(), n = t.formatMessage, r = t.textComponent, i = void 0 === r ? h.exports.Fragment : r, o = e.id, a = e.description, s = e.defaultMessage, l = e.values, u = e.children, c = e.tagName, f = void 0 === c ? i : c, d = n({ id: o, description: a, defaultMessage: s }, l, { ignoreTag: e.ignoreTag }); return "function" == typeof u ? u(Array.isArray(d) ? d : [d]) : f ? h.exports.createElement(f, null, h.exports.Children.toArray(d)) : h.exports.createElement(h.exports.Fragment, null, d) } iy.displayName = "FormattedMessage"; var oy = h.exports.memo(iy, (function (e, t) { var n = e.values, r = jv(e, ["values"]), i = t.values, o = jv(t, ["values"]); return Xm(i, n) && Xm(r, o) })); oy.displayName = "MemoizedFormattedMessage"; var ay = oy, sy = function (e) { return e.INLINE = "inline", e.OVERLAY = "overlay", e }(sy || {}), ly = function (e) { return e.TOP = "top", e.BOTTOM = "bottom", e.HIDDEN = "", e }(ly || {}), uy = { emoticons: { id: "ndJMAh", defaultMessage: [{ type: 0, value: "Emoticons" }] }, doodles: { id: "XCd0W/", defaultMessage: [{ type: 0, value: "Doodles" }] }, landmarks: { id: "hqIEba", defaultMessage: [{ type: 0, value: "Landmarks" }] }, bubbles: { id: "ovg8vQ", defaultMessage: [{ type: 0, value: "Bubbles" }] }, transportation: { id: "nDt4cJ", defaultMessage: [{ type: 0, value: "Transportation" }] }, beach: { id: "PfXXAT", defaultMessage: [{ type: 0, value: "Beach" }] } }, cy = { fill: "#1565C0", opacity: 1, backgroundColor: null, strokeWidth: .05, stroke: "#000" }, fy = [1, 8, 15, 20, 25], hy = function (e) { return e.DARK = "dark", e.LIGHT = "light", e }(hy || {}), dy = [{ name: hy.LIGHT, colors: { "--be-foreground-base": "0 0 0", "--be-primary-light": "191 219 254", "--be-primary": "59 130 246", "--be-primary-dark": "37 99 235", "--be-on-primary": "255 255 255", "--be-error": "179 38 30", "--be-on-error": "255 255 255", "--be-background": "255 255 255", "--be-background-alt": "250 250 250", "--be-paper": "255 255 255", "--be-disabled-bg-opacity": "12%", "--be-disabled-fg-opacity": "26%", "--be-hover-opacity": "4%", "--be-focus-opacity": "12%", "--be-selected-opacity": "8%", "--be-text-main-opacity": "87%", "--be-text-muted-opacity": "60%", "--be-divider-opacity": "12%" } }, { name: hy.DARK, isDark: !0, colors: { "--be-foreground-base": "255 255 255", "--be-primary-light": "239 246 255", "--be-primary": "191 219 254", "--be-primary-dark": "147 197 253", "--be-on-primary": "56 30 114", "--be-error": "242 184 181", "--be-on-error": "96 20 16", "--be-background": "20 21 23", "--be-background-alt": "26 27 30", "--be-paper": "44 46 51", "--be-disabled-bg-opacity": "12%", "--be-disabled-fg-opacity": "30%", "--be-hover-opacity": "8%", "--be-focus-opacity": "12%", "--be-selected-opacity": "16%", "--be-text-main-opacity": "100%", "--be-text-muted-opacity": "70%", "--be-divider-opacity": "12%" } }], py = function (e) { return e.FILTER = "filter", e.RESIZE = "resize", e.CROP = "crop", e.DRAW = "draw", e.TEXT = "text", e.SHAPES = "shapes", e.STICKERS = "stickers", e.FRAME = "frame", e.CORNERS = "corners", e.MERGE = "merge", e }(py || {}), vy = { exports: {} }, gy = {}, my = h.exports, yy = 60103; if (gy.Fragment = 60107, "function" == typeof Symbol && Symbol.for) { var by = Symbol.for; yy = by("react.element"), gy.Fragment = by("react.fragment") } var wy = my.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner, xy = Object.prototype.hasOwnProperty, _y = { key: !0, ref: !0, __self: !0, __source: !0 }; function Sy(e, t, n) { var r, i = {}, o = null, a = null; for (r in void 0 !== n && (o = "" + n), void 0 !== t.key && (o = "" + t.key), void 0 !== t.ref && (a = t.ref), t) xy.call(t, r) && !_y.hasOwnProperty(r) && (i[r] = t[r]); if (e && e.defaultProps) for (r in t = e.defaultProps) void 0 === i[r] && (i[r] = t[r]); return { $$typeof: yy, type: e, key: o, ref: a, props: i, _owner: wy.current } } gy.jsx = Sy, gy.jsxs = Sy, vy.exports = gy; var ky = vy.exports.jsx, Cy = vy.exports.jsxs, Ty = vy.exports.Fragment, Ey = h.exports.forwardRef((function (e, t) { var n = e, r = n.attr, i = n.size, o = n.title, a = n.className, s = n.color, l = n.style, u = n.children, c = n.viewBox, f = z(n, ["attr", "size", "title", "className", "color", "style", "children", "viewBox"]), h = i || "1em", d = "svg-icon"; return a && (d += " ".concat(a)), Cy("svg", N(F(F({ "aria-hidden": !o, focusable: !1, xmlns: "http://www.w3.org/2000/svg", viewBox: c || "0 0 24 24" }, r), f), { className: d, style: F({ color: s }, l), ref: t, height: h, width: h, children: [o && ky("title", { children: o }), u] })) })); function Oy(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "", n = function (n, r) { return ky(Ey, N(F({ "data-testid": "".concat(t, "Icon"), ref: r }, n), { children: e })) }; return ce.memo(ce.forwardRef(n)) } function Py(e) { return e && e.map((function (e, t) { return ce.createElement(e.tag, F({ key: t }, e.attr), Py(e.child)) })) } var My = Oy(ky("path", { d: "M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z" }), "TuneOutlined"), Ay = Oy(ky("path", { d: "M21 15h2v2h-2v-2zm0-4h2v2h-2v-2zm2 8h-2v2c1 0 2-1 2-2zM13 3h2v2h-2V3zm8 4h2v2h-2V7zm0-4v2h2c0-1-1-2-2-2zM1 7h2v2H1V7zm16-4h2v2h-2V3zm0 16h2v2h-2v-2zM3 3C2 3 1 4 1 5h2V3zm6 0h2v2H9V3zM5 3h2v2H5V3zm-4 8v8c0 1.1.9 2 2 2h12V11H1zm2 8 2.5-3.21 1.79 2.15 2.5-3.22L13 19H3z" }), "PhotoSizeSelectLargeOutlined"), Dy = Oy(ky("path", { d: "M17 15h2V7c0-1.1-.9-2-2-2H9v2h8v8zM7 17V1H5v4H1v2h4v10c0 1.1.9 2 2 2h10v4h2v-4h4v-2H7z" }), "CropOutlined"), Ly = Oy(ky("path", { d: "M2.5 4v3h5v12h3V7h5V4h-13zm19 5h-9v3h3v7h3v-7h3V9z" }), "TextFieldsOutlined"), Ry = Oy(ky("path", { d: "M10.5 4.5c.28 0 .5.22.5.5v2h6v6h2c.28 0 .5.22.5.5s-.22.5-.5.5h-2v6h-2.12c-.68-1.75-2.39-3-4.38-3s-3.7 1.25-4.38 3H4v-2.12c1.75-.68 3-2.39 3-4.38 0-1.99-1.24-3.7-2.99-4.38L4 7h6V5c0-.28.22-.5.5-.5m0-2C9.12 2.5 8 3.62 8 5H4c-1.1 0-1.99.9-1.99 2v3.8h.29c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-.3c0-1.49 1.21-2.7 2.7-2.7s2.7 1.21 2.7 2.7v.3H17c1.1 0 2-.9 2-2v-4c1.38 0 2.5-1.12 2.5-2.5S20.38 11 19 11V7c0-1.1-.9-2-2-2h-4c0-1.38-1.12-2.5-2.5-2.5z" }), "ExtensionOutlined"), Iy = Oy(ky("path", { d: "M10.25 13c0 .69-.56 1.25-1.25 1.25S7.75 13.69 7.75 13s.56-1.25 1.25-1.25 1.25.56 1.25 1.25zM15 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zm7 .25c0 5.52-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2s10 4.48 10 10zM10.66 4.12C12.06 6.44 14.6 8 17.5 8c.46 0 .91-.05 1.34-.12C17.44 5.56 14.9 4 12 4c-.46 0-.91.05-1.34.12zM4.42 9.47c1.71-.97 3.03-2.55 3.66-4.44C6.37 6 5.05 7.58 4.42 9.47zM20 12c0-.78-.12-1.53-.33-2.24-.7.15-1.42.24-2.17.24-3.13 0-5.92-1.44-7.76-3.69C8.69 8.87 6.6 10.88 4 11.86c.01.04 0 .09 0 .14 0 4.41 3.59 8 8 8s8-3.59 8-8z" }), "FaceOutlined"), jy = Oy(ky("path", { d: "M20 4h-4l-4-4-4 4H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H4V6h4.52l3.52-3.5L15.52 6H20v14zM6 18h12V8H6v10zm2-8h8v6H8v-6z" }), "FilterFramesOutlined"), Fy = Oy(ky("path", { d: "M6.41 21 5 19.59l4.83-4.83c.75-.75 1.17-1.77 1.17-2.83v-5.1L9.41 8.41 8 7l4-4 4 4-1.41 1.41L13 6.83v5.1c0 1.06.42 2.08 1.17 2.83L19 19.59 17.59 21 12 15.41 6.41 21z" }), "MergeOutlined"), Ny = Oy(ky("path", { d: "M19 19h2v2h-2v-2zm0-2h2v-2h-2v2zM3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm0-4h2V3H3v2zm4 0h2V3H7v2zm8 16h2v-2h-2v2zm-4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm-8 0h2v-2H7v2zm-4 0h2v-2H3v2zM21 8c0-2.76-2.24-5-5-5h-5v2h5c1.65 0 3 1.35 3 3v5h2V8z" }), "RoundedCornerOutlined"), zy = Oy(ky("path", { d: "M20 4v12H8V4h12m0-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 9.67 1.69 2.26 2.48-3.1L19 15H9zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6H2z" }), "PhotoLibraryOutlined"), By = Oy(ky("path", { d: "M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.25 2.52.77-1.28-3.52-2.09V8z" }), "HistoryOutlined"), Vy = Oy([ky("path", { d: "m2.53 19.65 1.34.56v-9.03l-2.43 5.86c-.41 1.02.08 2.19 1.09 2.61zm19.5-3.7L17.07 3.98c-.31-.75-1.04-1.21-1.81-1.23-.26 0-.53.04-.79.15L7.1 5.95c-.75.31-1.21 1.03-1.23 1.8-.01.27.04.54.15.8l4.96 11.97c.31.76 1.05 1.22 1.83 1.23.26 0 .52-.05.77-.15l7.36-3.05c1.02-.42 1.51-1.59 1.09-2.6zm-9.2 3.8L7.87 7.79l7.35-3.04h.01l4.95 11.95-7.35 3.05z" }, "0"), ky("circle", { cx: "11", cy: "9", r: "1" }, "1"), ky("path", { d: "M5.88 19.75c0 1.1.9 2 2 2h1.45l-3.45-8.34v6.34z" }, "2")], "StyleOutlined"), Uy = Oy(ky("path", { d: "M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z" }), "DeleteOutlined"), Hy = Oy(ky("path", { d: "M18.85,10.39l1.06-1.06c0.78-0.78,0.78-2.05,0-2.83L18.5,5.09c-0.78-0.78-2.05-0.78-2.83,0l-1.06,1.06L18.85,10.39z M14.61,11.81L7.41,19H6v-1.41l7.19-7.19L14.61,11.81z M13.19,7.56L4,16.76V21h4.24l9.19-9.19L13.19,7.56L13.19,7.56z M19,17.5 c0,2.19-2.54,3.5-5,3.5c-0.55,0-1-0.45-1-1s0.45-1,1-1c1.54,0,3-0.73,3-1.5c0-0.47-0.48-0.87-1.23-1.2l1.48-1.48 C18.32,15.45,19,16.29,19,17.5z M4.58,13.35C3.61,12.79,3,12.06,3,11c0-1.8,1.89-2.63,3.56-3.36C7.59,7.18,9,6.56,9,6 c0-0.41-0.78-1-2-1C5.74,5,5.2,5.61,5.17,5.64C4.82,6.05,4.19,6.1,3.77,5.76C3.36,5.42,3.28,4.81,3.62,4.38C3.73,4.24,4.76,3,7,3 c2.24,0,4,1.32,4,3c0,1.87-1.93,2.72-3.64,3.47C6.42,9.88,5,10.5,5,11c0,0.31,0.43,0.6,1.07,0.86L4.58,13.35z" }), "Draw"), Wy = Oy(ky("path", { d: "m12 5.69 5 4.5V18h-2v-6H9v6H7v-7.81l5-4.5M12 3 2 12h3v8h6v-6h2v6h6v-8h3L12 3z" }), "HomeOutlined"), Ky = (k(t = {}, py.FILTER, { name: { id: "QYTzdT", defaultMessage: [{ type: 0, value: "Applied Filters" }] }, icon: My }), k(t, py.RESIZE, { name: { id: "OEDpaM", defaultMessage: [{ type: 0, value: "Resized Image" }] }, icon: Ay }), k(t, py.CROP, { name: { id: "Lg6O5a", defaultMessage: [{ type: 0, value: "Cropped Image" }] }, icon: Dy }), k(t, py.DRAW, { name: { id: "Jc05Ei", defaultMessage: [{ type: 0, value: "Added Drawing" }] }, icon: Hy }), k(t, py.TEXT, { name: { id: "TBhTYM", defaultMessage: [{ type: 0, value: "Added Text" }] }, icon: Ly }), k(t, py.SHAPES, { name: { id: "JSL/ji", defaultMessage: [{ type: 0, value: "Added Shape" }] }, icon: Ry }), k(t, py.STICKERS, { name: { id: "xDTFjk", defaultMessage: [{ type: 0, value: "Added Sticker" }] }, icon: Iy }), k(t, py.FRAME, { name: { id: "hgv63I", defaultMessage: [{ type: 0, value: "Added Frame" }] }, icon: jy }), k(t, py.MERGE, { name: { id: "cXik3L", defaultMessage: [{ type: 0, value: "Merged Objects" }] }, icon: Fy }), k(t, py.CORNERS, { name: { id: "zjEigN", defaultMessage: [{ type: 0, value: "Rounded Corner" }] }, icon: Ny }), k(t, "bgImage", { name: { id: "bSC4J/", defaultMessage: [{ type: 0, value: "Replaced Background Image" }] }, icon: zy }), k(t, "overlayImage", { name: { id: "2PcrJ7", defaultMessage: [{ type: 0, value: "Added Image" }] }, icon: zy }), k(t, "initial", { name: { id: "fCGryv", defaultMessage: [{ type: 0, value: "Initial" }] }, icon: Wy }), k(t, "loadedState", { name: { id: "UA9zHK", defaultMessage: [{ type: 0, value: "Loaded State" }] }, icon: By }), k(t, "objectStyle", { name: { id: "33NkCL", defaultMessage: [{ type: 0, value: "Changed Style" }] }, icon: Vy }), k(t, "deletedObject", { name: { id: "7kDDgB", defaultMessage: [{ type: 0, value: "Deleted object" }] }, icon: Uy }), t), Yy = Object.values(py).map((function (e) { return { name: e, icon: Ky[e].icon, action: e === py.MERGE ? function (e) { e.tools.merge.apply() } : e } })), Xy = { filter: { id: "baCdKH", defaultMessage: [{ type: 0, value: "Filter" }] }, resize: { id: "F5usg6", defaultMessage: [{ type: 0, value: "Resize" }] }, crop: { id: "khFxHA", defaultMessage: [{ type: 0, value: "Crop" }] }, draw: { id: "aBdNBx", defaultMessage: [{ type: 0, value: "Draw" }] }, text: { id: "kn9SmW", defaultMessage: [{ type: 0, value: "Text" }] }, shapes: { id: "RpVV/g", defaultMessage: [{ type: 0, value: "Shapes" }] }, Stickers: { id: "mcHXNc", defaultMessage: [{ type: 0, value: "Stickers" }] }, frame: { id: "nuDv1J", defaultMessage: [{ type: 0, value: "Frame" }] }, corners: { id: "+bdU7f", defaultMessage: [{ type: 0, value: "Corners" }] }, merge: { id: "Ln1cJu", defaultMessage: [{ type: 0, value: "Merge" }] } }, Gy = Oy(ky("path", { d: "M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z" }), "FileDownloadOutlined"), qy = { selector: "pixie-editor", textureSize: 4096, ui: { visible: !0, mode: sy.INLINE, forceOverlayModeOnMobile: !0, activeTheme: hy.LIGHT, themes: dy, allowEditorClose: !0, menubar: { items: [{ type: "undoWidget", align: "left" }, { type: "zoomWidget", align: "center", desktopOnly: !0 }, { type: "button", icon: By, align: "right", desktopOnly: !0, action: function (e) { e.togglePanel("history") } }, { type: "button", icon: Gy, label: { id: "JXdbo8", defaultMessage: [{ type: 0, value: "Done" }] }, align: "right", action: function (e) { var t; (null == (t = e.state.config.ui) ? void 0 : t.showExportPanel) ? e.state.togglePanel("export", !0) : e.tools.export.save("image") } }] }, nav: { position: ly.BOTTOM, items: S(Yy) }, openImageDialog: { show: !0, sampleImages: [{ url: "images/samples/sample1.jpg", thumbnail: "images/samples/sample1_thumbnail.jpg" }, { url: "images/samples/sample2.jpg", thumbnail: "images/samples/sample2_thumbnail.jpg" }, { url: "images/samples/sample3.jpg", thumbnail: "images/samples/sample3_thumbnail.jpg" }] }, colorPresets: { items: ["rgb(0,0,0)", "rgb(255, 255, 255)", "rgb(242, 38, 19)", "rgb(249, 105, 14)", "rgb(253, 227, 167)", "rgb(4, 147, 114)", "rgb(30, 139, 195)", "rgb(142, 68, 173)"] } }, objectDefaults: { global: F({}, cy), sticker: { fill: void 0 }, text: { textAlign: "initial", underline: !1, linethrough: !1, fontStyle: "normal", fontFamily: "Times New Roman", fontWeight: "normal", stroke: void 0, fontSize: 40 } }, tools: { filter: { items: ["grayscale", "blackWhite", "sharpen", "invert", "vintage", "polaroid", "kodachrome", "technicolor", "brownie", "sepia", "removeColor", "brightness", "gamma", "noise", "pixelate", "blur", "emboss", "blendColor"] }, zoom: { allowUserZoom: !0, fitImageToScreen: !0 }, crop: { allowCustomRatio: !0, defaultRatio: "1:1", presets: [{ ratio: null, name: "Custom" }, { ratio: "1:1", name: "Square" }, { ratio: "4:3" }, { ratio: "16:9" }, { ratio: "5:3" }, { ratio: "5:4" }, { ratio: "6:4" }, { ratio: "7:5" }, { ratio: "10:8" }] }, text: { defaultText: "Double click to edit", items: [{ family: "Roboto", src: "fonts/open-sans-v27-latin-ext_latin-regular.woff2" }, { family: "Fuzzy Bubbles", src: "fonts/fuzzy-bubbles-v3-latin-700.woff2", descriptors: { weight: "700" } }, { family: "Aleo Bold", src: "fonts/aleo-v4-latin-ext_latin-700.woff2", descriptors: { weight: "700" } }, { family: "Amatic SC", src: "fonts/amatic-sc-v16-latin-ext_latin-regular.woff2" }, { family: "Corinthia Bold", src: "fonts/corinthia-v7-latin-ext_latin-700.woff2" }, { family: "Bungee Inline", src: "fonts/bungee-inline-v6-latin-ext_latin-regular.woff2" }, { family: "Robot Slab Bold", src: "fonts/roboto-slab-v16-latin-ext_latin-500.woff2" }, { family: "Carter One", src: "fonts/carter-one-v12-latin-regular.woff2" }, { family: "Cody Star", src: "fonts/codystar-v10-latin-ext_latin-regular.woff2" }, { family: "Fira Sans", src: "fonts/fira-sans-v11-latin-ext_latin_cyrillic-regular.woff2" }, { family: "Krona One", src: "fonts/krona-one-v9-latin-ext_latin-regular.woff2" }, { family: "Kumar One Outline", src: "fonts/kumar-one-outline-v8-latin-ext_latin-regular.woff2" }, { family: "Lobster Two", src: "fonts/lobster-two-v13-latin-regular.woff2" }, { family: "Molle Italic", src: "fonts/molle-v11-latin-ext_latin-italic.woff2" }, { family: "Monoton", src: "fonts/monoton-v10-latin-regular.woff2" }, { family: "Nixie One", src: "fonts/nixie-one-v11-latin-regular.woff2" }, { family: "Permanent Marker", src: "fonts/permanent-marker-v10-latin-regular.woff2" }, { family: "Sancreek", src: "fonts/sancreek-v13-latin-ext_latin-regular.woff2" }, { family: "Stint Ultra Expanded", src: "fonts/stint-ultra-expanded-v10-latin-regular.woff2" }, { family: "VT323", src: "fonts/vt323-v12-latin-ext_latin-regular.woff2" }, { family: "Trash Hand", src: "fonts/TrashHand.ttf" }] }, draw: { brushSizes: fy, brushTypes: ["PencilBrush", "SprayBrush", "CircleBrush", "DiamondBrush", "VLineBrush", "HLineBrush", "SquareBrush"] }, shapes: { items: [{ name: "circle", type: "Circle" }, { name: "square", type: "Rect", options: { lockUniScaling: !1 } }, { name: "triangle", type: "Triangle" }, { name: "ellipse", type: "Ellipse", options: { lockUniScaling: !1 } }, { name: "Arrow #1", type: "Path", options: { path: "M 294.9 16.4 l 15.7 42.2 c -171.4 70.3 -294 242.3 -289.1 437.4 l 14.7 -1 c 9.1 -0.6 18.1 -1.2 27.1 -1.9 l 14.7 -1 c -4.3 -170.1 102.5 -320 252 -381.3 l 15.7 42.2 c 34.7 -40.5 83.1 -76.6 144.8 -99.8 c -58.1 -26.2 -124.9 -39.6 -195.6 -36.8 z" } }, { name: "Arrow #2", type: "Path", options: { path: "M 16 248.4 v 14.9 h 447.5 l -93.2 82.5 l 11.9 10.5 l 113.8 -100.2 l -113.6 -100.4 l -11.8 10.5 l 92.9 82.2 z" } }, { name: "Arrow #3", type: "Path", options: { path: "M 496 256 l -118.6 -66 v 40.8 h -361.4 v 50.4 h 361.4 v 40.8 l 118.6 -66 z" } }, { name: "Line", type: "Path", options: { path: "M 16 256 h 480", strokeWidth: 10, stroke: "#000", padding: 10 } }, { name: "Star", type: "Path", options: { path: "M 256 406.3 l 148.3 78 l -28.3 -165.2 l 120 -117 l -165.8 -24.1 l -74.2 -150.3 l -74.2 150.3 l -165.8 24.1 l 120 117 l -28.3 165.2 z" } }, { name: "Polygon", type: "Path", options: { path: "M 256 19.6 l 156.6 57.1 l 83.4 144.3 l -28.9 164.2 l -127.7 107.2 h -166.8 l -127.7 -107.2 l -28.9 -164.2 l 83.4 -144.3 z" } }, { name: "Badge", type: "Path", options: { path: "M 257.3 16.2 s -148 58.2 -204.4 81.4 c 0 75.7 -16.8 303.5 204.4 398.2 c 218.7 -94.6 201.9 -322.4 201.9 -398.2 c -62.1 -23.6 -201.9 -81.4 -201.9 -81.4 z" } }].slice() }, stickers: { items: [{ name: "emoticons", list: ["afro-1", "afro", "agent", "alien-1", "alien", "angel", "angry-1", "angry-2", "angry-3", "angry-4", "angry-5", "angry", "arguing", "arrogant", "asian-1", "asian", "avatar", "baby-1", "baby-2", "baby", "bully", "burglar", "businessman", "cheeky-1", "cheeky", "clown", "confused-1", "confused-2", "confused-3", "confused", "creepy", "crying-1", "crying-2", "crying-3", "crying", "dazed-1", "dazed-2", "dazed-3", "dazed", "dead-1", "dead-2", "dead-3", "dead-4", "dead-5", "dead-6", "dead", "desperate-1", "desperate", "detective", "dissapointment", "doctor", "drunk", "dumb", "emo-1", "emo-2", "emo", "emoticon", "evil", "faint-1", "faint", "flirt-1", "flirt-2", "flirt", "flirty", "gangster", "geek-1", "geek", "gentleman-1", "gentleman-2", "gentleman-3", "gentleman-4", "gentleman", "ginger", "girl-1", "girl", "goofy-1", "goofy-2", "goofy-3", "goofy-4", "goofy", "grubby-1", "grubby", "happy-1", "happy-10", "happy-11", "happy-12", "happy-13", "happy-14", "happy-15", "happy-16", "happy-2", "happy-3", "happy-4", "happy-5", "happy-6", "happy-7", "happy-8", "happy-9", "happy", "harry-potter", "heisenberg", "hipster-1", "hipster-2", "hipster", "in-love-1", "in-love-2", "in-love-3", "in-love-4", "in-love-5", "in-love-6", "in-love", "japan", "jew", "joyful-1", "joyful-2", "joyful", "kiss-1", "kiss-2", "kiss-3", "kiss-4", "kiss", "laughing-1", "laughing-2", "laughing-3", "laughing", "listening", "love", "manly", "miserly-1", "miserly", "nerd-1", "nerd-2", "nerd-3", "nerd-4", "nerd", "ninja", "pirate-1", "pirate-2", "pirate", "punk-1", "punk-2", "punk", "rapper", "relieved", "rich-1", "rich-2", "rich", "rockstar", "sad-1", "sad-2", "sad-3", "sad-4", "sad-5", "sad-6", "sad", "scared-1", "scared-2", "scared-3", "scared", "sceptic-1", "sceptic-2", "sceptic-3", "sceptic-4", "sceptic-5", "sceptic-6", "sceptic-7", "sceptic", "secret", "shocked-1", "shocked-2", "shocked-3", "shocked", "sick-1", "sick-2", "sick-3", "sick-4", "sick", "silent", "skeleton", "smile", "smiling-1", "smiling", "smoked", "smug-1", "smug-2", "smug-3", "smug-4", "smug-5", "smug-6", "smug", "sporty", "stunned", "superhero-1", "superhero-2", "superhero-3", "superhero-4", "superhero", "surprised-1", "surprised", "thinking", "tired-1", "tired-2", "tired-3", "tired", "tough-1", "tough", "trendy", "vampire-1", "vampire", "wink-1", "wink-2", "wink", "winking-1", "winking", "yawning-1", "yawning-2", "yawning-3", "yawning", "yelling", "zombie"], type: "svg", thumbnailUrl: "images/stickers/categories/emoticon.svg" }, { name: "doodles", items: 100, type: "svg", thumbnailUrl: "images/stickers/categories/doodles.svg" }, { name: "landmarks", items: 100, type: "svg", thumbnailUrl: "images/stickers/categories/landmark.svg", invertPreview: !0 }, { name: "bubbles", items: 104, type: "png", thumbnailUrl: "images/stickers/categories/speech-bubble.svg" }, { name: "transportation", items: 22, type: "svg", thumbnailUrl: "images/stickers/categories/transportation.svg", invertPreview: !0 }, { name: "beach", items: 22, type: "svg", thumbnailUrl: "images/stickers/categories/beach.svg", invertPreview: !0 }] }, import: { validImgExtensions: ["png", "jpg", "jpeg", "svg", "gif"], fitOverlayToScreen: !0, openDroppedImageAsBackground: !1 }, export: { defaultFormat: "png", defaultQuality: .8, defaultName: "image" }, frame: { items: [{ name: "basic", mode: "basic", size: { min: 1, max: 35, default: 10 } }, { name: "pine", mode: "stretch", size: { min: 1, max: 35, default: 15 } }, { name: "oak", mode: "stretch", size: { min: 1, max: 35, default: 15 } }, { name: "rainbow", mode: "stretch", size: { min: 1, max: 35, default: 15 } }, { name: "grunge1", display_name: "grunge #1", mode: "stretch", size: { min: 1, max: 35, default: 15 } }, { name: "grunge2", display_name: "grunge #2", mode: "stretch", size: { min: 1, max: 35, default: 20 } }, { name: "ebony", mode: "stretch", size: { min: 1, max: 35, default: 15 } }, { name: "art1", display_name: "Art #1", mode: "repeat", size: { min: 10, max: 70, default: 55 } }, { name: "art2", display_name: "Art #2", mode: "repeat", size: { min: 10, max: 70, default: 55 } }] } } }; var Jy = "undefined" == typeof window || !window.navigator || /ServerSideRendering|^Deno\//.test(window.navigator.userAgent) ? h.exports.useEffect : h.exports.useLayoutEffect; function Zy(e) { for (var t = arguments.length, n = Array(t > 1 ? t - 1 : 0), r = 1; r < t; r++)n[r - 1] = arguments[r]; throw Error("[Immer] minified error nr: " + e + (n.length ? " " + n.map((function (e) { return "'" + e + "'" })).join(",") : "") + ". Find the full error at: https://bit.ly/3cXEKWf") } function $y(e) { return !!e && !!e[jb] } function Qy(e) { return !!e && (function (e) { if (!e || "object" != C(e)) return !1; var t = Object.getPrototypeOf(e); if (null === t) return !0; var n = Object.hasOwnProperty.call(t, "constructor") && t.constructor; return n === Object || "function" == typeof n && Function.toString.call(n) === Fb }(e) || Array.isArray(e) || !!e[Ib] || !!e.constructor[Ib] || ib(e) || ob(e)) } function eb(e, t, n) { void 0 === n && (n = !1), 0 === tb(e) ? (n ? Object.keys : Nb)(e).forEach((function (r) { n && "symbol" == C(r) || t(r, e[r], e) })) : e.forEach((function (n, r) { return t(r, n, e) })) } function tb(e) { var t = e[jb]; return t ? t.i > 3 ? t.i - 4 : t.i : Array.isArray(e) ? 1 : ib(e) ? 2 : ob(e) ? 3 : 0 } function nb(e, t) { return 2 === tb(e) ? e.has(t) : Object.prototype.hasOwnProperty.call(e, t) } function rb(e, t, n) { var r = tb(e); 2 === r ? e.set(t, n) : 3 === r ? (e.delete(t), e.add(n)) : e[t] = n } function ib(e) { return Ab && e instanceof Map } function ob(e) { return Db && e instanceof Set } function ab(e) { return e.o || e.t } function sb(e) { if (Array.isArray(e)) return Array.prototype.slice.call(e); var t = zb(e); delete t[jb]; for (var n = Nb(t), r = 0; r < n.length; r++) { var i = n[r], o = t[i]; !1 === o.writable && (o.writable = !0, o.configurable = !0), (o.get || o.set) && (t[i] = { configurable: !0, writable: !0, enumerable: o.enumerable, value: e[i] }) } return Object.create(Object.getPrototypeOf(e), t) } function lb(e, t) { return void 0 === t && (t = !1), cb(e) || $y(e) || !Qy(e) || (tb(e) > 1 && (e.set = e.add = e.clear = e.delete = ub), Object.freeze(e), t && eb(e, (function (e, t) { return lb(t, !0) }), !0)), e } function ub() { Zy(2) } function cb(e) { return null == e || "object" != C(e) || Object.isFrozen(e) } function fb(e) { var t = Bb[e]; return t || Zy(18, e), t } function hb() { return Pb } function db(e, t) { t && (fb("Patches"), e.u = [], e.s = [], e.v = t) } function pb(e) { vb(e), e.p.forEach(mb), e.p = null } function vb(e) { e === Pb && (Pb = e.l) } function gb(e) { return Pb = { p: [], l: Pb, h: e, m: !0, _: 0 } } function mb(e) { var t = e[jb]; 0 === t.i || 1 === t.i ? t.j() : t.O = !0 } function yb(e, t) { t._ = t.p.length; var n = t.p[0], r = void 0 !== e && e !== n; return t.h.g || fb("ES5").S(t, e, r), r ? (n[jb].P && (pb(t), Zy(4)), Qy(e) && (e = bb(t, e), t.l || xb(t, e)), t.u && fb("Patches").M(n[jb].t, e, t.u, t.s)) : e = bb(t, n, []), pb(t), t.u && t.v(t.u, t.s), e !== Rb ? e : void 0 } function bb(e, t, n) { if (cb(t)) return t; var r = t[jb]; if (!r) return eb(t, (function (i, o) { return wb(e, r, t, i, o, n) }), !0), t; if (r.A !== e) return t; if (!r.P) return xb(e, r.t, !0), r.t; if (!r.I) { r.I = !0, r.A._--; var i = 4 === r.i || 5 === r.i ? r.o = sb(r.k) : r.o; eb(3 === r.i ? new Set(i) : i, (function (t, o) { return wb(e, r, i, t, o, n) })), xb(e, i, !1), n && e.u && fb("Patches").R(r, n, e.u, e.s) } return r.o } function wb(e, t, n, r, i, o) { if ($y(i)) { var a = bb(e, i, o && t && 3 !== t.i && !nb(t.D, r) ? o.concat(r) : void 0); if (rb(n, r, a), !$y(a)) return; e.m = !1 } if (Qy(i) && !cb(i)) { if (!e.h.F && e._ < 1) return; bb(e, i), t && t.A.l || xb(e, i) } } function xb(e, t, n) { void 0 === n && (n = !1), e.h.F && e.m && lb(t, n) } function _b(e, t) { var n = e[jb]; return (n ? ab(n) : e)[t] } function Sb(e, t) { if (t in e) for (var n = Object.getPrototypeOf(e); n;) { var r = Object.getOwnPropertyDescriptor(n, t); if (r) return r; n = Object.getPrototypeOf(n) } } function kb(e) { e.P || (e.P = !0, e.l && kb(e.l)) } function Cb(e) { e.o || (e.o = sb(e.t)) } function Tb(e, t, n) { var r = ib(t) ? fb("MapSet").N(t, n) : ob(t) ? fb("MapSet").T(t, n) : e.g ? function (e, t) { var n = Array.isArray(e), r = { i: n ? 1 : 0, A: t ? t.A : hb(), P: !1, I: !1, D: {}, l: t, t: e, k: null, o: null, j: null, C: !1 }, i = r, o = Vb; n && (i = [r], o = Ub); var a = Proxy.revocable(i, o), s = a.revoke, l = a.proxy; return r.k = l, r.j = s, l }(t, n) : fb("ES5").J(t, n); return (n ? n.A : hb()).p.push(r), r } function Eb(e, t) { switch (t) { case 2: return new Map(e); case 3: return Array.from(e) }return sb(e) } var Ob, Pb, Mb = "undefined" != typeof Symbol && "symbol" == C(Symbol("x")), Ab = "undefined" != typeof Map, Db = "undefined" != typeof Set, Lb = "undefined" != typeof Proxy && void 0 !== Proxy.revocable && "undefined" != typeof Reflect, Rb = Mb ? Symbol.for("immer-nothing") : ((Ob = {})["immer-nothing"] = !0, Ob), Ib = Mb ? Symbol.for("immer-draftable") : "__$immer_draftable", jb = Mb ? Symbol.for("immer-state") : "__$immer_state", Fb = "" + Object.prototype.constructor, Nb = "undefined" != typeof Reflect && Reflect.ownKeys ? Reflect.ownKeys : void 0 !== Object.getOwnPropertySymbols ? function (e) { return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e)) } : Object.getOwnPropertyNames, zb = Object.getOwnPropertyDescriptors || function (e) { var t = {}; return Nb(e).forEach((function (n) { t[n] = Object.getOwnPropertyDescriptor(e, n) })), t }, Bb = {}, Vb = { get: function (e, t) { if (t === jb) return e; var n, r, i, o = ab(e); if (!nb(o, t)) return n = e, (i = Sb(o, t)) ? "value" in i ? i.value : null === (r = i.get) || void 0 === r ? void 0 : r.call(n.k) : void 0; var a = o[t]; return e.I || !Qy(a) ? a : a === _b(e.t, t) ? (Cb(e), e.o[t] = Tb(e.A.h, a, e)) : a }, has: function (e, t) { return t in ab(e) }, ownKeys: function (e) { return Reflect.ownKeys(ab(e)) }, set: function (e, t, n) { var r = Sb(ab(e), t); if (null == r ? void 0 : r.set) return r.set.call(e.k, n), !0; if (!e.P) { var i = _b(ab(e), t), o = null == i ? void 0 : i[jb]; if (o && o.t === n) return e.o[t] = n, e.D[t] = !1, !0; if (function (e, t) { return e === t ? 0 !== e || 1 / e == 1 / t : e != e && t != t }(n, i) && (void 0 !== n || nb(e.t, t))) return !0; Cb(e), kb(e) } return e.o[t] === n && "number" != typeof n && (void 0 !== n || t in e.o) || (e.o[t] = n, e.D[t] = !0, !0) }, deleteProperty: function (e, t) { return void 0 !== _b(e.t, t) || t in e.t ? (e.D[t] = !1, Cb(e), kb(e)) : delete e.D[t], e.o && delete e.o[t], !0 }, getOwnPropertyDescriptor: function (e, t) { var n = ab(e), r = Reflect.getOwnPropertyDescriptor(n, t); return r && { writable: !0, configurable: 1 !== e.i || "length" !== t, enumerable: r.enumerable, value: n[t] } }, defineProperty: function () { Zy(11) }, getPrototypeOf: function (e) { return Object.getPrototypeOf(e.t) }, setPrototypeOf: function () { Zy(12) } }, Ub = {}; eb(Vb, (function (e, t) { Ub[e] = function () { return arguments[0] = arguments[0][0], t.apply(this, arguments) } })), Ub.deleteProperty = function (e, t) { return Ub.set.call(this, e, t, void 0) }, Ub.set = function (e, t, n) { return Vb.set.call(this, e[0], t, n, e[0]) }; var Hb = function () { function e(e) { var t = this; this.g = Lb, this.F = !0, this.produce = function (e, n, r) { if ("function" == typeof e && "function" != typeof n) { var i = n; n = e; var o = t; return function (e) { var t = this; void 0 === e && (e = i); for (var r = arguments.length, a = Array(r > 1 ? r - 1 : 0), s = 1; s < r; s++)a[s - 1] = arguments[s]; return o.produce(e, (function (e) { var r; return (r = n).call.apply(r, [t, e].concat(a)) })) } } var a; if ("function" != typeof n && Zy(6), void 0 !== r && "function" != typeof r && Zy(7), Qy(e)) { var s = gb(t), l = Tb(t, e, void 0), u = !0; try { a = n(l), u = !1 } finally { u ? pb(s) : vb(s) } return "undefined" != typeof Promise && a instanceof Promise ? a.then((function (e) { return db(s, r), yb(e, s) }), (function (e) { throw pb(s), e })) : (db(s, r), yb(a, s)) } if (!e || "object" != C(e)) { if (void 0 === (a = n(e)) && (a = e), a === Rb && (a = void 0), t.F && lb(a, !0), r) { var c = [], f = []; fb("Patches").M(e, a, c, f), r(c, f) } return a } Zy(21, e) }, this.produceWithPatches = function (e, n) { if ("function" == typeof e) return function (n) { for (var r = arguments.length, i = Array(r > 1 ? r - 1 : 0), o = 1; o < r; o++)i[o - 1] = arguments[o]; return t.produceWithPatches(n, (function (t) { return e.apply(void 0, [t].concat(i)) })) }; var r, i, o = t.produce(e, n, (function (e, t) { r = e, i = t })); return "undefined" != typeof Promise && o instanceof Promise ? o.then((function (e) { return [e, r, i] })) : [o, r, i] }, "boolean" == typeof (null == e ? void 0 : e.useProxies) && this.setUseProxies(e.useProxies), "boolean" == typeof (null == e ? void 0 : e.autoFreeze) && this.setAutoFreeze(e.autoFreeze) } var t = e.prototype; return t.createDraft = function (e) { Qy(e) || Zy(8), $y(e) && (e = function (e) { return $y(e) || Zy(22, e), function e(t) { if (!Qy(t)) return t; var n, r = t[jb], i = tb(t); if (r) { if (!r.P && (r.i < 4 || !fb("ES5").K(r))) return r.t; r.I = !0, n = Eb(t, i), r.I = !1 } else n = Eb(t, i); return eb(n, (function (t, i) { r && function (e, t) { return 2 === tb(e) ? e.get(t) : e[t] }(r.t, t) === i || rb(n, t, e(i)) })), 3 === i ? new Set(n) : n }(e) }(e)); var t = gb(this), n = Tb(this, e, void 0); return n[jb].C = !0, vb(t), n }, t.finishDraft = function (e, t) { var n = (e && e[jb]).A; return db(n, t), yb(void 0, n) }, t.setAutoFreeze = function (e) { this.F = e }, t.setUseProxies = function (e) { e && !Lb && Zy(20), this.g = e }, t.applyPatches = function (e, t) { var n; for (n = t.length - 1; n >= 0; n--) { var r = t[n]; if (0 === r.path.length && "replace" === r.op) { e = r.value; break } } n > -1 && (t = t.slice(n + 1)); var i = fb("Patches").$; return $y(e) ? i(e, t) : this.produce(e, (function (e) { return i(e, t) })) }, e }(), Wb = new Hb, Kb = Wb.produce; Wb.produceWithPatches.bind(Wb), Wb.setAutoFreeze.bind(Wb), Wb.setUseProxies.bind(Wb), Wb.applyPatches.bind(Wb), Wb.createDraft.bind(Wb), Wb.finishDraft.bind(Wb); var Yb = Kb; function Xb(e, t) { return Gb(Oc(t, e), e) } function Gb(e, t) { return Object.keys(e).forEach((function (n) { if (n.startsWith("replaceDefault") && e[n]) { var r = function (e) { return e ? e.charAt(0).toLowerCase() + e.slice(1) : "" }(n.replace("replaceDefault", "") || "items"); e[r] = t ? t[r] : [], delete e[n] } else "object" == C(e[n]) && null !== e[n] && Gb(e[n], null == t ? void 0 : t[n]) })), e } var qb = { items: [], pointer: 0, canUndo: !1, canRedo: !1 }, Jb = function (e) { return e.Filter = "filter", e.Frame = "frame", e.ActiveObject = "activeObj", e.Text = "text", e }(Jb || {}), Zb = { selected: null, applied: [] }, $b = { zoneRect: null, selectedAspectRatio: null, straightenAngle: 0 }; function Qb(e) { return "i-text" === (null == e ? void 0 : e.type) } var ew = function (e) { return e.Text = "text", e.Shape = "shape", e.Sticker = "sticker", e.Drawing = "drawing", e.Image = "image", e.MainImage = "mainImage", e.StraightenAnchor = "straightenHelper", e }(ew || {}), tw = { text: { name: { id: "aA8bDw", defaultMessage: [{ type: 0, value: "Text" }] }, icon: Ky.text.icon }, shape: { name: { id: "5Ws83M", defaultMessage: [{ type: 0, value: "Shape" }] }, icon: Ky.shapes.icon }, sticker: { name: { id: "2Hku0l", defaultMessage: [{ type: 0, value: "Sticker" }] }, icon: Ky.stickers.icon }, drawing: { name: { id: "jPQp7Q", defaultMessage: [{ type: 0, value: "Drawing" }] }, icon: Ky.draw.icon }, image: { name: { id: "+0zv6g", defaultMessage: [{ type: 0, value: "Image" }] }, icon: Ky.overlayImage.icon }, mainImage: { name: { id: "LOA559", defaultMessage: [{ type: 0, value: "Background Image" }] }, icon: Ky.bgImage.icon } }, nw = { isMoving: !1, editableProps: {}, id: null, isText: !1, isImage: !1, name: null }, rw = { all: [], isEditingText: !1, active: nw }, iw = { active: null }, ow = { formValue: { width: 1, height: 1, maintainAspect: !0, usePercentages: !1 } }, aw = { radius: 50 }, sw = { top: 0, right: 0, bottom: 0, left: 0, width: 0, height: 0 }, lw = function (e) { var t = "function" == typeof e ? function (e) { var t, n = new Set, r = function (e, r) { var i = "function" == typeof e ? e(t) : e; if (i !== t) { var o = t; t = r ? i : Object.assign({}, t, i), n.forEach((function (e) { return e(t, o) })) } }, i = function () { return t }, o = { setState: r, getState: i, subscribe: function (e, r, o) { return r || o ? function (e) { var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : i, o = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : Object.is; console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware"); var a = r(t); function s() { var n = r(t); if (!o(a, n)) { var i = a; e(a = n, i) } } return n.add(s), function () { return n.delete(s) } }(e, r, o) : (n.add(e), function () { return n.delete(e) }) }, destroy: function () { return n.clear() } }; return t = e(r, i, o), o }(e) : e, n = function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : t.getState, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : Object.is, r = h.exports.useReducer((function (e) { return e + 1 }), 0), i = _(r, 2), o = i[1], a = t.getState(), s = h.exports.useRef(a), l = h.exports.useRef(e), u = h.exports.useRef(n), c = h.exports.useRef(!1), f = h.exports.useRef(); void 0 === f.current && (f.current = e(a)); var d, p = !1; (s.current !== a || l.current !== e || u.current !== n || c.current) && (d = e(a), p = !n(f.current, d)), Jy((function () { p && (f.current = d), s.current = a, l.current = e, u.current = n, c.current = !1 })); var v = h.exports.useRef(a); Jy((function () { var e = function () { try { var e = t.getState(), n = l.current(e); u.current(f.current, n) || (s.current = e, f.current = n, o()) } catch (e) { c.current = !0, o() } }, n = t.subscribe(e); return t.getState() !== v.current && e(), n }), []); var g = p ? d : f.current; return h.exports.useDebugValue(g), g }; return Object.assign(n, t), n[Symbol.iterator] = function () { console.warn("[useStore, api] = create() is deprecated and will be removed in v4"); var e = [n, t]; return { next: function () { var t = e.length <= 0; return { value: e.shift(), done: t } } } }, n }((function (e, t, n) { var r = n.subscribe; return n.subscribe = function (e, t, i) { var o = e; if (t) { var a = (null == i ? void 0 : i.equalityFn) || Object.is, s = e(n.getState()); o = function (n) { var r = e(n); if (!a(s, r)) { var i = s; t(s = r, i) } }, (null == i ? void 0 : i.fireImmediately) && t(s, s) } return r(o) }, function (e, t, n) { return function (e, t) { return N(F(F(F(F(F(F(F({ editor: null, fabric: null, config: qy, zoom: 1, dirty: !1, original: { width: 1, height: 1 }, stageSize: sw, canvasSize: sw, activeTool: null, activeToolOverlay: null, loading: !1, openPanels: { newImage: !1, history: !1, objects: !1, export: !1 } }, function (e, t) { return { history: N(F({}, qb), { updatePointerById: function (e) { var n = t().history.items.findIndex((function (t) { return t.id === e })); t().history.update(n) }, update: function (t, n) { e((function (e) { e.history.pointer = t, n && (e.history.items = n), e.history.canUndo = e.history.pointer > 0, e.history.canRedo = e.history.items.length > e.history.pointer + 1 })) }, reset: function () { e({ history: F(F({}, t().history), qb) }) } }) } }(e, t)), function (e, t) { return { objects: N(F({}, rw), { setActiveIsMoving: function (t) { e((function (e) { e.objects.active.isMoving = t })) }, setIsEditingText: function (t) { e((function (e) { e.objects.isEditingText = t })) }, setActive: function (n) { e(n ? function (e) { var t; e.objects.active.editableProps = function (e) { if (!e) return {}; var t = { fill: e.fill, opacity: e.opacity, backgroundColor: e.backgroundColor, stroke: e.stroke, strokeWidth: e.strokeWidth }, n = e.shadow; return n && (t.shadow = { color: n.color, blur: n.blur, offsetX: n.offsetX, offsetY: n.offsetY }), Qb(e) && (t.textAlign = e.textAlign, t.underline = e.underline, t.linethrough = e.linethrough, t.fontStyle = e.fontStyle, t.fontFamily = e.fontFamily, t.fontWeight = e.fontWeight, t.fontSize = e.fontSize), t }(n), e.objects.active.id = n.data.id, e.objects.active.name = null != (t = n.name) ? t : null, e.objects.active.isText = Qb(n), e.objects.active.isImage = function (e) { return e.name === ew.Image }(n) } : function (e) { var n, r, i, o, a, s = N(F({}, null == (n = t().config.objectDefaults) ? void 0 : n.global), { fontFamily: null == (i = null == (r = t().config.objectDefaults) ? void 0 : r.text) ? void 0 : i.fontFamily, fontSize: null == (a = null == (o = t().config.objectDefaults) ? void 0 : o.text) ? void 0 : a.fontSize }); e.objects.active = N(F({}, nw), { editableProps: s }) }) }, reset: function () { e({ objects: F(F({}, t().objects), rw) }) } }) } }(e, t)), function (e, t) { return { filter: N(F({}, Zb), { select: function (t) { var n = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; e((function (e) { e.filter.selected = t, e.activeToolOverlay = n ? Jb.Filter : null, e.dirty = !0 })) }, deselect: function (n) { t().filter.selected === n && e((function (e) { e.filter.selected = null, e.activeToolOverlay = null, e.dirty = !0 })) }, reset: function () { e({ filter: F(F({}, t().filter), Zb) }) } }) } }(e, t)), function (e, t) { return { crop: N(F({}, $b), { setCropzoneRect: function (t) { e((function (e) { e.crop.zoneRect = t })) }, setAspectRatio: function (t) { e((function (e) { e.crop.selectedAspectRatio = t })) }, setTransformAngle: function (t) { e((function (e) { e.crop.straightenAngle = t })) }, apply: (n = x(b().mark((function e() { var n, r; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (!(n = t().crop.zoneRect)) { e.next = 5; break } return r = { width: Math.ceil(n.width / t().zoom), height: Math.ceil(n.height / t().zoom), left: Math.ceil(n.left / t().zoom), top: Math.ceil(n.top / t().zoom) }, e.next = 5, t().editor.tools.crop.apply(r); case 5: case "end": return e.stop() } }), e) }))), function () { return n.apply(this, arguments) }), reset: function () { e({ crop: F(F({}, t().crop), $b) }) } }) }; var n }(e, t)), function (e, t) { return { frame: N(F({}, iw), { select: function (n) { e((function (e) { e.frame.active = n })), t().frame.showOptionsPanel() }, deselect: function () { e((function (e) { e.frame.active = null, e.activeToolOverlay = null })) }, showOptionsPanel: function () { t().activeTool === py.FRAME && e((function (e) { e.activeToolOverlay = Jb.Frame })) }, reset: function () { e({ frame: F(F({}, t().frame), iw) }) } }) } }(e, t)), function (e, t) { return { resize: N(F({}, ow), { setFormValue: function (t) { e((function (e) { Object.entries(t).forEach((function (t) { var n = _(t, 2), r = n[0], i = n[1]; e.resize.formValue[r] = i })) })) }, apply: function () { var e = t().resize.formValue, n = t().original; if (e.width === n.width && e.height === n.height) return !1; t().editor.tools.resize.apply(e) }, reset: function () { e({ resize: F(F({}, t().resize), ow) }) } }) } }(e, t)), function (e, t) { return { corners: N(F({}, aw), { setRadius: function (t) { e((function (e) { e.corners.radius = t })) }, apply: function () { return t().editor.tools.corners.apply(t().corners.radius) }, reset: function () { e({ corners: F(F({}, t().corners), aw) }) } }) } }(e, t)), { setZoom: function (t) { return e((function (e) { e.zoom = t })) }, setOriginal: function (t, n) { return e((function (e) { e.original = { width: t, height: n } })) }, setDirty: function (t) { return e((function (e) { e.dirty = t })) }, toggleLoading: function (t) { return e((function (e) { e.loading = t })) }, setStageSize: function (t) { return e((function (e) { e.stageSize = t })) }, setCanvasSize: function (t) { return e((function (e) { e.canvasSize = t })) }, setActiveTool: function (t, n) { return e((function (e) { e.activeTool = t, e.activeToolOverlay = n })) }, setConfig: function (n) { return e((function (e) { e.config = Xb(n, t().config) })) }, togglePanel: function (t, n) { return e((function (e) { e.openPanels[t] = null != n ? n : !e.openPanels[t] })) }, applyChanges: function () { var n = x(b().mark((function n() { var r, i, o, a; return b().wrap((function (n) { for (; ;)switch (n.prev = n.next) { case 0: if (i = t().activeTool) { n.next = 3; break } return n.abrupt("return"); case 3: return o = t()[i], n.next = 6, null == (r = null == o ? void 0 : o.apply) ? void 0 : r.call(o); case 6: a = n.sent, e((function (e) { e.dirty = !1, e.activeTool = null, e.activeToolOverlay = null })), !1 !== a && t().editor.tools.history.addHistoryItem({ name: i }), null == o || o.reset(); case 8: case "end": return n.stop() } }), n) }))); function r() { return n.apply(this, arguments) } return r }(), cancelChanges: function () { var n = x(b().mark((function n() { var r, i, o; return b().wrap((function (n) { for (; ;)switch (n.prev = n.next) { case 0: if (r = t().activeTool) { n.next = 3; break } return n.abrupt("return"); case 3: if (i = t().dirty, e((function (e) { e.dirty = !1, e.activeTool = null, e.activeToolOverlay = null })), n.t0 = i, !n.t0) { n.next = 9; break } return n.next = 9, t().editor.tools.history.reload(); case 9: null == (o = t()[r]) || o.reset(); case 11: case "end": return n.stop() } }), n) }))); function r() { return n.apply(this, arguments) } return r }(), reset: function () { t().editor.tools.transform.resetStraightenAnchor(), e({ activeTool: null, activeToolOverlay: null, zoom: 1, dirty: !1, loading: !1, openPanels: { newImage: !1, history: !1, objects: !1, export: !1 } }), t().history.reset(), t().objects.reset(), t().filter.reset(), t().crop.reset(), t().frame.reset(), t().resize.reset(), t().corners.reset() } }) }((function (t, n) { var r = "function" == typeof t ? Yb(t) : t; return e(r, n) }), t) }(e, t) })), uw = function (e) { return { isEnabled: function (t) { return e.some((function (e) { return !!t[e] })) } } }, cw = { measureLayout: uw(["layout", "layoutId", "drag"]), animation: uw(["animate", "exit", "variants", "whileHover", "whileTap", "whileFocus", "whileDrag", "whileInView"]), exit: uw(["exit"]), drag: uw(["drag", "dragControls"]), focus: uw(["whileFocus"]), hover: uw(["whileHover", "onHoverStart", "onHoverEnd"]), tap: uw(["whileTap", "onTap", "onTapStart", "onTapCancel"]), pan: uw(["onPan", "onPanStart", "onPanSessionStart", "onPanEnd"]), inView: uw(["whileInView", "onViewportEnter", "onViewportLeave"]) }; function fw(e) { for (var t in e) null !== e[t] && ("projectionNodeConstructor" === t ? cw.projectionNodeConstructor = e[t] : cw[t].Component = e[t]) } var hw = h.exports.createContext({ strict: !1 }), dw = Object.keys(cw), pw = dw.length, vw = h.exports.createContext({ transformPagePoint: function (e) { return e }, isStatic: !1 }), gw = h.exports.createContext({}), mw = h.exports.createContext(null), yw = "undefined" != typeof window, bw = yw ? h.exports.useLayoutEffect : h.exports.useEffect; function ww(e) { return "object" == C(e) && Object.prototype.hasOwnProperty.call(e, "current") } function xw(e) { return Array.isArray(e) } function _w(e) { return "string" == typeof e || xw(e) } function Sw(e, t, n, r, i) { var o; return void 0 === r && (r = {}), void 0 === i && (i = {}), "function" == typeof t && (t = t(null != n ? n : e.custom, r, i)), "string" == typeof t && (t = null === (o = e.variants) || void 0 === o ? void 0 : o[t]), "function" == typeof t && (t = t(null != n ? n : e.custom, r, i)), t } function kw(e, t, n) { var r = e.getProps(); return Sw(r, t, null != n ? n : r.custom, function (e) { var t = {}; return e.forEachValue((function (e, n) { return t[n] = e.get() })), t }(e), function (e) { var t = {}; return e.forEachValue((function (e, n) { return t[n] = e.getVelocity() })), t }(e)) } function Cw(e) { var t; return "function" == typeof (null === (t = e.animate) || void 0 === t ? void 0 : t.start) || _w(e.initial) || _w(e.animate) || _w(e.whileHover) || _w(e.whileDrag) || _w(e.whileTap) || _w(e.whileFocus) || _w(e.exit) } function Tw(e) { return Boolean(Cw(e) || e.variants) } function Ew(e) { return Array.isArray(e) ? e.join(" ") : e } function Ow(e) { var t = h.exports.useRef(null); return null === t.current && (t.current = e()), t.current } var Pw = 1 / 60 * 1e3, Mw = "undefined" != typeof performance ? function () { return performance.now() } : function () { return Date.now() }, Aw = "undefined" != typeof window ? function (e) { return window.requestAnimationFrame(e) } : function (e) { return setTimeout((function () { return e(Mw()) }), Pw) }, Dw = !0, Lw = !1, Rw = !1, Iw = { delta: 0, timestamp: 0 }, jw = ["read", "update", "preRender", "render", "postRender"], Fw = jw.reduce((function (e, t) { return e[t] = function (e) { var t = [], n = [], r = 0, i = !1, o = !1, a = new WeakSet, s = { schedule: function (e) { var o = arguments.length > 2 && void 0 !== arguments[2] && arguments[2] && i, s = o ? t : n; return arguments.length > 1 && void 0 !== arguments[1] && arguments[1] && a.add(e), -1 === s.indexOf(e) && (s.push(e), o && i && (r = t.length)), e }, cancel: function (e) { var t = n.indexOf(e); -1 !== t && n.splice(t, 1), a.delete(e) }, process: function (e) { var l; if (i) o = !0; else { if (i = !0, t = (l = [n, t])[0], (n = l[1]).length = 0, r = t.length) for (var u = 0; u < r; u++) { var c = t[u]; c(e), a.has(c) && (s.schedule(c), Lw = !0) } i = !1, o && (o = !1, s.process(e)) } } }; return s }(), e }), {}), Nw = jw.reduce((function (e, t) { var n = Fw[t]; return e[t] = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], r = arguments.length > 2 && void 0 !== arguments[2] && arguments[2]; return Lw || Uw(), n.schedule(e, t, r) }, e }), {}), zw = jw.reduce((function (e, t) { return e[t] = Fw[t].cancel, e }), {}); jw.reduce((function (e, t) { return e[t] = function () { return Fw[t].process(Iw) }, e }), {}); var Bw = function (e) { return Fw[e].process(Iw) }, Vw = function e(t) { Lw = !1, Iw.delta = Dw ? Pw : Math.max(Math.min(t - Iw.timestamp, 40), 1), Iw.timestamp = t, Rw = !0, jw.forEach(Bw), Rw = !1, Lw && (Dw = !1, Aw(e)) }, Uw = function () { Lw = !0, Dw = !0, Rw || Aw(Vw) }, Hw = function () { return Iw }, Ww = function (e, t, n) { return Math.min(Math.max(n, e), t) }, Kw = .001; function Yw(e, t) { return e * Math.sqrt(1 - t * t) } var Xw = ["duration", "bounce"], Gw = ["stiffness", "damping", "mass"]; function qw(e, t) { return t.some((function (t) { return void 0 !== e[t] })) } function Jw(e) { var t = e.from, n = void 0 === t ? 0 : t, r = e.to, i = void 0 === r ? 1 : r, o = e.restSpeed, a = void 0 === o ? 2 : o, s = e.restDelta, l = jv(e, ["from", "to", "restSpeed", "restDelta"]), u = { done: !1, value: n }, c = function (e) { var t = Object.assign({ velocity: 0, stiffness: 100, damping: 10, mass: 1, isResolvedFromDuration: !1 }, e); if (!qw(e, Gw) && qw(e, Xw)) { var n = function (e) { var t, n, r = e.duration, i = void 0 === r ? 800 : r, o = e.bounce, a = void 0 === o ? .25 : o, s = e.velocity, l = void 0 === s ? 0 : s, u = e.mass, c = void 0 === u ? 1 : u, f = 1 - a; f = Ww(.05, 1, f), i = Ww(.01, 10, i / 1e3), f < 1 ? (t = function (e) { var t = e * f, n = t * i, r = t - l, o = Yw(e, f), a = Math.exp(-n); return Kw - r / o * a }, n = function (e) { var n = e * f * i, r = n * l + l, o = Math.pow(f, 2) * Math.pow(e, 2) * i, a = Math.exp(-n), s = Yw(Math.pow(e, 2), f); return (-t(e) + Kw > 0 ? -1 : 1) * ((r - o) * a) / s }) : (t = function (e) { return Math.exp(-e * i) * ((e - l) * i + 1) - Kw }, n = function (e) { return Math.exp(-e * i) * (i * i * (l - e)) }); var h = function (e, t, n) { for (var r = n, i = 1; i < 12; i++)r -= e(r) / t(r); return r }(t, n, 5 / i); if (i *= 1e3, isNaN(h)) return { stiffness: 100, damping: 10, duration: i }; var d = Math.pow(h, 2) * c; return { stiffness: d, damping: 2 * f * Math.sqrt(c * d), duration: i } }(e); (t = Object.assign(Object.assign(Object.assign({}, t), n), { velocity: 0, mass: 1 })).isResolvedFromDuration = !0 } return t }(l), f = c.stiffness, h = c.damping, d = c.mass, p = c.velocity, v = c.duration, g = c.isResolvedFromDuration, m = Zw, y = Zw; function b() { var e = p ? -p / 1e3 : 0, t = i - n, r = h / (2 * Math.sqrt(f * d)), o = Math.sqrt(f / d) / 1e3; if (void 0 === s && (s = Math.min(Math.abs(i - n) / 100, .4)), r < 1) { var a = Yw(o, r); m = function (n) { var s = Math.exp(-r * o * n); return i - s * ((e + r * o * t) / a * Math.sin(a * n) + t * Math.cos(a * n)) }, y = function (n) { var i = Math.exp(-r * o * n); return r * o * i * (Math.sin(a * n) * (e + r * o * t) / a + t * Math.cos(a * n)) - i * (Math.cos(a * n) * (e + r * o * t) - a * t * Math.sin(a * n)) } } else if (1 === r) m = function (n) { return i - Math.exp(-o * n) * (t + (e + o * t) * n) }; else { var l = o * Math.sqrt(r * r - 1); m = function (n) { var a = Math.exp(-r * o * n), s = Math.min(l * n, 300); return i - a * ((e + r * o * t) * Math.sinh(s) + l * t * Math.cosh(s)) / l } } } return b(), { next: function (e) { var t = m(e); if (g) u.done = e >= v; else { var n = 1e3 * y(e), r = Math.abs(n) <= a, o = Math.abs(i - t) <= s; u.done = r && o } return u.value = u.done ? i : t, u }, flipTarget: function () { var e; p = -p, n = (e = [i, n])[0], i = e[1], b() } } } Jw.needsInterpolation = function (e, t) { return "string" == typeof e || "string" == typeof t }; var Zw = function (e) { return 0 }, $w = function (e, t, n) { var r = t - e; return 0 === r ? 1 : (n - e) / r }, Qw = function (e, t, n) { return -n * e + n * t + e }, ex = function (e, t) { return function (n) { return Math.max(Math.min(n, t), e) } }, tx = function (e) { return e % 1 ? Number(e.toFixed(5)) : e }, nx = /(-)?([\d]*\.?[\d])+/g, rx = /(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi, ix = /^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i; function ox(e) { return "string" == typeof e } var ax = { test: function (e) { return "number" == typeof e }, parse: parseFloat, transform: function (e) { return e } }, sx = Object.assign(Object.assign({}, ax), { transform: ex(0, 1) }), lx = Object.assign(Object.assign({}, ax), { default: 1 }), ux = function (e) { return { test: function (t) { return ox(t) && t.endsWith(e) && 1 === t.split(" ").length }, parse: parseFloat, transform: function (t) { return "".concat(t).concat(e) } } }, cx = ux("deg"), fx = ux("%"), hx = ux("px"), dx = ux("vh"), px = ux("vw"), vx = Object.assign(Object.assign({}, fx), { parse: function (e) { return fx.parse(e) / 100 }, transform: function (e) { return fx.transform(100 * e) } }), gx = function (e, t) { return function (n) { return Boolean(ox(n) && ix.test(n) && n.startsWith(e) || t && Object.prototype.hasOwnProperty.call(n, t)) } }, mx = function (e, t, n) { return function (r) { var i; if (!ox(r)) return r; var o = _(r.match(nx), 4), a = o[0], s = o[1], l = o[2], u = o[3]; return k(i = {}, e, parseFloat(a)), k(i, t, parseFloat(s)), k(i, n, parseFloat(l)), k(i, "alpha", void 0 !== u ? parseFloat(u) : 1), i } }, yx = { test: gx("hsl", "hue"), parse: mx("hue", "saturation", "lightness"), transform: function (e) { var t = e.hue, n = e.saturation, r = e.lightness, i = e.alpha, o = void 0 === i ? 1 : i; return "hsla(" + Math.round(t) + ", " + fx.transform(tx(n)) + ", " + fx.transform(tx(r)) + ", " + tx(sx.transform(o)) + ")" } }, bx = ex(0, 255), wx = Object.assign(Object.assign({}, ax), { transform: function (e) { return Math.round(bx(e)) } }), xx = { test: gx("rgb", "red"), parse: mx("red", "green", "blue"), transform: function (e) { var t = e.red, n = e.green, r = e.blue, i = e.alpha, o = void 0 === i ? 1 : i; return "rgba(" + wx.transform(t) + ", " + wx.transform(n) + ", " + wx.transform(r) + ", " + tx(sx.transform(o)) + ")" } }, _x = { test: gx("#"), parse: function (e) { var t = "", n = "", r = "", i = ""; return e.length > 5 ? (t = e.substr(1, 2), n = e.substr(3, 2), r = e.substr(5, 2), i = e.substr(7, 2)) : (t = e.substr(1, 1), n = e.substr(2, 1), r = e.substr(3, 1), i = e.substr(4, 1), t += t, n += n, r += r, i += i), { red: parseInt(t, 16), green: parseInt(n, 16), blue: parseInt(r, 16), alpha: i ? parseInt(i, 16) / 255 : 1 } }, transform: xx.transform }, Sx = { test: function (e) { return xx.test(e) || _x.test(e) || yx.test(e) }, parse: function (e) { return xx.test(e) ? xx.parse(e) : yx.test(e) ? yx.parse(e) : _x.parse(e) }, transform: function (e) { return ox(e) ? e : e.hasOwnProperty("red") ? xx.transform(e) : yx.transform(e) } }, kx = "${c}", Cx = "${n}"; function Tx(e) { "number" == typeof e && (e = "".concat(e)); var t = [], n = 0, r = e.match(rx); r && (n = r.length, e = e.replace(rx, kx), t.push.apply(t, S(r.map(Sx.parse)))); var i = e.match(nx); return i && (e = e.replace(nx, Cx), t.push.apply(t, S(i.map(ax.parse)))), { values: t, numColors: n, tokenised: e } } function Ex(e) { return Tx(e).values } function Ox(e) { var t = Tx(e), n = t.values, r = t.numColors, i = t.tokenised, o = n.length; return function (e) { for (var t = i, n = 0; n < o; n++)t = t.replace(n < r ? kx : Cx, n < r ? Sx.transform(e[n]) : tx(e[n])); return t } } var Px = function (e) { return "number" == typeof e ? 0 : e }, Mx = { test: function (e) { var t, n, r, i; return isNaN(e) && ox(e) && (null !== (n = null === (t = e.match(nx)) || void 0 === t ? void 0 : t.length) && void 0 !== n ? n : 0) + (null !== (i = null === (r = e.match(rx)) || void 0 === r ? void 0 : r.length) && void 0 !== i ? i : 0) > 0 }, parse: Ex, createTransformer: Ox, getAnimatableNone: function (e) { var t = Ex(e); return Ox(e)(t.map(Px)) } }, Ax = new Set(["brightness", "contrast", "saturate", "opacity"]); function Dx(e) { var t = _(e.slice(0, -1).split("("), 2), n = t[0], r = t[1]; if ("drop-shadow" === n) return e; var i = _(r.match(nx) || [], 1)[0]; if (!i) return e; var o = r.replace(i, ""), a = Ax.has(n) ? 1 : 0; return i !== r && (a *= 100), n + "(" + a + o + ")" } var Lx = /([a-z-]*)\(.*?\)/g, Rx = Object.assign(Object.assign({}, Mx), { getAnimatableNone: function (e) { var t = e.match(Lx); return t ? t.map(Dx).join(" ") : e } }); function Ix(e, t, n) { return n < 0 && (n += 1), n > 1 && (n -= 1), n < 1 / 6 ? e + 6 * (t - e) * n : n < .5 ? t : n < 2 / 3 ? e + (t - e) * (2 / 3 - n) * 6 : e } function jx(e) { var t = e.hue, n = e.saturation, r = e.lightness, i = e.alpha; t /= 360, r /= 100; var o = 0, a = 0, s = 0; if (n /= 100) { var l = r < .5 ? r * (1 + n) : r + n - r * n, u = 2 * r - l; o = Ix(u, l, t + 1 / 3), a = Ix(u, l, t), s = Ix(u, l, t - 1 / 3) } else o = a = s = r; return { red: Math.round(255 * o), green: Math.round(255 * a), blue: Math.round(255 * s), alpha: i } } var Fx = function (e, t, n) { var r = e * e, i = t * t; return Math.sqrt(Math.max(0, n * (i - r) + r)) }, Nx = [_x, xx, yx], zx = function (e) { return Nx.find((function (t) { return t.test(e) })) }, Bx = function (e, t) { var n = zx(e), r = zx(t), i = n.parse(e), o = r.parse(t); n === yx && (i = jx(i), n = xx), r === yx && (o = jx(o), r = xx); var a = Object.assign({}, i); return function (e) { for (var t in a) "alpha" !== t && (a[t] = Fx(i[t], o[t], e)); return a.alpha = Qw(i.alpha, o.alpha, e), n.transform(a) } }, Vx = function (e, t) { return function (n) { return t(e(n)) } }, Ux = function () { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; return t.reduce(Vx) }; function Hx(e, t) { return function (e) { return "number" == typeof e }(e) ? function (n) { return Qw(e, t, n) } : Sx.test(e) ? Bx(e, t) : Xx(e, t) } var Wx = function (e, t) { var n = S(e), r = n.length, i = e.map((function (e, n) { return Hx(e, t[n]) })); return function (e) { for (var t = 0; t < r; t++)n[t] = i[t](e); return n } }, Kx = function (e, t) { var n = Object.assign(Object.assign({}, e), t), r = {}; for (var i in n) void 0 !== e[i] && void 0 !== t[i] && (r[i] = Hx(e[i], t[i])); return function (e) { for (var t in r) n[t] = r[t](e); return n } }; function Yx(e) { for (var t = Mx.parse(e), n = t.length, r = 0, i = 0, o = 0, a = 0; a < n; a++)r || "number" == typeof t[a] ? r++ : void 0 !== t[a].hue ? o++ : i++; return { parsed: t, numNumbers: r, numRGB: i, numHSL: o } } var Xx = function (e, t) { var n = Mx.createTransformer(t), r = Yx(e), i = Yx(t); return r.numHSL === i.numHSL && r.numRGB === i.numRGB && r.numNumbers >= i.numNumbers ? Ux(Wx(r.parsed, i.parsed), n) : function (n) { return "".concat(n > 0 ? t : e) } }, Gx = function (e, t) { return function (n) { return Qw(e, t, n) } }; function qx(e, t, n) { for (var r = [], i = n || function (e) { return "number" == typeof e ? Gx : "string" == typeof e ? Sx.test(e) ? Bx : Xx : Array.isArray(e) ? Wx : "object" == C(e) ? Kx : void 0 }(e[0]), o = e.length - 1, a = 0; a < o; a++) { var s = i(e[a], e[a + 1]); if (t) { var l = Array.isArray(t) ? t[a] : t; s = Ux(l, s) } r.push(s) } return r } function Jx(e, t) { var n = _(e, 2), r = n[0], i = n[1], o = _(t, 1)[0]; return function (e) { return o($w(r, i, e)) } } function Zx(e, t) { var n = e.length, r = n - 1; return function (i) { var o = 0, a = !1; if (i <= e[0] ? a = !0 : i >= e[r] && (o = r - 1, a = !0), !a) { for (var s = 1; s < n && !(e[s] > i || s === r); s++); o = s - 1 } var l = $w(e[o], e[o + 1], i); return t[o](l) } } function $x(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, r = n.clamp, i = void 0 === r || r, o = n.ease, a = n.mixer, s = e.length; t.length, !o || !Array.isArray(o) || o.length, e[0] > e[s - 1] && (e = [].concat(e), t = [].concat(t), e.reverse(), t.reverse()); var l = qx(t, o, a), u = 2 === s ? Jx(e, l) : Zx(e, l); return i ? function (t) { return u(Ww(e[0], e[s - 1], t)) } : u } var Qx = function (e) { return function (t) { return 1 - e(1 - t) } }, e_ = function (e) { return function (t) { return t <= .5 ? e(2 * t) / 2 : (2 - e(2 * (1 - t))) / 2 } }, t_ = function (e) { return function (t) { return t * t * ((e + 1) * t - e) } }, n_ = function (e) { return e }, r_ = function (e) { return Math.pow(e, 2) }, i_ = Qx(r_), o_ = e_(r_), a_ = function (e) { return 1 - Math.sin(Math.acos(e)) }, s_ = Qx(a_), l_ = e_(s_), u_ = t_(1.525), c_ = Qx(u_), f_ = e_(u_), h_ = function (e) { var t = t_(1.525); return function (e) { return (e *= 2) < 1 ? .5 * t(e) : .5 * (2 - Math.pow(2, -10 * (e - 1))) } }(), d_ = function (e) { if (1 === e || 0 === e) return e; var t = e * e; return e < .36363636363636365 ? 7.5625 * t : e < .7272727272727273 ? 9.075 * t - 9.9 * e + 3.4 : e < .9 ? 12.066481994459833 * t - 19.63545706371191 * e + 8.898060941828255 : 10.8 * e * e - 20.52 * e + 10.72 }, p_ = Qx(d_); function v_(e, t) { return e.map((function () { return t || o_ })).splice(0, e.length - 1) } function g_(e) { var t = e.from, n = void 0 === t ? 0 : t, r = e.to, i = void 0 === r ? 1 : r, o = e.ease, a = e.offset, s = e.duration, l = void 0 === s ? 300 : s, u = { done: !1, value: n }, c = Array.isArray(i) ? i : [n, i], f = function (e, t) { return e.map((function (e) { return e * t })) }(a && a.length === c.length ? a : function (e) { var t = e.length; return e.map((function (e, n) { return 0 !== n ? n / (t - 1) : 0 })) }(c), l); function h() { return $x(f, c, { ease: Array.isArray(o) ? o : v_(c, o) }) } var d = h(); return { next: function (e) { return u.value = d(e), u.done = e >= l, u }, flipTarget: function () { c.reverse(), d = h() } } } var m_ = { keyframes: g_, spring: Jw, decay: function (e) { var t = e.velocity, n = void 0 === t ? 0 : t, r = e.from, i = void 0 === r ? 0 : r, o = e.power, a = void 0 === o ? .8 : o, s = e.timeConstant, l = void 0 === s ? 350 : s, u = e.restDelta, c = void 0 === u ? .5 : u, f = e.modifyTarget, h = { done: !1, value: i }, d = a * n, p = i + d, v = void 0 === f ? p : f(p); return v !== p && (d = v - i), { next: function (e) { var t = -d * Math.exp(-e / l); return h.done = !(t > c || t < -c), h.value = h.done ? v : v + t, h }, flipTarget: function () { } } } }; function y_(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0; return e - t - n } var b_ = function (e) { var t = function (t) { var n = t.delta; return e(n) }; return { start: function () { return Nw.update(t, !0) }, stop: function () { return zw.update(t) } } }; function w_(e) { var t, n, r, i, o, a = e.from, s = e.autoplay, l = void 0 === s || s, u = e.driver, c = void 0 === u ? b_ : u, f = e.elapsed, h = void 0 === f ? 0 : f, d = e.repeat, p = void 0 === d ? 0 : d, v = e.repeatType, g = void 0 === v ? "loop" : v, m = e.repeatDelay, y = void 0 === m ? 0 : m, b = e.onPlay, w = e.onStop, x = e.onComplete, _ = e.onRepeat, S = e.onUpdate, k = jv(e, ["from", "autoplay", "driver", "elapsed", "repeat", "repeatType", "repeatDelay", "onPlay", "onStop", "onComplete", "onRepeat", "onUpdate"]), C = k.to, T = 0, E = k.duration, O = !1, P = !0, M = function (e) { if (Array.isArray(e.to)) return g_; if (m_[e.type]) return m_[e.type]; var t = new Set(Object.keys(e)); return t.has("ease") || t.has("duration") && !t.has("dampingRatio") ? g_ : t.has("dampingRatio") || t.has("stiffness") || t.has("mass") || t.has("damping") || t.has("restSpeed") || t.has("restDelta") ? Jw : g_ }(k); (null === (n = (t = M).needsInterpolation) || void 0 === n ? void 0 : n.call(t, a, C)) && (o = $x([0, 100], [a, C], { clamp: !1 }), a = 0, C = 100); var A = M(Object.assign(Object.assign({}, k), { from: a, to: C })); return l && (null == b || b(), (r = c((function (e) { if (P || (e = -e), h += e, !O) { var t = A.next(Math.max(0, h)); i = t.value, o && (i = o(i)), O = P ? t.done : h <= 0 } null == S || S(i), O && (0 === T && (null != E || (E = h)), T < p ? function (e, t, n, r) { return r ? e >= t + n : e <= -n }(h, E, y, P) && (T++, "reverse" === g ? h = function (e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0; return arguments.length > 3 && void 0 !== arguments[3] && !arguments[3] ? t - (e - t) + n : y_(t + -e, t, n) }(h, E, y, P = T % 2 == 0) : (h = y_(h, E, y), "mirror" === g && A.flipTarget()), O = !1, _ && _()) : (r.stop(), x && x())) }))).start()), { stop: function () { null == w || w(), r.stop() } } } function x_(e, t) { return t ? e * (1e3 / t) : 0 } var __ = function (e, t) { return 1 - 3 * t + 3 * e }, S_ = function (e, t) { return 3 * t - 6 * e }, k_ = function (e) { return 3 * e }, C_ = function (e, t, n) { return ((__(t, n) * e + S_(t, n)) * e + k_(t)) * e }, T_ = function (e, t, n) { return 3 * __(t, n) * e * e + 2 * S_(t, n) * e + k_(t) }, E_ = .1; function O_(e, t, n, r) { if (e === t && n === r) return n_; for (var i = new Float32Array(11), o = 0; o < 11; ++o)i[o] = C_(o * E_, e, n); return function (o) { return 0 === o || 1 === o ? o : C_(function (t) { for (var r = 0, o = 1; 10 !== o && i[o] <= t; ++o)r += E_; --o; var a = r + (t - i[o]) / (i[o + 1] - i[o]) * E_, s = T_(a, e, n); return s >= .001 ? function (e, t, n, r) { for (var i = 0; i < 8; ++i) { var o = T_(t, n, r); if (0 === o) return t; t -= (C_(t, n, r) - e) / o } return t }(t, a, e, n) : 0 === s ? a : function (e, t, n, r, i) { var o, a, s = 0; do { (o = C_(a = t + (n - t) / 2, r, i) - e) > 0 ? n = a : t = a } while (Math.abs(o) > 1e-7 && ++s < 10); return a }(t, r, r + E_, e, n) }(o), t, r) } } var P_ = function () { function e() { this.subscriptions = [] } return e.prototype.add = function (e) { var t = this; return function (e, t) { -1 === e.indexOf(t) && e.push(t) }(this.subscriptions, e), function () { return function (e, t) { var n = e.indexOf(t); n > -1 && e.splice(n, 1) }(t.subscriptions, e) } }, e.prototype.notify = function (e, t, n) { var r = this.subscriptions.length; if (r) if (1 === r) this.subscriptions[0](e, t, n); else for (var i = 0; i < r; i++) { var o = this.subscriptions[i]; o && o(e, t, n) } }, e.prototype.getSize = function () { return this.subscriptions.length }, e.prototype.clear = function () { this.subscriptions.length = 0 }, e }(), M_ = function () { function e(e) { var t = this; this.timeDelta = 0, this.lastUpdated = 0, this.updateSubscribers = new P_, this.velocityUpdateSubscribers = new P_, this.renderSubscribers = new P_, this.canTrackVelocity = !1, this.updateAndNotify = function (e, n) { void 0 === n && (n = !0), t.prev = t.current, t.current = e; var r = Hw(), i = r.delta, o = r.timestamp; t.lastUpdated !== o && (t.timeDelta = i, t.lastUpdated = o, Nw.postRender(t.scheduleVelocityCheck)), t.prev !== t.current && t.updateSubscribers.notify(t.current), t.velocityUpdateSubscribers.getSize() && t.velocityUpdateSubscribers.notify(t.getVelocity()), n && t.renderSubscribers.notify(t.current) }, this.scheduleVelocityCheck = function () { return Nw.postRender(t.velocityCheck) }, this.velocityCheck = function (e) { e.timestamp !== t.lastUpdated && (t.prev = t.current, t.velocityUpdateSubscribers.notify(t.getVelocity())) }, this.hasAnimated = !1, this.prev = this.current = e, this.canTrackVelocity = function (e) { return !isNaN(parseFloat(e)) }(this.current) } return e.prototype.onChange = function (e) { return this.updateSubscribers.add(e) }, e.prototype.clearListeners = function () { this.updateSubscribers.clear() }, e.prototype.onRenderRequest = function (e) { return e(this.get()), this.renderSubscribers.add(e) }, e.prototype.attach = function (e) { this.passiveEffect = e }, e.prototype.set = function (e, t) { void 0 === t && (t = !0), t && this.passiveEffect ? this.passiveEffect(e, this.updateAndNotify) : this.updateAndNotify(e, t) }, e.prototype.get = function () { return this.current }, e.prototype.getPrevious = function () { return this.prev }, e.prototype.getVelocity = function () { return this.canTrackVelocity ? x_(parseFloat(this.current) - parseFloat(this.prev), this.timeDelta) : 0 }, e.prototype.start = function (e) { var t = this; return this.stop(), new Promise((function (n) { t.hasAnimated = !0, t.stopAnimation = e(n) })).then((function () { return t.clearAnimation() })) }, e.prototype.stop = function () { this.stopAnimation && this.stopAnimation(), this.clearAnimation() }, e.prototype.isAnimating = function () { return !!this.stopAnimation }, e.prototype.clearAnimation = function () { this.stopAnimation = null }, e.prototype.destroy = function () { this.updateSubscribers.clear(), this.renderSubscribers.clear(), this.stop() }, e }(); function A_(e) { return new M_(e) } var D_ = function (e) { return Boolean(null !== e && "object" == C(e) && e.getVelocity) }, L_ = function (e) { return 1e3 * e }, R_ = { linear: n_, easeIn: r_, easeInOut: o_, easeOut: i_, circIn: a_, circInOut: l_, circOut: s_, backIn: u_, backInOut: f_, backOut: c_, anticipate: h_, bounceIn: p_, bounceInOut: function (e) { return e < .5 ? .5 * (1 - d_(1 - 2 * e)) : .5 * d_(2 * e - 1) + .5 }, bounceOut: d_ }, I_ = function (e) { if (Array.isArray(e)) { e.length; var t = zv(e, 4); return O_(t[0], t[1], t[2], t[3]) } return "string" == typeof e ? R_[e] : e }, j_ = function (e, t) { return "zIndex" !== e && !!("number" == typeof t || Array.isArray(t) || "string" == typeof t && Mx.test(t) && !t.startsWith("url(")) }, F_ = function (e) { return Array.isArray(e) }, N_ = function () { return { type: "spring", stiffness: 500, damping: 25, restSpeed: 10 } }, z_ = function (e) { return { type: "spring", stiffness: 550, damping: 0 === e ? 2 * Math.sqrt(550) : 30, restSpeed: 10 } }, B_ = function () { return { type: "keyframes", ease: "linear", duration: .3 } }, V_ = function (e) { return { type: "keyframes", duration: .8, values: e } }, U_ = { x: N_, y: N_, z: N_, rotate: N_, rotateX: N_, rotateY: N_, rotateZ: N_, scaleX: z_, scaleY: z_, scale: z_, opacity: B_, backgroundColor: B_, color: B_, default: z_ }, H_ = Iv(Iv({}, ax), { transform: Math.round }), W_ = { borderWidth: hx, borderTopWidth: hx, borderRightWidth: hx, borderBottomWidth: hx, borderLeftWidth: hx, borderRadius: hx, radius: hx, borderTopLeftRadius: hx, borderTopRightRadius: hx, borderBottomRightRadius: hx, borderBottomLeftRadius: hx, width: hx, maxWidth: hx, height: hx, maxHeight: hx, size: hx, top: hx, right: hx, bottom: hx, left: hx, padding: hx, paddingTop: hx, paddingRight: hx, paddingBottom: hx, paddingLeft: hx, margin: hx, marginTop: hx, marginRight: hx, marginBottom: hx, marginLeft: hx, rotate: cx, rotateX: cx, rotateY: cx, rotateZ: cx, scale: lx, scaleX: lx, scaleY: lx, scaleZ: lx, skew: cx, skewX: cx, skewY: cx, distance: hx, translateX: hx, translateY: hx, translateZ: hx, x: hx, y: hx, z: hx, perspective: hx, transformPerspective: hx, opacity: sx, originX: vx, originY: vx, originZ: hx, zIndex: H_, fillOpacity: sx, strokeOpacity: sx, numOctaves: H_ }, K_ = Iv(Iv({}, W_), { color: Sx, backgroundColor: Sx, outlineColor: Sx, fill: Sx, stroke: Sx, borderColor: Sx, borderTopColor: Sx, borderRightColor: Sx, borderBottomColor: Sx, borderLeftColor: Sx, filter: Rx, WebkitFilter: Rx }), Y_ = function (e) { return K_[e] }; function X_(e, t) { var n, r = Y_(e); return r !== Rx && (r = Mx), null === (n = r.getAnimatableNone) || void 0 === n ? void 0 : n.call(r, t) } var G_ = function (e) { return F_(e) ? e[e.length - 1] || 0 : e }; function q_(e, t, n) { var r; return Array.isArray(t.to) && (null !== (r = e.duration) && void 0 !== r || (e.duration = .8)), function (e) { Array.isArray(e.to) && null === e.to[0] && (e.to = Bv([], zv(e.to), !1), e.to[0] = e.from) }(t), function (e) { e.when, e.delay, e.delayChildren, e.staggerChildren, e.staggerDirection, e.repeat, e.repeatType, e.repeatDelay, e.from; var t = jv(e, ["when", "delay", "delayChildren", "staggerChildren", "staggerDirection", "repeat", "repeatType", "repeatDelay", "from"]); return !!Object.keys(t).length }(e) || (e = Iv(Iv({}, e), function (e, t) { var n; return n = F_(t) ? V_ : U_[e] || U_.default, Iv({ to: t }, n(t)) }(n, t.to))), Iv(Iv({}, t), function (e) { var t = e.ease, n = e.times, r = e.yoyo, i = e.flip, o = e.loop, a = jv(e, ["ease", "times", "yoyo", "flip", "loop"]), s = Iv({}, a); return n && (s.offset = n), a.duration && (s.duration = L_(a.duration)), a.repeatDelay && (s.repeatDelay = L_(a.repeatDelay)), t && (s.ease = function (e) { return Array.isArray(e) && "number" != typeof e[0] }(t) ? t.map(I_) : I_(t)), "tween" === a.type && (s.type = "keyframes"), (r || o || i) && (r ? s.repeatType = "reverse" : o ? s.repeatType = "loop" : i && (s.repeatType = "mirror"), s.repeat = o || r || i || a.repeat), "spring" !== a.type && (s.type = "keyframes"), s }(e)) } function J_(e) { return 0 === e || "string" == typeof e && 0 === parseFloat(e) && -1 === e.indexOf(" ") } function Z_(e) { return "number" == typeof e ? 0 : X_("", e) } function $_(e, t) { return e[t] || e.default || e } function Q_(e, t, n, r) { return void 0 === r && (r = {}), t.start((function (i) { var o, a, s = function (e, t, n, r, i) { var o, a = $_(r, e), s = null !== (o = a.from) && void 0 !== o ? o : t.get(), l = j_(e, n); return "none" === s && l && "string" == typeof n ? s = X_(e, n) : J_(s) && "string" == typeof n ? s = Z_(n) : !Array.isArray(n) && J_(n) && "string" == typeof s && (n = Z_(s)), j_(e, s) && l && !1 !== a.type ? function () { var r = { from: s, to: n, velocity: t.getVelocity(), onComplete: i, onUpdate: function (e) { return t.set(e) } }; return "inertia" === a.type || "decay" === a.type ? function (e) { var t, n = e.from, r = void 0 === n ? 0 : n, i = e.velocity, o = void 0 === i ? 0 : i, a = e.min, s = e.max, l = e.power, u = void 0 === l ? .8 : l, c = e.timeConstant, f = void 0 === c ? 750 : c, h = e.bounceStiffness, d = void 0 === h ? 500 : h, p = e.bounceDamping, v = void 0 === p ? 10 : p, g = e.restDelta, m = void 0 === g ? 1 : g, y = e.modifyTarget, b = e.driver, w = e.onUpdate, x = e.onComplete, _ = e.onStop; function S(e) { return void 0 !== a && e < a || void 0 !== s && e > s } function k(e) { return void 0 === a ? s : void 0 === s || Math.abs(a - e) < Math.abs(s - e) ? a : s } function C(e) { null == t || t.stop(), t = w_(Object.assign(Object.assign({}, e), { driver: b, onUpdate: function (t) { var n; null == w || w(t), null === (n = e.onUpdate) || void 0 === n || n.call(e, t) }, onComplete: x, onStop: _ })) } function T(e) { C(Object.assign({ type: "spring", stiffness: d, damping: v, restDelta: m }, e)) } if (S(r)) T({ from: r, velocity: o, to: k(r) }); else { var E = u * o + r; void 0 !== y && (E = y(E)); var O, P, M = k(E), A = M === a ? -1 : 1; C({ type: "decay", from: r, velocity: o, timeConstant: f, power: u, restDelta: m, modifyTarget: y, onUpdate: S(E) ? function (e) { O = P, P = e, o = x_(e - O, Hw().delta), (1 === A && e > M || -1 === A && e < M) && T({ from: e, to: M, velocity: o }) } : void 0 }) } return { stop: function () { return null == t ? void 0 : t.stop() } } }(Iv(Iv({}, r), a)) : w_(Iv(Iv({}, q_(a, r, e)), { onUpdate: function (e) { var t; r.onUpdate(e), null === (t = a.onUpdate) || void 0 === t || t.call(a, e) }, onComplete: function () { var e; r.onComplete(), null === (e = a.onComplete) || void 0 === e || e.call(a) } })) } : function () { var e, r, o = G_(n); return t.set(o), i(), null === (e = null == a ? void 0 : a.onUpdate) || void 0 === e || e.call(a, o), null === (r = null == a ? void 0 : a.onComplete) || void 0 === r || r.call(a), { stop: function () { } } } }(e, t, n, r, i), l = function (e, t) { var n, r; return null !== (r = null !== (n = ($_(e, t) || {}).delay) && void 0 !== n ? n : e.delay) && void 0 !== r ? r : 0 }(r, e), u = function () { return a = s() }; return l ? o = setTimeout(u, L_(l)) : u(), function () { clearTimeout(o), null == a || a.stop() } })) } var eS = {}, tS = ["", "X", "Y", "Z"], nS = ["transformPerspective", "x", "y", "z"]; function rS(e, t) { return nS.indexOf(e) - nS.indexOf(t) } ["translate", "scale", "rotate", "skew"].forEach((function (e) { return tS.forEach((function (t) { return nS.push(e + t) })) })); var iS = new Set(nS); function oS(e) { return iS.has(e) } var aS = new Set(["originX", "originY", "originZ"]); function sS(e) { return aS.has(e) } function lS(e) { var t = D_(e) ? e.get() : e; return function (e) { return Boolean(e && "object" == C(e) && e.mix && e.toValue) }(t) ? t.toValue() : t } var uS = h.exports.createContext({}), cS = h.exports.createContext({}), fS = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Av(t, e), t.prototype.getSnapshotBeforeUpdate = function () { return this.updateProps(), null }, t.prototype.componentDidUpdate = function () { }, t.prototype.updateProps = function () { var e = this.props, t = e.visualElement, n = e.props; t && t.setProps(n) }, t.prototype.render = function () { return this.props.children }, t }(ce.Component); function hS(e) { var t = e.preloadedFeatures, n = e.createVisualElement, r = e.projectionNodeConstructor, i = e.useRender, o = e.useVisualState, a = e.Component; return t && fw(t), h.exports.forwardRef((function (e, t) { var s = function (e) { var t, n = e.layoutId, r = null === (t = h.exports.useContext(uS)) || void 0 === t ? void 0 : t.id; return r && void 0 !== n ? r + "-" + n : n }(e); e = Iv(Iv({}, e), { layoutId: s }); var l = h.exports.useContext(vw), u = null, c = function (e) { var t = function (e, t) { if (Cw(e)) { var n = e.initial, r = e.animate; return { initial: !1 === n || _w(n) ? n : void 0, animate: _w(r) ? r : void 0 } } return !1 !== e.inherit ? t : {} }(e, h.exports.useContext(gw)), n = t.initial, r = t.animate; return h.exports.useMemo((function () { return { initial: n, animate: r } }), [Ew(n), Ew(r)]) }(e), f = l.isStatic ? void 0 : Ow((function () { false })), d = o(e, l.isStatic); return !l.isStatic && yw && (c.visualElement = function (e, t, n, r) { var i = h.exports.useContext(hw), o = h.exports.useContext(gw).visualElement, a = h.exports.useContext(mw), s = h.exports.useRef(void 0); r || (r = i.renderer), !s.current && r && (s.current = r(e, { visualState: t, parent: o, props: n, presenceId: null == a ? void 0 : a.id, blockInitialAnimation: !1 === (null == a ? void 0 : a.initial) })); var l = s.current; return bw((function () { null == l || l.syncRender() })), h.exports.useEffect((function () { var e; null === (e = null == l ? void 0 : l.animationState) || void 0 === e || e.animateChanges() })), bw((function () { return function () { return null == l ? void 0 : l.notifyUnmount() } }), []), l }(a, d, Iv(Iv({}, l), e), n), function (e, t, n, r) { var i, o = t.layoutId, a = t.layout, s = t.drag, l = t.dragConstraints, u = t.layoutScroll, c = h.exports.useContext(cS); !r || !n || (null == n ? void 0 : n.projection) || (n.projection = new r(e, n.getLatestValues(), null === (i = n.parent) || void 0 === i ? void 0 : i.projection), n.projection.setOptions({ layoutId: o, layout: a, alwaysMeasureLayout: Boolean(s) || l && ww(l), visualElement: n, scheduleRender: function () { return n.scheduleRender() }, animationType: "string" == typeof a ? a : "both", initialPromotionConfig: c, layoutScroll: u })) }(f, e, c.visualElement, r || cw.projectionNodeConstructor), u = function (e, t, n) { var r = []; if (h.exports.useContext(hw), !t) return null; for (var i = 0; i < pw; i++) { var o = dw[i], a = cw[o], s = a.isEnabled, l = a.Component; s(e) && l && r.push(h.exports.createElement(l, Iv({ key: o }, e, { visualElement: t }))) } return r }(e, c.visualElement)), h.exports.createElement(fS, { visualElement: c.visualElement, props: Iv(Iv({}, l), e) }, u, h.exports.createElement(gw.Provider, { value: c }, i(a, e, f, function (e, t, n) { return h.exports.useCallback((function (r) { var i; r && (null === (i = e.mount) || void 0 === i || i.call(e, r)), t && (r ? t.mount(r) : t.unmount()), n && ("function" == typeof n ? n(r) : ww(n) && (n.current = r)) }), [t]) }(d, c.visualElement, t), d, l.isStatic, c.visualElement))) })) } var dS = ["animate", "circle", "defs", "desc", "ellipse", "g", "image", "line", "filter", "marker", "mask", "metadata", "path", "pattern", "polygon", "polyline", "rect", "stop", "svg", "switch", "symbol", "text", "tspan", "use", "view"]; function pS(e) { return "string" == typeof e && !e.includes("-") && !!(dS.indexOf(e) > -1 || /[A-Z]/.test(e)) } function vS(e, t) { var n = t.layout, r = t.layoutId; return oS(e) || sS(e) || (n || void 0 !== r) && (!!eS[e] || "opacity" === e) } var gS = { x: "translateX", y: "translateY", z: "translateZ", transformPerspective: "perspective" }; function mS(e) { return e.startsWith("--") } var yS = function (e, t) { return t && "number" == typeof e ? t.transform(e) : e }; function bS(e, t, n, r) { var i, o = e.style, a = e.vars, s = e.transform, l = e.transformKeys, u = e.transformOrigin; l.length = 0; var c = !1, f = !1, h = !0; for (var d in t) { var p = t[d]; if (mS(d)) a[d] = p; else { var v = W_[d], g = yS(p, v); if (oS(d)) { if (c = !0, s[d] = g, l.push(d), !h) continue; p !== (null !== (i = v.default) && void 0 !== i ? i : 0) && (h = !1) } else sS(d) ? (u[d] = g, f = !0) : o[d] = g } } c ? o.transform = function (e, t, n, r) { var i = e.transform, o = e.transformKeys, a = t.enableHardwareAcceleration, s = void 0 === a || a, l = t.allowTransformNone, u = void 0 === l || l, c = ""; o.sort(rS); for (var f = !1, h = o.length, d = 0; d < h; d++) { var p = o[d]; c += "".concat(gS[p] || p, "(").concat(i[p], ") "), "z" === p && (f = !0) } return !f && s ? c += "translateZ(0)" : c = c.trim(), r ? c = r(i, n ? "" : c) : u && n && (c = "none"), c }(e, n, h, r) : r ? o.transform = r({}, "") : !t.transform && o.transform && (o.transform = "none"), f && (o.transformOrigin = function (e) { var t = e.originX, n = void 0 === t ? "50%" : t, r = e.originY, i = void 0 === r ? "50%" : r, o = e.originZ, a = void 0 === o ? 0 : o; return "".concat(n, " ").concat(i, " ").concat(a) }(u)) } function wS(e, t, n) { for (var r in t) !D_(t[r]) && !vS(r, n) && (e[r] = t[r]) } function xS(e, t, n) { var r = {}, i = function (e, t, n) { var r = {}; return wS(r, e.style || {}, e), Object.assign(r, function (e, t, n) { var r = e.transformTemplate; return h.exports.useMemo((function () { var e = { style: {}, transform: {}, transformKeys: [], transformOrigin: {}, vars: {} }; bS(e, t, { enableHardwareAcceleration: !n }, r); var i = e.style; return Iv(Iv({}, e.vars), i) }), [t]) }(e, t, n)), e.transformValues && (r = e.transformValues(r)), r }(e, t, n); return Boolean(e.drag) && !1 !== e.dragListener && (r.draggable = !1, i.userSelect = i.WebkitUserSelect = i.WebkitTouchCallout = "none", i.touchAction = !0 === e.drag ? "none" : "pan-".concat("x" === e.drag ? "y" : "x")), r.style = i, r } var _S = new Set(["initial", "animate", "exit", "style", "variants", "transition", "transformTemplate", "transformValues", "custom", "inherit", "layout", "layoutId", "layoutDependency", "onLayoutAnimationComplete", "onLayoutMeasure", "onBeforeLayoutMeasure", "onAnimationStart", "onAnimationComplete", "onUpdate", "onDragStart", "onDrag", "onDragEnd", "onMeasureDragConstraints", "onDirectionLock", "onDragTransitionEnd", "drag", "dragControls", "dragListener", "dragConstraints", "dragDirectionLock", "dragSnapToOrigin", "_dragX", "_dragY", "dragElastic", "dragMomentum", "dragPropagation", "dragTransition", "whileDrag", "onPan", "onPanStart", "onPanEnd", "onPanSessionStart", "onTap", "onTapStart", "onTapCancel", "onHoverStart", "onHoverEnd", "whileFocus", "whileTap", "whileHover", "whileInView", "onViewportEnter", "onViewportLeave", "viewport", "layoutScroll"]); function SS(e) { return _S.has(e) } var kS = function (e) { return !SS(e) }; try { !function (e) { !e || (kS = function (t) { return t.startsWith("on") ? !SS(t) : e(t) }) }(n(16052).Z) } catch (e) { } function CS(e, t, n) { return "string" == typeof e ? e : hx.transform(t + n * e) } var TS = { offset: "stroke-dashoffset", array: "stroke-dasharray" }, ES = { offset: "strokeDashoffset", array: "strokeDasharray" }; function OS(e, t, n, r) { var i = t.attrX, o = t.attrY, a = t.originX, s = t.originY, l = t.pathLength, u = t.pathSpacing, c = void 0 === u ? 1 : u, f = t.pathOffset, h = void 0 === f ? 0 : f; bS(e, jv(t, ["attrX", "attrY", "originX", "originY", "pathLength", "pathSpacing", "pathOffset"]), n, r), e.attrs = e.style, e.style = {}; var d = e.attrs, p = e.style, v = e.dimensions; d.transform && (v && (p.transform = d.transform), delete d.transform), v && (void 0 !== a || void 0 !== s || p.transform) && (p.transformOrigin = function (e, t, n) { var r = CS(t, e.x, e.width), i = CS(n, e.y, e.height); return "".concat(r, " ").concat(i) }(v, void 0 !== a ? a : .5, void 0 !== s ? s : .5)), void 0 !== i && (d.x = i), void 0 !== o && (d.y = o), void 0 !== l && function (e, t, n, r, i) { void 0 === n && (n = 1), void 0 === r && (r = 0), void 0 === i && (i = !0), e.pathLength = 1; var o = i ? TS : ES; e[o.offset] = hx.transform(-r); var a = hx.transform(t), s = hx.transform(n); e[o.array] = "".concat(a, " ").concat(s) }(d, l, c, h, !1) } var PS = function () { return Iv(Iv({}, { style: {}, transform: {}, transformKeys: [], transformOrigin: {}, vars: {} }), { attrs: {} }) }; function MS(e, t) { var n = h.exports.useMemo((function () { var n = PS(); return OS(n, t, { enableHardwareAcceleration: !1 }, e.transformTemplate), Iv(Iv({}, n.attrs), { style: Iv({}, n.style) }) }), [t]); if (e.style) { var r = {}; wS(r, e.style, e), n.style = Iv(Iv({}, r), n.style) } return n } function AS(e) { return void 0 === e && (e = !1), function (t, n, r, i, o, a) { var s = o.latestValues, l = (pS(t) ? MS : xS)(n, s, a), u = function (e, t, n) { var r = {}; for (var i in e) (kS(i) || !0 === n && SS(i) || !t && !SS(i) || e.draggable && i.startsWith("onDrag")) && (r[i] = e[i]); return r }(n, "string" == typeof t, e), c = Iv(Iv(Iv({}, u), l), { ref: i }); return r && (c["data-projection-id"] = r), h.exports.createElement(t, c) } } var DS = /([a-z])([A-Z])/g, LS = function (e) { return e.replace(DS, "$1-$2").toLowerCase() }; function RS(e, t, n, r) { var i = t.style, o = t.vars; for (var a in Object.assign(e.style, i, r && r.getProjectionStyles(n)), o) e.style.setProperty(a, o[a]) } var IS = new Set(["baseFrequency", "diffuseConstant", "kernelMatrix", "kernelUnitLength", "keySplines", "keyTimes", "limitingConeAngle", "markerHeight", "markerWidth", "numOctaves", "targetX", "targetY", "surfaceScale", "specularConstant", "specularExponent", "stdDeviation", "tableValues", "viewBox", "gradientTransform", "pathLength"]); function jS(e, t) { for (var n in RS(e, t), t.attrs) e.setAttribute(IS.has(n) ? n : LS(n), t.attrs[n]) } function FS(e) { var t = e.style, n = {}; for (var r in t) (D_(t[r]) || vS(r, e)) && (n[r] = t[r]); return n } function NS(e) { var t = FS(e); for (var n in e) D_(e[n]) && (t["x" === n || "y" === n ? "attr" + n.toUpperCase() : n] = e[n]); return t } function zS(e) { return "object" == C(e) && "function" == typeof e.start } function BS(e, t, n, r) { var i = e.scrapeMotionValuesFromProps, o = e.createRenderState, a = e.onMount, s = { latestValues: US(t, n, r, i), renderState: o() }; return a && (s.mount = function (e) { return a(t, e, s) }), s } var VS = function (e) { return function (t, n) { var r = h.exports.useContext(gw), i = h.exports.useContext(mw); return n ? BS(e, t, r, i) : Ow((function () { return BS(e, t, r, i) })) } }; function US(e, t, n, r) { var i = {}, o = !1 === (null == n ? void 0 : n.initial), a = r(e); for (var s in a) i[s] = lS(a[s]); var l = e.initial, u = e.animate, c = Cw(e), f = Tw(e); t && f && !c && !1 !== e.inherit && (null != l || (l = t.initial), null != u || (u = t.animate)); var h = o || !1 === l, d = h ? u : l; return d && "boolean" != typeof d && !zS(d) && (Array.isArray(d) ? d : [d]).forEach((function (t) { var n = Sw(e, t); if (n) { var r = n.transitionEnd; n.transition; var o = jv(n, ["transitionEnd", "transition"]); for (var a in o) { var s = o[a]; Array.isArray(s) && (s = s[h ? s.length - 1 : 0]), null !== s && (i[a] = s) } for (var a in r) i[a] = r[a] } })), i } var HS, WS = { useVisualState: VS({ scrapeMotionValuesFromProps: NS, createRenderState: PS, onMount: function (e, t, n) { var r = n.renderState, i = n.latestValues; try { r.dimensions = "function" == typeof t.getBBox ? t.getBBox() : t.getBoundingClientRect() } catch (e) { r.dimensions = { x: 0, y: 0, width: 0, height: 0 } } OS(r, i, { enableHardwareAcceleration: !1 }, e.transformTemplate), jS(t, r) } }) }, KS = { useVisualState: VS({ scrapeMotionValuesFromProps: FS, createRenderState: function () { return { style: {}, transform: {}, transformKeys: [], transformOrigin: {}, vars: {} } } }) }; function YS(e, t, n, r) { return e.addEventListener(t, n, r), function () { return e.removeEventListener(t, n, r) } } function XS(e, t, n, r) { h.exports.useEffect((function () { var i = e.current; if (n && i) return YS(i, t, n, r) }), [e, t, n, r]) } function GS(e) { return !!e.touches } !function (e) { e.Animate = "animate", e.Hover = "whileHover", e.Tap = "whileTap", e.Drag = "whileDrag", e.Focus = "whileFocus", e.InView = "whileInView", e.Exit = "exit" }(HS || (HS = {})); var qS = { pageX: 0, pageY: 0 }; function JS(e, t) { void 0 === t && (t = "page"); var n = e.touches[0] || e.changedTouches[0] || qS; return { x: n[t + "X"], y: n[t + "Y"] } } function ZS(e, t) { return void 0 === t && (t = "page"), { x: e[t + "X"], y: e[t + "Y"] } } var $S = function (e, t) { void 0 === t && (t = !1); var n = function (t) { return e(t, function (e, t) { return void 0 === t && (t = "page"), { point: GS(e) ? JS(e, t) : ZS(e, t) } }(t)) }; return t ? function (e) { return function (t) { var n = t instanceof MouseEvent; (!n || n && 0 === t.button) && e(t) } }(n) : n }, QS = { pointerdown: "mousedown", pointermove: "mousemove", pointerup: "mouseup", pointercancel: "mousecancel", pointerover: "mouseover", pointerout: "mouseout", pointerenter: "mouseenter", pointerleave: "mouseleave" }, ek = { pointerdown: "touchstart", pointermove: "touchmove", pointerup: "touchend", pointercancel: "touchcancel" }; function tk(e) { return yw && null === window.onpointerdown ? e : yw && null === window.ontouchstart ? ek[e] : yw && null === window.onmousedown ? QS[e] : e } function nk(e, t, n, r) { return YS(e, tk(t), $S(n, "pointerdown" === t), r) } function rk(e, t, n, r) { return XS(e, tk(t), n && $S(n, "pointerdown" === t), r) } function ik(e) { var t = null; return function () { return null === t && (t = e, function () { t = null }) } } var ok = ik("dragHorizontal"), ak = ik("dragVertical"); function sk() { var e = function (e) { var t = !1, n = ok(), r = ak(); return n && r ? t = function () { n(), r() } : (n && n(), r && r()), t }(); return !e || (e(), !1) } function lk(e, t, n) { return function (r, i) { var o; !function (e) { return "undefined" != typeof PointerEvent && e instanceof PointerEvent ? "mouse" === e.pointerType : e instanceof MouseEvent }(r) || sk() || (null === (o = e.animationState) || void 0 === o || o.setActive(HS.Hover, t), null == n || n(r, i)) } } var uk = function e(t, n) { return !!n && (t === n || e(t, n.parentElement)) }; function ck(e) { return h.exports.useEffect((function () { return function () { return e() } }), []) } var fk = new WeakMap, hk = new WeakMap, dk = function (e) { var t; null === (t = fk.get(e.target)) || void 0 === t || t(e) }, pk = function (e) { e.forEach(dk) }; var vk = { some: 0, all: 1 }; function gk(e, t, n, r) { var i = r.root, o = r.margin, a = r.amount, s = void 0 === a ? "some" : a, l = r.once; h.exports.useEffect((function () { if (e) { var r = { root: null == i ? void 0 : i.current, rootMargin: o, threshold: "number" == typeof s ? s : vk[s] }; return function (e, t, n) { var r = function (e) { var t = e.root, n = jv(e, ["root"]), r = t || document; hk.has(r) || hk.set(r, {}); var i = hk.get(r), o = JSON.stringify(n); return i[o] || (i[o] = new IntersectionObserver(pk, Iv({ root: t }, n))), i[o] }(t); return fk.set(e, n), r.observe(e), function () { fk.delete(e), r.unobserve(e) } }(n.getInstance(), r, (function (e) { var r, i = e.isIntersecting; if (t.isInView !== i && (t.isInView = i, !l || i || !t.hasEnteredView)) { i && (t.hasEnteredView = !0), null === (r = n.animationState) || void 0 === r || r.setActive(HS.InView, i); var o = n.getProps(), a = i ? o.onViewportEnter : o.onViewportLeave; null == a || a(e) } })) } }), [e, i, o, s]) } function mk(e, t, n) { h.exports.useEffect((function () { !e || requestAnimationFrame((function () { var e; t.hasEnteredView = !0; var r = n.getProps().onViewportEnter; null == r || r(null), null === (e = n.animationState) || void 0 === e || e.setActive(HS.InView, !0) })) }), [e]) } var yk = function (e) { return function (t) { return e(t), null } }, bk = { inView: yk((function (e) { var t = e.visualElement, n = e.whileInView, r = e.onViewportEnter, i = e.onViewportLeave, o = e.viewport, a = void 0 === o ? {} : o, s = h.exports.useRef({ hasEnteredView: !1, isInView: !1 }), l = Boolean(n || r || i); a.once && s.current.hasEnteredView && (l = !1), ("undefined" == typeof IntersectionObserver ? mk : gk)(l, s.current, t, a) })), tap: yk((function (e) { var t = e.onTap, n = e.onTapStart, r = e.onTapCancel, i = e.whileTap, o = e.visualElement, a = t || n || r || i, s = h.exports.useRef(!1), l = h.exports.useRef(null); function u() { var e; null === (e = l.current) || void 0 === e || e.call(l), l.current = null } function c() { var e; return u(), s.current = !1, null === (e = o.animationState) || void 0 === e || e.setActive(HS.Tap, !1), !sk() } function f(e, n) { !c() || (uk(o.getInstance(), e.target) ? null == t || t(e, n) : null == r || r(e, n)) } function d(e, t) { !c() || null == r || r(e, t) } rk(o, "pointerdown", a ? function (e, t) { var r; u(), !s.current && (s.current = !0, l.current = Ux(nk(window, "pointerup", f), nk(window, "pointercancel", d)), null === (r = o.animationState) || void 0 === r || r.setActive(HS.Tap, !0), null == n || n(e, t)) } : void 0), ck(u) })), focus: yk((function (e) { var t = e.whileFocus, n = e.visualElement; XS(n, "focus", t ? function () { var e; null === (e = n.animationState) || void 0 === e || e.setActive(HS.Focus, !0) } : void 0), XS(n, "blur", t ? function () { var e; null === (e = n.animationState) || void 0 === e || e.setActive(HS.Focus, !1) } : void 0) })), hover: yk((function (e) { var t = e.onHoverStart, n = e.onHoverEnd, r = e.whileHover, i = e.visualElement; rk(i, "pointerenter", t || r ? lk(i, !0, t) : void 0), rk(i, "pointerleave", n || r ? lk(i, !1, n) : void 0) })) }, wk = 0, xk = function () { return wk++ }; function _k(e, t) { if (!Array.isArray(t)) return !1; var n = t.length; if (n !== e.length) return !1; for (var r = 0; r < n; r++)if (t[r] !== e[r]) return !1; return !0 } var Sk = function (e) { return /^\-?\d*\.?\d+$/.test(e) }, kk = function (e) { return /^0[^.\s]+$/.test(e) }, Ck = function (e) { return function (t) { return t.test(e) } }, Tk = [ax, hx, fx, cx, px, dx, { test: function (e) { return "auto" === e }, parse: function (e) { return e } }], Ek = function (e) { return Tk.find(Ck(e)) }, Ok = Bv(Bv([], zv(Tk), !1), [Sx, Mx], !1), Pk = function (e) { return Ok.find(Ck(e)) }; function Mk(e, t, n) { e.hasValue(t) ? e.getValue(t).set(n) : e.addValue(t, A_(n)) } function Ak(e, t) { if (t) return (t[e] || t.default || t).from } function Dk(e, t, n) { var r; void 0 === n && (n = {}); var i = kw(e, t, n.custom), o = (i || {}).transition, a = void 0 === o ? e.getDefaultTransition() || {} : o; n.transitionOverride && (a = n.transitionOverride); var s = i ? function () { return Lk(e, i, n) } : function () { return Promise.resolve() }, l = (null === (r = e.variantChildren) || void 0 === r ? void 0 : r.size) ? function (r) { void 0 === r && (r = 0); var i = a.delayChildren, o = void 0 === i ? 0 : i, s = a.staggerChildren, l = a.staggerDirection; return function (e, t, n, r, i, o) { void 0 === n && (n = 0), void 0 === r && (r = 0), void 0 === i && (i = 1); var a = [], s = (e.variantChildren.size - 1) * r, l = 1 === i ? function (e) { return void 0 === e && (e = 0), e * r } : function (e) { return void 0 === e && (e = 0), s - e * r }; return Array.from(e.variantChildren).sort(Rk).forEach((function (e, r) { a.push(Dk(e, t, Iv(Iv({}, o), { delay: n + l(r) })).then((function () { return e.notifyAnimationComplete(t) }))) })), Promise.all(a) }(e, t, o + r, s, l, n) } : function () { return Promise.resolve() }, u = a.when; if (u) { var c = zv("beforeChildren" === u ? [s, l] : [l, s], 2), f = c[0], h = c[1]; return f().then(h) } return Promise.all([s(), l(n.delay)]) } function Lk(e, t, n) { var r, i = void 0 === n ? {} : n, o = i.delay, a = void 0 === o ? 0 : o, s = i.transitionOverride, l = i.type, u = e.makeTargetAnimatable(t), c = u.transition, f = void 0 === c ? e.getDefaultTransition() : c, h = u.transitionEnd, d = jv(u, ["transition", "transitionEnd"]); s && (f = s); var p = [], v = l && (null === (r = e.animationState) || void 0 === r ? void 0 : r.getState()[l]); for (var g in d) { var m = e.getValue(g), y = d[g]; if (!(!m || void 0 === y || v && Ik(v, g))) { var b = Q_(g, m, y, Iv({ delay: a }, f)); p.push(b) } } return Promise.all(p).then((function () { h && function (e, t) { var n = kw(e, t), r = n ? e.makeTargetAnimatable(n, !1) : {}, i = r.transitionEnd, o = void 0 === i ? {} : i; r.transition; var a = jv(r, ["transitionEnd", "transition"]); for (var s in a = Iv(Iv({}, a), o)) Mk(e, s, G_(a[s])) }(e, h) })) } function Rk(e, t) { return e.sortNodePosition(t) } function Ik(e, t) { var n = e.protectedKeys, r = e.needsAnimating, i = n.hasOwnProperty(t) && !0 !== r[t]; return r[t] = !1, i } var jk = [HS.Animate, HS.InView, HS.Focus, HS.Hover, HS.Tap, HS.Drag, HS.Exit], Fk = Bv([], zv(jk), !1).reverse(), Nk = jk.length; function zk(e) { var t = function (e) { return function (t) { return Promise.all(t.map((function (t) { var n = t.animation, r = t.options; return function (e, t, n) { var r; if (void 0 === n && (n = {}), e.notifyAnimationStart(t), Array.isArray(t)) { var i = t.map((function (t) { return Dk(e, t, n) })); r = Promise.all(i) } else if ("string" == typeof t) r = Dk(e, t, n); else { var o = "function" == typeof t ? kw(e, t, n.custom) : t; r = Lk(e, o, n) } return r.then((function () { return e.notifyAnimationComplete(t) })) }(e, n, r) }))) } }(e), n = function () { var e; return (e = {})[HS.Animate] = Bk(!0), e[HS.InView] = Bk(), e[HS.Hover] = Bk(), e[HS.Tap] = Bk(), e[HS.Drag] = Bk(), e[HS.Focus] = Bk(), e[HS.Exit] = Bk(), e }(), r = {}, i = !0, o = function (t, n) { var r = kw(e, n); if (r) { r.transition; var i = r.transitionEnd, o = jv(r, ["transition", "transitionEnd"]); t = Iv(Iv(Iv({}, t), o), i) } return t }; function a(a, s) { for (var l, u = e.getProps(), c = e.getVariantContext(!0) || {}, f = [], h = new Set, d = {}, p = 1 / 0, v = function (t) { var r = Fk[t], v = n[r], g = null !== (l = u[r]) && void 0 !== l ? l : c[r], m = _w(g), y = r === s ? v.isActive : null; !1 === y && (p = t); var b = g === c[r] && g !== u[r] && m; if (b && i && e.manuallyAnimateOnMount && (b = !1), v.protectedKeys = Iv({}, d), !v.isActive && null === y || !g && !v.prevProp || zS(g) || "boolean" == typeof g) return "continue"; var w = function (e, t) { return "string" == typeof t ? t !== e : !!xw(t) && !_k(t, e) }(v.prevProp, g), x = w || r === s && v.isActive && !b && m || t > p && m, _ = Array.isArray(g) ? g : [g], S = _.reduce(o, {}); !1 === y && (S = {}); var k = v.prevResolvedValues, C = void 0 === k ? {} : k, T = Iv(Iv({}, C), S), E = function (e) { x = !0, h.delete(e), v.needsAnimating[e] = !0 }; for (var O in T) { var P = S[O], M = C[O]; d.hasOwnProperty(O) || (P !== M ? F_(P) && F_(M) ? !_k(P, M) || w ? E(O) : v.protectedKeys[O] = !0 : void 0 !== P ? E(O) : h.add(O) : void 0 !== P && h.has(O) ? E(O) : v.protectedKeys[O] = !0) } v.prevProp = g, v.prevResolvedValues = S, v.isActive && (d = Iv(Iv({}, d), S)), i && e.blockInitialAnimation && (x = !1), x && !b && f.push.apply(f, Bv([], zv(_.map((function (e) { return { animation: e, options: Iv({ type: r }, a) } }))), !1)) }, g = 0; g < Nk; g++)v(g); if (r = Iv({}, d), h.size) { var m = {}; h.forEach((function (t) { var n = e.getBaseTarget(t); void 0 !== n && (m[t] = n) })), f.push({ animation: m }) } var y = Boolean(f.length); return i && !1 === u.initial && !e.manuallyAnimateOnMount && (y = !1), i = !1, y ? t(f) : Promise.resolve() } return { isAnimated: function (e) { return void 0 !== r[e] }, animateChanges: a, setActive: function (t, r, i) { var o; return n[t].isActive === r ? Promise.resolve() : (null === (o = e.variantChildren) || void 0 === o || o.forEach((function (e) { var n; return null === (n = e.animationState) || void 0 === n ? void 0 : n.setActive(t, r) })), n[t].isActive = r, a(i, t)) }, setAnimateFunction: function (n) { t = n(e) }, getState: function () { return n } } } function Bk(e) { return void 0 === e && (e = !1), { isActive: e, protectedKeys: {}, needsAnimating: {}, prevResolvedValues: {} } } var Vk = { animation: yk((function (e) { var t = e.visualElement, n = e.animate; t.animationState || (t.animationState = zk(t)), zS(n) && h.exports.useEffect((function () { return n.subscribe(t) }), [n]) })), exit: yk((function (e) { var t = e.custom, n = e.visualElement, r = zv(function () { var e = h.exports.useContext(mw); if (null === e) return [!0, null]; var t = e.isPresent, n = e.onExitComplete, r = e.register, i = Ow(xk); return h.exports.useEffect((function () { return r(i) }), []), !t && n ? [!1, function () { return null == n ? void 0 : n(i) }] : [!0] }(), 2), i = r[0], o = r[1], a = h.exports.useContext(mw); h.exports.useEffect((function () { var e, r; n.isPresent = i; var s = null === (e = n.animationState) || void 0 === e ? void 0 : e.setActive(HS.Exit, !i, { custom: null !== (r = null == a ? void 0 : a.custom) && void 0 !== r ? r : t }); !i && (null == s || s.then(o)) }), [i]) })) }, Uk = ["LayoutMeasure", "BeforeLayoutMeasure", "LayoutUpdate", "ViewportBoxUpdate", "Update", "Render", "AnimationComplete", "LayoutAnimationComplete", "AnimationStart", "SetAxisTarget", "Unmount"], Hk = function (e) { var t = e.treeType, n = void 0 === t ? "" : t, r = e.build, i = e.getBaseTarget, o = e.makeTargetAnimatable, a = e.measureViewportBox, s = e.render, l = e.readValueFromInstance, u = e.removeValueFromRenderState, c = e.sortNodePosition, f = e.scrapeMotionValuesFromProps; return function (e, t) { var h = e.parent, d = e.props, p = e.presenceId, v = e.blockInitialAnimation, g = e.visualState; void 0 === t && (t = {}); var m, y, b = !1, w = g.latestValues, x = g.renderState, _ = function () { var e = Uk.map((function () { return new P_ })), t = {}, n = { clearAllListeners: function () { return e.forEach((function (e) { return e.clear() })) }, updatePropListeners: function (e) { Uk.forEach((function (r) { var i, o = "on" + r, a = e[o]; null === (i = t[r]) || void 0 === i || i.call(t), a && (t[r] = n[o](a)) })) } }; return e.forEach((function (e, t) { n["on" + Uk[t]] = function (t) { return e.add(t) }, n["notify" + Uk[t]] = function () { for (var t = [], n = 0; n < arguments.length; n++)t[n] = arguments[n]; e.notify.apply(e, Bv([], zv(t), !1)) } })), n }(), S = new Map, k = new Map, C = {}, T = Iv({}, w); function E() { !m || !b || (O(), s(m, x, d.style, I.projection)) } function O() { r(I, x, w, t, d) } function P() { _.notifyUpdate(w) } var M = f(d); for (var A in M) { var D = M[A]; void 0 !== w[A] && D_(D) && D.set(w[A], !1) } var L = Cw(d), R = Tw(d), I = Iv(Iv({ treeType: n, current: null, depth: h ? h.depth + 1 : 0, parent: h, children: new Set, presenceId: p, variantChildren: R ? new Set : void 0, isVisible: void 0, manuallyAnimateOnMount: Boolean(null == h ? void 0 : h.isMounted()), blockInitialAnimation: v, isMounted: function () { return Boolean(m) }, mount: function (e) { b = !0, m = I.current = e, I.projection && I.projection.mount(e), R && h && !L && (y = null == h ? void 0 : h.addVariantChild(I)), null == h || h.children.add(I), I.setProps(d) }, unmount: function () { var e; null === (e = I.projection) || void 0 === e || e.unmount(), zw.update(P), zw.render(E), k.forEach((function (e) { return e() })), null == y || y(), null == h || h.children.delete(I), _.clearAllListeners(), m = void 0, b = !1 }, addVariantChild: function (e) { var t, n = I.getClosestVariantNode(); if (n) return null === (t = n.variantChildren) || void 0 === t || t.add(e), function () { return n.variantChildren.delete(e) } }, sortNodePosition: function (e) { return c && n === e.treeType ? c(I.getInstance(), e.getInstance()) : 0 }, getClosestVariantNode: function () { return R ? I : null == h ? void 0 : h.getClosestVariantNode() }, getLayoutId: function () { return d.layoutId }, getInstance: function () { return m }, getStaticValue: function (e) { return w[e] }, setStaticValue: function (e, t) { return w[e] = t }, getLatestValues: function () { return w }, setVisibility: function (e) { I.isVisible !== e && (I.isVisible = e, I.scheduleRender()) }, makeTargetAnimatable: function (e, t) { return void 0 === t && (t = !0), o(I, e, d, t) }, measureViewportBox: function () { return a(m, d) }, addValue: function (e, t) { I.hasValue(e) && I.removeValue(e), S.set(e, t), w[e] = t.get(), function (e, t) { var n = t.onChange((function (t) { w[e] = t, d.onUpdate && Nw.update(P, !1, !0) })), r = t.onRenderRequest(I.scheduleRender); k.set(e, (function () { n(), r() })) }(e, t) }, removeValue: function (e) { var t; S.delete(e), null === (t = k.get(e)) || void 0 === t || t(), k.delete(e), delete w[e], u(e, x) }, hasValue: function (e) { return S.has(e) }, getValue: function (e, t) { var n = S.get(e); return void 0 === n && void 0 !== t && (n = A_(t), I.addValue(e, n)), n }, forEachValue: function (e) { return S.forEach(e) }, readValue: function (e) { var n; return null !== (n = w[e]) && void 0 !== n ? n : l(m, e, t) }, setBaseTarget: function (e, t) { T[e] = t }, getBaseTarget: function (e) { if (i) { var t = i(d, e); if (void 0 !== t && !D_(t)) return t } return T[e] } }, _), { build: function () { return O(), x }, scheduleRender: function () { Nw.render(E, !1, !0) }, syncRender: E, setProps: function (e) { (e.transformTemplate || d.transformTemplate) && I.scheduleRender(), d = e, _.updatePropListeners(e), C = function (e, t, n) { var r; for (var i in t) { var o = t[i], a = n[i]; if (D_(o)) e.addValue(i, o); else if (D_(a)) e.addValue(i, A_(o)); else if (a !== o) if (e.hasValue(i)) { var s = e.getValue(i); !s.hasAnimated && s.set(o) } else e.addValue(i, A_(null !== (r = e.getStaticValue(i)) && void 0 !== r ? r : o)) } for (var i in n) void 0 === t[i] && e.removeValue(i); return t }(I, f(d), C) }, getProps: function () { return d }, getVariant: function (e) { var t; return null === (t = d.variants) || void 0 === t ? void 0 : t[e] }, getDefaultTransition: function () { return d.transition }, getTransformPagePoint: function () { return d.transformPagePoint }, getVariantContext: function (e) { if (void 0 === e && (e = !1), e) return null == h ? void 0 : h.getVariantContext(); if (!L) { var t = (null == h ? void 0 : h.getVariantContext()) || {}; return void 0 !== d.initial && (t.initial = d.initial), t } for (var n = {}, r = 0; r < Kk; r++) { var i = Wk[r], o = d[i]; (_w(o) || !1 === o) && (n[i] = o) } return n } }); return I } }, Wk = Bv(["initial"], zv(jk), !1), Kk = Wk.length; function Yk(e) { return "string" == typeof e && e.startsWith("var(--") } var Xk = /var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/; function Gk(e, t, n) { var r = zv(function (e) { var t = Xk.exec(e); if (!t) return [,]; var n = zv(t, 3); return [n[1], n[2]] }(e), 2), i = r[0], o = r[1]; if (i) { var a = window.getComputedStyle(t).getPropertyValue(i); return a ? a.trim() : Yk(o) ? Gk(o, t) : o } } var qk, Jk = new Set(["width", "height", "top", "left", "right", "bottom", "x", "y"]), Zk = function (e) { return Jk.has(e) }, $k = function (e, t) { e.set(t, !1), e.set(t) }, Qk = function (e) { return e === ax || e === hx }; !function (e) { e.width = "width", e.height = "height", e.left = "left", e.right = "right", e.top = "top", e.bottom = "bottom" }(qk || (qk = {})); var eC = function (e, t) { return parseFloat(e.split(", ")[t]) }, tC = function (e, t) { return function (n, r) { var i = r.transform; if ("none" === i || !i) return 0; var o = i.match(/^matrix3d\((.+)\)$/); if (o) return eC(o[1], t); var a = i.match(/^matrix\((.+)\)$/); return a ? eC(a[1], e) : 0 } }, nC = new Set(["x", "y", "z"]), rC = nS.filter((function (e) { return !nC.has(e) })), iC = { width: function (e, t) { var n = e.x, r = t.paddingLeft, i = void 0 === r ? "0" : r, o = t.paddingRight, a = void 0 === o ? "0" : o; return n.max - n.min - parseFloat(i) - parseFloat(a) }, height: function (e, t) { var n = e.y, r = t.paddingTop, i = void 0 === r ? "0" : r, o = t.paddingBottom, a = void 0 === o ? "0" : o; return n.max - n.min - parseFloat(i) - parseFloat(a) }, top: function (e, t) { var n = t.top; return parseFloat(n) }, left: function (e, t) { var n = t.left; return parseFloat(n) }, bottom: function (e, t) { var n = e.y, r = t.top; return parseFloat(r) + (n.max - n.min) }, right: function (e, t) { var n = e.x, r = t.left; return parseFloat(r) + (n.max - n.min) }, x: tC(4, 13), y: tC(5, 14) }; function oC(e, t, n, r) { return function (e) { return Object.keys(e).some(Zk) }(t) ? function (e, t, n, r) { void 0 === n && (n = {}), void 0 === r && (r = {}), t = Iv({}, t), r = Iv({}, r); var i = Object.keys(t).filter(Zk), o = [], a = !1, s = []; if (i.forEach((function (i) { var l = e.getValue(i); if (e.hasValue(i)) { var u, c = n[i], f = Ek(c), h = t[i]; if (F_(h)) { var d = h.length, p = null === h[0] ? 1 : 0; c = h[p], f = Ek(c); for (var v = p; v < d; v++)u ? Ek(h[v]) : u = Ek(h[v]) } else u = Ek(h); if (f !== u) if (Qk(f) && Qk(u)) { var g = l.get(); "string" == typeof g && l.set(parseFloat(g)), "string" == typeof h ? t[i] = parseFloat(h) : Array.isArray(h) && u === hx && (t[i] = h.map(parseFloat)) } else (null == f ? void 0 : f.transform) && (null == u ? void 0 : u.transform) && (0 === c || 0 === h) ? 0 === c ? l.set(u.transform(c)) : t[i] = f.transform(h) : (a || (o = function (e) { var t = []; return rC.forEach((function (n) { var r = e.getValue(n); void 0 !== r && (t.push([n, r.get()]), r.set(n.startsWith("scale") ? 1 : 0)) })), t.length && e.syncRender(), t }(e), a = !0), s.push(i), r[i] = void 0 !== r[i] ? r[i] : t[i], $k(l, h)) } })), s.length) { var l = function (e, t, n) { var r = t.measureViewportBox(), i = t.getInstance(), o = getComputedStyle(i), a = o.display, s = {}; "none" === a && t.setStaticValue("display", e.display || "block"), n.forEach((function (e) { s[e] = iC[e](r, o) })), t.syncRender(); var l = t.measureViewportBox(); return n.forEach((function (n) { var r = t.getValue(n); $k(r, s[n]), e[n] = iC[n](l, o) })), e }(t, e, s); return o.length && o.forEach((function (t) { var n = zv(t, 2), r = n[0], i = n[1]; e.getValue(r).set(i) })), e.syncRender(), { target: l, transitionEnd: r } } return { target: t, transitionEnd: r } }(e, t, n, r) : { target: t, transitionEnd: r } } var aC = { treeType: "dom", readValueFromInstance: function (e, t) { if (oS(t)) { var n = Y_(t); return n && n.default || 0 } var r = function (e) { return window.getComputedStyle(e) }(e); return (mS(t) ? r.getPropertyValue(t) : r[t]) || 0 }, sortNodePosition: function (e, t) { return 2 & e.compareDocumentPosition(t) ? 1 : -1 }, getBaseTarget: function (e, t) { var n; return null === (n = e.style) || void 0 === n ? void 0 : n[t] }, measureViewportBox: function (e, t) { return function (e, t) { return function (e) { var t = e.top; return { x: { min: e.left, max: e.right }, y: { min: t, max: e.bottom } } }(function (e, t) { if (!t) return e; var n = t({ x: e.left, y: e.top }), r = t({ x: e.right, y: e.bottom }); return { top: n.y, left: n.x, bottom: r.y, right: r.x } }(e.getBoundingClientRect(), t)) }(e, t.transformPagePoint) }, resetTransform: function (e, t, n) { var r = n.transformTemplate; t.style.transform = r ? r({}, "") : "none", e.scheduleRender() }, restoreTransform: function (e, t) { e.style.transform = t.style.transform }, removeValueFromRenderState: function (e, t) { var n = t.vars, r = t.style; delete n[e], delete r[e] }, makeTargetAnimatable: function (e, t, n, r) { var i = n.transformValues; void 0 === r && (r = !0); var o = t.transition, a = t.transitionEnd, s = jv(t, ["transition", "transitionEnd"]), l = function (e, t, n) { var r, i, o = {}; for (var a in e) o[a] = null !== (r = Ak(a, t)) && void 0 !== r ? r : null === (i = n.getValue(a)) || void 0 === i ? void 0 : i.get(); return o }(s, o || {}, e); if (i && (a && (a = i(a)), s && (s = i(s)), l && (l = i(l))), r) { !function (e, t, n) { var r, i, o, a, s = Object.keys(t).filter((function (t) { return !e.hasValue(t) })), l = s.length; if (l) for (var u = 0; u < l; u++) { var c = s[u], f = t[c], h = null; Array.isArray(f) && (h = f[0]), null === h && (h = null !== (i = null !== (r = n[c]) && void 0 !== r ? r : e.readValue(c)) && void 0 !== i ? i : t[c]), null != h && ("string" == typeof h && (Sk(h) || kk(h)) ? h = parseFloat(h) : !Pk(h) && Mx.test(f) && (h = X_(c, f)), e.addValue(c, A_(h)), null !== (o = (a = n)[c]) && void 0 !== o || (a[c] = h), e.setBaseTarget(c, h)) } }(e, s, l); var u = function (e, t, n, r) { var i = function (e, t, n) { var r, i = jv(t, []), o = e.getInstance(); if (!(o instanceof Element)) return { target: i, transitionEnd: n }; for (var a in n && (n = Iv({}, n)), e.forEachValue((function (e) { var t = e.get(); if (Yk(t)) { var n = Gk(t, o); n && e.set(n) } })), i) { var s = i[a]; if (Yk(s)) { var l = Gk(s, o); !l || (i[a] = l, n && (null !== (r = n[a]) && void 0 !== r || (n[a] = s))) } } return { target: i, transitionEnd: n } }(e, t, r); return oC(e, t = i.target, n, r = i.transitionEnd) }(e, s, l, a); a = u.transitionEnd, s = u.target } return Iv({ transition: o, transitionEnd: a }, s) }, scrapeMotionValuesFromProps: FS, build: function (e, t, n, r, i) { void 0 !== e.isVisible && (t.style.visibility = e.isVisible ? "visible" : "hidden"), bS(t, n, r, i.transformTemplate) }, render: RS }, sC = Hk(aC), lC = Hk(Iv(Iv({}, aC), { getBaseTarget: function (e, t) { return e[t] }, readValueFromInstance: function (e, t) { var n; return oS(t) ? (null === (n = Y_(t)) || void 0 === n ? void 0 : n.default) || 0 : (t = IS.has(t) ? t : LS(t), e.getAttribute(t)) }, scrapeMotionValuesFromProps: NS, build: function (e, t, n, r, i) { OS(t, n, r, i.transformTemplate) }, render: jS })), uC = function (e) { function t(e, t) { return void 0 === t && (t = {}), hS(function (e, t, n, r, i) { var o = t.forwardMotionProps, a = void 0 !== o && o, s = pS(e) ? WS : KS; return Iv(Iv({}, s), { preloadedFeatures: n, useRender: AS(a), createVisualElement: r, projectionNodeConstructor: i, Component: e }) }(e, t)) } if ("undefined" == typeof Proxy) return t; var n = new Map; return new Proxy(t, { get: function (e, r) { return n.has(r) || n.set(r, t(r)), n.get(r) } }) }(), cC = 0; function fC() { var e = cC; return cC++, e } var hC = function (e) { var t = e.children, n = e.initial, r = e.isPresent, i = e.onExitComplete, o = e.custom, a = e.presenceAffectsLayout, s = Ow(dC), l = Ow(fC), u = h.exports.useMemo((function () { return { id: l, initial: n, isPresent: r, custom: o, onExitComplete: function (e) { var t, n; s.set(e, !0); try { for (var r = function (e) { var t = "function" == typeof Symbol && Symbol.iterator, n = t && e[t], r = 0; if (n) return n.call(e); if (e && "number" == typeof e.length) return { next: function () { return e && r >= e.length && (e = void 0), { value: e && e[r++], done: !e } } }; throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.") }(s.values()), o = r.next(); !o.done; o = r.next())if (!o.value) return } catch (e) { t = { error: e } } finally { try { o && !o.done && (n = r.return) && n.call(r) } finally { if (t) throw t.error } } null == i || i() }, register: function (e) { return s.set(e, !1), function () { return s.delete(e) } } } }), a ? void 0 : [r]); return h.exports.useMemo((function () { s.forEach((function (e, t) { return s.set(t, !1) })) }), [r]), h.exports.useEffect((function () { !r && !s.size && (null == i || i()) }), [r]), h.exports.createElement(mw.Provider, { value: u }, t) }; function dC() { return new Map } function pC(e) { return e.key || "" } var vC = function (e) { var t = e.children, n = e.custom, r = e.initial, i = void 0 === r || r, o = e.onExitComplete, a = e.exitBeforeEnter, s = e.presenceAffectsLayout, l = void 0 === s || s, u = zv(function () { var e = h.exports.useRef(!1), t = zv(h.exports.useState(0), 2), n = t[0], r = t[1]; ck((function () { return e.current = !0 })); var i = h.exports.useCallback((function () { !e.current && r(n + 1) }), [n]); return [h.exports.useCallback((function () { return Nw.postRender(i) }), [i]), n] }(), 1), c = u[0], f = h.exports.useContext(uS).forceRender; f && (c = f); var d = h.exports.useRef(!0), p = h.exports.useRef(!0); h.exports.useEffect((function () { return function () { p.current = !1 } }), []); var v = function (e) { var t = []; return h.exports.Children.forEach(e, (function (e) { h.exports.isValidElement(e) && t.push(e) })), t }(t), g = h.exports.useRef(v), m = h.exports.useRef(new Map).current, y = h.exports.useRef(new Set).current; if (function (e, t) { e.forEach((function (e) { var n = pC(e); t.set(n, e) })) }(v, m), d.current) return d.current = !1, h.exports.createElement(h.exports.Fragment, null, v.map((function (e) { return h.exports.createElement(hC, { key: pC(e), isPresent: !0, initial: !!i && void 0, presenceAffectsLayout: l }, e) }))); for (var b = Bv([], zv(v), !1), w = g.current.map(pC), x = v.map(pC), _ = w.length, S = 0; S < _; S++) { var k = w[S]; -1 === x.indexOf(k) ? y.add(k) : y.delete(k) } return a && y.size && (b = []), y.forEach((function (e) { if (-1 === x.indexOf(e)) { var t = m.get(e); if (t) { var r = w.indexOf(e); b.splice(r, 0, h.exports.createElement(hC, { key: pC(t), isPresent: !1, onExitComplete: function () { m.delete(e), y.delete(e); var t = g.current.findIndex((function (t) { return t.key === e })); if (g.current.splice(t, 1), !y.size) { if (g.current = v, !1 === p.current) return; c(), o && o() } }, custom: n, presenceAffectsLayout: l }, t)) } } })), b = b.map((function (e) { var t = e.key; return y.has(t) ? e : h.exports.createElement(hC, { key: pC(e), isPresent: !0, presenceAffectsLayout: l }, e) })), g.current = b, h.exports.createElement(h.exports.Fragment, null, y.size ? b : b.map((function (e) { return h.exports.cloneElement(e) }))) }; function gC(e) { var t = e.children, n = e.features, r = e.strict, i = void 0 !== r && r, o = zv(h.exports.useState(!mC(n)), 2)[1], a = h.exports.useRef(void 0); if (!mC(n)) { var s = n.renderer, l = jv(n, ["renderer"]); a.current = s, fw(l) } return h.exports.useEffect((function () { mC(n) && n().then((function (e) { var t = e.renderer; fw(jv(e, ["renderer"])), a.current = t, o(!0) })) }), []), h.exports.createElement(hw.Provider, { value: { renderer: a.current, strict: i } }, t) } function mC(e) { return "function" == typeof e } var yC = Iv(Iv({ renderer: function (e, t) { return pS(e) ? lC(t, { enableHardwareAcceleration: !1 }) : sC(t, { enableHardwareAcceleration: !0 }) } }, Vk), bk), bC = { exports: {} }; function wC() { } function xC() { } xC.resetWarningCache = wC, bC.exports = function () { function e(e, t, n, r, i, o) { if ("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED" !== o) { var a = new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types"); throw a.name = "Invariant Violation", a } } function t() { return e } e.isRequired = e; var n = { array: e, bigint: e, bool: e, func: e, number: e, object: e, string: e, symbol: e, any: e, arrayOf: t, element: e, elementType: e, instanceOf: t, node: e, objectOf: t, oneOf: t, oneOfType: t, shape: t, exact: t, checkPropTypes: xC, resetWarningCache: wC }; return n.PropTypes = n, n }(); var _C = bC.exports, SC = new Map([["aac", "audio/aac"], ["abw", "application/x-abiword"], ["arc", "application/x-freearc"], ["avif", "image/avif"], ["avi", "video/x-msvideo"], ["azw", "application/vnd.amazon.ebook"], ["bin", "application/octet-stream"], ["bmp", "image/bmp"], ["bz", "application/x-bzip"], ["bz2", "application/x-bzip2"], ["cda", "application/x-cdf"], ["csh", "application/x-csh"], ["css", "text/css"], ["csv", "text/csv"], ["doc", "application/msword"], ["docx", "application/vnd.openxmlformats-officedocument.wordprocessingml.document"], ["eot", "application/vnd.ms-fontobject"], ["epub", "application/epub+zip"], ["gz", "application/gzip"], ["gif", "image/gif"], ["htm", "text/html"], ["html", "text/html"], ["ico", "image/vnd.microsoft.icon"], ["ics", "text/calendar"], ["jar", "application/java-archive"], ["jpeg", "image/jpeg"], ["jpg", "image/jpeg"], ["js", "text/javascript"], ["json", "application/json"], ["jsonld", "application/ld+json"], ["mid", "audio/midi"], ["midi", "audio/midi"], ["mjs", "text/javascript"], ["mp3", "audio/mpeg"], ["mp4", "video/mp4"], ["mpeg", "video/mpeg"], ["mpkg", "application/vnd.apple.installer+xml"], ["odp", "application/vnd.oasis.opendocument.presentation"], ["ods", "application/vnd.oasis.opendocument.spreadsheet"], ["odt", "application/vnd.oasis.opendocument.text"], ["oga", "audio/ogg"], ["ogv", "video/ogg"], ["ogx", "application/ogg"], ["opus", "audio/opus"], ["otf", "font/otf"], ["png", "image/png"], ["pdf", "application/pdf"], ["php", "application/x-httpd-php"], ["ppt", "application/vnd.ms-powerpoint"], ["pptx", "application/vnd.openxmlformats-officedocument.presentationml.presentation"], ["rar", "application/vnd.rar"], ["rtf", "application/rtf"], ["sh", "application/x-sh"], ["svg", "image/svg+xml"], ["swf", "application/x-shockwave-flash"], ["tar", "application/x-tar"], ["tif", "image/tiff"], ["tiff", "image/tiff"], ["ts", "video/mp2t"], ["ttf", "font/ttf"], ["txt", "text/plain"], ["vsd", "application/vnd.visio"], ["wav", "audio/wav"], ["weba", "audio/webm"], ["webm", "video/webm"], ["webp", "image/webp"], ["woff", "font/woff"], ["woff2", "font/woff2"], ["xhtml", "application/xhtml+xml"], ["xls", "application/vnd.ms-excel"], ["xlsx", "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"], ["xml", "application/xml"], ["xul", "application/vnd.mozilla.xul+xml"], ["zip", "application/zip"], ["7z", "application/x-7z-compressed"], ["mkv", "video/x-matroska"], ["mov", "video/quicktime"], ["msg", "application/vnd.ms-outlook"]]); function kC(e, t) { var n = function (e) { var t = e.name; if (t && -1 !== t.lastIndexOf(".") && !e.type) { var n = t.split(".").pop().toLowerCase(), r = SC.get(n); r && Object.defineProperty(e, "type", { value: r, writable: !1, configurable: !1, enumerable: !0 }) } return e }(e); if ("string" != typeof n.path) { var r = e.webkitRelativePath; Object.defineProperty(n, "path", { value: "string" == typeof t ? t : "string" == typeof r && r.length > 0 ? r : e.name, writable: !1, configurable: !1, enumerable: !0 }) } return n } var CC = [".DS_Store", "Thumbs.db"]; function TC(e) { return "object" == C(e) && null !== e } function EC(e) { return AC(e.target.files).map((function (e) { return kC(e) })) } function OC(e) { return Fv(this, void 0, void 0, (function () { return Nv(this, (function (t) { switch (t.label) { case 0: return [4, Promise.all(e.map((function (e) { return e.getFile() })))]; case 1: return [2, t.sent().map((function (e) { return kC(e) }))] } })) })) } function PC(e, t) { return Fv(this, void 0, void 0, (function () { var n; return Nv(this, (function (r) { switch (r.label) { case 0: return null === e ? [2, []] : e.items ? (n = AC(e.items).filter((function (e) { return "file" === e.kind })), "drop" !== t ? [2, n] : [4, Promise.all(n.map(DC))]) : [3, 2]; case 1: return [2, MC(LC(r.sent()))]; case 2: return [2, MC(AC(e.files).map((function (e) { return kC(e) })))] } })) })) } function MC(e) { return e.filter((function (e) { return -1 === CC.indexOf(e.name) })) } function AC(e) { if (null === e) return []; for (var t = [], n = 0; n < e.length; n++) { var r = e[n]; t.push(r) } return t } function DC(e) { if ("function" != typeof e.webkitGetAsEntry) return RC(e); var t = e.webkitGetAsEntry(); return t && t.isDirectory ? jC(t) : RC(e) } function LC(e) { return e.reduce((function (e, t) { return function () { for (var e = [], t = 0; t < arguments.length; t++)e = e.concat(zv(arguments[t])); return e }(e, Array.isArray(t) ? LC(t) : [t]) }), []) } function RC(e) { var t = e.getAsFile(); if (!t) return Promise.reject(e + " is not a File"); var n = kC(t); return Promise.resolve(n) } function IC(e) { return Fv(this, void 0, void 0, (function () { return Nv(this, (function (t) { return [2, e.isDirectory ? jC(e) : FC(e)] })) })) } function jC(e) { var t = e.createReader(); return new Promise((function (e, n) { var r = []; !function i() { var o = this; t.readEntries((function (t) { return Fv(o, void 0, void 0, (function () { var o, a, s; return Nv(this, (function (l) { switch (l.label) { case 0: if (t.length) return [3, 5]; l.label = 1; case 1: return l.trys.push([1, 3, , 4]), [4, Promise.all(r)]; case 2: return o = l.sent(), e(o), [3, 4]; case 3: return a = l.sent(), n(a), [3, 4]; case 4: return [3, 6]; case 5: s = Promise.all(t.map(IC)), r.push(s), i(), l.label = 6; case 6: return [2] } })) })) }), (function (e) { n(e) })) }() })) } function FC(e) { return Fv(this, void 0, void 0, (function () { return Nv(this, (function (t) { return [2, new Promise((function (t, n) { e.file((function (n) { var r = kC(n, e.fullPath); t(r) }), (function (e) { n(e) })) }))] })) })) } function NC(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); t && (r = r.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), n.push.apply(n, r) } return n } function zC(e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}; t % 2 ? NC(Object(n), !0).forEach((function (t) { BC(e, t, n[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : NC(Object(n)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) })) } return e } function BC(e, t, n) { return t in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e } function VC(e, t) { return function (e) { if (Array.isArray(e)) return e }(e) || function (e, t) { var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"]; if (null != n) { var r, i, o = [], a = !0, s = !1; try { for (n = n.call(e); !(a = (r = n.next()).done) && (o.push(r.value), !t || o.length !== t); a = !0); } catch (e) { s = !0, i = e } finally { try { !a && null != n.return && n.return() } finally { if (s) throw i } } return o } }(e, t) || function (e, t) { if (e) { if ("string" == typeof e) return UC(e, t); var n = Object.prototype.toString.call(e).slice(8, -1); if ("Object" === n && e.constructor && (n = e.constructor.name), "Map" === n || "Set" === n) return Array.from(e); if ("Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return UC(e, t) } }(e, t) || function () { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") }() } function UC(e, t) { (null == t || t > e.length) && (t = e.length); for (var n = 0, r = new Array(t); n < t; n++)r[n] = e[n]; return r } var HC = function (e) { e = Array.isArray(e) && 1 === e.length ? e[0] : e; var t = Array.isArray(e) ? "one of ".concat(e.join(", ")) : e; return { code: "file-invalid-type", message: "File type must be ".concat(t) } }, WC = function (e) { return { code: "file-too-large", message: "File is larger than ".concat(e, " ").concat(1 === e ? "byte" : "bytes") } }, KC = function (e) { return { code: "file-too-small", message: "File is smaller than ".concat(e, " ").concat(1 === e ? "byte" : "bytes") } }, YC = { code: "too-many-files", message: "Too many files" }; function XC(e, t) { var n = "application/x-moz-file" === e.type || function (e, t) { if (e && t) { var n = Array.isArray(t) ? t : t.split(","), r = e.name || "", i = (e.type || "").toLowerCase(), o = i.replace(/\/.*$/, ""); return n.some((function (e) { var t = e.trim().toLowerCase(); return "." === t.charAt(0) ? r.toLowerCase().endsWith(t) : t.endsWith("/*") ? o === t.replace(/\/.*$/, "") : i === t })) } return !0 }(e, t); return [n, n ? null : HC(t)] } function GC(e, t, n) { if (qC(e.size)) if (qC(t) && qC(n)) { if (e.size > n) return [!1, WC(n)]; if (e.size < t) return [!1, KC(t)] } else { if (qC(t) && e.size < t) return [!1, KC(t)]; if (qC(n) && e.size > n) return [!1, WC(n)] } return [!0, null] } function qC(e) { return null != e } function JC(e) { var t = e.files, n = e.accept, r = e.minSize, i = e.maxSize, o = e.multiple, a = e.maxFiles; return !(!o && t.length > 1 || o && a >= 1 && t.length > a) && t.every((function (e) { var t = VC(XC(e, n), 1)[0], o = VC(GC(e, r, i), 1)[0]; return t && o })) } function ZC(e) { return "function" == typeof e.isPropagationStopped ? e.isPropagationStopped() : void 0 !== e.cancelBubble && e.cancelBubble } function $C(e) { return e.dataTransfer ? Array.prototype.some.call(e.dataTransfer.types, (function (e) { return "Files" === e || "application/x-moz-file" === e })) : !!e.target && !!e.target.files } function QC(e) { e.preventDefault() } function eT(e) { return -1 !== e.indexOf("MSIE") || -1 !== e.indexOf("Trident/") } function tT(e) { return -1 !== e.indexOf("Edge/") } function nT() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : window.navigator.userAgent; return eT(e) || tT(e) } function rT() { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; return function (e) { for (var n = arguments.length, r = new Array(n > 1 ? n - 1 : 0), i = 1; i < n; i++)r[i - 1] = arguments[i]; return t.some((function (t) { return !ZC(e) && t && t.apply(void 0, [e].concat(r)), ZC(e) })) } } function iT() { return "showOpenFilePicker" in window } function oT(e) { return e = "string" == typeof e ? e.split(",") : e, [{ description: "everything", accept: Array.isArray(e) ? e.filter((function (e) { return "audio/*" === e || "video/*" === e || "image/*" === e || "text/*" === e || /\w+\/[-+.\w]+/g.test(e) })).reduce((function (e, t) { return zC(zC({}, e), {}, BC({}, t, [])) }), {}) : {} }] } var aT = ["children"], sT = ["open"], lT = ["refKey", "role", "onKeyDown", "onFocus", "onBlur", "onClick", "onDragEnter", "onDragOver", "onDragLeave", "onDrop"], uT = ["refKey", "onChange", "onClick"]; function cT(e) { return function (e) { if (Array.isArray(e)) return dT(e) }(e) || function (e) { if ("undefined" != typeof Symbol && null != e[Symbol.iterator] || null != e["@@iterator"]) return Array.from(e) }(e) || hT(e) || function () { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") }() } function fT(e, t) { return function (e) { if (Array.isArray(e)) return e }(e) || function (e, t) { var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"]; if (null != n) { var r, i, o = [], a = !0, s = !1; try { for (n = n.call(e); !(a = (r = n.next()).done) && (o.push(r.value), !t || o.length !== t); a = !0); } catch (e) { s = !0, i = e } finally { try { !a && null != n.return && n.return() } finally { if (s) throw i } } return o } }(e, t) || hT(e, t) || function () { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") }() } function hT(e, t) { if (e) { if ("string" == typeof e) return dT(e, t); var n = Object.prototype.toString.call(e).slice(8, -1); if ("Object" === n && e.constructor && (n = e.constructor.name), "Map" === n || "Set" === n) return Array.from(e); if ("Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return dT(e, t) } } function dT(e, t) { (null == t || t > e.length) && (t = e.length); for (var n = 0, r = new Array(t); n < t; n++)r[n] = e[n]; return r } function pT(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); t && (r = r.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), n.push.apply(n, r) } return n } function vT(e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}; t % 2 ? pT(Object(n), !0).forEach((function (t) { gT(e, t, n[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : pT(Object(n)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) })) } return e } function gT(e, t, n) { return t in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e } function mT(e, t) { if (null == e) return {}; var n, r, i = function (e, t) { if (null == e) return {}; var n, r, i = {}, o = Object.keys(e); for (r = 0; r < o.length; r++)n = o[r], !(t.indexOf(n) >= 0) && (i[n] = e[n]); return i }(e, t); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); for (r = 0; r < o.length; r++)n = o[r], !(t.indexOf(n) >= 0) && (!Object.prototype.propertyIsEnumerable.call(e, n) || (i[n] = e[n])) } return i } var yT = h.exports.forwardRef((function (e, t) { var n = e.children, r = xT(mT(e, aT)), i = r.open, o = mT(r, sT); return h.exports.useImperativeHandle(t, (function () { return { open: i } }), [i]), ky(Ty, { children: n(vT(vT({}, o), {}, { open: i })) }) })); yT.displayName = "Dropzone"; var bT = { disabled: !1, getFilesFromEvent: function (e) { return Fv(this, void 0, void 0, (function () { return Nv(this, (function (t) { return TC(e) && function (e) { return TC(e.dataTransfer) }(e) ? [2, PC(e.dataTransfer, e.type)] : function (e) { return TC(e) && TC(e.target) }(e) ? [2, EC(e)] : Array.isArray(e) && e.every((function (e) { return "getFile" in e && "function" == typeof e.getFile })) ? [2, OC(e)] : [2, []] })) })) }, maxSize: 1 / 0, minSize: 0, multiple: !0, maxFiles: 0, preventDropOnDocument: !0, noClick: !1, noKeyboard: !1, noDrag: !1, noDragEventsBubbling: !1, validator: null, useFsAccessApi: !1 }; yT.defaultProps = bT, yT.propTypes = { children: _C.func, accept: _C.oneOfType([_C.string, _C.arrayOf(_C.string)]), multiple: _C.bool, preventDropOnDocument: _C.bool, noClick: _C.bool, noKeyboard: _C.bool, noDrag: _C.bool, noDragEventsBubbling: _C.bool, minSize: _C.number, maxSize: _C.number, maxFiles: _C.number, disabled: _C.bool, getFilesFromEvent: _C.func, onFileDialogCancel: _C.func, onFileDialogOpen: _C.func, useFsAccessApi: _C.bool, onDragEnter: _C.func, onDragLeave: _C.func, onDragOver: _C.func, onDrop: _C.func, onDropAccepted: _C.func, onDropRejected: _C.func, validator: _C.func }; var wT = { isFocused: !1, isFileDialogActive: !1, isDragActive: !1, isDragAccept: !1, isDragReject: !1, draggedFiles: [], acceptedFiles: [], fileRejections: [] }; function xT() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = vT(vT({}, bT), e), n = t.accept, r = t.disabled, i = t.getFilesFromEvent, o = t.maxSize, a = t.minSize, s = t.multiple, l = t.maxFiles, u = t.onDragEnter, c = t.onDragLeave, f = t.onDragOver, d = t.onDrop, p = t.onDropAccepted, v = t.onDropRejected, g = t.onFileDialogCancel, m = t.onFileDialogOpen, y = t.useFsAccessApi, b = t.preventDropOnDocument, w = t.noClick, x = t.noKeyboard, _ = t.noDrag, S = t.noDragEventsBubbling, k = t.validator, C = h.exports.useMemo((function () { return "function" == typeof m ? m : ST }), [m]), T = h.exports.useMemo((function () { return "function" == typeof g ? g : ST }), [g]), E = h.exports.useRef(null), O = h.exports.useRef(null), P = h.exports.useReducer(_T, wT), M = fT(P, 2), A = M[0], D = M[1], L = A.isFocused, R = A.isFileDialogActive, I = A.draggedFiles, j = function () { R && setTimeout((function () { O.current && (O.current.files.length || (D({ type: "closeDialog" }), T())) }), 300) }; h.exports.useEffect((function () { return y && iT() ? function () { } : (window.addEventListener("focus", j, !1), function () { window.removeEventListener("focus", j, !1) }) }), [O, R, T, y]); var F = h.exports.useRef([]), N = function (e) { E.current && E.current.contains(e.target) || (e.preventDefault(), F.current = []) }; h.exports.useEffect((function () { return b && (document.addEventListener("dragover", QC, !1), document.addEventListener("drop", N, !1)), function () { b && (document.removeEventListener("dragover", QC), document.removeEventListener("drop", N)) } }), [E, b]); var z = h.exports.useCallback((function (e) { e.preventDefault(), e.persist(), $(e), F.current = [].concat(cT(F.current), [e.target]), $C(e) && Promise.resolve(i(e)).then((function (t) { ZC(e) && !S || (D({ draggedFiles: t, isDragActive: !0, type: "setDraggedFiles" }), u && u(e)) })) }), [i, u, S]), B = h.exports.useCallback((function (e) { e.preventDefault(), e.persist(), $(e); var t = $C(e); if (t && e.dataTransfer) try { e.dataTransfer.dropEffect = "copy" } catch (e) { } return t && f && f(e), !1 }), [f, S]), V = h.exports.useCallback((function (e) { e.preventDefault(), e.persist(), $(e); var t = F.current.filter((function (e) { return E.current && E.current.contains(e) })), n = t.indexOf(e.target); -1 !== n && t.splice(n, 1), F.current = t, !(t.length > 0) && (D({ isDragActive: !1, type: "setDraggedFiles", draggedFiles: [] }), $C(e) && c && c(e)) }), [E, c, S]), U = h.exports.useCallback((function (e, t) { var r = [], i = []; e.forEach((function (e) { var t = fT(XC(e, n), 2), s = t[0], l = t[1], u = fT(GC(e, a, o), 2), c = u[0], f = u[1], h = k ? k(e) : null; if (s && c && !h) r.push(e); else { var d = [l, f]; h && (d = d.concat(h)), i.push({ file: e, errors: d.filter((function (e) { return e })) }) } })), (!s && r.length > 1 || s && l >= 1 && r.length > l) && (r.forEach((function (e) { i.push({ file: e, errors: [YC] }) })), r.splice(0)), D({ acceptedFiles: r, fileRejections: i, type: "setFiles" }), d && d(r, i, t), i.length > 0 && v && v(i, t), r.length > 0 && p && p(r, t) }), [D, s, n, a, o, l, d, p, v, k]), H = h.exports.useCallback((function (e) { e.preventDefault(), e.persist(), $(e), F.current = [], $C(e) && Promise.resolve(i(e)).then((function (t) { ZC(e) && !S || U(t, e) })), D({ type: "reset" }) }), [i, U, S]), W = h.exports.useCallback((function () { if (y && iT()) { D({ type: "openDialog" }), C(); var e = { multiple: s, types: oT(n) }; window.showOpenFilePicker(e).then((function (e) { return i(e) })).then((function (e) { return U(e, null) })).catch((function (e) { return T(e) })).finally((function () { return D({ type: "closeDialog" }) })) } else O.current && (D({ type: "openDialog" }), C(), O.current.value = null, O.current.click()) }), [D, C, T, y, U, n, s]), K = h.exports.useCallback((function (e) { !E.current || !E.current.isEqualNode(e.target) || (32 === e.keyCode || 13 === e.keyCode) && (e.preventDefault(), W()) }), [E, O, W]), Y = h.exports.useCallback((function () { D({ type: "focus" }) }), []), X = h.exports.useCallback((function () { D({ type: "blur" }) }), []), G = h.exports.useCallback((function () { w || (nT() ? setTimeout(W, 0) : W()) }), [O, w, W]), q = function (e) { return r ? null : e }, J = function (e) { return x ? null : q(e) }, Z = function (e) { return _ ? null : q(e) }, $ = function (e) { S && e.stopPropagation() }, Q = h.exports.useMemo((function () { return function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = e.refKey, n = void 0 === t ? "ref" : t, i = e.role, o = e.onKeyDown, a = e.onFocus, s = e.onBlur, l = e.onClick, u = e.onDragEnter, c = e.onDragOver, f = e.onDragLeave, h = e.onDrop, d = mT(e, lT); return vT(vT(gT({ onKeyDown: J(rT(o, K)), onFocus: J(rT(a, Y)), onBlur: J(rT(s, X)), onClick: q(rT(l, G)), onDragEnter: Z(rT(u, z)), onDragOver: Z(rT(c, B)), onDragLeave: Z(rT(f, V)), onDrop: Z(rT(h, H)), role: "string" == typeof i && "" !== i ? i : "button" }, n, E), r || x ? {} : { tabIndex: 0 }), d) } }), [E, K, Y, X, G, z, B, V, H, x, _, r]), ee = h.exports.useCallback((function (e) { e.stopPropagation() }), []), te = h.exports.useMemo((function () { return function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = e.refKey, r = void 0 === t ? "ref" : t, i = e.onChange, o = e.onClick, a = mT(e, uT), l = gT({ accept: n, multiple: s, type: "file", style: { display: "none" }, onChange: q(rT(i, H)), onClick: q(rT(o, ee)), autoComplete: "off", tabIndex: -1 }, r, O); return vT(vT({}, l), a) } }), [O, n, s, H, r]), ne = I.length, re = ne > 0 && JC({ files: I, accept: n, minSize: a, maxSize: o, multiple: s, maxFiles: l }), ie = ne > 0 && !re; return vT(vT({}, A), {}, { isDragAccept: re, isDragReject: ie, isFocused: L && !r, getRootProps: Q, getInputProps: te, rootRef: E, inputRef: O, open: q(W) }) } function _T(e, t) { switch (t.type) { case "focus": return vT(vT({}, e), {}, { isFocused: !0 }); case "blur": return vT(vT({}, e), {}, { isFocused: !1 }); case "openDialog": return vT(vT({}, wT), {}, { isFileDialogActive: !0 }); case "closeDialog": return vT(vT({}, e), {}, { isFileDialogActive: !1 }); case "setDraggedFiles": var n = t.isDragActive, r = t.draggedFiles; return vT(vT({}, e), {}, { draggedFiles: r, isDragActive: n }); case "setFiles": return vT(vT({}, e), {}, { acceptedFiles: t.acceptedFiles, fileRejections: t.fileRejections }); case "reset": return vT({}, wT); default: return e } } function ST() { } function kT(e) { var t, n, r = ""; if ("string" == typeof e || "number" == typeof e) r += e; else if ("object" == C(e)) if (Array.isArray(e)) for (t = 0; t < e.length; t++)e[t] && (n = kT(e[t])) && (r && (r += " "), r += n); else for (t in e) e[t] && (r && (r += " "), r += t); return r } function CT() { for (var e, t, n = 0, r = ""; n < arguments.length;)(e = arguments[n++]) && (t = kT(e)) && (r && (r += " "), r += t); return r } function TT(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } var ET = {}; TT(ET, "SSRProvider", (function () { return MT })), TT(ET, "useSSRSafeId", (function () { return DT })), TT(ET, "useIsSSR", (function () { return LT })); var OT = { prefix: String(Math.round(1e10 * Math.random())), current: 0 }, PT = ce.createContext(OT); function MT(e) { var t = h.exports.useContext(PT), n = h.exports.useMemo((function () { return { prefix: t === OT ? "" : "".concat(t.prefix, "-").concat(++t.current), current: 0 } }), [t]); return ce.createElement(PT.Provider, { value: n }, e.children) } var AT = Boolean("undefined" != typeof window && window.document && window.document.createElement); function DT(e) { var t = h.exports.useContext(PT); return t === OT && !AT && console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server."), h.exports.useMemo((function () { return e || "react-aria".concat(t.prefix, "-").concat(++t.current) }), [e]) } function LT() { var e = h.exports.useContext(PT) !== OT, t = _(h.exports.useState(e), 2), n = t[0], r = t[1]; return "undefined" != typeof window && e && h.exports.useLayoutEffect((function () { r(!1) }), []), n } function RT(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } function IT(e, t, n) { var r = _(h.exports.useState(e || t), 2), i = r[0], o = r[1], a = h.exports.useRef(void 0 !== e), s = a.current, l = void 0 !== e, u = h.exports.useRef(i); s !== l && console.warn("WARN: A component changed from ".concat(s ? "controlled" : "uncontrolled", " to ").concat(l ? "controlled" : "uncontrolled", ".")), a.current = l; var c = h.exports.useCallback((function (e) { for (var t = arguments.length, r = new Array(t > 1 ? t - 1 : 0), i = 1; i < t; i++)r[i - 1] = arguments[i]; var a = function (e) { for (var t = arguments.length, r = new Array(t > 1 ? t - 1 : 0), i = 1; i < t; i++)r[i - 1] = arguments[i]; n && (Object.is(u.current, e) || n.apply(void 0, [e].concat(r))), l || (u.current = e) }; "function" == typeof e ? (console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"), o((function (t) { for (var n = arguments.length, i = new Array(n > 1 ? n - 1 : 0), o = 1; o < n; o++)i[o - 1] = arguments[o]; var s = e.apply(void 0, [l ? u.current : t].concat(i)); return a.apply(void 0, [s].concat(r)), l ? t : s }))) : (l || o(e), a.apply(void 0, [e].concat(r))) }), [l, n]); return l ? u.current = e : e = i, [e, c] } RT({}, "useControlledState", (function () { return IT })); var jT = {}; function FT(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : -1 / 0, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1 / 0; return Math.min(Math.max(e, t), n) } function NT(e, t, n, r) { var i = (e - (isNaN(t) ? 0 : t)) % r, o = 2 * Math.abs(i) >= r ? e + Math.sign(i) * (r - Math.abs(i)) : e - i; isNaN(t) ? !isNaN(n) && o > n && (o = Math.floor(n / r) * r) : o < t ? o = t : !isNaN(n) && o > n && (o = t + Math.floor((n - t) / r) * r); var a = r.toString(), s = a.indexOf("."), l = s >= 0 ? a.length - s : 0; if (l > 0) { var u = Math.pow(10, l); o = Math.round(o * u) / u } return o } function zT(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 10, r = Math.pow(n, t); return Math.round(e * r) / r } function BT(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } RT(jT, "clamp", (function () { return FT })), RT(jT, "snapValueToStep", (function () { return NT })), RT(jT, "toFixedNumber", (function () { return zT })); var VT = {}; BT(VT, "useId", (function () { return WT })), BT(VT, "mergeIds", (function () { return KT })), BT(VT, "useSlotId", (function () { return YT })), BT({}, "useLayoutEffect", (function () { return UT })); var UT = "undefined" != typeof window ? ce.useLayoutEffect : function () { }, HT = new Map; function WT(e) { var t = h.exports.useRef(!0); t.current = !0; var n = _(h.exports.useState(e), 2), r = n[0], i = n[1], o = h.exports.useRef(null), a = DT(r), s = function (e) { t.current ? o.current = e : i(e) }; return HT.set(a, s), UT((function () { t.current = !1 }), [s]), UT((function () { var e = a; return function () { HT.delete(e) } }), [a]), h.exports.useEffect((function () { var e = o.current; e && (i(e), o.current = null) }), [i, s]), a } function KT(e, t) { if (e === t) return e; var n = HT.get(e); if (n) return n(t), t; var r = HT.get(t); return r ? (r(e), e) : t } function YT() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [], t = WT(), n = IE(t), r = _(n, 2), i = r[0], o = r[1], a = h.exports.useCallback((function () { o(b().mark((function e() { return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, t; case 2: return e.next = 4, document.getElementById(t) ? t : null; case 4: case "end": return e.stop() } }), e) }))) }), [t, o]); return UT(a, [t, a].concat(S(e))), i } function XT() { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; return function () { var e, n = T(t); try { for (n.s(); !(e = n.n()).done;) { var r = e.value; "function" == typeof r && r.apply(void 0, arguments) } } catch (e) { n.e(e) } finally { n.f() } } } function GT() { for (var e = F({}, arguments.length <= 0 ? void 0 : arguments[0]), t = 1; t < arguments.length; t++) { var n = t < 0 || arguments.length <= t ? void 0 : arguments[t]; for (var r in n) { var i = e[r], o = n[r]; "function" == typeof i && "function" == typeof o && "o" === r[0] && "n" === r[1] && r.charCodeAt(2) >= 65 && r.charCodeAt(2) <= 90 ? e[r] = XT(i, o) : "className" !== r && "UNSAFE_className" !== r || "string" != typeof i || "string" != typeof o ? "id" === r && i && o ? e.id = KT(i, o) : e[r] = void 0 !== o ? o : i : e[r] = CT(i, o) } } return e } BT({}, "chain", (function () { return XT })), BT({}, "mergeProps", (function () { return GT })), BT({}, "filterDOMProps", (function () { return $T })); var qT = new Set(["id"]), JT = new Set(["aria-label", "aria-labelledby", "aria-describedby", "aria-details"]), ZT = /^(data-.*)$/; function $T(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, n = t.labelable, r = t.propNames, i = {}; for (var o in e) Object.prototype.hasOwnProperty.call(e, o) && (qT.has(o) || n && JT.has(o) || (null == r ? void 0 : r.has(o)) || ZT.test(o)) && (i[o] = e[o]); return i } function QT(e) { if (function () { if (null == eE) { eE = !1; try { document.createElement("div").focus({ get preventScroll() { return eE = !0, !0 } }) } catch (e) { } } return eE }()) e.focus({ preventScroll: !0 }); else { var t = function (e) { for (var t = e.parentNode, n = [], r = document.scrollingElement || document.documentElement; t instanceof HTMLElement && t !== r;)(t.offsetHeight < t.scrollHeight || t.offsetWidth < t.scrollWidth) && n.push({ element: t, scrollTop: t.scrollTop, scrollLeft: t.scrollLeft }), t = t.parentNode; return r instanceof HTMLElement && n.push({ element: r, scrollTop: r.scrollTop, scrollLeft: r.scrollLeft }), n }(e); e.focus(), function (e) { var t, n = T(e); try { for (n.s(); !(t = n.n()).done;) { var r = t.value, i = r.element, o = r.scrollTop, a = r.scrollLeft; i.scrollTop = o, i.scrollLeft = a } } catch (e) { n.e(e) } finally { n.f() } }(t) } } BT({}, "focusWithoutScrolling", (function () { return QT })); var eE = null; function tE(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "horizontal", r = e.getBoundingClientRect(); return t ? "horizontal" === n ? r.right : r.bottom : "horizontal" === n ? r.left : r.top } BT({}, "getOffset", (function () { return tE })); var nE = {}; BT(nE, "clamp", (function () { return FT })), BT(nE, "snapValueToStep", (function () { return NT })), BT({}, "runAfterTransition", (function () { return aE })); var rE = new Map, iE = new Set; function oE() { if ("undefined" != typeof window) { var e = function e(t) { var n = rE.get(t.target); if (n && (n.delete(t.propertyName), 0 === n.size && (t.target.removeEventListener("transitioncancel", e), rE.delete(t.target)), 0 === rE.size)) { var r, i = T(iE); try { for (i.s(); !(r = i.n()).done;)(0, r.value)() } catch (e) { i.e(e) } finally { i.f() } iE.clear() } }; document.body.addEventListener("transitionrun", (function (t) { var n = rE.get(t.target); n || (n = new Set, rE.set(t.target, n), t.target.addEventListener("transitioncancel", e)), n.add(t.propertyName) })), document.body.addEventListener("transitionend", e) } } function aE(e) { requestAnimationFrame((function () { 0 === rE.size ? e() : iE.add(e) })) } "undefined" != typeof document && ("loading" !== document.readyState ? oE() : document.addEventListener("DOMContentLoaded", oE)), BT({}, "useDrag1D", (function () { return lE })); var sE = []; function lE(e) { console.warn("useDrag1D is deprecated, please use `useMove` instead https://react-spectrum.adobe.com/react-aria/useMove.html"); var t = e.containerRef, n = e.reverse, r = e.orientation, i = e.onHover, o = e.onDrag, a = e.onPositionChange, s = e.onIncrement, l = e.onDecrement, u = e.onIncrementToMax, c = e.onDecrementToMin, f = e.onCollapseToggle, d = function (e) { var i = tE(t.current, n, r), o = function (e) { return "horizontal" === r ? e.clientX : e.clientY }(e); return n ? i - o : o - i }, p = h.exports.useRef(!1), v = h.exports.useRef(0), g = h.exports.useRef({ onPositionChange: a, onDrag: o }); g.current.onDrag = o, g.current.onPositionChange = a; var m = function (e) { e.preventDefault(); var t = d(e); p.current || (p.current = !0, g.current.onDrag && g.current.onDrag(!0), g.current.onPositionChange && g.current.onPositionChange(t)), v.current !== t && (v.current = t, a && a(t)) }, y = function e(t) { var n = t.target; p.current = !1; var r = d(t); g.current.onDrag && g.current.onDrag(!1), g.current.onPositionChange && g.current.onPositionChange(r), sE.splice(sE.indexOf(n), 1), window.removeEventListener("mouseup", e, !1), window.removeEventListener("mousemove", m, !1) }; return { onMouseDown: function (e) { var t = e.currentTarget; sE.some((function (e) { return t.contains(e) })) || (sE.push(t), window.addEventListener("mousemove", m, !1), window.addEventListener("mouseup", y, !1)) }, onMouseEnter: function () { i && i(!0) }, onMouseOut: function () { i && i(!1) }, onKeyDown: function (e) { switch (e.key) { case "Left": case "ArrowLeft": "horizontal" === r && (e.preventDefault(), l && !n ? l() : s && n && s()); break; case "Up": case "ArrowUp": "vertical" === r && (e.preventDefault(), l && !n ? l() : s && n && s()); break; case "Right": case "ArrowRight": "horizontal" === r && (e.preventDefault(), s && !n ? s() : l && n && l()); break; case "Down": case "ArrowDown": "vertical" === r && (e.preventDefault(), s && !n ? s() : l && n && l()); break; case "Home": e.preventDefault(), c && c(); break; case "End": e.preventDefault(), u && u(); break; case "Enter": e.preventDefault(), f && f() } } } } function uE() { var e = h.exports.useRef(new Map), t = h.exports.useCallback((function (t, n, r, i) { var o = (null == i ? void 0 : i.once) ? function () { e.current.delete(r), r.apply(void 0, arguments) } : r; e.current.set(r, { type: n, eventTarget: t, fn: o, options: i }), t.addEventListener(n, r, i) }), []), n = h.exports.useCallback((function (t, n, r, i) { var o, a = (null === (o = e.current.get(r)) || void 0 === o ? void 0 : o.fn) || r; t.removeEventListener(n, a, i), e.current.delete(r) }), []), r = h.exports.useCallback((function () { e.current.forEach((function (e, t) { n(e.eventTarget, e.type, t, e.options) })) }), [n]); return h.exports.useEffect((function () { return r }), [r]), { addGlobalListener: t, removeGlobalListener: n, removeAllGlobalListeners: r } } function cE(e, t) { var n = e.id, r = e["aria-label"], i = e["aria-labelledby"]; return n = WT(n), i && r ? i = S(new Set([].concat(S(i.trim().split(/\s+/)), [n]))).join(" ") : i && (i = i.trim().split(/\s+/).join(" ")), !r && !i && t && (r = t), { id: n, "aria-label": r, "aria-labelledby": i } } function fE(e) { var t = h.exports.useRef(); return UT((function () { !e || ("function" == typeof e ? e(t.current) : e.current = t.current) }), [e]), t } function hE(e, t) { var n = h.exports.useRef(!0); h.exports.useEffect((function () { n.current ? n.current = !1 : e() }), t) } function dE(e) { var t = e.ref, n = e.onResize; h.exports.useEffect((function () { var e = null == t ? void 0 : t.current; if (e) { if (void 0 !== window.ResizeObserver) { var r = new window.ResizeObserver((function (e) { !e.length || n() })); return r.observe(e), function () { e && r.unobserve(e) } } return window.addEventListener("resize", n, !1), function () { window.removeEventListener("resize", n, !1) } } }), [n, t]) } function pE(e, t) { UT((function () { if (e && e.ref && t) return e.ref.current = t.current, function () { e.ref.current = null } }), [e, t]) } function vE(e) { for (; e && !gE(e);)e = e.parentElement; return e || document.scrollingElement || document.documentElement } function gE(e) { var t = window.getComputedStyle(e); return /(auto|scroll)/.test(t.overflow + t.overflowX + t.overflowY) } BT({}, "useGlobalListeners", (function () { return uE })), BT({}, "useLabels", (function () { return cE })), BT({}, "useObjectRef", (function () { return fE })), BT({}, "useUpdateEffect", (function () { return hE })), BT({}, "useResizeObserver", (function () { return dE })), BT({}, "useSyncRef", (function () { return pE })), BT({}, "getScrollParent", (function () { return vE })), BT({}, "useViewportSize", (function () { return yE })); var mE = "undefined" != typeof window && window.visualViewport; function yE() { var e = _(h.exports.useState((function () { return bE() })), 2), t = e[0], n = e[1]; return h.exports.useEffect((function () { var e = function () { n((function (e) { var t = bE(); return t.width === e.width && t.height === e.height ? e : t })) }; return mE ? mE.addEventListener("resize", e) : window.addEventListener("resize", e), function () { mE ? mE.removeEventListener("resize", e) : window.removeEventListener("resize", e) } }), []), t } function bE() { return { width: (null == mE ? void 0 : mE.width) || window.innerWidth, height: (null == mE ? void 0 : mE.height) || window.innerHeight } } BT({}, "useDescription", (function () { return _E })); var wE = 0, xE = new Map; function _E(e) { var t = _(h.exports.useState(null), 2), n = t[0], r = t[1]; return UT((function () { if (e) { var t = xE.get(e); if (t) r(t.element.id); else { var n = "react-aria-description-".concat(wE++); r(n); var i = document.createElement("div"); i.id = n, i.style.display = "none", i.textContent = e, document.body.appendChild(i), t = { refCount: 0, element: i }, xE.set(e, t) } return t.refCount++, function () { 0 == --t.refCount && (t.element.remove(), xE.delete(e)) } } }), [e]), { "aria-describedby": e ? n : void 0 } } var SE = {}; function kE(e) { var t; return "undefined" != typeof window && null != window.navigator && ((null === (t = window.navigator.userAgentData) || void 0 === t ? void 0 : t.brands.some((function (t) { return e.test(t.brand) }))) || e.test(window.navigator.userAgent)) } function CE(e) { return "undefined" != typeof window && null != window.navigator && e.test((window.navigator.userAgentData || window.navigator).platform) } function TE() { return CE(/^Mac/i) } function EE() { return CE(/^iPhone/i) } function OE() { return CE(/^iPad/i) || TE() && navigator.maxTouchPoints > 1 } function PE() { return EE() || OE() } function ME() { return TE() || PE() } function AE() { return kE(/AppleWebKit/i) && !DE() } function DE() { return kE(/Chrome/i) } function LE() { return kE(/Android/i) } function RE(e, t, n, r) { var i = this, o = h.exports.useRef(n); o.current = n; var a = null == n; h.exports.useEffect((function () { if (!a) { var n = e.current, s = function (e) { return o.current.call(i, e) }; return n.addEventListener(t, s, r), function () { n.removeEventListener(t, s, r) } } }), [e, t, r, a]) } function IE(e) { var t = _(h.exports.useState(e), 2), n = t[0], r = t[1], i = h.exports.useRef(n), o = h.exports.useRef(null); i.current = n; var a = h.exports.useRef(null); a.current = function () { var e = o.current.next(); e.done ? o.current = null : n === e.value ? a.current() : r(e.value) }, UT((function () { o.current && a.current() })); var s = h.exports.useCallback((function (e) { o.current = e(i.current), a.current() }), [o, a]); return [n, s] } function jE(e, t) { var n = FE(e, t, "left"), r = FE(e, t, "top"), i = t.offsetWidth, o = t.offsetHeight, a = e.scrollLeft, s = e.scrollTop, l = a + e.offsetWidth, u = s + e.offsetHeight; n <= a ? a = n : n + i > l && (a += n + i - l), r <= s ? s = r : r + o > u && (s += r + o - u), e.scrollLeft = a, e.scrollTop = s } function FE(e, t, n) { for (var r = "left" === n ? "offsetLeft" : "offsetTop", i = 0; t.offsetParent && (i += t[r], t.offsetParent !== e);) { if (t.offsetParent.contains(e)) { i -= e[r]; break } t = t.offsetParent } return i } function NE(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } BT(SE, "isMac", (function () { return TE })), BT(SE, "isIPhone", (function () { return EE })), BT(SE, "isIPad", (function () { return OE })), BT(SE, "isIOS", (function () { return PE })), BT(SE, "isAppleDevice", (function () { return ME })), BT(SE, "isWebKit", (function () { return AE })), BT(SE, "isChrome", (function () { return DE })), BT(SE, "isAndroid", (function () { return LE })), BT({}, "useEvent", (function () { return RE })), BT({}, "useValueEffect", (function () { return IE })), BT({}, "scrollIntoView", (function () { return jE })), NE({}, "Pressable", (function () { return eO })), NE({}, "usePress", (function () { return YE })); var zE = "default", BE = "", VE = new WeakMap; function UE(e) { PE() ? ("default" === zE && (BE = document.documentElement.style.webkitUserSelect, document.documentElement.style.webkitUserSelect = "none"), zE = "disabled") : e && (VE.set(e, e.style.userSelect), e.style.userSelect = "none") } function HE(e) { if (PE()) { if ("disabled" !== zE) return; zE = "restoring", setTimeout((function () { aE((function () { "restoring" === zE && ("none" === document.documentElement.style.webkitUserSelect && (document.documentElement.style.webkitUserSelect = BE || ""), BE = "", zE = "default") })) }), 300) } else if (e && VE.has(e)) { var t = VE.get(e); "none" === e.style.userSelect && (e.style.userSelect = t), "" === e.getAttribute("style") && e.removeAttribute("style"), VE.delete(e) } } function WE(e) { return !(0 !== e.mozInputSource || !e.isTrusted) || 0 === e.detail && !e.pointerType } var KE = ce.createContext(null); function YE(e) { var t = function (e) { var t = h.exports.useContext(KE); if (t) { var n = t, r = n.register; e = GT(z(n, ["register"]), e), r() } return pE(t, e.ref), e }(e), n = t.onPress, r = t.onPressChange, i = t.onPressStart, o = t.onPressEnd, a = t.onPressUp, s = t.isDisabled, l = t.isPressed, u = t.preventFocusOnPress, c = t.shouldCancelOnPointerExit, f = t.allowTextSelectionOnPress, d = (t.ref, z(t, ["onPress", "onPressChange", "onPressStart", "onPressEnd", "onPressUp", "isDisabled", "isPressed", "preventFocusOnPress", "shouldCancelOnPointerExit", "allowTextSelectionOnPress", "ref"])), p = h.exports.useRef(null); p.current = { onPress: n, onPressChange: r, onPressStart: i, onPressEnd: o, onPressUp: a, isDisabled: s, shouldCancelOnPointerExit: c }; var v = _(h.exports.useState(!1), 2), g = v[0], m = v[1], y = h.exports.useRef({ isPressed: !1, ignoreEmulatedMouseEvents: !1, ignoreClickAfterPress: !1, didFirePressStart: !1, activePointerId: null, target: null, isOverTarget: !1, pointerType: null }), b = uE(), w = b.addGlobalListener, x = b.removeAllGlobalListeners, S = h.exports.useMemo((function () { var e = y.current, t = function (t, n) { var r = p.current, i = r.onPressStart, o = r.onPressChange; r.isDisabled || e.didFirePressStart || (i && i({ type: "pressstart", pointerType: n, target: t.currentTarget, shiftKey: t.shiftKey, metaKey: t.metaKey, ctrlKey: t.ctrlKey, altKey: t.altKey }), o && o(!0), e.didFirePressStart = !0, m(!0)) }, n = function (t, n) { var r = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2], i = p.current, o = i.onPressEnd, a = i.onPressChange, s = i.onPress, l = i.isDisabled; !e.didFirePressStart || (e.ignoreClickAfterPress = !0, e.didFirePressStart = !1, o && o({ type: "pressend", pointerType: n, target: t.currentTarget, shiftKey: t.shiftKey, metaKey: t.metaKey, ctrlKey: t.ctrlKey, altKey: t.altKey }), a && a(!1), m(!1), s && r && !l && s({ type: "press", pointerType: n, target: t.currentTarget, shiftKey: t.shiftKey, metaKey: t.metaKey, ctrlKey: t.ctrlKey, altKey: t.altKey })) }, r = function (e, t) { var n = p.current, r = n.onPressUp; n.isDisabled || r && r({ type: "pressup", pointerType: t, target: e.currentTarget, shiftKey: e.shiftKey, metaKey: e.metaKey, ctrlKey: e.ctrlKey, altKey: e.altKey }) }, i = function (t) { e.isPressed && (e.isOverTarget && n(JE(e.target, t), e.pointerType, !1), e.isPressed = !1, e.isOverTarget = !1, e.activePointerId = null, e.pointerType = null, x(), f || HE(e.target)) }, o = { onKeyDown: function (n) { GE(n.nativeEvent) && n.currentTarget.contains(n.target) && (QE(n.target) && n.preventDefault(), n.stopPropagation(), !e.isPressed && !n.repeat && (e.target = n.currentTarget, e.isPressed = !0, t(n, "keyboard"), w(document, "keyup", a, !1))) }, onKeyUp: function (t) { GE(t.nativeEvent) && !t.repeat && t.currentTarget.contains(t.target) && r(JE(e.target, t), "keyboard") }, onClick: function (i) { i && !i.currentTarget.contains(i.target) || i && 0 === i.button && (i.stopPropagation(), s && i.preventDefault(), !e.ignoreClickAfterPress && !e.ignoreEmulatedMouseEvents && ("virtual" === e.pointerType || WE(i.nativeEvent)) && (!s && !u && QT(i.currentTarget), t(i, "virtual"), r(i, "virtual"), n(i, "virtual")), e.ignoreEmulatedMouseEvents = !1, e.ignoreClickAfterPress = !1) } }, a = function (t) { if (e.isPressed && GE(t)) { QE(t.target) && t.preventDefault(), t.stopPropagation(), e.isPressed = !1; var r = t.target; n(JE(e.target, t), "keyboard", e.target.contains(r)), x(), (e.target.contains(r) && XE(e.target) || "link" === e.target.getAttribute("role")) && e.target.click() } }; if ("undefined" != typeof PointerEvent) { o.onPointerDown = function (n) { if (0 === n.button && n.currentTarget.contains(n.target)) { if (function (e) { return 0 === e.width && 0 === e.height || 1 === e.width && 1 === e.height && 0 === e.pressure && 0 === e.detail }(n.nativeEvent)) return void (e.pointerType = "virtual"); $E(n.currentTarget) && n.preventDefault(), e.pointerType = n.pointerType, n.stopPropagation(), e.isPressed || (e.isPressed = !0, e.isOverTarget = !0, e.activePointerId = n.pointerId, e.target = n.currentTarget, !s && !u && QT(n.currentTarget), f || UE(e.target), t(n, e.pointerType), w(document, "pointermove", l, !1), w(document, "pointerup", c, !1), w(document, "pointercancel", h, !1)) } }, o.onMouseDown = function (e) { !e.currentTarget.contains(e.target) || 0 === e.button && ($E(e.currentTarget) && e.preventDefault(), e.stopPropagation()) }, o.onPointerUp = function (t) { !t.currentTarget.contains(t.target) || "virtual" === e.pointerType || 0 === t.button && ZE(t, t.currentTarget) && r(t, e.pointerType || t.pointerType) }; var l = function (r) { r.pointerId === e.activePointerId && (ZE(r, e.target) ? e.isOverTarget || (e.isOverTarget = !0, t(JE(e.target, r), e.pointerType)) : e.isOverTarget && (e.isOverTarget = !1, n(JE(e.target, r), e.pointerType, !1), p.current.shouldCancelOnPointerExit && i(r))) }, c = function (t) { t.pointerId === e.activePointerId && e.isPressed && 0 === t.button && (ZE(t, e.target) ? n(JE(e.target, t), e.pointerType) : e.isOverTarget && n(JE(e.target, t), e.pointerType, !1), e.isPressed = !1, e.isOverTarget = !1, e.activePointerId = null, e.pointerType = null, x(), f || HE(e.target)) }, h = function (e) { i(e) }; o.onDragStart = function (e) { !e.currentTarget.contains(e.target) || i(e) } } else { o.onMouseDown = function (n) { 0 !== n.button || !n.currentTarget.contains(n.target) || ($E(n.currentTarget) && n.preventDefault(), n.stopPropagation(), !e.ignoreEmulatedMouseEvents && (e.isPressed = !0, e.isOverTarget = !0, e.target = n.currentTarget, e.pointerType = WE(n.nativeEvent) ? "virtual" : "mouse", !s && !u && QT(n.currentTarget), t(n, e.pointerType), w(document, "mouseup", d, !1))) }, o.onMouseEnter = function (n) { !n.currentTarget.contains(n.target) || (n.stopPropagation(), e.isPressed && !e.ignoreEmulatedMouseEvents && (e.isOverTarget = !0, t(n, e.pointerType))) }, o.onMouseLeave = function (t) { !t.currentTarget.contains(t.target) || (t.stopPropagation(), e.isPressed && !e.ignoreEmulatedMouseEvents && (e.isOverTarget = !1, n(t, e.pointerType, !1), p.current.shouldCancelOnPointerExit && i(t))) }, o.onMouseUp = function (t) { !t.currentTarget.contains(t.target) || !e.ignoreEmulatedMouseEvents && 0 === t.button && r(t, e.pointerType) }; var d = function (t) { if (0 === t.button) { if (e.isPressed = !1, x(), e.ignoreEmulatedMouseEvents) return void (e.ignoreEmulatedMouseEvents = !1); ZE(t, e.target) ? n(JE(e.target, t), e.pointerType) : e.isOverTarget && n(JE(e.target, t), e.pointerType, !1), e.isOverTarget = !1 } }; o.onTouchStart = function (n) { if (n.currentTarget.contains(n.target)) { n.stopPropagation(); var r = function (e) { var t = e.targetTouches; return t.length > 0 ? t[0] : null }(n.nativeEvent); !r || (e.activePointerId = r.identifier, e.ignoreEmulatedMouseEvents = !0, e.isOverTarget = !0, e.isPressed = !0, e.target = n.currentTarget, e.pointerType = "touch", !s && !u && QT(n.currentTarget), f || UE(e.target), t(n, e.pointerType), w(window, "scroll", v, !0)) } }, o.onTouchMove = function (r) { if (r.currentTarget.contains(r.target) && (r.stopPropagation(), e.isPressed)) { var o = qE(r.nativeEvent, e.activePointerId); o && ZE(o, r.currentTarget) ? e.isOverTarget || (e.isOverTarget = !0, t(r, e.pointerType)) : e.isOverTarget && (e.isOverTarget = !1, n(r, e.pointerType, !1), p.current.shouldCancelOnPointerExit && i(r)) } }, o.onTouchEnd = function (t) { if (t.currentTarget.contains(t.target) && (t.stopPropagation(), e.isPressed)) { var i = qE(t.nativeEvent, e.activePointerId); i && ZE(i, t.currentTarget) ? (r(t, e.pointerType), n(t, e.pointerType)) : e.isOverTarget && n(t, e.pointerType, !1), e.isPressed = !1, e.activePointerId = null, e.isOverTarget = !1, e.ignoreEmulatedMouseEvents = !0, f || HE(e.target), x() } }, o.onTouchCancel = function (t) { !t.currentTarget.contains(t.target) || (t.stopPropagation(), e.isPressed && i(t)) }; var v = function (t) { e.isPressed && t.target.contains(e.target) && i({ currentTarget: e.target, shiftKey: !1, ctrlKey: !1, metaKey: !1, altKey: !1 }) }; o.onDragStart = function (e) { !e.currentTarget.contains(e.target) || i(e) } } return o }), [w, s, u, x, f]); return h.exports.useEffect((function () { return function () { f || HE(y.current.target) } }), [f]), { isPressed: l || g, pressProps: GT(d, S) } } function XE(e) { return "A" === e.tagName && e.hasAttribute("href") } function GE(e) { var t = e.key, n = e.code, r = e.target, i = r.tagName, o = r.isContentEditable, a = r.getAttribute("role"); return !("Enter" !== t && " " !== t && "Spacebar" !== t && "Space" !== n || "INPUT" === i || "TEXTAREA" === i || !0 === o || XE(r) && ("button" !== a || "Enter" === t) || "link" === a && "Enter" !== t) } function qE(e, t) { for (var n = e.changedTouches, r = 0; r < n.length; r++) { var i = n[r]; if (i.identifier === t) return i } return null } function JE(e, t) { return { currentTarget: e, shiftKey: t.shiftKey, ctrlKey: t.ctrlKey, metaKey: t.metaKey, altKey: t.altKey } } function ZE(e, t) { var n = t.getBoundingClientRect(), r = function (e) { var t = e.width / 2 || e.radiusX || 0, n = e.height / 2 || e.radiusY || 0; return { top: e.clientY - n, right: e.clientX + t, bottom: e.clientY + n, left: e.clientX - t } }(e); return function (e, t) { return !(e.left > t.right || t.left > e.right || e.top > t.bottom || t.top > e.bottom) }(n, r) } function $E(e) { return !e.draggable } function QE(e) { return !(("INPUT" === e.tagName || "BUTTON" === e.tagName) && "submit" === e.type) } KE.displayName = "PressResponderContext"; var eO = ce.forwardRef((function (e, t) { var n = e, r = n.children, i = z(n, ["children"]), o = h.exports.useRef(); t = null != t ? t : o; var a = YE(N(F({}, i), { ref: t })).pressProps, s = ce.Children.only(r); return ce.cloneElement(s, F({ ref: t }, GT(s.props, a))) })); NE({}, "PressResponder", (function () { return tO })); var tO = ce.forwardRef((function (e, t) { var n = e, r = n.children, i = z(n, ["children"]), o = h.exports.useRef(!1), a = h.exports.useContext(KE), s = GT(a || {}, N(F({}, i), { ref: t || (null == a ? void 0 : a.ref), register: function () { o.current = !0, a && a.register() } })); return pE(a, t), h.exports.useEffect((function () { o.current || console.warn("A PressResponder was rendered without a pressable child. Either call the usePress hook, or wrap your DOM node with <Pressable> component.") }), []), ce.createElement(KE.Provider, { value: s }, r) })); function nO(e) { return e.isDisabled ? { focusProps: {} } : ((e.onFocus || e.onFocusChange) && (t = function (t) { t.target === t.currentTarget && (e.onFocus && e.onFocus(t), e.onFocusChange && e.onFocusChange(!0)) }), (e.onBlur || e.onFocusChange) && (n = function (t) { t.target === t.currentTarget && (e.onBlur && e.onBlur(t), e.onFocusChange && e.onFocusChange(!1)) }), { focusProps: { onFocus: t, onBlur: n } }); var t, n } NE({}, "useFocus", (function () { return nO })); var rO = {}; NE(rO, "isFocusVisible", (function () { return mO })), NE(rO, "getInteractionModality", (function () { return yO })), NE(rO, "setInteractionModality", (function () { return bO })), NE(rO, "useInteractionModality", (function () { return wO })), NE(rO, "useFocusVisible", (function () { return xO })), NE(rO, "useFocusVisibleListener", (function () { return _O })); var iO = null, oO = new Set, aO = !1, sO = !1, lO = !1, uO = { Tab: !0, Escape: !0 }; function cO(e, t) { var n, r = T(oO); try { for (r.s(); !(n = r.n()).done;)(0, n.value)(e, t) } catch (e) { r.e(e) } finally { r.f() } } function fO(e) { sO = !0, function (e) { return !(e.metaKey || !TE() && e.altKey || e.ctrlKey || "Control" === e.key || "Shift" === e.key || "Meta" === e.key) }(e) && (iO = "keyboard", cO("keyboard", e)) } function hO(e) { iO = "pointer", ("mousedown" === e.type || "pointerdown" === e.type) && (sO = !0, cO("pointer", e)) } function dO(e) { WE(e) && (sO = !0, iO = "virtual") } function pO(e) { e.target === window || e.target === document || (!sO && !lO && (iO = "virtual", cO("virtual", e)), sO = !1, lO = !1) } function vO() { sO = !1, lO = !0 } function gO() { if ("undefined" != typeof window && !aO) { var e = HTMLElement.prototype.focus; HTMLElement.prototype.focus = function () { sO = !0, e.apply(this, arguments) }, document.addEventListener("keydown", fO, !0), document.addEventListener("keyup", fO, !0), document.addEventListener("click", dO, !0), window.addEventListener("focus", pO, !0), window.addEventListener("blur", vO, !1), "undefined" != typeof PointerEvent ? (document.addEventListener("pointerdown", hO, !0), document.addEventListener("pointermove", hO, !0), document.addEventListener("pointerup", hO, !0)) : (document.addEventListener("mousedown", hO, !0), document.addEventListener("mousemove", hO, !0), document.addEventListener("mouseup", hO, !0)), aO = !0 } } function mO() { return "pointer" !== iO } function yO() { return iO } function bO(e) { iO = e, cO(e, null) } function wO() { gO(); var e = _(h.exports.useState(iO), 2), t = e[0], n = e[1]; return h.exports.useEffect((function () { var e = function () { n(iO) }; return oO.add(e), function () { oO.delete(e) } }), []), t } function xO() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = e.isTextInput, n = e.autoFocus, r = h.exports.useState(n || mO()), i = _(r, 2), o = i[0], a = i[1]; return _O((function (e) { a(e) }), [t], { isTextInput: t }), { isFocusVisible: o } } function _O(e, t, n) { gO(), h.exports.useEffect((function () { var t = function (t, r) { !function (e, t, n) { return !(e && "keyboard" === t && n instanceof KeyboardEvent && !uO[n.key]) }(null == n ? void 0 : n.isTextInput, t, r) || e(mO()) }; return oO.add(t), function () { oO.delete(t) } }), t) } function SO(e) { var t = h.exports.useRef({ isFocusWithin: !1 }).current; return e.isDisabled ? { focusWithinProps: {} } : { focusWithinProps: { onFocus: function (n) { t.isFocusWithin || (e.onFocusWithin && e.onFocusWithin(n), e.onFocusWithinChange && e.onFocusWithinChange(!0), t.isFocusWithin = !0) }, onBlur: function (n) { t.isFocusWithin && !n.currentTarget.contains(n.relatedTarget) && (e.onBlurWithin && e.onBlurWithin(n), e.onFocusWithinChange && e.onFocusWithinChange(!1), t.isFocusWithin = !1) } } } } "undefined" != typeof document && ("loading" !== document.readyState ? gO() : document.addEventListener("DOMContentLoaded", gO)), NE({}, "useFocusWithin", (function () { return SO })), NE({}, "useHover", (function () { return PO })); var kO = !1, CO = 0; function TO() { kO = !0, setTimeout((function () { kO = !1 }), 50) } function EO(e) { "touch" === e.pointerType && TO() } function OO() { if ("undefined" != typeof document) return "undefined" != typeof PointerEvent ? document.addEventListener("pointerup", EO) : document.addEventListener("touchend", TO), CO++, function () { !(--CO > 0) && ("undefined" != typeof PointerEvent ? document.removeEventListener("pointerup", EO) : document.removeEventListener("touchend", TO)) } } function PO(e) { var t = e.onHoverStart, n = e.onHoverChange, r = e.onHoverEnd, i = e.isDisabled, o = _(h.exports.useState(!1), 2), a = o[0], s = o[1], l = h.exports.useRef({ isHovered: !1, ignoreEmulatedMouseEvents: !1, pointerType: "", target: null }).current; h.exports.useEffect(OO, []); var u = h.exports.useMemo((function () { var e = function (e, r) { if (l.pointerType = r, !i && "touch" !== r && !l.isHovered && e.currentTarget.contains(e.target)) { l.isHovered = !0; var o = e.currentTarget; l.target = o, t && t({ type: "hoverstart", target: o, pointerType: r }), n && n(!0), s(!0) } }, o = function (e, t) { if (l.pointerType = "", l.target = null, "touch" !== t && l.isHovered) { l.isHovered = !1; var i = e.currentTarget; r && r({ type: "hoverend", target: i, pointerType: t }), n && n(!1), s(!1) } }, a = {}; return "undefined" != typeof PointerEvent ? (a.onPointerEnter = function (t) { kO && "mouse" === t.pointerType || e(t, t.pointerType) }, a.onPointerLeave = function (e) { !i && e.currentTarget.contains(e.target) && o(e, e.pointerType) }) : (a.onTouchStart = function () { l.ignoreEmulatedMouseEvents = !0 }, a.onMouseEnter = function (t) { !l.ignoreEmulatedMouseEvents && !kO && e(t, "mouse"), l.ignoreEmulatedMouseEvents = !1 }, a.onMouseLeave = function (e) { !i && e.currentTarget.contains(e.target) && o(e, "mouse") }), { hoverProps: a, triggerHoverEnd: o } }), [t, n, r, i, l]), c = u.hoverProps, f = u.triggerHoverEnd; return h.exports.useEffect((function () { i && f({ currentTarget: l.target }, l.pointerType) }), [i]), { hoverProps: c, isHovered: a } } function MO(e) { var t = e.ref, n = e.onInteractOutside, r = e.isDisabled, i = e.onInteractOutsideStart, o = h.exports.useRef({ isPointerDown: !1, ignoreEmulatedMouseEvents: !1, onInteractOutside: n, onInteractOutsideStart: i }).current; o.onInteractOutside = n, o.onInteractOutsideStart = i, h.exports.useEffect((function () { if (!r) { var e = function (e) { AO(e, t) && o.onInteractOutside && (o.onInteractOutsideStart && o.onInteractOutsideStart(e), o.isPointerDown = !0) }; if ("undefined" != typeof PointerEvent) { var n = function (e) { o.isPointerDown && o.onInteractOutside && AO(e, t) && (o.isPointerDown = !1, o.onInteractOutside(e)) }; return document.addEventListener("pointerdown", e, !0), document.addEventListener("pointerup", n, !0), function () { document.removeEventListener("pointerdown", e, !0), document.removeEventListener("pointerup", n, !0) } } var i = function (e) { o.ignoreEmulatedMouseEvents ? o.ignoreEmulatedMouseEvents = !1 : o.isPointerDown && o.onInteractOutside && AO(e, t) && (o.isPointerDown = !1, o.onInteractOutside(e)) }, a = function (e) { o.ignoreEmulatedMouseEvents = !0, o.onInteractOutside && o.isPointerDown && AO(e, t) && (o.isPointerDown = !1, o.onInteractOutside(e)) }; return document.addEventListener("mousedown", e, !0), document.addEventListener("mouseup", i, !0), document.addEventListener("touchstart", e, !0), document.addEventListener("touchend", a, !0), function () { document.removeEventListener("mousedown", e, !0), document.removeEventListener("mouseup", i, !0), document.removeEventListener("touchstart", e, !0), document.removeEventListener("touchend", a, !0) } } }), [t, o, r]) } function AO(e, t) { if (e.button > 0) return !1; if (e.target) { var n = e.target.ownerDocument; if (!n || !n.documentElement.contains(e.target)) return !1 } return t.current && !t.current.contains(e.target) } function DO(e) { if (e) { var t = !0; return function (n) { var r = N(F({}, n), { preventDefault: function () { n.preventDefault() }, isDefaultPrevented: function () { return n.isDefaultPrevented() }, stopPropagation: function () { console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior.") }, continuePropagation: function () { t = !1 } }); e(r), t && n.stopPropagation() } } } function LO(e) { return { keyboardProps: e.isDisabled ? {} : { onKeyDown: DO(e.onKeyDown), onKeyUp: DO(e.onKeyUp) } } } function RO(e) { var t = e.onMoveStart, n = e.onMove, r = e.onMoveEnd, i = h.exports.useRef({ didMove: !1, lastPosition: null, id: null }), o = uE(), a = o.addGlobalListener, s = o.removeGlobalListener; return { moveProps: h.exports.useMemo((function () { var e = {}, o = function () { UE(), i.current.didMove = !1 }, l = function (e, r, o, a) { 0 === o && 0 === a || (i.current.didMove || (i.current.didMove = !0, null == t || t({ type: "movestart", pointerType: r, shiftKey: e.shiftKey, metaKey: e.metaKey, ctrlKey: e.ctrlKey, altKey: e.altKey })), n({ type: "move", pointerType: r, deltaX: o, deltaY: a, shiftKey: e.shiftKey, metaKey: e.metaKey, ctrlKey: e.ctrlKey, altKey: e.altKey })) }, u = function (e, t) { HE(), i.current.didMove && (null == r || r({ type: "moveend", pointerType: t, shiftKey: e.shiftKey, metaKey: e.metaKey, ctrlKey: e.ctrlKey, altKey: e.altKey })) }; if ("undefined" == typeof PointerEvent) { var c = function (e) { 0 === e.button && (l(e, "mouse", e.pageX - i.current.lastPosition.pageX, e.pageY - i.current.lastPosition.pageY), i.current.lastPosition = { pageX: e.pageX, pageY: e.pageY }) }, f = function e(t) { 0 === t.button && (u(t, "mouse"), s(window, "mousemove", c, !1), s(window, "mouseup", e, !1)) }; e.onMouseDown = function (e) { 0 === e.button && (o(), e.stopPropagation(), e.preventDefault(), i.current.lastPosition = { pageX: e.pageX, pageY: e.pageY }, a(window, "mousemove", c, !1), a(window, "mouseup", f, !1)) }; var h = function (e) { var t = S(e.changedTouches).findIndex((function (e) { return e.identifier === i.current.id })); if (t >= 0) { var n = e.changedTouches[t], r = n.pageX, o = n.pageY; l(e, "touch", r - i.current.lastPosition.pageX, o - i.current.lastPosition.pageY), i.current.lastPosition = { pageX: r, pageY: o } } }, d = function e(t) { S(t.changedTouches).findIndex((function (e) { return e.identifier === i.current.id })) >= 0 && (u(t, "touch"), i.current.id = null, s(window, "touchmove", h), s(window, "touchend", e), s(window, "touchcancel", e)) }; e.onTouchStart = function (e) { if (0 !== e.changedTouches.length && null == i.current.id) { var t = e.changedTouches[0], n = t.pageX, r = t.pageY, s = t.identifier; o(), e.stopPropagation(), e.preventDefault(), i.current.lastPosition = { pageX: n, pageY: r }, i.current.id = s, a(window, "touchmove", h, !1), a(window, "touchend", d, !1), a(window, "touchcancel", d, !1) } } } else { var p = function (e) { if (e.pointerId === i.current.id) { var t = e.pointerType || "mouse"; l(e, t, e.pageX - i.current.lastPosition.pageX, e.pageY - i.current.lastPosition.pageY), i.current.lastPosition = { pageX: e.pageX, pageY: e.pageY } } }, v = function e(t) { if (t.pointerId === i.current.id) { var n = t.pointerType || "mouse"; u(t, n), i.current.id = null, s(window, "pointermove", p, !1), s(window, "pointerup", e, !1), s(window, "pointercancel", e, !1) } }; e.onPointerDown = function (e) { 0 === e.button && null == i.current.id && (o(), e.stopPropagation(), e.preventDefault(), i.current.lastPosition = { pageX: e.pageX, pageY: e.pageY }, i.current.id = e.pointerId, a(window, "pointermove", p, !1), a(window, "pointerup", v, !1), a(window, "pointercancel", v, !1)) } } var g = function (e, t, n) { o(), l(e, "keyboard", t, n), u(e, "keyboard") }; return e.onKeyDown = function (e) { switch (e.key) { case "Left": case "ArrowLeft": e.preventDefault(), e.stopPropagation(), g(e, -1, 0); break; case "Right": case "ArrowRight": e.preventDefault(), e.stopPropagation(), g(e, 1, 0); break; case "Up": case "ArrowUp": e.preventDefault(), e.stopPropagation(), g(e, 0, -1); break; case "Down": case "ArrowDown": e.preventDefault(), e.stopPropagation(), g(e, 0, 1) } }, e }), [i, t, n, r, a, s]) } } function IO(e, t) { var n = e.onScroll, r = e.isDisabled, i = h.exports.useCallback((function (e) { e.ctrlKey || (e.preventDefault(), e.stopPropagation(), n && n({ deltaX: e.deltaX, deltaY: e.deltaY })) }), [n]); RE(t, "wheel", r ? null : i) } function jO(e) { var t = e.isDisabled, n = e.onLongPressStart, r = e.onLongPressEnd, i = e.onLongPress, o = e.threshold, a = void 0 === o ? 500 : o, s = e.accessibilityDescription, l = h.exports.useRef(null), u = uE(), c = u.addGlobalListener, f = u.removeGlobalListener; return { longPressProps: GT(YE({ isDisabled: t, onPressStart: function (e) { if (("mouse" === e.pointerType || "touch" === e.pointerType) && (n && n(N(F({}, e), { type: "longpressstart" })), l.current = setTimeout((function () { e.target.dispatchEvent(new PointerEvent("pointercancel", { bubbles: !0 })), i && i(N(F({}, e), { type: "longpress" })), l.current = null }), a), "touch" === e.pointerType)) { var t = function (e) { e.preventDefault() }; c(e.target, "contextmenu", t, { once: !0 }), c(window, "pointerup", (function () { setTimeout((function () { f(e.target, "contextmenu", t) }), 30) }), { once: !0 }) } }, onPressEnd: function (e) { l.current && clearTimeout(l.current), r && ("mouse" === e.pointerType || "touch" === e.pointerType) && r(N(F({}, e), { type: "longpressend" })) } }).pressProps, _E(i && !t ? s : null)) } } function FO(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } NE({}, "useInteractOutside", (function () { return MO })), NE({}, "useKeyboard", (function () { return LO })), NE({}, "useMove", (function () { return RO })), NE({}, "useScrollWheel", (function () { return IO })), NE({}, "useLongPress", (function () { return jO })); var NO = {}; FO(NO, "useVisuallyHidden", (function () { return BO })), FO(NO, "VisuallyHidden", (function () { return VO })); var zO = { border: 0, clip: "rect(0 0 0 0)", clipPath: "inset(50%)", height: 1, margin: "0 -1px -1px 0", overflow: "hidden", padding: 0, position: "absolute", width: 1, whiteSpace: "nowrap" }; function BO() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = e.style, n = e.isFocusable, r = h.exports.useState(!1), i = _(r, 2), o = i[0], a = i[1], s = nO({ isDisabled: !n, onFocusChange: a }), l = s.focusProps, u = h.exports.useMemo((function () { return o ? t : t ? F(F({}, zO), t) : zO }), [o]); return { visuallyHiddenProps: N(F({}, l), { style: u }) } } function VO(e) { var t = e, n = t.children, r = t.elementType, i = void 0 === r ? "div" : r, o = (t.isFocusable, t.style, z(t, ["children", "elementType", "isFocusable", "style"])), a = BO(e).visuallyHiddenProps; return ce.createElement(i, GT(o, a), n) } var UO = {}, HO = function (e) { if (e.__esModule) return e; var t = Object.defineProperty({}, "__esModule", { value: !0 }); return Object.keys(e).forEach((function (n) { var r = Object.getOwnPropertyDescriptor(e, n); Object.defineProperty(t, n, r.get ? r : { enumerable: !0, get: function () { return e[n] } }) })), t }(Object.freeze((k(r = { __proto__: null }, Symbol.toStringTag, "Module"), k(r, "default", {}), r))); !function (e) { var t, n, r, i, o, a, s = s || { version: "4.6.0" }; if (e.fabric = s, "undefined" != typeof document && "undefined" != typeof window) document instanceof ("undefined" != typeof HTMLDocument ? HTMLDocument : Document) ? s.document = document : s.document = document.implementation.createHTMLDocument(""), s.window = window; else { var l = new HO.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"), { features: { FetchExternalResources: ["img"] }, resources: "usable" }).window; s.document = l.document, s.jsdomImplForWrapper = HO.implForWrapper, s.nodeCanvas = HO.Canvas, s.window = l, DOMParser = s.window.DOMParser } function u(e, t) { var n = e.canvas, r = t.targetCanvas, i = r.getContext("2d"); i.translate(0, r.height), i.scale(1, -1); var o = n.height - r.height; i.drawImage(n, 0, o, r.width, r.height, 0, 0, r.width, r.height) } function c(e, t) { var n = t.targetCanvas.getContext("2d"), r = t.destinationWidth, i = t.destinationHeight, o = r * i * 4, a = new Uint8Array(this.imageBuffer, 0, o), s = new Uint8ClampedArray(this.imageBuffer, 0, o); e.readPixels(0, 0, r, i, e.RGBA, e.UNSIGNED_BYTE, a); var l = new ImageData(s, r, i); n.putImageData(l, 0, 0) } s.isTouchSupported = "ontouchstart" in s.window || "ontouchstart" in s.document || s.window && s.window.navigator && s.window.navigator.maxTouchPoints > 0, s.isLikelyNode = "undefined" != typeof Buffer && "undefined" == typeof window, s.SHARED_ATTRIBUTES = ["display", "transform", "fill", "fill-opacity", "fill-rule", "opacity", "stroke", "stroke-dasharray", "stroke-linecap", "stroke-dashoffset", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke-width", "id", "paint-order", "vector-effect", "instantiated_by_use", "clip-path"], s.DPI = 96, s.reNum = "(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)", s.commaWsp = "(?:\\s+,?\\s*|,\\s*)", s.rePathCommand = /([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi, s.reNonWord = /[ \n\.,;!\?\-]/, s.fontPaths = {}, s.iMatrix = [1, 0, 0, 1, 0, 0], s.svgNS = "http://www.w3.org/2000/svg", s.perfLimitSizeTotal = 2097152, s.maxCacheSideLimit = 4096, s.minCacheSideLimit = 256, s.charWidthsCache = {}, s.textureSize = 2048, s.disableStyleCopyPaste = !1, s.enableGLFiltering = !0, s.devicePixelRatio = s.window.devicePixelRatio || s.window.webkitDevicePixelRatio || s.window.mozDevicePixelRatio || 1, s.browserShadowBlurConstant = 1, s.arcToSegmentsCache = {}, s.boundsOfCurveCache = {}, s.cachesBoundsOfCurve = !0, s.forceGLPutImageData = !1, s.initFilterBackend = function () { return s.enableGLFiltering && s.isWebglSupported && s.isWebglSupported(s.textureSize) ? (console.log("max texture size: " + s.maxTextureSize), new s.WebglFilterBackend({ tileSize: s.textureSize })) : s.Canvas2dFilterBackend ? new s.Canvas2dFilterBackend : void 0 }, "undefined" != typeof document && "undefined" != typeof window && (window.fabric = s), function () { function e(e, t) { if (this.__eventListeners[e]) { var n = this.__eventListeners[e]; t ? n[n.indexOf(t)] = !1 : s.util.array.fill(n, !1) } } function t(e, t) { var n = function () { t.apply(this, arguments), this.off(e, n) }.bind(this); this.on(e, n) } s.Observable = { fire: function (e, t) { if (!this.__eventListeners) return this; var n = this.__eventListeners[e]; if (!n) return this; for (var r = 0, i = n.length; r < i; r++)n[r] && n[r].call(this, t || {}); return this.__eventListeners[e] = n.filter((function (e) { return !1 !== e })), this }, on: function (e, t) { if (this.__eventListeners || (this.__eventListeners = {}), 1 === arguments.length) for (var n in e) this.on(n, e[n]); else this.__eventListeners[e] || (this.__eventListeners[e] = []), this.__eventListeners[e].push(t); return this }, once: function (e, n) { if (1 === arguments.length) for (var r in e) t.call(this, r, e[r]); else t.call(this, e, n); return this }, off: function (t, n) { if (!this.__eventListeners) return this; if (0 === arguments.length) for (t in this.__eventListeners) e.call(this, t); else if (1 === arguments.length && "object" == C(arguments[0])) for (var r in t) e.call(this, r, t[r]); else e.call(this, t, n); return this } } }(), s.Collection = { _objects: [], add: function () { if (this._objects.push.apply(this._objects, arguments), this._onObjectAdded) for (var e = 0, t = arguments.length; e < t; e++)this._onObjectAdded(arguments[e]); return this.renderOnAddRemove && this.requestRenderAll(), this }, insertAt: function (e, t, n) { var r = this._objects; return n ? r[t] = e : r.splice(t, 0, e), this._onObjectAdded && this._onObjectAdded(e), this.renderOnAddRemove && this.requestRenderAll(), this }, remove: function () { for (var e, t = this._objects, n = !1, r = 0, i = arguments.length; r < i; r++)-1 !== (e = t.indexOf(arguments[r])) && (n = !0, t.splice(e, 1), this._onObjectRemoved && this._onObjectRemoved(arguments[r])); return this.renderOnAddRemove && n && this.requestRenderAll(), this }, forEachObject: function (e, t) { for (var n = this.getObjects(), r = 0, i = n.length; r < i; r++)e.call(t, n[r], r, n); return this }, getObjects: function (e) { return void 0 === e ? this._objects.concat() : this._objects.filter((function (t) { return t.type === e })) }, item: function (e) { return this._objects[e] }, isEmpty: function () { return 0 === this._objects.length }, size: function () { return this._objects.length }, contains: function (e, t) { return this._objects.indexOf(e) > -1 || !!t && this._objects.some((function (t) { return "function" == typeof t.contains && t.contains(e, !0) })) }, complexity: function () { return this._objects.reduce((function (e, t) { return e + (t.complexity ? t.complexity() : 0) }), 0) } }, s.CommonMethods = { _setOptions: function (e) { for (var t in e) this.set(t, e[t]) }, _initGradient: function (e, t) { e && e.colorStops && !(e instanceof s.Gradient) && this.set(t, new s.Gradient(e)) }, _initPattern: function (e, t, n) { !e || !e.source || e instanceof s.Pattern ? n && n() : this.set(t, new s.Pattern(e, n)) }, _setObject: function (e) { for (var t in e) this._set(t, e[t]) }, set: function (e, t) { return "object" == C(e) ? this._setObject(e) : this._set(e, t), this }, _set: function (e, t) { this[e] = t }, toggle: function (e) { var t = this.get(e); return "boolean" == typeof t && this.set(e, !t), this }, get: function (e) { return this[e] } }, t = e, n = Math.sqrt, r = Math.atan2, i = Math.pow, o = Math.PI / 180, a = Math.PI / 2, s.util = { cos: function (e) { if (0 === e) return 1; switch (e < 0 && (e = -e), e / a) { case 1: case 3: return 0; case 2: return -1 }return Math.cos(e) }, sin: function (e) { if (0 === e) return 0; var t = 1; switch (e < 0 && (t = -1), e / a) { case 1: return t; case 2: return 0; case 3: return -t }return Math.sin(e) }, removeFromArray: function (e, t) { var n = e.indexOf(t); return -1 !== n && e.splice(n, 1), e }, getRandomInt: function (e, t) { return Math.floor(Math.random() * (t - e + 1)) + e }, degreesToRadians: function (e) { return e * o }, radiansToDegrees: function (e) { return e / o }, rotatePoint: function (e, t, n) { var r = new s.Point(e.x - t.x, e.y - t.y), i = s.util.rotateVector(r, n); return new s.Point(i.x, i.y).addEquals(t) }, rotateVector: function (e, t) { var n = s.util.sin(t), r = s.util.cos(t); return { x: e.x * r - e.y * n, y: e.x * n + e.y * r } }, transformPoint: function (e, t, n) { return n ? new s.Point(t[0] * e.x + t[2] * e.y, t[1] * e.x + t[3] * e.y) : new s.Point(t[0] * e.x + t[2] * e.y + t[4], t[1] * e.x + t[3] * e.y + t[5]) }, makeBoundingBoxFromPoints: function (e, t) { if (t) for (var n = 0; n < e.length; n++)e[n] = s.util.transformPoint(e[n], t); var r = [e[0].x, e[1].x, e[2].x, e[3].x], i = s.util.array.min(r), o = s.util.array.max(r) - i, a = [e[0].y, e[1].y, e[2].y, e[3].y], l = s.util.array.min(a); return { left: i, top: l, width: o, height: s.util.array.max(a) - l } }, invertTransform: function (e) { var t = 1 / (e[0] * e[3] - e[1] * e[2]), n = [t * e[3], -t * e[1], -t * e[2], t * e[0]], r = s.util.transformPoint({ x: e[4], y: e[5] }, n, !0); return n[4] = -r.x, n[5] = -r.y, n }, toFixed: function (e, t) { return parseFloat(Number(e).toFixed(t)) }, parseUnit: function (e, t) { var n = /\D{0,2}$/.exec(e), r = parseFloat(e); switch (t || (t = s.Text.DEFAULT_SVG_FONT_SIZE), n[0]) { case "mm": return r * s.DPI / 25.4; case "cm": return r * s.DPI / 2.54; case "in": return r * s.DPI; case "pt": return r * s.DPI / 72; case "pc": return r * s.DPI / 72 * 12; case "em": return r * t; default: return r } }, falseFunction: function () { return !1 }, getKlass: function (e, t) { return e = s.util.string.camelize(e.charAt(0).toUpperCase() + e.slice(1)), s.util.resolveNamespace(t)[e] }, getSvgAttributes: function (e) { var t = ["instantiated_by_use", "style", "id", "class"]; switch (e) { case "linearGradient": t = t.concat(["x1", "y1", "x2", "y2", "gradientUnits", "gradientTransform"]); break; case "radialGradient": t = t.concat(["gradientUnits", "gradientTransform", "cx", "cy", "r", "fx", "fy", "fr"]); break; case "stop": t = t.concat(["offset", "stop-color", "stop-opacity"]) }return t }, resolveNamespace: function (e) { if (!e) return s; var n, r = e.split("."), i = r.length, o = t || s.window; for (n = 0; n < i; ++n)o = o[r[n]]; return o }, loadImage: function (e, t, n, r) { if (e) { var i = s.util.createImage(), o = function () { t && t.call(n, i, !1), i = i.onload = i.onerror = null }; i.onload = o, i.onerror = function () { s.log("Error loading " + i.src), t && t.call(n, null, !0), i = i.onload = i.onerror = null }, 0 !== e.indexOf("data") && null != r && (i.crossOrigin = r), "data:image/svg" === e.substring(0, 14) && (i.onload = null, s.util.loadImageInDom(i, o)), i.src = e } else t && t.call(n, e) }, loadImageInDom: function (e, t) { var n = s.document.createElement("div"); n.style.width = n.style.height = "1px", n.style.left = n.style.top = "-100%", n.style.position = "absolute", n.appendChild(e), s.document.querySelector("body").appendChild(n), e.onload = function () { t(), n.parentNode.removeChild(n), n = null } }, enlivenObjects: function (e, t, n, r) { var i = [], o = 0, a = (e = e || []).length; function l() { ++o === a && t && t(i.filter((function (e) { return e }))) } a ? e.forEach((function (e, t) { e && e.type ? s.util.getKlass(e.type, n).fromObject(e, (function (n, o) { o || (i[t] = n), r && r(e, n, o), l() })) : l() })) : t && t(i) }, enlivenPatterns: function (e, t) { function n() { ++i === o && t && t(r) } var r = [], i = 0, o = (e = e || []).length; o ? e.forEach((function (e, t) { e && e.source ? new s.Pattern(e, (function (e) { r[t] = e, n() })) : (r[t] = e, n()) })) : t && t(r) }, groupSVGElements: function (e, t, n) { var r; return e && 1 === e.length ? e[0] : (t && (t.width && t.height ? t.centerPoint = { x: t.width / 2, y: t.height / 2 } : (delete t.width, delete t.height)), r = new s.Group(e, t), void 0 !== n && (r.sourcePath = n), r) }, populateWithProperties: function (e, t, n) { if (n && "[object Array]" === Object.prototype.toString.call(n)) for (var r = 0, i = n.length; r < i; r++)n[r] in e && (t[n[r]] = e[n[r]]) }, drawDashedLine: function (e, t, i, o, a, s) { var l = o - t, u = a - i, c = n(l * l + u * u), f = r(u, l), h = s.length, d = 0, p = !0; for (e.save(), e.translate(t, i), e.moveTo(0, 0), e.rotate(f), t = 0; c > t;)(t += s[d++ % h]) > c && (t = c), e[p ? "lineTo" : "moveTo"](t, 0), p = !p; e.restore() }, createCanvasElement: function () { return s.document.createElement("canvas") }, copyCanvasElement: function (e) { var t = s.util.createCanvasElement(); return t.width = e.width, t.height = e.height, t.getContext("2d").drawImage(e, 0, 0), t }, toDataURL: function (e, t, n) { return e.toDataURL("image/" + t, n) }, createImage: function () { return s.document.createElement("img") }, multiplyTransformMatrices: function (e, t, n) { return [e[0] * t[0] + e[2] * t[1], e[1] * t[0] + e[3] * t[1], e[0] * t[2] + e[2] * t[3], e[1] * t[2] + e[3] * t[3], n ? 0 : e[0] * t[4] + e[2] * t[5] + e[4], n ? 0 : e[1] * t[4] + e[3] * t[5] + e[5]] }, qrDecompose: function (e) { var t = r(e[1], e[0]), a = i(e[0], 2) + i(e[1], 2), s = n(a), l = (e[0] * e[3] - e[2] * e[1]) / s, u = r(e[0] * e[2] + e[1] * e[3], a); return { angle: t / o, scaleX: s, scaleY: l, skewX: u / o, skewY: 0, translateX: e[4], translateY: e[5] } }, calcRotateMatrix: function (e) { if (!e.angle) return s.iMatrix.concat(); var t = s.util.degreesToRadians(e.angle), n = s.util.cos(t), r = s.util.sin(t); return [n, r, -r, n, 0, 0] }, calcDimensionsMatrix: function (e) { var t = void 0 === e.scaleX ? 1 : e.scaleX, n = void 0 === e.scaleY ? 1 : e.scaleY, r = [e.flipX ? -t : t, 0, 0, e.flipY ? -n : n, 0, 0], i = s.util.multiplyTransformMatrices, o = s.util.degreesToRadians; return e.skewX && (r = i(r, [1, 0, Math.tan(o(e.skewX)), 1], !0)), e.skewY && (r = i(r, [1, Math.tan(o(e.skewY)), 0, 1], !0)), r }, composeMatrix: function (e) { var t = [1, 0, 0, 1, e.translateX || 0, e.translateY || 0], n = s.util.multiplyTransformMatrices; return e.angle && (t = n(t, s.util.calcRotateMatrix(e))), (1 !== e.scaleX || 1 !== e.scaleY || e.skewX || e.skewY || e.flipX || e.flipY) && (t = n(t, s.util.calcDimensionsMatrix(e))), t }, resetObjectTransform: function (e) { e.scaleX = 1, e.scaleY = 1, e.skewX = 0, e.skewY = 0, e.flipX = !1, e.flipY = !1, e.rotate(0) }, saveObjectTransform: function (e) { return { scaleX: e.scaleX, scaleY: e.scaleY, skewX: e.skewX, skewY: e.skewY, angle: e.angle, left: e.left, flipX: e.flipX, flipY: e.flipY, top: e.top } }, isTransparent: function (e, t, n, r) { r > 0 && (t > r ? t -= r : t = 0, n > r ? n -= r : n = 0); var i, o = !0, a = e.getImageData(t, n, 2 * r || 1, 2 * r || 1), s = a.data.length; for (i = 3; i < s && 0 != (o = a.data[i] <= 0); i += 4); return a = null, o }, parsePreserveAspectRatioAttribute: function (e) { var t, n = "meet", r = e.split(" "); return r && r.length && ("meet" !== (n = r.pop()) && "slice" !== n ? (t = n, n = "meet") : r.length && (t = r.pop())), { meetOrSlice: n, alignX: "none" !== t ? t.slice(1, 4) : "none", alignY: "none" !== t ? t.slice(5, 8) : "none" } }, clearFabricFontCache: function (e) { (e = (e || "").toLowerCase()) ? s.charWidthsCache[e] && delete s.charWidthsCache[e] : s.charWidthsCache = {} }, limitDimsByArea: function (e, t) { var n = Math.sqrt(t * e), r = Math.floor(t / n); return { x: Math.floor(n), y: r } }, capValue: function (e, t, n) { return Math.max(e, Math.min(t, n)) }, findScaleToFit: function (e, t) { return Math.min(t.width / e.width, t.height / e.height) }, findScaleToCover: function (e, t) { return Math.max(t.width / e.width, t.height / e.height) }, matrixToSVG: function (e) { return "matrix(" + e.map((function (e) { return s.util.toFixed(e, s.Object.NUM_FRACTION_DIGITS) })).join(" ") + ")" }, removeTransformFromObject: function (e, t) { var n = s.util.invertTransform(t), r = s.util.multiplyTransformMatrices(n, e.calcOwnMatrix()); s.util.applyTransformToObject(e, r) }, addTransformToObject: function (e, t) { s.util.applyTransformToObject(e, s.util.multiplyTransformMatrices(t, e.calcOwnMatrix())) }, applyTransformToObject: function (e, t) { var n = s.util.qrDecompose(t), r = new s.Point(n.translateX, n.translateY); e.flipX = !1, e.flipY = !1, e.set("scaleX", n.scaleX), e.set("scaleY", n.scaleY), e.skewX = n.skewX, e.skewY = n.skewY, e.angle = n.angle, e.setPositionByOrigin(r, "center", "center") }, sizeAfterTransform: function (e, t, n) { var r = e / 2, i = t / 2, o = [{ x: -r, y: -i }, { x: r, y: -i }, { x: -r, y: i }, { x: r, y: i }], a = s.util.calcDimensionsMatrix(n), l = s.util.makeBoundingBoxFromPoints(o, a); return { x: l.width, y: l.height } } }, function () { var e = Array.prototype.join, t = { m: 2, l: 2, h: 1, v: 1, c: 6, s: 4, q: 4, t: 2, a: 7 }, n = { m: "l", M: "L" }; function r(e, t, n, r, i, o, a, l, u, c, f) { var h = s.util.cos(e), d = s.util.sin(e), p = s.util.cos(t), v = s.util.sin(t), g = n * i * p - r * o * v + a, m = r * i * p + n * o * v + l; return ["C", c + u * (-n * i * d - r * o * h), f + u * (-r * i * d + n * o * h), g + u * (n * i * v + r * o * p), m + u * (r * i * v - n * o * p), g, m] } function i(e, t, n, i, a, l, u) { var c = Math.PI, f = u * c / 180, h = s.util.sin(f), d = s.util.cos(f), p = 0, v = 0, g = -d * e * .5 - h * t * .5, m = -d * t * .5 + h * e * .5, y = (n = Math.abs(n)) * n, b = (i = Math.abs(i)) * i, w = m * m, x = g * g, _ = y * b - y * w - b * x, S = 0; if (_ < 0) { var k = Math.sqrt(1 - _ / (y * b)); n *= k, i *= k } else S = (a === l ? -1 : 1) * Math.sqrt(_ / (y * w + b * x)); var C = S * n * m / i, T = -S * i * g / n, E = d * C - h * T + .5 * e, O = h * C + d * T + .5 * t, P = o(1, 0, (g - C) / n, (m - T) / i), M = o((g - C) / n, (m - T) / i, (-g - C) / n, (-m - T) / i); 0 === l && M > 0 ? M -= 2 * c : 1 === l && M < 0 && (M += 2 * c); for (var A = Math.ceil(Math.abs(M / c * 2)), D = [], L = M / A, R = 8 / 3 * Math.sin(L / 4) * Math.sin(L / 4) / Math.sin(L / 2), I = P + L, j = 0; j < A; j++)D[j] = r(P, I, d, h, n, i, E, O, R, p, v), p = D[j][5], v = D[j][6], P = I, I += L; return D } function o(e, t, n, r) { var i = Math.atan2(t, e), o = Math.atan2(r, n); return o >= i ? o - i : 2 * Math.PI - (i - o) } function a(t, n, r, i, o, a, l, u) { var c; if (s.cachesBoundsOfCurve && (c = e.call(arguments), s.boundsOfCurveCache[c])) return s.boundsOfCurveCache[c]; var f, h, d, p, v, g, m, y, b = Math.sqrt, w = Math.min, x = Math.max, _ = Math.abs, S = [], k = [[], []]; h = 6 * t - 12 * r + 6 * o, f = -3 * t + 9 * r - 9 * o + 3 * l, d = 3 * r - 3 * t; for (var C = 0; C < 2; ++C)if (C > 0 && (h = 6 * n - 12 * i + 6 * a, f = -3 * n + 9 * i - 9 * a + 3 * u, d = 3 * i - 3 * n), _(f) < 1e-12) { if (_(h) < 1e-12) continue; 0 < (p = -d / h) && p < 1 && S.push(p) } else !((m = h * h - 4 * d * f) < 0) && (0 < (v = (-h + (y = b(m))) / (2 * f)) && v < 1 && S.push(v), 0 < (g = (-h - y) / (2 * f)) && g < 1 && S.push(g)); for (var T, E, O, P = S.length, M = P; P--;)T = (O = 1 - (p = S[P])) * O * O * t + 3 * O * O * p * r + 3 * O * p * p * o + p * p * p * l, k[0][P] = T, E = O * O * O * n + 3 * O * O * p * i + 3 * O * p * p * a + p * p * p * u, k[1][P] = E; k[0][M] = t, k[1][M] = n, k[0][M + 1] = l, k[1][M + 1] = u; var A = [{ x: w.apply(null, k[0]), y: w.apply(null, k[1]) }, { x: x.apply(null, k[0]), y: x.apply(null, k[1]) }]; return s.cachesBoundsOfCurve && (s.boundsOfCurveCache[c] = A), A } function l(e, t, n) { for (var r = n[1], o = n[2], a = n[3], s = n[4], l = n[5], u = i(n[6] - e, n[7] - t, r, o, s, l, a), c = 0, f = u.length; c < f; c++)u[c][1] += e, u[c][2] += t, u[c][3] += e, u[c][4] += t, u[c][5] += e, u[c][6] += t; return u } function u(e, t, n, r) { return Math.sqrt((n - e) * (n - e) + (r - t) * (r - t)) } function c(e, t, n, r, i, o, a, s) { return function (l) { var u = function (e) { return e * e * e }(l), c = function (e) { return 3 * e * e * (1 - e) }(l), f = function (e) { return 3 * e * (1 - e) * (1 - e) }(l), h = function (e) { return (1 - e) * (1 - e) * (1 - e) }(l); return { x: a * u + i * c + n * f + e * h, y: s * u + o * c + r * f + t * h } } } function f(e, t, n, r, i, o, a, s) { return function (l) { var u = 1 - l, c = 3 * u * u * (n - e) + 6 * u * l * (i - n) + 3 * l * l * (a - i), f = 3 * u * u * (r - t) + 6 * u * l * (o - r) + 3 * l * l * (s - o); return Math.atan2(f, c) } } function h(e, t, n, r, i, o) { return function (a) { var s = function (e) { return e * e }(a), l = function (e) { return 2 * e * (1 - e) }(a), u = function (e) { return (1 - e) * (1 - e) }(a); return { x: i * s + n * l + e * u, y: o * s + r * l + t * u } } } function d(e, t, n, r, i, o) { return function (a) { var s = 1 - a, l = 2 * s * (n - e) + 2 * a * (i - n), u = 2 * s * (r - t) + 2 * a * (o - r); return Math.atan2(u, l) } } function p(e, t, n) { var r, i, o = { x: t, y: n }, a = 0; for (i = 1; i <= 100; i += 1)r = e(i / 100), a += u(o.x, o.y, r.x, r.y), o = r; return a } function v(e) { for (var t, n, r, i, o = 0, a = e.length, s = 0, l = 0, v = 0, g = 0, m = [], y = 0; y < a; y++) { switch (r = { x: s, y: l, command: (t = e[y])[0] }, t[0]) { case "M": r.length = 0, v = s = t[1], g = l = t[2]; break; case "L": r.length = u(s, l, t[1], t[2]), s = t[1], l = t[2]; break; case "C": n = c(s, l, t[1], t[2], t[3], t[4], t[5], t[6]), i = f(s, l, t[1], t[2], t[3], t[4], t[5], t[6]), r.iterator = n, r.angleFinder = i, r.length = p(n, s, l), s = t[5], l = t[6]; break; case "Q": n = h(s, l, t[1], t[2], t[3], t[4]), i = d(s, l, t[1], t[2], t[3], t[4]), r.iterator = n, r.angleFinder = i, r.length = p(n, s, l), s = t[3], l = t[4]; break; case "Z": case "z": r.destX = v, r.destY = g, r.length = u(s, l, v, g), s = v, l = g }o += r.length, m.push(r) } return m.push({ length: o, x: s, y: l }), m } s.util.joinPath = function (e) { return e.map((function (e) { return e.join(" ") })).join(" ") }, s.util.parsePath = function (e) { var r, i, o, a, l, u = [], c = [], f = s.rePathCommand, h = "[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*", d = "(" + h + ")" + s.commaWsp, p = "([01])" + s.commaWsp + "?", v = new RegExp(d + "?" + d + "?" + d + p + p + d + "?(" + h + ")", "g"); if (!e || !e.match) return u; for (var g, m = 0, y = (l = e.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length; m < y; m++) { a = (r = l[m]).slice(1).trim(), c.length = 0; var b = r.charAt(0); if (g = [b], "a" === b.toLowerCase()) for (var w; w = v.exec(a);)for (var x = 1; x < w.length; x++)c.push(w[x]); else for (; o = f.exec(a);)c.push(o[0]); x = 0; for (var _ = c.length; x < _; x++)i = parseFloat(c[x]), isNaN(i) || g.push(i); var S = t[b.toLowerCase()], k = n[b] || b; if (g.length - 1 > S) for (var C = 1, T = g.length; C < T; C += S)u.push([b].concat(g.slice(C, C + S))), b = k; else u.push(g) } return u }, s.util.makePathSimpler = function (e) { var t, n, r, i, o, a, s = 0, u = 0, c = e.length, f = 0, h = 0, d = []; for (n = 0; n < c; ++n) { switch (r = !1, (t = e[n].slice(0))[0]) { case "l": t[0] = "L", t[1] += s, t[2] += u; case "L": s = t[1], u = t[2]; break; case "h": t[1] += s; case "H": t[0] = "L", t[2] = u, s = t[1]; break; case "v": t[1] += u; case "V": t[0] = "L", u = t[1], t[1] = s, t[2] = u; break; case "m": t[0] = "M", t[1] += s, t[2] += u; case "M": s = t[1], u = t[2], f = t[1], h = t[2]; break; case "c": t[0] = "C", t[1] += s, t[2] += u, t[3] += s, t[4] += u, t[5] += s, t[6] += u; case "C": o = t[3], a = t[4], s = t[5], u = t[6]; break; case "s": t[0] = "S", t[1] += s, t[2] += u, t[3] += s, t[4] += u; case "S": "C" === i ? (o = 2 * s - o, a = 2 * u - a) : (o = s, a = u), s = t[3], u = t[4], t[0] = "C", t[5] = t[3], t[6] = t[4], t[3] = t[1], t[4] = t[2], t[1] = o, t[2] = a, o = t[3], a = t[4]; break; case "q": t[0] = "Q", t[1] += s, t[2] += u, t[3] += s, t[4] += u; case "Q": o = t[1], a = t[2], s = t[3], u = t[4]; break; case "t": t[0] = "T", t[1] += s, t[2] += u; case "T": "Q" === i ? (o = 2 * s - o, a = 2 * u - a) : (o = s, a = u), t[0] = "Q", s = t[1], u = t[2], t[1] = o, t[2] = a, t[3] = s, t[4] = u; break; case "a": t[0] = "A", t[6] += s, t[7] += u; case "A": r = !0, d = d.concat(l(s, u, t)), s = t[6], u = t[7]; break; case "z": case "Z": s = f, u = h }r || d.push(t), i = t[0] } return d }, s.util.getSmoothPathFromPoints = function (e, t) { var n, r = [], i = new s.Point(e[0].x, e[0].y), o = new s.Point(e[1].x, e[1].y), a = e.length, l = 1, u = 0, c = a > 2; for (t = t || 0, c && (l = e[2].x < o.x ? -1 : e[2].x === o.x ? 0 : 1, u = e[2].y < o.y ? -1 : e[2].y === o.y ? 0 : 1), r.push(["M", i.x - l * t, i.y - u * t]), n = 1; n < a; n++) { if (!i.eq(o)) { var f = i.midPointFrom(o); r.push(["Q", i.x, i.y, f.x, f.y]) } i = e[n], n + 1 < e.length && (o = e[n + 1]) } return c && (l = i.x > e[n - 2].x ? 1 : i.x === e[n - 2].x ? 0 : -1, u = i.y > e[n - 2].y ? 1 : i.y === e[n - 2].y ? 0 : -1), r.push(["L", i.x + l * t, i.y + u * t]), r }, s.util.getPathSegmentsInfo = v, s.util.getBoundsOfCurve = a, s.util.getPointOnPath = function (e, t, n) { n || (n = v(e)); for (var r = 0; t - n[r].length > 0 && r < n.length - 2;)t -= n[r].length, r++; var i, o = n[r], a = t / o.length, l = o.command, c = e[r]; switch (l) { case "M": return { x: o.x, y: o.y, angle: 0 }; case "Z": case "z": return (i = new s.Point(o.x, o.y).lerp(new s.Point(o.destX, o.destY), a)).angle = Math.atan2(o.destY - o.y, o.destX - o.x), i; case "L": return (i = new s.Point(o.x, o.y).lerp(new s.Point(c[1], c[2]), a)).angle = Math.atan2(c[2] - o.y, c[1] - o.x), i; case "C": case "Q": return function (e, t) { for (var n, r, i, o = 0, a = 0, s = e.iterator, l = { x: e.x, y: e.y }, c = .01, f = e.angleFinder; a < t && o <= 1 && c > 1e-4;)n = s(o), i = o, (r = u(l.x, l.y, n.x, n.y)) + a > t ? o -= c /= 2 : (l = n, o += c, a += r); return n.angle = f(i), n }(o, t) } }, s.util.transformPath = function (e, t, n) { return n && (t = s.util.multiplyTransformMatrices(t, [1, 0, 0, 1, -n.x, -n.y])), e.map((function (e) { for (var n = e.slice(0), r = {}, i = 1; i < e.length - 1; i += 2)r.x = e[i], r.y = e[i + 1], r = s.util.transformPoint(r, t), n[i] = r.x, n[i + 1] = r.y; return n })) }, s.util.fromArcToBeizers = l, s.util.getBoundsOfArc = function (e, t, n, r, o, s, l, u, c) { for (var f, h = 0, d = 0, p = [], v = i(u - e, c - t, n, r, s, l, o), g = 0, m = v.length; g < m; g++)f = a(h, d, v[g][1], v[g][2], v[g][3], v[g][4], v[g][5], v[g][6]), p.push({ x: f[0].x + e, y: f[0].y + t }), p.push({ x: f[1].x + e, y: f[1].y + t }), h = v[g][5], d = v[g][6]; return p }, s.util.drawArc = function (e, t, n, r) { l(t, n, r = r.slice(0).unshift("X")).forEach((function (t) { e.bezierCurveTo.apply(e, t.slice(1)) })) } }(), function () { var e = Array.prototype.slice; function t(e, t, n) { if (e && 0 !== e.length) { var r = e.length - 1, i = t ? e[r][t] : e[r]; if (t) for (; r--;)n(e[r][t], i) && (i = e[r][t]); else for (; r--;)n(e[r], i) && (i = e[r]); return i } } s.util.array = { fill: function (e, t) { for (var n = e.length; n--;)e[n] = t; return e }, invoke: function (t, n) { for (var r = e.call(arguments, 2), i = [], o = 0, a = t.length; o < a; o++)i[o] = r.length ? t[o][n].apply(t[o], r) : t[o][n].call(t[o]); return i }, min: function (e, n) { return t(e, n, (function (e, t) { return e < t })) }, max: function (e, n) { return t(e, n, (function (e, t) { return e >= t })) } } }(), function () { function e(t, n, r) { if (r) if (!s.isLikelyNode && n instanceof Element) t = n; else if (n instanceof Array) { t = []; for (var i = 0, o = n.length; i < o; i++)t[i] = e({}, n[i], r) } else if (n && "object" == C(n)) for (var a in n) "canvas" === a || "group" === a ? t[a] = null : n.hasOwnProperty(a) && (t[a] = e({}, n[a], r)); else t = n; else for (var a in n) t[a] = n[a]; return t } s.util.object = { extend: e, clone: function (t, n) { return e({}, t, n) } }, s.util.object.extend(s.util, s.Observable) }(), function () { function e(e, t) { var n = e.charCodeAt(t); if (isNaN(n)) return ""; if (n < 55296 || n > 57343) return e.charAt(t); if (55296 <= n && n <= 56319) { if (e.length <= t + 1) throw "High surrogate without following low surrogate"; var r = e.charCodeAt(t + 1); if (56320 > r || r > 57343) throw "High surrogate without following low surrogate"; return e.charAt(t) + e.charAt(t + 1) } if (0 === t) throw "Low surrogate without preceding high surrogate"; var i = e.charCodeAt(t - 1); if (55296 > i || i > 56319) throw "Low surrogate without preceding high surrogate"; return !1 } s.util.string = { camelize: function (e) { return e.replace(/-+(.)?/g, (function (e, t) { return t ? t.toUpperCase() : "" })) }, capitalize: function (e, t) { return e.charAt(0).toUpperCase() + (t ? e.slice(1) : e.slice(1).toLowerCase()) }, escapeXml: function (e) { return e.replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/'/g, "&apos;").replace(/</g, "&lt;").replace(/>/g, "&gt;") }, graphemeSplit: function (t) { var n, r = 0, i = []; for (r = 0; r < t.length; r++)!1 !== (n = e(t, r)) && i.push(n); return i } } }(), function () { var e = Array.prototype.slice, t = function () { }, n = function () { for (var e in { toString: 1 }) if ("toString" === e) return !1; return !0 }(), r = function (e, t, r) { for (var i in t) i in e.prototype && "function" == typeof e.prototype[i] && (t[i] + "").indexOf("callSuper") > -1 ? e.prototype[i] = function (e) { return function () { var n = this.constructor.superclass; this.constructor.superclass = r; var i = t[e].apply(this, arguments); if (this.constructor.superclass = n, "initialize" !== e) return i } }(i) : e.prototype[i] = t[i], n && (t.toString !== Object.prototype.toString && (e.prototype.toString = t.toString), t.valueOf !== Object.prototype.valueOf && (e.prototype.valueOf = t.valueOf)) }; function i() { } function o(t) { for (var n = null, r = this; r.constructor.superclass;) { var i = r.constructor.superclass.prototype[t]; if (r[t] !== i) { n = i; break } r = r.constructor.superclass.prototype } return n ? arguments.length > 1 ? n.apply(this, e.call(arguments, 1)) : n.call(this) : console.log("tried to callSuper " + t + ", method not found in prototype chain", this) } s.util.createClass = function () { var n = null, a = e.call(arguments, 0); function s() { this.initialize.apply(this, arguments) } "function" == typeof a[0] && (n = a.shift()), s.superclass = n, s.subclasses = [], n && (i.prototype = n.prototype, s.prototype = new i, n.subclasses.push(s)); for (var l = 0, u = a.length; l < u; l++)r(s, a[l], n); return s.prototype.initialize || (s.prototype.initialize = t), s.prototype.constructor = s, s.prototype.callSuper = o, s } }(), function () { var e = !!s.document.createElement("div").attachEvent, t = ["touchstart", "touchmove", "touchend"]; s.util.addListener = function (t, n, r, i) { t && t.addEventListener(n, r, !e && i) }, s.util.removeListener = function (t, n, r, i) { t && t.removeEventListener(n, r, !e && i) }, s.util.getPointer = function (e) { var t = e.target, n = s.util.getScrollLeftTop(t), r = function (e) { var t = e.changedTouches; return t && t[0] ? t[0] : e }(e); return { x: r.clientX + n.left, y: r.clientY + n.top } }, s.util.isTouchEvent = function (e) { return t.indexOf(e.type) > -1 || "touch" === e.pointerType } }(), function () { var e = s.document.createElement("div"), t = "string" == typeof e.style.opacity, n = "string" == typeof e.style.filter, r = /alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/, i = function (e) { return e }; t ? i = function (e, t) { return e.style.opacity = t, e } : n && (i = function (e, t) { var n = e.style; return e.currentStyle && !e.currentStyle.hasLayout && (n.zoom = 1), r.test(n.filter) ? (t = t >= .9999 ? "" : "alpha(opacity=" + 100 * t + ")", n.filter = n.filter.replace(r, t)) : n.filter += " alpha(opacity=" + 100 * t + ")", e }), s.util.setStyle = function (e, t) { var n = e.style; if (!n) return e; if ("string" == typeof t) return e.style.cssText += ";" + t, t.indexOf("opacity") > -1 ? i(e, t.match(/opacity:\s*(\d?\.?\d*)/)[1]) : e; for (var r in t) "opacity" === r ? i(e, t[r]) : n["float" === r || "cssFloat" === r ? void 0 === n.styleFloat ? "cssFloat" : "styleFloat" : r] = t[r]; return e } }(), function () { var e, t, n, r, i = Array.prototype.slice, o = function (e) { return i.call(e, 0) }; try { e = o(s.document.childNodes) instanceof Array } catch (e) { } function a(e, t) { var n = s.document.createElement(e); for (var r in t) "class" === r ? n.className = t[r] : "for" === r ? n.htmlFor = t[r] : n.setAttribute(r, t[r]); return n } function l(e) { for (var t = 0, n = 0, r = s.document.documentElement, i = s.document.body || { scrollLeft: 0, scrollTop: 0 }; e && (e.parentNode || e.host) && ((e = e.parentNode || e.host) === s.document ? (t = i.scrollLeft || r.scrollLeft || 0, n = i.scrollTop || r.scrollTop || 0) : (t += e.scrollLeft || 0, n += e.scrollTop || 0), 1 !== e.nodeType || "fixed" !== e.style.position);); return { left: t, top: n } } e || (o = function (e) { for (var t = new Array(e.length), n = e.length; n--;)t[n] = e[n]; return t }), t = s.document.defaultView && s.document.defaultView.getComputedStyle ? function (e, t) { var n = s.document.defaultView.getComputedStyle(e, null); return n ? n[t] : void 0 } : function (e, t) { var n = e.style[t]; return !n && e.currentStyle && (n = e.currentStyle[t]), n }, n = s.document.documentElement.style, r = "userSelect" in n ? "userSelect" : "MozUserSelect" in n ? "MozUserSelect" : "WebkitUserSelect" in n ? "WebkitUserSelect" : "KhtmlUserSelect" in n ? "KhtmlUserSelect" : "", s.util.makeElementUnselectable = function (e) { return void 0 !== e.onselectstart && (e.onselectstart = s.util.falseFunction), r ? e.style[r] = "none" : "string" == typeof e.unselectable && (e.unselectable = "on"), e }, s.util.makeElementSelectable = function (e) { return void 0 !== e.onselectstart && (e.onselectstart = null), r ? e.style[r] = "" : "string" == typeof e.unselectable && (e.unselectable = ""), e }, s.util.setImageSmoothing = function (e, t) { e.imageSmoothingEnabled = e.imageSmoothingEnabled || e.webkitImageSmoothingEnabled || e.mozImageSmoothingEnabled || e.msImageSmoothingEnabled || e.oImageSmoothingEnabled, e.imageSmoothingEnabled = t }, s.util.getById = function (e) { return "string" == typeof e ? s.document.getElementById(e) : e }, s.util.toArray = o, s.util.addClass = function (e, t) { e && -1 === (" " + e.className + " ").indexOf(" " + t + " ") && (e.className += (e.className ? " " : "") + t) }, s.util.makeElement = a, s.util.wrapElement = function (e, t, n) { return "string" == typeof t && (t = a(t, n)), e.parentNode && e.parentNode.replaceChild(t, e), t.appendChild(e), t }, s.util.getScrollLeftTop = l, s.util.getElementOffset = function (e) { var n, r, i = e && e.ownerDocument, o = { left: 0, top: 0 }, a = { left: 0, top: 0 }, s = { borderLeftWidth: "left", borderTopWidth: "top", paddingLeft: "left", paddingTop: "top" }; if (!i) return a; for (var u in s) a[s[u]] += parseInt(t(e, u), 10) || 0; return n = i.documentElement, void 0 !== e.getBoundingClientRect && (o = e.getBoundingClientRect()), r = l(e), { left: o.left + r.left - (n.clientLeft || 0) + a.left, top: o.top + r.top - (n.clientTop || 0) + a.top } }, s.util.getNodeCanvas = function (e) { var t = s.jsdomImplForWrapper(e); return t._canvas || t._image }, s.util.cleanUpJsdomNode = function (e) { if (s.isLikelyNode) { var t = s.jsdomImplForWrapper(e); t && (t._image = null, t._canvas = null, t._currentSrc = null, t._attributes = null, t._classList = null) } } }(), function () { function e() { } s.util.request = function (t, n) { n || (n = {}); var r = n.method ? n.method.toUpperCase() : "GET", i = n.onComplete || function () { }, o = new s.window.XMLHttpRequest, a = n.body || n.parameters; return o.onreadystatechange = function () { 4 === o.readyState && (i(o), o.onreadystatechange = e) }, "GET" === r && (a = null, "string" == typeof n.parameters && (t = function (e, t) { return e + (/\?/.test(e) ? "&" : "?") + t }(t, n.parameters))), o.open(r, t, !0), ("POST" === r || "PUT" === r) && o.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), o.send(a), o } }(), s.log = console.log, s.warn = console.warn, function () { function e() { return !1 } function t(e, t, n, r) { return -n * Math.cos(e / r * (Math.PI / 2)) + n + t } var n = s.window.requestAnimationFrame || s.window.webkitRequestAnimationFrame || s.window.mozRequestAnimationFrame || s.window.oRequestAnimationFrame || s.window.msRequestAnimationFrame || function (e) { return s.window.setTimeout(e, 1e3 / 60) }, r = s.window.cancelAnimationFrame || s.window.clearTimeout; function i() { return n.apply(s.window, arguments) } s.util.animate = function (n) { var r = !1; return i((function (o) { n || (n = {}); var a, s = o || +new Date, l = n.duration || 500, u = s + l, c = n.onChange || e, f = n.abort || e, h = n.onComplete || e, d = n.easing || t, p = "startValue" in n ? n.startValue : 0, v = "endValue" in n ? n.endValue : 100, g = n.byValue || v - p; n.onStart && n.onStart(), function e(t) { var n = (a = t || +new Date) > u ? l : a - s, o = n / l, m = d(n, p, g, l), y = Math.abs((m - p) / g); if (!r) { if (f(m, y, o)) return void h(v, 1, 1); if (a > u) return c(v, 1, 1), void h(v, 1, 1); c(m, y, o), i(e) } }(s) })), function () { r = !0 } }, s.util.requestAnimFrame = i, s.util.cancelAnimFrame = function () { return r.apply(s.window, arguments) } }(), function () { function e(e, t, n) { var r = "rgba(" + parseInt(e[0] + n * (t[0] - e[0]), 10) + "," + parseInt(e[1] + n * (t[1] - e[1]), 10) + "," + parseInt(e[2] + n * (t[2] - e[2]), 10); return (r += "," + (e && t ? parseFloat(e[3] + n * (t[3] - e[3])) : 1)) + ")" } s.util.animateColor = function (t, n, r, i) { var o = new s.Color(t).getSource(), a = new s.Color(n).getSource(), l = i.onComplete, u = i.onChange; return i = i || {}, s.util.animate(s.util.object.extend(i, { duration: r || 500, startValue: o, endValue: a, byValue: a, easing: function (t, n, r, o) { return e(n, r, i.colorEasing ? i.colorEasing(t, o) : 1 - Math.cos(t / o * (Math.PI / 2))) }, onComplete: function (t, n, r) { if (l) return l(e(a, a, 0), n, r) }, onChange: function (t, n, r) { if (u) { if (Array.isArray(t)) return u(e(t, t, 0), n, r); u(t, n, r) } } })) } }(), function () { function e(e, t, n, r) { return e < Math.abs(t) ? (e = t, r = n / 4) : r = 0 === t && 0 === e ? n / (2 * Math.PI) * Math.asin(1) : n / (2 * Math.PI) * Math.asin(t / e), { a: e, c: t, p: n, s: r } } function t(e, t, n) { return e.a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * n - e.s) * (2 * Math.PI) / e.p) } function n(e, t, n, i) { return n - r(i - e, 0, n, i) + t } function r(e, t, n, r) { return (e /= r) < 1 / 2.75 ? n * (7.5625 * e * e) + t : e < 2 / 2.75 ? n * (7.5625 * (e -= 1.5 / 2.75) * e + .75) + t : e < 2.5 / 2.75 ? n * (7.5625 * (e -= 2.25 / 2.75) * e + .9375) + t : n * (7.5625 * (e -= 2.625 / 2.75) * e + .984375) + t } s.util.ease = { easeInQuad: function (e, t, n, r) { return n * (e /= r) * e + t }, easeOutQuad: function (e, t, n, r) { return -n * (e /= r) * (e - 2) + t }, easeInOutQuad: function (e, t, n, r) { return (e /= r / 2) < 1 ? n / 2 * e * e + t : -n / 2 * (--e * (e - 2) - 1) + t }, easeInCubic: function (e, t, n, r) { return n * (e /= r) * e * e + t }, easeOutCubic: function (e, t, n, r) { return n * ((e = e / r - 1) * e * e + 1) + t }, easeInOutCubic: function (e, t, n, r) { return (e /= r / 2) < 1 ? n / 2 * e * e * e + t : n / 2 * ((e -= 2) * e * e + 2) + t }, easeInQuart: function (e, t, n, r) { return n * (e /= r) * e * e * e + t }, easeOutQuart: function (e, t, n, r) { return -n * ((e = e / r - 1) * e * e * e - 1) + t }, easeInOutQuart: function (e, t, n, r) { return (e /= r / 2) < 1 ? n / 2 * e * e * e * e + t : -n / 2 * ((e -= 2) * e * e * e - 2) + t }, easeInQuint: function (e, t, n, r) { return n * (e /= r) * e * e * e * e + t }, easeOutQuint: function (e, t, n, r) { return n * ((e = e / r - 1) * e * e * e * e + 1) + t }, easeInOutQuint: function (e, t, n, r) { return (e /= r / 2) < 1 ? n / 2 * e * e * e * e * e + t : n / 2 * ((e -= 2) * e * e * e * e + 2) + t }, easeInSine: function (e, t, n, r) { return -n * Math.cos(e / r * (Math.PI / 2)) + n + t }, easeOutSine: function (e, t, n, r) { return n * Math.sin(e / r * (Math.PI / 2)) + t }, easeInOutSine: function (e, t, n, r) { return -n / 2 * (Math.cos(Math.PI * e / r) - 1) + t }, easeInExpo: function (e, t, n, r) { return 0 === e ? t : n * Math.pow(2, 10 * (e / r - 1)) + t }, easeOutExpo: function (e, t, n, r) { return e === r ? t + n : n * (1 - Math.pow(2, -10 * e / r)) + t }, easeInOutExpo: function (e, t, n, r) { return 0 === e ? t : e === r ? t + n : (e /= r / 2) < 1 ? n / 2 * Math.pow(2, 10 * (e - 1)) + t : n / 2 * (2 - Math.pow(2, -10 * --e)) + t }, easeInCirc: function (e, t, n, r) { return -n * (Math.sqrt(1 - (e /= r) * e) - 1) + t }, easeOutCirc: function (e, t, n, r) { return n * Math.sqrt(1 - (e = e / r - 1) * e) + t }, easeInOutCirc: function (e, t, n, r) { return (e /= r / 2) < 1 ? -n / 2 * (Math.sqrt(1 - e * e) - 1) + t : n / 2 * (Math.sqrt(1 - (e -= 2) * e) + 1) + t }, easeInElastic: function (n, r, i, o) { var a = 0; return 0 === n ? r : 1 == (n /= o) ? r + i : (a || (a = .3 * o), -t(e(i, i, a, 1.70158), n, o) + r) }, easeOutElastic: function (t, n, r, i) { var o = 0; if (0 === t) return n; if (1 == (t /= i)) return n + r; o || (o = .3 * i); var a = e(r, r, o, 1.70158); return a.a * Math.pow(2, -10 * t) * Math.sin((t * i - a.s) * (2 * Math.PI) / a.p) + a.c + n }, easeInOutElastic: function (n, r, i, o) { var a = 0; if (0 === n) return r; if (2 == (n /= o / 2)) return r + i; a || (a = o * (.3 * 1.5)); var s = e(i, i, a, 1.70158); return n < 1 ? -.5 * t(s, n, o) + r : s.a * Math.pow(2, -10 * (n -= 1)) * Math.sin((n * o - s.s) * (2 * Math.PI) / s.p) * .5 + s.c + r }, easeInBack: function (e, t, n, r, i) { return void 0 === i && (i = 1.70158), n * (e /= r) * e * ((i + 1) * e - i) + t }, easeOutBack: function (e, t, n, r, i) { return void 0 === i && (i = 1.70158), n * ((e = e / r - 1) * e * ((i + 1) * e + i) + 1) + t }, easeInOutBack: function (e, t, n, r, i) { return void 0 === i && (i = 1.70158), (e /= r / 2) < 1 ? n / 2 * (e * e * ((1 + (i *= 1.525)) * e - i)) + t : n / 2 * ((e -= 2) * e * ((1 + (i *= 1.525)) * e + i) + 2) + t }, easeInBounce: n, easeOutBounce: r, easeInOutBounce: function (e, t, i, o) { return e < o / 2 ? .5 * n(2 * e, 0, i, o) + t : .5 * r(2 * e - o, 0, i, o) + .5 * i + t } } }(), function (e) { var t = e.fabric || (e.fabric = {}), n = t.util.object.extend, r = t.util.object.clone, i = t.util.toFixed, o = t.util.parseUnit, a = t.util.multiplyTransformMatrices, s = { cx: "left", x: "left", r: "radius", cy: "top", y: "top", display: "visible", visibility: "visible", transform: "transformMatrix", "fill-opacity": "fillOpacity", "fill-rule": "fillRule", "font-family": "fontFamily", "font-size": "fontSize", "font-style": "fontStyle", "font-weight": "fontWeight", "letter-spacing": "charSpacing", "paint-order": "paintFirst", "stroke-dasharray": "strokeDashArray", "stroke-dashoffset": "strokeDashOffset", "stroke-linecap": "strokeLineCap", "stroke-linejoin": "strokeLineJoin", "stroke-miterlimit": "strokeMiterLimit", "stroke-opacity": "strokeOpacity", "stroke-width": "strokeWidth", "text-decoration": "textDecoration", "text-anchor": "textAnchor", opacity: "opacity", "clip-path": "clipPath", "clip-rule": "clipRule", "vector-effect": "strokeUniform", "image-rendering": "imageSmoothing" }, l = { stroke: "strokeOpacity", fill: "fillOpacity" }, u = "font-size", c = "clip-path"; function f(e) { return e in s ? s[e] : e } function h(e, n, r, i) { var s, l = "[object Array]" === Object.prototype.toString.call(n); if ("fill" !== e && "stroke" !== e || "none" !== n) { if ("strokeUniform" === e) return "non-scaling-stroke" === n; if ("strokeDashArray" === e) n = "none" === n ? null : n.replace(/,/g, " ").split(/\s+/).map(parseFloat); else if ("transformMatrix" === e) n = r && r.transformMatrix ? a(r.transformMatrix, t.parseTransformAttribute(n)) : t.parseTransformAttribute(n); else if ("visible" === e) n = "none" !== n && "hidden" !== n, r && !1 === r.visible && (n = !1); else if ("opacity" === e) n = parseFloat(n), r && void 0 !== r.opacity && (n *= r.opacity); else if ("textAnchor" === e) n = "start" === n ? "left" : "end" === n ? "right" : "center"; else if ("charSpacing" === e) s = o(n, i) / i * 1e3; else if ("paintFirst" === e) { var u = n.indexOf("fill"), c = n.indexOf("stroke"); n = "fill", (u > -1 && c > -1 && c < u || -1 === u && c > -1) && (n = "stroke") } else { if ("href" === e || "xlink:href" === e || "font" === e) return n; if ("imageSmoothing" === e) return "optimizeQuality" === n; s = l ? n.map(o) : o(n, i) } } else n = ""; return !l && isNaN(s) ? n : s } function d(e) { return new RegExp("^(" + e.join("|") + ")\\b", "i") } function p(e, t) { var n, r, i, o, a = []; for (i = 0, o = t.length; i < o; i++)n = t[i], r = e.getElementsByTagName(n), a = a.concat(Array.prototype.slice.call(r)); return a } function v(e, t) { var n, r = !0; return (n = g(e, t.pop())) && t.length && (r = function (e, t) { for (var n, r = !0; e.parentNode && 1 === e.parentNode.nodeType && t.length;)r && (n = t.pop()), r = g(e = e.parentNode, n); return 0 === t.length }(e, t)), n && r && 0 === t.length } function g(e, t) { var n, r, i = e.nodeName, o = e.getAttribute("class"), a = e.getAttribute("id"); if (n = new RegExp("^" + i, "i"), t = t.replace(n, ""), a && t.length && (n = new RegExp("#" + a + "(?![a-zA-Z\\-]+)", "i"), t = t.replace(n, "")), o && t.length) for (r = (o = o.split(" ")).length; r--;)n = new RegExp("\\." + o[r] + "(?![a-zA-Z\\-]+)", "i"), t = t.replace(n, ""); return 0 === t.length } function m(e, t) { var n; if (e.getElementById && (n = e.getElementById(t)), n) return n; var r, i, o, a = e.getElementsByTagName("*"); for (i = 0, o = a.length; i < o; i++)if (t === (r = a[i]).getAttribute("id")) return r } t.svgValidTagNamesRegEx = d(["path", "circle", "polygon", "polyline", "ellipse", "rect", "line", "image", "text"]), t.svgViewBoxElementsRegEx = d(["symbol", "image", "marker", "pattern", "view", "svg"]), t.svgInvalidAncestorsRegEx = d(["pattern", "defs", "symbol", "metadata", "clipPath", "mask", "desc"]), t.svgValidParentsRegEx = d(["symbol", "g", "a", "svg", "clipPath", "defs"]), t.cssRules = {}, t.gradientDefs = {}, t.clipPaths = {}, t.parseTransformAttribute = function () { function e(e, n, r) { e[r] = Math.tan(t.util.degreesToRadians(n[0])) } var n = t.iMatrix, r = t.reNum, i = t.commaWsp, o = "(?:(?:(matrix)\\s*\\(\\s*(" + r + ")" + i + "(" + r + ")" + i + "(" + r + ")" + i + "(" + r + ")" + i + "(" + r + ")" + i + "(" + r + ")\\s*\\))|(?:(translate)\\s*\\(\\s*(" + r + ")(?:" + i + "(" + r + "))?\\s*\\))|(?:(scale)\\s*\\(\\s*(" + r + ")(?:" + i + "(" + r + "))?\\s*\\))|(?:(rotate)\\s*\\(\\s*(" + r + ")(?:" + i + "(" + r + ")" + i + "(" + r + "))?\\s*\\))|(?:(skewX)\\s*\\(\\s*(" + r + ")\\s*\\))|(?:(skewY)\\s*\\(\\s*(" + r + ")\\s*\\)))", a = new RegExp("^\\s*(?:(?:" + o + "(?:" + i + "*" + o + ")*)?)\\s*$"), s = new RegExp(o, "g"); return function (r) { var i = n.concat(), l = []; if (!r || r && !a.test(r)) return i; r.replace(s, (function (r) { var a = new RegExp(o).exec(r).filter((function (e) { return !!e })), s = a[1], u = a.slice(2).map(parseFloat); switch (s) { case "translate": !function (e, t) { e[4] = t[0], 2 === t.length && (e[5] = t[1]) }(i, u); break; case "rotate": u[0] = t.util.degreesToRadians(u[0]), function (e, n) { var r = t.util.cos(n[0]), i = t.util.sin(n[0]), o = 0, a = 0; 3 === n.length && (o = n[1], a = n[2]), e[0] = r, e[1] = i, e[2] = -i, e[3] = r, e[4] = o - (r * o - i * a), e[5] = a - (i * o + r * a) }(i, u); break; case "scale": !function (e, t) { var n = t[0], r = 2 === t.length ? t[1] : t[0]; e[0] = n, e[3] = r }(i, u); break; case "skewX": e(i, u, 2); break; case "skewY": e(i, u, 1); break; case "matrix": i = u }l.push(i.concat()), i = n.concat() })); for (var u = l[0]; l.length > 1;)l.shift(), u = t.util.multiplyTransformMatrices(u, l[0]); return u } }(); var y = new RegExp("^\\s*(" + t.reNum + "+)\\s*,?\\s*(" + t.reNum + "+)\\s*,?\\s*(" + t.reNum + "+)\\s*,?\\s*(" + t.reNum + "+)\\s*$"); function b(e) { if (!t.svgViewBoxElementsRegEx.test(e.nodeName)) return {}; var n, r, i, a, s, l, u = e.getAttribute("viewBox"), c = 1, f = 1, h = e.getAttribute("width"), d = e.getAttribute("height"), p = e.getAttribute("x") || 0, v = e.getAttribute("y") || 0, g = e.getAttribute("preserveAspectRatio") || "", m = !u || !(u = u.match(y)), b = !h || !d || "100%" === h || "100%" === d, w = m && b, x = {}, _ = "", S = 0, k = 0; if (x.width = 0, x.height = 0, x.toBeParsed = w, m && (p || v) && e.parentNode && "#document" !== e.parentNode.nodeName && (_ = " translate(" + o(p) + " " + o(v) + ") ", s = (e.getAttribute("transform") || "") + _, e.setAttribute("transform", s), e.removeAttribute("x"), e.removeAttribute("y")), w) return x; if (m) return x.width = o(h), x.height = o(d), x; if (n = -parseFloat(u[1]), r = -parseFloat(u[2]), i = parseFloat(u[3]), a = parseFloat(u[4]), x.minX = n, x.minY = r, x.viewBoxWidth = i, x.viewBoxHeight = a, b ? (x.width = i, x.height = a) : (x.width = o(h), x.height = o(d), c = x.width / i, f = x.height / a), "none" !== (g = t.util.parsePreserveAspectRatioAttribute(g)).alignX && ("meet" === g.meetOrSlice && (f = c = c > f ? f : c), "slice" === g.meetOrSlice && (f = c = c > f ? c : f), S = x.width - i * c, k = x.height - a * c, "Mid" === g.alignX && (S /= 2), "Mid" === g.alignY && (k /= 2), "Min" === g.alignX && (S = 0), "Min" === g.alignY && (k = 0)), 1 === c && 1 === f && 0 === n && 0 === r && 0 === p && 0 === v) return x; if ((p || v) && "#document" !== e.parentNode.nodeName && (_ = " translate(" + o(p) + " " + o(v) + ") "), s = _ + " matrix(" + c + " 0 0 " + f + " " + (n * c + S) + " " + (r * f + k) + ") ", "svg" === e.nodeName) { for (l = e.ownerDocument.createElementNS(t.svgNS, "g"); e.firstChild;)l.appendChild(e.firstChild); e.appendChild(l) } else (l = e).removeAttribute("x"), l.removeAttribute("y"), s = l.getAttribute("transform") + s; return l.setAttribute("transform", s), x } function w(e, t) { var n = "xlink:href", r = m(e, t.getAttribute(n).substr(1)); if (r && r.getAttribute(n) && w(e, r), ["gradientTransform", "x1", "x2", "y1", "y2", "gradientUnits", "cx", "cy", "r", "fx", "fy"].forEach((function (e) { r && !t.hasAttribute(e) && r.hasAttribute(e) && t.setAttribute(e, r.getAttribute(e)) })), !t.children.length) for (var i = r.cloneNode(!0); i.firstChild;)t.appendChild(i.firstChild); t.removeAttribute(n) } t.parseSVGDocument = function (e, n, i, o) { if (e) { !function (e) { for (var n = p(e, ["use", "svg:use"]), r = 0; n.length && r < n.length;) { var i = n[r], o = i.getAttribute("xlink:href") || i.getAttribute("href"); if (null === o) return; var a, s, l, u, c = o.substr(1), f = i.getAttribute("x") || 0, h = i.getAttribute("y") || 0, d = m(e, c).cloneNode(!0), v = (d.getAttribute("transform") || "") + " translate(" + f + ", " + h + ")", g = n.length, y = t.svgNS; if (b(d), /^svg$/i.test(d.nodeName)) { var w = d.ownerDocument.createElementNS(y, "g"); for (s = 0, u = (l = d.attributes).length; s < u; s++)a = l.item(s), w.setAttributeNS(y, a.nodeName, a.nodeValue); for (; d.firstChild;)w.appendChild(d.firstChild); d = w } for (s = 0, u = (l = i.attributes).length; s < u; s++)"x" !== (a = l.item(s)).nodeName && "y" !== a.nodeName && "xlink:href" !== a.nodeName && "href" !== a.nodeName && ("transform" === a.nodeName ? v = a.nodeValue + " " + v : d.setAttribute(a.nodeName, a.nodeValue)); d.setAttribute("transform", v), d.setAttribute("instantiated_by_use", "1"), d.removeAttribute("id"), i.parentNode.replaceChild(d, i), n.length === g && r++ } }(e); var a, s, l = t.Object.__uid++, u = b(e), c = t.util.toArray(e.getElementsByTagName("*")); if (u.crossOrigin = o && o.crossOrigin, u.svgUid = l, 0 === c.length && t.isLikelyNode) { var f = []; for (a = 0, s = (c = e.selectNodes('//*[name(.)!="svg"]')).length; a < s; a++)f[a] = c[a]; c = f } var h = c.filter((function (e) { return b(e), t.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:", "")) && !function (e, t) { for (; e && (e = e.parentNode);)if (e.nodeName && t.test(e.nodeName.replace("svg:", "")) && !e.getAttribute("instantiated_by_use")) return !0; return !1 }(e, t.svgInvalidAncestorsRegEx) })); if (!h || h && !h.length) return void (n && n([], {})); var d = {}; c.filter((function (e) { return "clipPath" === e.nodeName.replace("svg:", "") })).forEach((function (e) { var n = e.getAttribute("id"); d[n] = t.util.toArray(e.getElementsByTagName("*")).filter((function (e) { return t.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:", "")) })) })), t.gradientDefs[l] = t.getGradientDefs(e), t.cssRules[l] = t.getCSSRules(e), t.clipPaths[l] = d, t.parseElements(h, (function (e, r) { n && (n(e, u, r, c), delete t.gradientDefs[l], delete t.cssRules[l], delete t.clipPaths[l]) }), r(u), i, o) } }; var x = new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*(" + t.reNum + "(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|" + t.reNum + "))?\\s+(.*)"); n(t, { parseFontDeclaration: function (e, t) { var n = e.match(x); if (n) { var r = n[1], i = n[3], a = n[4], s = n[5], l = n[6]; r && (t.fontStyle = r), i && (t.fontWeight = isNaN(parseFloat(i)) ? i : parseFloat(i)), a && (t.fontSize = o(a)), l && (t.fontFamily = l), s && (t.lineHeight = "normal" === s ? 1 : s) } }, getGradientDefs: function (e) { var t, n = p(e, ["linearGradient", "radialGradient", "svg:linearGradient", "svg:radialGradient"]), r = 0, i = {}; for (r = n.length; r--;)(t = n[r]).getAttribute("xlink:href") && w(e, t), i[t.getAttribute("id")] = t; return i }, parseAttributes: function (e, r, a) { if (e) { var s, d, p, g = {}; void 0 === a && (a = e.getAttribute("svgUid")), e.parentNode && t.svgValidParentsRegEx.test(e.parentNode.nodeName) && (g = t.parseAttributes(e.parentNode, r, a)); var m = r.reduce((function (t, n) { return (s = e.getAttribute(n)) && (t[n] = s), t }), {}), y = n(function (e, n) { var r = {}; for (var i in t.cssRules[n]) if (v(e, i.split(" "))) for (var o in t.cssRules[n][i]) r[o] = t.cssRules[n][i][o]; return r }(e, a), t.parseStyleAttribute(e)); m = n(m, y), y[c] && e.setAttribute(c, y[c]), d = p = g.fontSize || t.Text.DEFAULT_SVG_FONT_SIZE, m[u] && (m[u] = d = o(m[u], p)); var b, w, x = {}; for (var _ in m) w = h(b = f(_), m[_], g, d), x[b] = w; x && x.font && t.parseFontDeclaration(x.font, x); var S = n(g, x); return t.svgValidParentsRegEx.test(e.nodeName) ? S : function (e) { for (var n in l) if (void 0 !== e[l[n]] && "" !== e[n]) { if (void 0 === e[n]) { if (!t.Object.prototype[n]) continue; e[n] = t.Object.prototype[n] } if (0 !== e[n].indexOf("url(")) { var r = new t.Color(e[n]); e[n] = r.setAlpha(i(r.getAlpha() * e[l[n]], 2)).toRgba() } } return e }(S) } }, parseElements: function (e, n, r, i, o) { new t.ElementsParser(e, n, r, i, o).parse() }, parseStyleAttribute: function (e) { var t = {}, n = e.getAttribute("style"); return n && ("string" == typeof n ? function (e, t) { var n, r; e.replace(/;\s*$/, "").split(";").forEach((function (e) { var i = e.split(":"); n = i[0].trim().toLowerCase(), r = i[1].trim(), t[n] = r })) }(n, t) : function (e, t) { var n, r; for (var i in e) void 0 !== e[i] && (n = i.toLowerCase(), r = e[i], t[n] = r) }(n, t)), t }, parsePointsAttribute: function (e) { if (!e) return null; var t, n, r = []; for (t = 0, n = (e = (e = e.replace(/,/g, " ").trim()).split(/\s+/)).length; t < n; t += 2)r.push({ x: parseFloat(e[t]), y: parseFloat(e[t + 1]) }); return r }, getCSSRules: function (e) { var n, r, i = e.getElementsByTagName("style"), o = {}; for (n = 0, r = i.length; n < r; n++) { var a = i[n].textContent; "" !== (a = a.replace(/\/\*[\s\S]*?\*\//g, "")).trim() && a.match(/[^{]*\{[\s\S]*?\}/g).map((function (e) { return e.trim() })).forEach((function (e) { var i = e.match(/([\s\S]*?)\s*\{([^}]*)\}/), a = {}, s = i[2].trim().replace(/;$/, "").split(/\s*;\s*/); for (n = 0, r = s.length; n < r; n++) { var l = s[n].split(/\s*:\s*/), u = l[0], c = l[1]; a[u] = c } (e = i[1]).split(",").forEach((function (e) { "" !== (e = e.replace(/^svg/i, "").trim()) && (o[e] ? t.util.object.extend(o[e], a) : o[e] = t.util.object.clone(a)) })) })) } return o }, loadSVGFromURL: function (e, n, r, i) { e = e.replace(/^\n\s*/, "").trim(), new t.util.request(e, { method: "get", onComplete: function (e) { var o = e.responseXML; if (!o || !o.documentElement) return n && n(null), !1; t.parseSVGDocument(o.documentElement, (function (e, t, r, i) { n && n(e, t, r, i) }), r, i) } }) }, loadSVGFromString: function (e, n, r, i) { var o = (new t.window.DOMParser).parseFromString(e.trim(), "text/xml"); t.parseSVGDocument(o.documentElement, (function (e, t, r, i) { n(e, t, r, i) }), r, i) } }) }(e), s.ElementsParser = function (e, t, n, r, i, o) { this.elements = e, this.callback = t, this.options = n, this.reviver = r, this.svgUid = n && n.svgUid || 0, this.parsingOptions = i, this.regexUrl = /^url\(['"]?#([^'"]+)['"]?\)/g, this.doc = o }, function (e) { e.parse = function () { this.instances = new Array(this.elements.length), this.numElements = this.elements.length, this.createObjects() }, e.createObjects = function () { var e = this; this.elements.forEach((function (t, n) { t.setAttribute("svgUid", e.svgUid), e.createObject(t, n) })) }, e.findTag = function (e) { return s[s.util.string.capitalize(e.tagName.replace("svg:", ""))] }, e.createObject = function (e, t) { var n = this.findTag(e); if (n && n.fromElement) try { n.fromElement(e, this.createCallback(t, e), this.options) } catch (e) { s.log(e) } else this.checkIfDone() }, e.createCallback = function (e, t) { var n = this; return function (r) { var i; n.resolveGradient(r, t, "fill"), n.resolveGradient(r, t, "stroke"), r instanceof s.Image && r._originalElement && (i = r.parsePreserveAspectRatioAttribute(t)), r._removeTransformMatrix(i), n.resolveClipPath(r, t), n.reviver && n.reviver(t, r), n.instances[e] = r, n.checkIfDone() } }, e.extractPropertyDefinition = function (e, t, n) { var r = e[t], i = this.regexUrl; if (i.test(r)) { i.lastIndex = 0; var o = i.exec(r)[1]; return i.lastIndex = 0, s[n][this.svgUid][o] } }, e.resolveGradient = function (e, t, n) { var r = this.extractPropertyDefinition(e, n, "gradientDefs"); if (r) { var i = t.getAttribute(n + "-opacity"), o = s.Gradient.fromElement(r, e, i, this.options); e.set(n, o) } }, e.createClipPathCallback = function (e, t) { return function (e) { e._removeTransformMatrix(), e.fillRule = e.clipRule, t.push(e) } }, e.resolveClipPath = function (e, t) { var n, r, i, o, a = this.extractPropertyDefinition(e, "clipPath", "clipPaths"); if (a) { i = [], r = s.util.invertTransform(e.calcTransformMatrix()); for (var l = a[0].parentNode, u = t; u.parentNode && u.getAttribute("clip-path") !== e.clipPath;)u = u.parentNode; u.parentNode.appendChild(l); for (var c = 0; c < a.length; c++)n = a[c], this.findTag(n).fromElement(n, this.createClipPathCallback(e, i), this.options); a = 1 === i.length ? i[0] : new s.Group(i), o = s.util.multiplyTransformMatrices(r, a.calcTransformMatrix()), a.clipPath && this.resolveClipPath(a, u); var f = s.util.qrDecompose(o); a.flipX = !1, a.flipY = !1, a.set("scaleX", f.scaleX), a.set("scaleY", f.scaleY), a.angle = f.angle, a.skewX = f.skewX, a.skewY = 0, a.setPositionByOrigin({ x: f.translateX, y: f.translateY }, "center", "center"), e.clipPath = a } else delete e.clipPath }, e.checkIfDone = function () { 0 == --this.numElements && (this.instances = this.instances.filter((function (e) { return null != e })), this.callback(this.instances, this.elements)) } }(s.ElementsParser.prototype), function (e) { var t = e.fabric || (e.fabric = {}); function n(e, t) { this.x = e, this.y = t } t.Point ? t.warn("fabric.Point is already defined") : (t.Point = n, n.prototype = { type: "point", constructor: n, add: function (e) { return new n(this.x + e.x, this.y + e.y) }, addEquals: function (e) { return this.x += e.x, this.y += e.y, this }, scalarAdd: function (e) { return new n(this.x + e, this.y + e) }, scalarAddEquals: function (e) { return this.x += e, this.y += e, this }, subtract: function (e) { return new n(this.x - e.x, this.y - e.y) }, subtractEquals: function (e) { return this.x -= e.x, this.y -= e.y, this }, scalarSubtract: function (e) { return new n(this.x - e, this.y - e) }, scalarSubtractEquals: function (e) { return this.x -= e, this.y -= e, this }, multiply: function (e) { return new n(this.x * e, this.y * e) }, multiplyEquals: function (e) { return this.x *= e, this.y *= e, this }, divide: function (e) { return new n(this.x / e, this.y / e) }, divideEquals: function (e) { return this.x /= e, this.y /= e, this }, eq: function (e) { return this.x === e.x && this.y === e.y }, lt: function (e) { return this.x < e.x && this.y < e.y }, lte: function (e) { return this.x <= e.x && this.y <= e.y }, gt: function (e) { return this.x > e.x && this.y > e.y }, gte: function (e) { return this.x >= e.x && this.y >= e.y }, lerp: function (e, t) { return void 0 === t && (t = .5), t = Math.max(Math.min(1, t), 0), new n(this.x + (e.x - this.x) * t, this.y + (e.y - this.y) * t) }, distanceFrom: function (e) { var t = this.x - e.x, n = this.y - e.y; return Math.sqrt(t * t + n * n) }, midPointFrom: function (e) { return this.lerp(e) }, min: function (e) { return new n(Math.min(this.x, e.x), Math.min(this.y, e.y)) }, max: function (e) { return new n(Math.max(this.x, e.x), Math.max(this.y, e.y)) }, toString: function () { return this.x + "," + this.y }, setXY: function (e, t) { return this.x = e, this.y = t, this }, setX: function (e) { return this.x = e, this }, setY: function (e) { return this.y = e, this }, setFromPoint: function (e) { return this.x = e.x, this.y = e.y, this }, swap: function (e) { var t = this.x, n = this.y; this.x = e.x, this.y = e.y, e.x = t, e.y = n }, clone: function () { return new n(this.x, this.y) } }) }(e), function (e) { var t = e.fabric || (e.fabric = {}); function n(e) { this.status = e, this.points = [] } t.Intersection ? t.warn("fabric.Intersection is already defined") : (t.Intersection = n, t.Intersection.prototype = { constructor: n, appendPoint: function (e) { return this.points.push(e), this }, appendPoints: function (e) { return this.points = this.points.concat(e), this } }, t.Intersection.intersectLineLine = function (e, r, i, o) { var a, s = (o.x - i.x) * (e.y - i.y) - (o.y - i.y) * (e.x - i.x), l = (r.x - e.x) * (e.y - i.y) - (r.y - e.y) * (e.x - i.x), u = (o.y - i.y) * (r.x - e.x) - (o.x - i.x) * (r.y - e.y); if (0 !== u) { var c = s / u, f = l / u; 0 <= c && c <= 1 && 0 <= f && f <= 1 ? (a = new n("Intersection")).appendPoint(new t.Point(e.x + c * (r.x - e.x), e.y + c * (r.y - e.y))) : a = new n } else a = new n(0 === s || 0 === l ? "Coincident" : "Parallel"); return a }, t.Intersection.intersectLinePolygon = function (e, t, r) { var i, o, a, s, l = new n, u = r.length; for (s = 0; s < u; s++)i = r[s], o = r[(s + 1) % u], a = n.intersectLineLine(e, t, i, o), l.appendPoints(a.points); return l.points.length > 0 && (l.status = "Intersection"), l }, t.Intersection.intersectPolygonPolygon = function (e, t) { var r, i = new n, o = e.length; for (r = 0; r < o; r++) { var a = e[r], s = e[(r + 1) % o], l = n.intersectLinePolygon(a, s, t); i.appendPoints(l.points) } return i.points.length > 0 && (i.status = "Intersection"), i }, t.Intersection.intersectPolygonRectangle = function (e, r, i) { var o = r.min(i), a = r.max(i), s = new t.Point(a.x, o.y), l = new t.Point(o.x, a.y), u = n.intersectLinePolygon(o, s, e), c = n.intersectLinePolygon(s, a, e), f = n.intersectLinePolygon(a, l, e), h = n.intersectLinePolygon(l, o, e), d = new n; return d.appendPoints(u.points), d.appendPoints(c.points), d.appendPoints(f.points), d.appendPoints(h.points), d.points.length > 0 && (d.status = "Intersection"), d }) }(e), function (e) { var t = e.fabric || (e.fabric = {}); function n(e) { e ? this._tryParsingColor(e) : this.setSource([0, 0, 0, 1]) } function r(e, t, n) { return n < 0 && (n += 1), n > 1 && (n -= 1), n < 1 / 6 ? e + 6 * (t - e) * n : n < .5 ? t : n < 2 / 3 ? e + (t - e) * (2 / 3 - n) * 6 : e } t.Color ? t.warn("fabric.Color is already defined.") : (t.Color = n, t.Color.prototype = { _tryParsingColor: function (e) { var t; e in n.colorNameMap && (e = n.colorNameMap[e]), "transparent" === e && (t = [255, 255, 255, 0]), t || (t = n.sourceFromHex(e)), t || (t = n.sourceFromRgb(e)), t || (t = n.sourceFromHsl(e)), t || (t = [0, 0, 0, 1]), t && this.setSource(t) }, _rgbToHsl: function (e, n, r) { e /= 255, n /= 255, r /= 255; var i, o, a, s = t.util.array.max([e, n, r]), l = t.util.array.min([e, n, r]); if (a = (s + l) / 2, s === l) i = o = 0; else { var u = s - l; switch (o = a > .5 ? u / (2 - s - l) : u / (s + l), s) { case e: i = (n - r) / u + (n < r ? 6 : 0); break; case n: i = (r - e) / u + 2; break; case r: i = (e - n) / u + 4 }i /= 6 } return [Math.round(360 * i), Math.round(100 * o), Math.round(100 * a)] }, getSource: function () { return this._source }, setSource: function (e) { this._source = e }, toRgb: function () { var e = this.getSource(); return "rgb(" + e[0] + "," + e[1] + "," + e[2] + ")" }, toRgba: function () { var e = this.getSource(); return "rgba(" + e[0] + "," + e[1] + "," + e[2] + "," + e[3] + ")" }, toHsl: function () { var e = this.getSource(), t = this._rgbToHsl(e[0], e[1], e[2]); return "hsl(" + t[0] + "," + t[1] + "%," + t[2] + "%)" }, toHsla: function () { var e = this.getSource(), t = this._rgbToHsl(e[0], e[1], e[2]); return "hsla(" + t[0] + "," + t[1] + "%," + t[2] + "%," + e[3] + ")" }, toHex: function () { var e, t, n, r = this.getSource(); return e = 1 === (e = r[0].toString(16)).length ? "0" + e : e, t = 1 === (t = r[1].toString(16)).length ? "0" + t : t, n = 1 === (n = r[2].toString(16)).length ? "0" + n : n, e.toUpperCase() + t.toUpperCase() + n.toUpperCase() }, toHexa: function () { var e, t = this.getSource(); return e = 1 === (e = (e = Math.round(255 * t[3])).toString(16)).length ? "0" + e : e, this.toHex() + e.toUpperCase() }, getAlpha: function () { return this.getSource()[3] }, setAlpha: function (e) { var t = this.getSource(); return t[3] = e, this.setSource(t), this }, toGrayscale: function () { var e = this.getSource(), t = parseInt((.3 * e[0] + .59 * e[1] + .11 * e[2]).toFixed(0), 10), n = e[3]; return this.setSource([t, t, t, n]), this }, toBlackWhite: function (e) { var t = this.getSource(), n = (.3 * t[0] + .59 * t[1] + .11 * t[2]).toFixed(0), r = t[3]; return e = e || 127, n = Number(n) < Number(e) ? 0 : 255, this.setSource([n, n, n, r]), this }, overlayWith: function (e) { e instanceof n || (e = new n(e)); var t, r = [], i = this.getAlpha(), o = this.getSource(), a = e.getSource(); for (t = 0; t < 3; t++)r.push(Math.round(.5 * o[t] + .5 * a[t])); return r[3] = i, this.setSource(r), this } }, t.Color.reRGBa = /^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i, t.Color.reHSLa = /^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i, t.Color.reHex = /^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i, t.Color.colorNameMap = { aliceblue: "#F0F8FF", antiquewhite: "#FAEBD7", aqua: "#00FFFF", aquamarine: "#7FFFD4", azure: "#F0FFFF", beige: "#F5F5DC", bisque: "#FFE4C4", black: "#000000", blanchedalmond: "#FFEBCD", blue: "#0000FF", blueviolet: "#8A2BE2", brown: "#A52A2A", burlywood: "#DEB887", cadetblue: "#5F9EA0", chartreuse: "#7FFF00", chocolate: "#D2691E", coral: "#FF7F50", cornflowerblue: "#6495ED", cornsilk: "#FFF8DC", crimson: "#DC143C", cyan: "#00FFFF", darkblue: "#00008B", darkcyan: "#008B8B", darkgoldenrod: "#B8860B", darkgray: "#A9A9A9", darkgrey: "#A9A9A9", darkgreen: "#006400", darkkhaki: "#BDB76B", darkmagenta: "#8B008B", darkolivegreen: "#556B2F", darkorange: "#FF8C00", darkorchid: "#9932CC", darkred: "#8B0000", darksalmon: "#E9967A", darkseagreen: "#8FBC8F", darkslateblue: "#483D8B", darkslategray: "#2F4F4F", darkslategrey: "#2F4F4F", darkturquoise: "#00CED1", darkviolet: "#9400D3", deeppink: "#FF1493", deepskyblue: "#00BFFF", dimgray: "#696969", dimgrey: "#696969", dodgerblue: "#1E90FF", firebrick: "#B22222", floralwhite: "#FFFAF0", forestgreen: "#228B22", fuchsia: "#FF00FF", gainsboro: "#DCDCDC", ghostwhite: "#F8F8FF", gold: "#FFD700", goldenrod: "#DAA520", gray: "#808080", grey: "#808080", green: "#008000", greenyellow: "#ADFF2F", honeydew: "#F0FFF0", hotpink: "#FF69B4", indianred: "#CD5C5C", indigo: "#4B0082", ivory: "#FFFFF0", khaki: "#F0E68C", lavender: "#E6E6FA", lavenderblush: "#FFF0F5", lawngreen: "#7CFC00", lemonchiffon: "#FFFACD", lightblue: "#ADD8E6", lightcoral: "#F08080", lightcyan: "#E0FFFF", lightgoldenrodyellow: "#FAFAD2", lightgray: "#D3D3D3", lightgrey: "#D3D3D3", lightgreen: "#90EE90", lightpink: "#FFB6C1", lightsalmon: "#FFA07A", lightseagreen: "#20B2AA", lightskyblue: "#87CEFA", lightslategray: "#778899", lightslategrey: "#778899", lightsteelblue: "#B0C4DE", lightyellow: "#FFFFE0", lime: "#00FF00", limegreen: "#32CD32", linen: "#FAF0E6", magenta: "#FF00FF", maroon: "#800000", mediumaquamarine: "#66CDAA", mediumblue: "#0000CD", mediumorchid: "#BA55D3", mediumpurple: "#9370DB", mediumseagreen: "#3CB371", mediumslateblue: "#7B68EE", mediumspringgreen: "#00FA9A", mediumturquoise: "#48D1CC", mediumvioletred: "#C71585", midnightblue: "#191970", mintcream: "#F5FFFA", mistyrose: "#FFE4E1", moccasin: "#FFE4B5", navajowhite: "#FFDEAD", navy: "#000080", oldlace: "#FDF5E6", olive: "#808000", olivedrab: "#6B8E23", orange: "#FFA500", orangered: "#FF4500", orchid: "#DA70D6", palegoldenrod: "#EEE8AA", palegreen: "#98FB98", paleturquoise: "#AFEEEE", palevioletred: "#DB7093", papayawhip: "#FFEFD5", peachpuff: "#FFDAB9", peru: "#CD853F", pink: "#FFC0CB", plum: "#DDA0DD", powderblue: "#B0E0E6", purple: "#800080", rebeccapurple: "#663399", red: "#FF0000", rosybrown: "#BC8F8F", royalblue: "#4169E1", saddlebrown: "#8B4513", salmon: "#FA8072", sandybrown: "#F4A460", seagreen: "#2E8B57", seashell: "#FFF5EE", sienna: "#A0522D", silver: "#C0C0C0", skyblue: "#87CEEB", slateblue: "#6A5ACD", slategray: "#708090", slategrey: "#708090", snow: "#FFFAFA", springgreen: "#00FF7F", steelblue: "#4682B4", tan: "#D2B48C", teal: "#008080", thistle: "#D8BFD8", tomato: "#FF6347", turquoise: "#40E0D0", violet: "#EE82EE", wheat: "#F5DEB3", white: "#FFFFFF", whitesmoke: "#F5F5F5", yellow: "#FFFF00", yellowgreen: "#9ACD32" }, t.Color.fromRgb = function (e) { return n.fromSource(n.sourceFromRgb(e)) }, t.Color.sourceFromRgb = function (e) { var t = e.match(n.reRGBa); if (t) { var r = parseInt(t[1], 10) / (/%$/.test(t[1]) ? 100 : 1) * (/%$/.test(t[1]) ? 255 : 1), i = parseInt(t[2], 10) / (/%$/.test(t[2]) ? 100 : 1) * (/%$/.test(t[2]) ? 255 : 1), o = parseInt(t[3], 10) / (/%$/.test(t[3]) ? 100 : 1) * (/%$/.test(t[3]) ? 255 : 1); return [parseInt(r, 10), parseInt(i, 10), parseInt(o, 10), t[4] ? parseFloat(t[4]) : 1] } }, t.Color.fromRgba = n.fromRgb, t.Color.fromHsl = function (e) { return n.fromSource(n.sourceFromHsl(e)) }, t.Color.sourceFromHsl = function (e) { var t = e.match(n.reHSLa); if (t) { var i, o, a, s = (parseFloat(t[1]) % 360 + 360) % 360 / 360, l = parseFloat(t[2]) / (/%$/.test(t[2]) ? 100 : 1), u = parseFloat(t[3]) / (/%$/.test(t[3]) ? 100 : 1); if (0 === l) i = o = a = u; else { var c = u <= .5 ? u * (l + 1) : u + l - u * l, f = 2 * u - c; i = r(f, c, s + 1 / 3), o = r(f, c, s), a = r(f, c, s - 1 / 3) } return [Math.round(255 * i), Math.round(255 * o), Math.round(255 * a), t[4] ? parseFloat(t[4]) : 1] } }, t.Color.fromHsla = n.fromHsl, t.Color.fromHex = function (e) { return n.fromSource(n.sourceFromHex(e)) }, t.Color.sourceFromHex = function (e) { if (e.match(n.reHex)) { var t = e.slice(e.indexOf("#") + 1), r = 3 === t.length || 4 === t.length, i = 8 === t.length || 4 === t.length, o = r ? t.charAt(0) + t.charAt(0) : t.substring(0, 2), a = r ? t.charAt(1) + t.charAt(1) : t.substring(2, 4), s = r ? t.charAt(2) + t.charAt(2) : t.substring(4, 6), l = i ? r ? t.charAt(3) + t.charAt(3) : t.substring(6, 8) : "FF"; return [parseInt(o, 16), parseInt(a, 16), parseInt(s, 16), parseFloat((parseInt(l, 16) / 255).toFixed(2))] } }, t.Color.fromSource = function (e) { var t = new n; return t.setSource(e), t }) }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = ["e", "se", "s", "sw", "w", "nw", "n", "ne", "e"], r = ["ns", "nesw", "ew", "nwse"], i = {}, o = "left", a = "top", s = "right", l = "bottom", u = "center", c = { top: l, bottom: a, left: s, right: o, center: u }, f = t.util.radiansToDegrees, h = Math.sign || function (e) { return (e > 0) - (e < 0) || +e }; function d(e, t) { var n = e.angle + f(Math.atan2(t.y, t.x)) + 360; return Math.round(n % 360 / 45) } function p(e, n) { var r = n.transform.target, i = r.canvas, o = t.util.object.clone(n); o.target = r, i && i.fire("object:" + e, o), r.fire(e, n) } function v(e, t) { var n = t.canvas, r = e[n.uniScaleKey]; return n.uniformScaling && !r || !n.uniformScaling && r } function g(e) { return e.originX === u && e.originY === u } function m(e, t, n) { var r = e.lockScalingX, i = e.lockScalingY; return !!(r && i || !t && (r || i) && n || r && "x" === t || i && "y" === t) } function y(e, t, n, r) { return { e: e, transform: t, pointer: { x: n, y: r } } } function b(e) { return function (t, n, r, i) { var o = n.target, a = o.getCenterPoint(), s = o.translateToOriginPoint(a, n.originX, n.originY), l = e(t, n, r, i); return o.setPositionByOrigin(s, n.originX, n.originY), l } } function w(e, t) { return function (n, r, i, o) { var a = t(n, r, i, o); return a && p(e, y(n, r, i, o)), a } } function x(e, n, r, i, o) { var a = e.target, s = a.controls[e.corner], l = a.canvas.getZoom(), u = a.padding / l, c = a.toLocalPoint(new t.Point(i, o), n, r); return c.x >= u && (c.x -= u), c.x <= -u && (c.x += u), c.y >= u && (c.y -= u), c.y <= u && (c.y += u), c.x -= s.offsetX, c.y -= s.offsetY, c } function _(e) { return e.flipX !== e.flipY } function S(e, t, n, r, i) { if (0 !== e[t]) { var o = i / e._getTransformedDimensions()[r] * e[n]; e.set(n, o) } } function k(e, t, n, r) { var i, u = t.target, c = u._getTransformedDimensions(0, u.skewY), h = x(t, t.originX, t.originY, n, r), d = Math.abs(2 * h.x) - c.x, p = u.skewX; d < 2 ? i = 0 : (i = f(Math.atan2(d / u.scaleX, c.y / u.scaleY)), t.originX === o && t.originY === l && (i = -i), t.originX === s && t.originY === a && (i = -i), _(u) && (i = -i)); var v = p !== i; if (v) { var g = u._getTransformedDimensions().y; u.set("skewX", i), S(u, "skewY", "scaleY", "y", g) } return v } function C(e, t, n, r) { var i, u = t.target, c = u._getTransformedDimensions(u.skewX, 0), h = x(t, t.originX, t.originY, n, r), d = Math.abs(2 * h.y) - c.y, p = u.skewY; d < 2 ? i = 0 : (i = f(Math.atan2(d / u.scaleY, c.x / u.scaleX)), t.originX === o && t.originY === l && (i = -i), t.originX === s && t.originY === a && (i = -i), _(u) && (i = -i)); var v = p !== i; if (v) { var g = u._getTransformedDimensions().x; u.set("skewY", i), S(u, "skewX", "scaleX", "x", g) } return v } function T(e, t, n, r, i) { i = i || {}; var o, a, s, l, u, f, d = t.target, p = d.lockScalingX, y = d.lockScalingY, b = i.by, w = v(e, d), _ = m(d, b, w), S = t.gestureScale; if (_) return !1; if (S) a = t.scaleX * S, s = t.scaleY * S; else { if (o = x(t, t.originX, t.originY, n, r), u = "y" !== b ? h(o.x) : 1, f = "x" !== b ? h(o.y) : 1, t.signX || (t.signX = u), t.signY || (t.signY = f), d.lockScalingFlip && (t.signX !== u || t.signY !== f)) return !1; if (l = d._getTransformedDimensions(), w && !b) { var k = Math.abs(o.x) + Math.abs(o.y), C = t.original, T = k / (Math.abs(l.x * C.scaleX / d.scaleX) + Math.abs(l.y * C.scaleY / d.scaleY)); a = C.scaleX * T, s = C.scaleY * T } else a = Math.abs(o.x * d.scaleX / l.x), s = Math.abs(o.y * d.scaleY / l.y); g(t) && (a *= 2, s *= 2), t.signX !== u && "y" !== b && (t.originX = c[t.originX], a *= -1, t.signX = u), t.signY !== f && "x" !== b && (t.originY = c[t.originY], s *= -1, t.signY = f) } var E = d.scaleX, O = d.scaleY; return b ? ("x" === b && d.set("scaleX", a), "y" === b && d.set("scaleY", s)) : (!p && d.set("scaleX", a), !y && d.set("scaleY", s)), E !== d.scaleX || O !== d.scaleY } i.scaleCursorStyleHandler = function (e, t, r) { var i = v(e, r), o = ""; if (0 !== t.x && 0 === t.y ? o = "x" : 0 === t.x && 0 !== t.y && (o = "y"), m(r, o, i)) return "not-allowed"; var a = d(r, t); return n[a] + "-resize" }, i.skewCursorStyleHandler = function (e, t, n) { if (0 !== t.x && n.lockSkewingY || 0 !== t.y && n.lockSkewingX) return "not-allowed"; var i = d(n, t) % 4; return r[i] + "-resize" }, i.scaleSkewCursorStyleHandler = function (e, t, n) { return e[n.canvas.altActionKey] ? i.skewCursorStyleHandler(e, t, n) : i.scaleCursorStyleHandler(e, t, n) }, i.rotationWithSnapping = w("rotating", b((function (e, t, n, r) { var i = t, o = i.target, a = o.translateToOriginPoint(o.getCenterPoint(), i.originX, i.originY); if (o.lockRotation) return !1; var s, l = Math.atan2(i.ey - a.y, i.ex - a.x), u = Math.atan2(r - a.y, n - a.x), c = f(u - l + i.theta); if (o.snapAngle > 0) { var h = o.snapAngle, d = o.snapThreshold || h, p = Math.ceil(c / h) * h, v = Math.floor(c / h) * h; Math.abs(c - v) < d ? c = v : Math.abs(c - p) < d && (c = p) } return c < 0 && (c = 360 + c), c %= 360, s = o.angle !== c, o.angle = c, s }))), i.scalingEqually = w("scaling", b((function (e, t, n, r) { return T(e, t, n, r) }))), i.scalingX = w("scaling", b((function (e, t, n, r) { return T(e, t, n, r, { by: "x" }) }))), i.scalingY = w("scaling", b((function (e, t, n, r) { return T(e, t, n, r, { by: "y" }) }))), i.scalingYOrSkewingX = function (e, t, n, r) { return e[t.target.canvas.altActionKey] ? i.skewHandlerX(e, t, n, r) : i.scalingY(e, t, n, r) }, i.scalingXOrSkewingY = function (e, t, n, r) { return e[t.target.canvas.altActionKey] ? i.skewHandlerY(e, t, n, r) : i.scalingX(e, t, n, r) }, i.changeWidth = w("resizing", b((function (e, t, n, r) { var i = t.target, o = x(t, t.originX, t.originY, n, r), a = i.strokeWidth / (i.strokeUniform ? i.scaleX : 1), s = g(t) ? 2 : 1, l = i.width, u = Math.abs(o.x * s / i.scaleX) - a; return i.set("width", Math.max(u, 0)), l !== u }))), i.skewHandlerX = function (e, t, n, r) { var i, l = t.target, c = l.skewX, f = t.originY; return !l.lockSkewingX && (0 === c ? i = x(t, u, u, n, r).x > 0 ? o : s : (c > 0 && (i = f === a ? o : s), c < 0 && (i = f === a ? s : o), _(l) && (i = i === o ? s : o)), t.originX = i, w("skewing", b(k))(e, t, n, r)) }, i.skewHandlerY = function (e, t, n, r) { var i, s = t.target, c = s.skewY, f = t.originX; return !s.lockSkewingY && (0 === c ? i = x(t, u, u, n, r).y > 0 ? a : l : (c > 0 && (i = f === o ? a : l), c < 0 && (i = f === o ? l : a), _(s) && (i = i === a ? l : a)), t.originY = i, w("skewing", b(C))(e, t, n, r)) }, i.dragHandler = function (e, t, n, r) { var i = t.target, o = n - t.offsetX, a = r - t.offsetY, s = !i.get("lockMovementX") && i.left !== o, l = !i.get("lockMovementY") && i.top !== a; return s && i.set("left", o), l && i.set("top", a), (s || l) && p("moving", y(e, t, n, r)), s || l }, i.scaleOrSkewActionName = function (e, t, n) { var r = e[n.canvas.altActionKey]; return 0 === t.x ? r ? "skewX" : "scaleY" : 0 === t.y ? r ? "skewY" : "scaleX" : void 0 }, i.rotationStyleHandler = function (e, t, n) { return n.lockRotation ? "not-allowed" : t.cursorStyle }, i.fireEvent = p, i.wrapWithFixedAnchor = b, i.wrapWithFireEvent = w, i.getLocalPoint = x, t.controlsUtils = i }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = t.util.degreesToRadians, r = t.controlsUtils; r.renderCircleControl = function (e, t, n, r, i) { r = r || {}; var o, a = this.sizeX || r.cornerSize || i.cornerSize, s = this.sizeY || r.cornerSize || i.cornerSize, l = void 0 !== r.transparentCorners ? r.transparentCorners : i.transparentCorners, u = l ? "stroke" : "fill", c = !l && (r.cornerStrokeColor || i.cornerStrokeColor), f = t, h = n; e.save(), e.fillStyle = r.cornerColor || i.cornerColor, e.strokeStyle = r.cornerStrokeColor || i.cornerStrokeColor, a > s ? (o = a, e.scale(1, s / a), h = n * a / s) : s > a ? (o = s, e.scale(a / s, 1), f = t * s / a) : o = a, e.lineWidth = 1, e.beginPath(), e.arc(f, h, o / 2, 0, 2 * Math.PI, !1), e[u](), c && e.stroke(), e.restore() }, r.renderSquareControl = function (e, t, r, i, o) { i = i || {}; var a = this.sizeX || i.cornerSize || o.cornerSize, s = this.sizeY || i.cornerSize || o.cornerSize, l = void 0 !== i.transparentCorners ? i.transparentCorners : o.transparentCorners, u = l ? "stroke" : "fill", c = !l && (i.cornerStrokeColor || o.cornerStrokeColor), f = a / 2, h = s / 2; e.save(), e.fillStyle = i.cornerColor || o.cornerColor, e.strokeStyle = i.cornerStrokeColor || o.cornerStrokeColor, e.lineWidth = 1, e.translate(t, r), e.rotate(n(o.angle)), e[u + "Rect"](-f, -h, a, s), c && e.strokeRect(-f, -h, a, s), e.restore() } }(e), function (e) { var t = e.fabric || (e.fabric = {}); t.Control = function (e) { for (var t in e) this[t] = e[t] }, t.Control.prototype = { visible: !0, actionName: "scale", angle: 0, x: 0, y: 0, offsetX: 0, offsetY: 0, sizeX: null, sizeY: null, touchSizeX: null, touchSizeY: null, cursorStyle: "crosshair", withConnection: !1, actionHandler: function () { }, mouseDownHandler: function () { }, mouseUpHandler: function () { }, getActionHandler: function () { return this.actionHandler }, getMouseDownHandler: function () { return this.mouseDownHandler }, getMouseUpHandler: function () { return this.mouseUpHandler }, cursorStyleHandler: function (e, t) { return t.cursorStyle }, getActionName: function (e, t) { return t.actionName }, getVisibility: function (e, t) { var n = e._controlsVisibility; return n && void 0 !== n[t] ? n[t] : this.visible }, setVisibility: function (e) { this.visible = e }, positionHandler: function (e, n) { return t.util.transformPoint({ x: this.x * e.x + this.offsetX, y: this.y * e.y + this.offsetY }, n) }, calcCornerCoords: function (e, n, r, i, o) { var a, s, l, u, c = o ? this.touchSizeX : this.sizeX, f = o ? this.touchSizeY : this.sizeY; if (c && f && c !== f) { var h = Math.atan2(f, c), d = Math.sqrt(c * c + f * f) / 2, p = h - t.util.degreesToRadians(e), v = Math.PI / 2 - h - t.util.degreesToRadians(e); a = d * t.util.cos(p), s = d * t.util.sin(p), l = d * t.util.cos(v), u = d * t.util.sin(v) } else d = .7071067812 * (c && f ? c : n), p = t.util.degreesToRadians(45 - e), a = l = d * t.util.cos(p), s = u = d * t.util.sin(p); return { tl: { x: r - u, y: i - l }, tr: { x: r + a, y: i - s }, bl: { x: r - a, y: i + s }, br: { x: r + u, y: i + l } } }, render: function (e, n, r, i, o) { "circle" === ((i = i || {}).cornerStyle || o.cornerStyle) ? t.controlsUtils.renderCircleControl.call(this, e, n, r, i, o) : t.controlsUtils.renderSquareControl.call(this, e, n, r, i, o) } } }(e), function () { function e(e, t) { var n, r, i, o, a = e.getAttribute("style"), l = e.getAttribute("offset") || 0; if (l = (l = parseFloat(l) / (/%$/.test(l) ? 100 : 1)) < 0 ? 0 : l > 1 ? 1 : l, a) { var u = a.split(/\s*;\s*/); for ("" === u[u.length - 1] && u.pop(), o = u.length; o--;) { var c = u[o].split(/\s*:\s*/), f = c[0].trim(), h = c[1].trim(); "stop-color" === f ? n = h : "stop-opacity" === f && (i = h) } } return n || (n = e.getAttribute("stop-color") || "rgb(0,0,0)"), i || (i = e.getAttribute("stop-opacity")), r = (n = new s.Color(n)).getAlpha(), i = isNaN(parseFloat(i)) ? 1 : parseFloat(i), i *= r * t, { offset: l, color: n.toRgb(), opacity: i } } var t = s.util.object.clone; s.Gradient = s.util.createClass({ offsetX: 0, offsetY: 0, gradientTransform: null, gradientUnits: "pixels", type: "linear", initialize: function (e) { e || (e = {}), e.coords || (e.coords = {}); var t, n = this; Object.keys(e).forEach((function (t) { n[t] = e[t] })), this.id ? this.id += "_" + s.Object.__uid++ : this.id = s.Object.__uid++, t = { x1: e.coords.x1 || 0, y1: e.coords.y1 || 0, x2: e.coords.x2 || 0, y2: e.coords.y2 || 0 }, "radial" === this.type && (t.r1 = e.coords.r1 || 0, t.r2 = e.coords.r2 || 0), this.coords = t, this.colorStops = e.colorStops.slice() }, addColorStop: function (e) { for (var t in e) { var n = new s.Color(e[t]); this.colorStops.push({ offset: parseFloat(t), color: n.toRgb(), opacity: n.getAlpha() }) } return this }, toObject: function (e) { var t = { type: this.type, coords: this.coords, colorStops: this.colorStops, offsetX: this.offsetX, offsetY: this.offsetY, gradientUnits: this.gradientUnits, gradientTransform: this.gradientTransform ? this.gradientTransform.concat() : this.gradientTransform }; return s.util.populateWithProperties(this, t, e), t }, toSVG: function (e, n) { var r, i, o, a, l = t(this.coords, !0), u = (n = n || {}, t(this.colorStops, !0)), c = l.r1 > l.r2, f = this.gradientTransform ? this.gradientTransform.concat() : s.iMatrix.concat(), h = -this.offsetX, d = -this.offsetY, p = !!n.additionalTransform, v = "pixels" === this.gradientUnits ? "userSpaceOnUse" : "objectBoundingBox"; if (u.sort((function (e, t) { return e.offset - t.offset })), "objectBoundingBox" === v ? (h /= e.width, d /= e.height) : (h += e.width / 2, d += e.height / 2), "path" === e.type && "percentage" !== this.gradientUnits && (h -= e.pathOffset.x, d -= e.pathOffset.y), f[4] -= h, f[5] -= d, a = 'id="SVGID_' + this.id + '" gradientUnits="' + v + '"', a += ' gradientTransform="' + (p ? n.additionalTransform + " " : "") + s.util.matrixToSVG(f) + '" ', "linear" === this.type ? o = ["<linearGradient ", a, ' x1="', l.x1, '" y1="', l.y1, '" x2="', l.x2, '" y2="', l.y2, '">\n'] : "radial" === this.type && (o = ["<radialGradient ", a, ' cx="', c ? l.x1 : l.x2, '" cy="', c ? l.y1 : l.y2, '" r="', c ? l.r1 : l.r2, '" fx="', c ? l.x2 : l.x1, '" fy="', c ? l.y2 : l.y1, '">\n']), "radial" === this.type) { if (c) for ((u = u.concat()).reverse(), r = 0, i = u.length; r < i; r++)u[r].offset = 1 - u[r].offset; var g = Math.min(l.r1, l.r2); if (g > 0) { var m = g / Math.max(l.r1, l.r2); for (r = 0, i = u.length; r < i; r++)u[r].offset += m * (1 - u[r].offset) } } for (r = 0, i = u.length; r < i; r++) { var y = u[r]; o.push("<stop ", 'offset="', 100 * y.offset + "%", '" style="stop-color:', y.color, void 0 !== y.opacity ? ";stop-opacity: " + y.opacity : ";", '"/>\n') } return o.push("linear" === this.type ? "</linearGradient>\n" : "</radialGradient>\n"), o.join("") }, toLive: function (e) { var t, n, r, i = s.util.object.clone(this.coords); if (this.type) { for ("linear" === this.type ? t = e.createLinearGradient(i.x1, i.y1, i.x2, i.y2) : "radial" === this.type && (t = e.createRadialGradient(i.x1, i.y1, i.r1, i.x2, i.y2, i.r2)), n = 0, r = this.colorStops.length; n < r; n++) { var o = this.colorStops[n].color, a = this.colorStops[n].opacity, l = this.colorStops[n].offset; void 0 !== a && (o = new s.Color(o).setAlpha(a).toRgba()), t.addColorStop(l, o) } return t } } }), s.util.object.extend(s.Gradient, { fromElement: function (t, n, r, i) { var o = parseFloat(r) / (/%$/.test(r) ? 100 : 1); o = o < 0 ? 0 : o > 1 ? 1 : o, isNaN(o) && (o = 1); var a, l, u, c, f = t.getElementsByTagName("stop"), h = "userSpaceOnUse" === t.getAttribute("gradientUnits") ? "pixels" : "percentage", d = t.getAttribute("gradientTransform") || "", p = [], v = 0, g = 0; for ("linearGradient" === t.nodeName || "LINEARGRADIENT" === t.nodeName ? (a = "linear", l = function (e) { return { x1: e.getAttribute("x1") || 0, y1: e.getAttribute("y1") || 0, x2: e.getAttribute("x2") || "100%", y2: e.getAttribute("y2") || 0 } }(t)) : (a = "radial", l = function (e) { return { x1: e.getAttribute("fx") || e.getAttribute("cx") || "50%", y1: e.getAttribute("fy") || e.getAttribute("cy") || "50%", r1: 0, x2: e.getAttribute("cx") || "50%", y2: e.getAttribute("cy") || "50%", r2: e.getAttribute("r") || "50%" } }(t)), u = f.length; u--;)p.push(e(f[u], o)); return c = s.parseTransformAttribute(d), function (e, t, n, r) { var i, o; Object.keys(t).forEach((function (e) { "Infinity" === (i = t[e]) ? o = 1 : "-Infinity" === i ? o = 0 : (o = parseFloat(t[e], 10), "string" == typeof i && /^(\d+\.\d+)%|(\d+)%$/.test(i) && (o *= .01, "pixels" === r && (("x1" === e || "x2" === e || "r2" === e) && (o *= n.viewBoxWidth || n.width), ("y1" === e || "y2" === e) && (o *= n.viewBoxHeight || n.height)))), t[e] = o })) }(0, l, i, h), "pixels" === h && (v = -n.left, g = -n.top), new s.Gradient({ id: t.getAttribute("id"), type: a, coords: l, colorStops: p, gradientUnits: h, gradientTransform: c, offsetX: v, offsetY: g }) } }) }(), function () { var e = s.util.toFixed; s.Pattern = s.util.createClass({ repeat: "repeat", offsetX: 0, offsetY: 0, crossOrigin: "", patternTransform: null, initialize: function (e, t) { if (e || (e = {}), this.id = s.Object.__uid++, this.setOptions(e), !e.source || e.source && "string" != typeof e.source) t && t(this); else { var n = this; this.source = s.util.createImage(), s.util.loadImage(e.source, (function (e, r) { n.source = e, t && t(n, r) }), null, this.crossOrigin) } }, toObject: function (t) { var n, r, i = s.Object.NUM_FRACTION_DIGITS; return "string" == typeof this.source.src ? n = this.source.src : "object" == C(this.source) && this.source.toDataURL && (n = this.source.toDataURL()), r = { type: "pattern", source: n, repeat: this.repeat, crossOrigin: this.crossOrigin, offsetX: e(this.offsetX, i), offsetY: e(this.offsetY, i), patternTransform: this.patternTransform ? this.patternTransform.concat() : null }, s.util.populateWithProperties(this, r, t), r }, toSVG: function (e) { var t = "function" == typeof this.source ? this.source() : this.source, n = t.width / e.width, r = t.height / e.height, i = this.offsetX / e.width, o = this.offsetY / e.height, a = ""; return ("repeat-x" === this.repeat || "no-repeat" === this.repeat) && (r = 1, o && (r += Math.abs(o))), ("repeat-y" === this.repeat || "no-repeat" === this.repeat) && (n = 1, i && (n += Math.abs(i))), t.src ? a = t.src : t.toDataURL && (a = t.toDataURL()), '<pattern id="SVGID_' + this.id + '" x="' + i + '" y="' + o + '" width="' + n + '" height="' + r + '">\n<image x="0" y="0" width="' + t.width + '" height="' + t.height + '" xlink:href="' + a + '"></image>\n</pattern>\n' }, setOptions: function (e) { for (var t in e) this[t] = e[t] }, toLive: function (e) { var t = this.source; return t && (void 0 === t.src || t.complete && 0 !== t.naturalWidth && 0 !== t.naturalHeight) ? e.createPattern(t, this.repeat) : "" } }) }(), function (e) { var t = e.fabric || (e.fabric = {}), n = t.util.toFixed; t.Shadow ? t.warn("fabric.Shadow is already defined.") : (t.Shadow = t.util.createClass({ color: "rgb(0,0,0)", blur: 0, offsetX: 0, offsetY: 0, affectStroke: !1, includeDefaultValues: !0, nonScaling: !1, initialize: function (e) { for (var n in "string" == typeof e && (e = this._parseShadow(e)), e) this[n] = e[n]; this.id = t.Object.__uid++ }, _parseShadow: function (e) { var n = e.trim(), r = t.Shadow.reOffsetsAndBlur.exec(n) || []; return { color: (n.replace(t.Shadow.reOffsetsAndBlur, "") || "rgb(0,0,0)").trim(), offsetX: parseFloat(r[1], 10) || 0, offsetY: parseFloat(r[2], 10) || 0, blur: parseFloat(r[3], 10) || 0 } }, toString: function () { return [this.offsetX, this.offsetY, this.blur, this.color].join("px ") }, toSVG: function (e) { var r = 40, i = 40, o = t.Object.NUM_FRACTION_DIGITS, a = t.util.rotateVector({ x: this.offsetX, y: this.offsetY }, t.util.degreesToRadians(-e.angle)), s = new t.Color(this.color); return e.width && e.height && (r = 100 * n((Math.abs(a.x) + this.blur) / e.width, o) + 20, i = 100 * n((Math.abs(a.y) + this.blur) / e.height, o) + 20), e.flipX && (a.x *= -1), e.flipY && (a.y *= -1), '<filter id="SVGID_' + this.id + '" y="-' + i + '%" height="' + (100 + 2 * i) + '%" x="-' + r + '%" width="' + (100 + 2 * r) + '%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="' + n(this.blur ? this.blur / 2 : 0, o) + '"></feGaussianBlur>\n\t<feOffset dx="' + n(a.x, o) + '" dy="' + n(a.y, o) + '" result="oBlur" ></feOffset>\n\t<feFlood flood-color="' + s.toRgb() + '" flood-opacity="' + s.getAlpha() + '"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n' }, toObject: function () { if (this.includeDefaultValues) return { color: this.color, blur: this.blur, offsetX: this.offsetX, offsetY: this.offsetY, affectStroke: this.affectStroke, nonScaling: this.nonScaling }; var e = {}, n = t.Shadow.prototype; return ["color", "blur", "offsetX", "offsetY", "affectStroke", "nonScaling"].forEach((function (t) { this[t] !== n[t] && (e[t] = this[t]) }), this), e } }), t.Shadow.reOffsetsAndBlur = /(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/) }(e), function () { if (s.StaticCanvas) s.warn("fabric.StaticCanvas is already defined."); else { var e = s.util.object.extend, t = s.util.getElementOffset, n = s.util.removeFromArray, r = s.util.toFixed, i = s.util.transformPoint, o = s.util.invertTransform, a = s.util.getNodeCanvas, l = s.util.createCanvasElement, u = new Error("Could not initialize `canvas` element"); s.StaticCanvas = s.util.createClass(s.CommonMethods, { initialize: function (e, t) { t || (t = {}), this.renderAndResetBound = this.renderAndReset.bind(this), this.requestRenderAllBound = this.requestRenderAll.bind(this), this._initStatic(e, t) }, backgroundColor: "", backgroundImage: null, overlayColor: "", overlayImage: null, includeDefaultValues: !0, stateful: !1, renderOnAddRemove: !0, controlsAboveOverlay: !1, allowTouchScrolling: !1, imageSmoothingEnabled: !0, viewportTransform: s.iMatrix.concat(), backgroundVpt: !0, overlayVpt: !0, enableRetinaScaling: !0, vptCoords: {}, skipOffscreen: !0, clipPath: void 0, _initStatic: function (e, t) { var n = this.requestRenderAllBound; this._objects = [], this._createLowerCanvas(e), this._initOptions(t), this.interactive || this._initRetinaScaling(), t.overlayImage && this.setOverlayImage(t.overlayImage, n), t.backgroundImage && this.setBackgroundImage(t.backgroundImage, n), t.backgroundColor && this.setBackgroundColor(t.backgroundColor, n), t.overlayColor && this.setOverlayColor(t.overlayColor, n), this.calcOffset() }, _isRetinaScaling: function () { return 1 !== s.devicePixelRatio && this.enableRetinaScaling }, getRetinaScaling: function () { return this._isRetinaScaling() ? s.devicePixelRatio : 1 }, _initRetinaScaling: function () { if (this._isRetinaScaling()) { var e = s.devicePixelRatio; this.__initRetinaScaling(e, this.lowerCanvasEl, this.contextContainer), this.upperCanvasEl && this.__initRetinaScaling(e, this.upperCanvasEl, this.contextTop) } }, __initRetinaScaling: function (e, t, n) { t.setAttribute("width", this.width * e), t.setAttribute("height", this.height * e), n.scale(e, e) }, calcOffset: function () { return this._offset = t(this.lowerCanvasEl), this }, setOverlayImage: function (e, t, n) { return this.__setBgOverlayImage("overlayImage", e, t, n) }, setBackgroundImage: function (e, t, n) { return this.__setBgOverlayImage("backgroundImage", e, t, n) }, setOverlayColor: function (e, t) { return this.__setBgOverlayColor("overlayColor", e, t) }, setBackgroundColor: function (e, t) { return this.__setBgOverlayColor("backgroundColor", e, t) }, __setBgOverlayImage: function (e, t, n, r) { return "string" == typeof t ? s.util.loadImage(t, (function (t, i) { if (t) { var o = new s.Image(t, r); this[e] = o, o.canvas = this } n && n(t, i) }), this, r && r.crossOrigin) : (r && t.setOptions(r), this[e] = t, t && (t.canvas = this), n && n(t, !1)), this }, __setBgOverlayColor: function (e, t, n) { return this[e] = t, this._initGradient(t, e), this._initPattern(t, e, n), this }, _createCanvasElement: function () { var e = l(); if (!e || (e.style || (e.style = {}), void 0 === e.getContext)) throw u; return e }, _initOptions: function (e) { var t = this.lowerCanvasEl; this._setOptions(e), this.width = this.width || parseInt(t.width, 10) || 0, this.height = this.height || parseInt(t.height, 10) || 0, this.lowerCanvasEl.style && (t.width = this.width, t.height = this.height, t.style.width = this.width + "px", t.style.height = this.height + "px", this.viewportTransform = this.viewportTransform.slice()) }, _createLowerCanvas: function (e) { e && e.getContext ? this.lowerCanvasEl = e : this.lowerCanvasEl = s.util.getById(e) || this._createCanvasElement(), s.util.addClass(this.lowerCanvasEl, "lower-canvas"), this._originalCanvasStyle = this.lowerCanvasEl.style, this.interactive && this._applyCanvasStyle(this.lowerCanvasEl), this.contextContainer = this.lowerCanvasEl.getContext("2d") }, getWidth: function () { return this.width }, getHeight: function () { return this.height }, setWidth: function (e, t) { return this.setDimensions({ width: e }, t) }, setHeight: function (e, t) { return this.setDimensions({ height: e }, t) }, setDimensions: function (e, t) { var n; for (var r in t = t || {}, e) n = e[r], t.cssOnly || (this._setBackstoreDimension(r, e[r]), n += "px", this.hasLostContext = !0), t.backstoreOnly || this._setCssDimension(r, n); return this._isCurrentlyDrawing && this.freeDrawingBrush && this.freeDrawingBrush._setBrushStyles(), this._initRetinaScaling(), this.calcOffset(), t.cssOnly || this.requestRenderAll(), this }, _setBackstoreDimension: function (e, t) { return this.lowerCanvasEl[e] = t, this.upperCanvasEl && (this.upperCanvasEl[e] = t), this.cacheCanvasEl && (this.cacheCanvasEl[e] = t), this[e] = t, this }, _setCssDimension: function (e, t) { return this.lowerCanvasEl.style[e] = t, this.upperCanvasEl && (this.upperCanvasEl.style[e] = t), this.wrapperEl && (this.wrapperEl.style[e] = t), this }, getZoom: function () { return this.viewportTransform[0] }, setViewportTransform: function (e) { var t, n, r, i = this._activeObject, o = this.backgroundImage, a = this.overlayImage; for (this.viewportTransform = e, n = 0, r = this._objects.length; n < r; n++)(t = this._objects[n]).group || t.setCoords(!0); return i && i.setCoords(), o && o.setCoords(!0), a && a.setCoords(!0), this.calcViewportBoundaries(), this.renderOnAddRemove && this.requestRenderAll(), this }, zoomToPoint: function (e, t) { var n = e, r = this.viewportTransform.slice(0); e = i(e, o(this.viewportTransform)), r[0] = t, r[3] = t; var a = i(e, r); return r[4] += n.x - a.x, r[5] += n.y - a.y, this.setViewportTransform(r) }, setZoom: function (e) { return this.zoomToPoint(new s.Point(0, 0), e), this }, absolutePan: function (e) { var t = this.viewportTransform.slice(0); return t[4] = -e.x, t[5] = -e.y, this.setViewportTransform(t) }, relativePan: function (e) { return this.absolutePan(new s.Point(-e.x - this.viewportTransform[4], -e.y - this.viewportTransform[5])) }, getElement: function () { return this.lowerCanvasEl }, _onObjectAdded: function (e) { this.stateful && e.setupState(), e._set("canvas", this), e.setCoords(), this.fire("object:added", { target: e }), e.fire("added") }, _onObjectRemoved: function (e) { this.fire("object:removed", { target: e }), e.fire("removed"), delete e.canvas }, clearContext: function (e) { return e.clearRect(0, 0, this.width, this.height), this }, getContext: function () { return this.contextContainer }, clear: function () { return this.remove.apply(this, this.getObjects()), this.backgroundImage = null, this.overlayImage = null, this.backgroundColor = "", this.overlayColor = "", this._hasITextHandlers && (this.off("mouse:up", this._mouseUpITextHandler), this._iTextInstances = null, this._hasITextHandlers = !1), this.clearContext(this.contextContainer), this.fire("canvas:cleared"), this.renderOnAddRemove && this.requestRenderAll(), this }, renderAll: function () { var e = this.contextContainer; return this.renderCanvas(e, this._objects), this }, renderAndReset: function () { this.isRendering = 0, this.renderAll() }, requestRenderAll: function () { return this.isRendering || (this.isRendering = s.util.requestAnimFrame(this.renderAndResetBound)), this }, calcViewportBoundaries: function () { var e = {}, t = this.width, n = this.height, r = o(this.viewportTransform); return e.tl = i({ x: 0, y: 0 }, r), e.br = i({ x: t, y: n }, r), e.tr = new s.Point(e.br.x, e.tl.y), e.bl = new s.Point(e.tl.x, e.br.y), this.vptCoords = e, e }, cancelRequestedRender: function () { this.isRendering && (s.util.cancelAnimFrame(this.isRendering), this.isRendering = 0) }, renderCanvas: function (e, t) { var n = this.viewportTransform, r = this.clipPath; this.cancelRequestedRender(), this.calcViewportBoundaries(), this.clearContext(e), s.util.setImageSmoothing(e, this.imageSmoothingEnabled), this.fire("before:render", { ctx: e }), this._renderBackground(e), e.save(), e.transform(n[0], n[1], n[2], n[3], n[4], n[5]), this._renderObjects(e, t), e.restore(), !this.controlsAboveOverlay && this.interactive && this.drawControls(e), r && (r.canvas = this, r.shouldCache(), r._transformDone = !0, r.renderCache({ forClipping: !0 }), this.drawClipPathOnCanvas(e)), this._renderOverlay(e), this.controlsAboveOverlay && this.interactive && this.drawControls(e), this.fire("after:render", { ctx: e }) }, drawClipPathOnCanvas: function (e) { var t = this.viewportTransform, n = this.clipPath; e.save(), e.transform(t[0], t[1], t[2], t[3], t[4], t[5]), e.globalCompositeOperation = "destination-in", n.transform(e), e.scale(1 / n.zoomX, 1 / n.zoomY), e.drawImage(n._cacheCanvas, -n.cacheTranslationX, -n.cacheTranslationY), e.restore() }, _renderObjects: function (e, t) { var n, r; for (n = 0, r = t.length; n < r; ++n)t[n] && t[n].render(e) }, _renderBackgroundOrOverlay: function (e, t) { var n = this[t + "Color"], r = this[t + "Image"], i = this.viewportTransform, o = this[t + "Vpt"]; if (n || r) { if (n) { e.save(), e.beginPath(), e.moveTo(0, 0), e.lineTo(this.width, 0), e.lineTo(this.width, this.height), e.lineTo(0, this.height), e.closePath(), e.fillStyle = n.toLive ? n.toLive(e, this) : n, o && e.transform(i[0], i[1], i[2], i[3], i[4], i[5]), e.transform(1, 0, 0, 1, n.offsetX || 0, n.offsetY || 0); var a = n.gradientTransform || n.patternTransform; a && e.transform(a[0], a[1], a[2], a[3], a[4], a[5]), e.fill(), e.restore() } r && (e.save(), o && e.transform(i[0], i[1], i[2], i[3], i[4], i[5]), r.render(e), e.restore()) } }, _renderBackground: function (e) { this._renderBackgroundOrOverlay(e, "background") }, _renderOverlay: function (e) { this._renderBackgroundOrOverlay(e, "overlay") }, getCenter: function () { return { top: this.height / 2, left: this.width / 2 } }, centerObjectH: function (e) { return this._centerObject(e, new s.Point(this.getCenter().left, e.getCenterPoint().y)) }, centerObjectV: function (e) { return this._centerObject(e, new s.Point(e.getCenterPoint().x, this.getCenter().top)) }, centerObject: function (e) { var t = this.getCenter(); return this._centerObject(e, new s.Point(t.left, t.top)) }, viewportCenterObject: function (e) { var t = this.getVpCenter(); return this._centerObject(e, t) }, viewportCenterObjectH: function (e) { var t = this.getVpCenter(); return this._centerObject(e, new s.Point(t.x, e.getCenterPoint().y)), this }, viewportCenterObjectV: function (e) { var t = this.getVpCenter(); return this._centerObject(e, new s.Point(e.getCenterPoint().x, t.y)) }, getVpCenter: function () { var e = this.getCenter(), t = o(this.viewportTransform); return i({ x: e.left, y: e.top }, t) }, _centerObject: function (e, t) { return e.setPositionByOrigin(t, "center", "center"), e.setCoords(), this.renderOnAddRemove && this.requestRenderAll(), this }, toDatalessJSON: function (e) { return this.toDatalessObject(e) }, toObject: function (e) { return this._toObjectMethod("toObject", e) }, toDatalessObject: function (e) { return this._toObjectMethod("toDatalessObject", e) }, _toObjectMethod: function (t, n) { var r = this.clipPath, i = { version: s.version, objects: this._toObjects(t, n) }; return r && !r.excludeFromExport && (i.clipPath = this._toObject(this.clipPath, t, n)), e(i, this.__serializeBgOverlay(t, n)), s.util.populateWithProperties(this, i, n), i }, _toObjects: function (e, t) { return this._objects.filter((function (e) { return !e.excludeFromExport })).map((function (n) { return this._toObject(n, e, t) }), this) }, _toObject: function (e, t, n) { var r; this.includeDefaultValues || (r = e.includeDefaultValues, e.includeDefaultValues = !1); var i = e[t](n); return this.includeDefaultValues || (e.includeDefaultValues = r), i }, __serializeBgOverlay: function (e, t) { var n = {}, r = this.backgroundImage, i = this.overlayImage, o = this.backgroundColor, a = this.overlayColor; return o && o.toObject ? o.excludeFromExport || (n.background = o.toObject(t)) : o && (n.background = o), a && a.toObject ? a.excludeFromExport || (n.overlay = a.toObject(t)) : a && (n.overlay = a), r && !r.excludeFromExport && (n.backgroundImage = this._toObject(r, e, t)), i && !i.excludeFromExport && (n.overlayImage = this._toObject(i, e, t)), n }, svgViewportTransformation: !0, toSVG: function (e, t) { e || (e = {}), e.reviver = t; var n = []; return this._setSVGPreamble(n, e), this._setSVGHeader(n, e), this.clipPath && n.push('<g clip-path="url(#' + this.clipPath.clipPathId + ')" >\n'), this._setSVGBgOverlayColor(n, "background"), this._setSVGBgOverlayImage(n, "backgroundImage", t), this._setSVGObjects(n, t), this.clipPath && n.push("</g>\n"), this._setSVGBgOverlayColor(n, "overlay"), this._setSVGBgOverlayImage(n, "overlayImage", t), n.push("</svg>"), n.join("") }, _setSVGPreamble: function (e, t) { t.suppressPreamble || e.push('<?xml version="1.0" encoding="', t.encoding || "UTF-8", '" standalone="no" ?>\n', '<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ', '"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n') }, _setSVGHeader: function (e, t) { var n, i = t.width || this.width, o = t.height || this.height, a = 'viewBox="0 0 ' + this.width + " " + this.height + '" ', l = s.Object.NUM_FRACTION_DIGITS; t.viewBox ? a = 'viewBox="' + t.viewBox.x + " " + t.viewBox.y + " " + t.viewBox.width + " " + t.viewBox.height + '" ' : this.svgViewportTransformation && (n = this.viewportTransform, a = 'viewBox="' + r(-n[4] / n[0], l) + " " + r(-n[5] / n[3], l) + " " + r(this.width / n[0], l) + " " + r(this.height / n[3], l) + '" '), e.push("<svg ", 'xmlns="http://www.w3.org/2000/svg" ', 'xmlns:xlink="http://www.w3.org/1999/xlink" ', 'version="1.1" ', 'width="', i, '" ', 'height="', o, '" ', a, 'xml:space="preserve">\n', "<desc>Created with Fabric.js ", s.version, "</desc>\n", "<defs>\n", this.createSVGFontFacesMarkup(), this.createSVGRefElementsMarkup(), this.createSVGClipPathMarkup(t), "</defs>\n") }, createSVGClipPathMarkup: function (e) { var t = this.clipPath; return t ? (t.clipPathId = "CLIPPATH_" + s.Object.__uid++, '<clipPath id="' + t.clipPathId + '" >\n' + this.clipPath.toClipPathSVG(e.reviver) + "</clipPath>\n") : "" }, createSVGRefElementsMarkup: function () { var e = this; return ["background", "overlay"].map((function (t) { var n = e[t + "Color"]; if (n && n.toLive) { var r = e[t + "Vpt"], i = e.viewportTransform, o = { width: e.width / (r ? i[0] : 1), height: e.height / (r ? i[3] : 1) }; return n.toSVG(o, { additionalTransform: r ? s.util.matrixToSVG(i) : "" }) } })).join("") }, createSVGFontFacesMarkup: function () { var e, t, n, r, i, o, a, l, u = "", c = {}, f = s.fontPaths, h = []; for (this._objects.forEach((function e(t) { h.push(t), t._objects && t._objects.forEach(e) })), a = 0, l = h.length; a < l; a++)if (t = (e = h[a]).fontFamily, -1 !== e.type.indexOf("text") && !c[t] && f[t] && (c[t] = !0, e.styles)) for (i in n = e.styles) for (o in r = n[i]) !c[t = r[o].fontFamily] && f[t] && (c[t] = !0); for (var d in c) u += ["\t\t@font-face {\n", "\t\t\tfont-family: '", d, "';\n", "\t\t\tsrc: url('", f[d], "');\n", "\t\t}\n"].join(""); return u && (u = ['\t<style type="text/css">', "<![CDATA[\n", u, "]]>", "</style>\n"].join("")), u }, _setSVGObjects: function (e, t) { var n, r, i, o = this._objects; for (r = 0, i = o.length; r < i; r++)!(n = o[r]).excludeFromExport && this._setSVGObject(e, n, t) }, _setSVGObject: function (e, t, n) { e.push(t.toSVG(n)) }, _setSVGBgOverlayImage: function (e, t, n) { this[t] && !this[t].excludeFromExport && this[t].toSVG && e.push(this[t].toSVG(n)) }, _setSVGBgOverlayColor: function (e, t) { var n = this[t + "Color"], r = this.viewportTransform, i = this.width, o = this.height; if (n) if (n.toLive) { var a = n.repeat, l = s.util.invertTransform(r), u = this[t + "Vpt"] ? s.util.matrixToSVG(l) : ""; e.push('<rect transform="' + u + " translate(", i / 2, ",", o / 2, ')"', ' x="', n.offsetX - i / 2, '" y="', n.offsetY - o / 2, '" ', 'width="', "repeat-y" === a || "no-repeat" === a ? n.source.width : i, '" height="', "repeat-x" === a || "no-repeat" === a ? n.source.height : o, '" fill="url(#SVGID_' + n.id + ')"', "></rect>\n") } else e.push('<rect x="0" y="0" width="100%" height="100%" ', 'fill="', n, '"', "></rect>\n") }, sendToBack: function (e) { if (!e) return this; var t, r, i, o = this._activeObject; if (e === o && "activeSelection" === e.type) for (t = (i = o._objects).length; t--;)r = i[t], n(this._objects, r), this._objects.unshift(r); else n(this._objects, e), this._objects.unshift(e); return this.renderOnAddRemove && this.requestRenderAll(), this }, bringToFront: function (e) { if (!e) return this; var t, r, i, o = this._activeObject; if (e === o && "activeSelection" === e.type) for (i = o._objects, t = 0; t < i.length; t++)r = i[t], n(this._objects, r), this._objects.push(r); else n(this._objects, e), this._objects.push(e); return this.renderOnAddRemove && this.requestRenderAll(), this }, sendBackwards: function (e, t) { if (!e) return this; var r, i, o, a, s, l = this._activeObject, u = 0; if (e === l && "activeSelection" === e.type) for (s = l._objects, r = 0; r < s.length; r++)i = s[r], (o = this._objects.indexOf(i)) > 0 + u && (a = o - 1, n(this._objects, i), this._objects.splice(a, 0, i)), u++; else 0 !== (o = this._objects.indexOf(e)) && (a = this._findNewLowerIndex(e, o, t), n(this._objects, e), this._objects.splice(a, 0, e)); return this.renderOnAddRemove && this.requestRenderAll(), this }, _findNewLowerIndex: function (e, t, n) { var r, i; if (n) { for (r = t, i = t - 1; i >= 0; --i)if (e.intersectsWithObject(this._objects[i]) || e.isContainedWithinObject(this._objects[i]) || this._objects[i].isContainedWithinObject(e)) { r = i; break } } else r = t - 1; return r }, bringForward: function (e, t) { if (!e) return this; var r, i, o, a, s, l = this._activeObject, u = 0; if (e === l && "activeSelection" === e.type) for (r = (s = l._objects).length; r--;)i = s[r], (o = this._objects.indexOf(i)) < this._objects.length - 1 - u && (a = o + 1, n(this._objects, i), this._objects.splice(a, 0, i)), u++; else (o = this._objects.indexOf(e)) !== this._objects.length - 1 && (a = this._findNewUpperIndex(e, o, t), n(this._objects, e), this._objects.splice(a, 0, e)); return this.renderOnAddRemove && this.requestRenderAll(), this }, _findNewUpperIndex: function (e, t, n) { var r, i, o; if (n) { for (r = t, i = t + 1, o = this._objects.length; i < o; ++i)if (e.intersectsWithObject(this._objects[i]) || e.isContainedWithinObject(this._objects[i]) || this._objects[i].isContainedWithinObject(e)) { r = i; break } } else r = t + 1; return r }, moveTo: function (e, t) { return n(this._objects, e), this._objects.splice(t, 0, e), this.renderOnAddRemove && this.requestRenderAll() }, dispose: function () { return this.isRendering && (s.util.cancelAnimFrame(this.isRendering), this.isRendering = 0), this.forEachObject((function (e) { e.dispose && e.dispose() })), this._objects = [], this.backgroundImage && this.backgroundImage.dispose && this.backgroundImage.dispose(), this.backgroundImage = null, this.overlayImage && this.overlayImage.dispose && this.overlayImage.dispose(), this.overlayImage = null, this._iTextInstances = null, this.contextContainer = null, this.lowerCanvasEl.classList.remove("lower-canvas"), this.lowerCanvasEl.style = this._originalCanvasStyle, delete this._originalCanvasStyle, this.lowerCanvasEl.setAttribute("width", this.width), this.lowerCanvasEl.setAttribute("height", this.height), s.util.cleanUpJsdomNode(this.lowerCanvasEl), this.lowerCanvasEl = void 0, this }, toString: function () { return "#<fabric.Canvas (" + this.complexity() + "): { objects: " + this._objects.length + " }>" } }), e(s.StaticCanvas.prototype, s.Observable), e(s.StaticCanvas.prototype, s.Collection), e(s.StaticCanvas.prototype, s.DataURLExporter), e(s.StaticCanvas, { EMPTY_JSON: '{"objects": [], "background": "white"}', supports: function (e) { var t = l(); if (!t || !t.getContext) return null; var n = t.getContext("2d"); return n && "setLineDash" === e ? void 0 !== n.setLineDash : null } }), s.StaticCanvas.prototype.toJSON = s.StaticCanvas.prototype.toObject, s.isLikelyNode && (s.StaticCanvas.prototype.createPNGStream = function () { var e = a(this.lowerCanvasEl); return e && e.createPNGStream() }, s.StaticCanvas.prototype.createJPEGStream = function (e) { var t = a(this.lowerCanvasEl); return t && t.createJPEGStream(e) }) } }(), s.BaseBrush = s.util.createClass({ color: "rgb(0, 0, 0)", width: 1, shadow: null, strokeLineCap: "round", strokeLineJoin: "round", strokeMiterLimit: 10, strokeDashArray: null, limitedToCanvasSize: !1, _setBrushStyles: function () { var e = this.canvas.contextTop; e.strokeStyle = this.color, e.lineWidth = this.width, e.lineCap = this.strokeLineCap, e.miterLimit = this.strokeMiterLimit, e.lineJoin = this.strokeLineJoin, e.setLineDash(this.strokeDashArray || []) }, _saveAndTransform: function (e) { var t = this.canvas.viewportTransform; e.save(), e.transform(t[0], t[1], t[2], t[3], t[4], t[5]) }, _setShadow: function () { if (this.shadow) { var e = this.canvas, t = this.shadow, n = e.contextTop, r = e.getZoom(); e && e._isRetinaScaling() && (r *= s.devicePixelRatio), n.shadowColor = t.color, n.shadowBlur = t.blur * r, n.shadowOffsetX = t.offsetX * r, n.shadowOffsetY = t.offsetY * r } }, needsFullRender: function () { return new s.Color(this.color).getAlpha() < 1 || !!this.shadow }, _resetShadow: function () { var e = this.canvas.contextTop; e.shadowColor = "", e.shadowBlur = e.shadowOffsetX = e.shadowOffsetY = 0 }, _isOutSideCanvas: function (e) { return e.x < 0 || e.x > this.canvas.getWidth() || e.y < 0 || e.y > this.canvas.getHeight() } }), s.PencilBrush = s.util.createClass(s.BaseBrush, { decimate: .4, initialize: function (e) { this.canvas = e, this._points = [] }, _drawSegment: function (e, t, n) { var r = t.midPointFrom(n); return e.quadraticCurveTo(t.x, t.y, r.x, r.y), r }, onMouseDown: function (e, t) { !this.canvas._isMainEvent(t.e) || (this._prepareForDrawing(e), this._captureDrawingPath(e), this._render()) }, onMouseMove: function (e, t) { if (this.canvas._isMainEvent(t.e) && (!0 !== this.limitedToCanvasSize || !this._isOutSideCanvas(e)) && this._captureDrawingPath(e) && this._points.length > 1) if (this.needsFullRender()) this.canvas.clearContext(this.canvas.contextTop), this._render(); else { var n = this._points, r = n.length, i = this.canvas.contextTop; this._saveAndTransform(i), this.oldEnd && (i.beginPath(), i.moveTo(this.oldEnd.x, this.oldEnd.y)), this.oldEnd = this._drawSegment(i, n[r - 2], n[r - 1], !0), i.stroke(), i.restore() } }, onMouseUp: function (e) { return !this.canvas._isMainEvent(e.e) || (this.oldEnd = void 0, this._finalizeAndAddPath(), !1) }, _prepareForDrawing: function (e) { var t = new s.Point(e.x, e.y); this._reset(), this._addPoint(t), this.canvas.contextTop.moveTo(t.x, t.y) }, _addPoint: function (e) { return !(this._points.length > 1 && e.eq(this._points[this._points.length - 1]) || (this._points.push(e), 0)) }, _reset: function () { this._points = [], this._setBrushStyles(), this._setShadow() }, _captureDrawingPath: function (e) { var t = new s.Point(e.x, e.y); return this._addPoint(t) }, _render: function () { var e, t, n = this.canvas.contextTop, r = this._points[0], i = this._points[1]; if (this._saveAndTransform(n), n.beginPath(), 2 === this._points.length && r.x === i.x && r.y === i.y) { var o = this.width / 1e3; r = new s.Point(r.x, r.y), i = new s.Point(i.x, i.y), r.x -= o, i.x += o } for (n.moveTo(r.x, r.y), e = 1, t = this._points.length; e < t; e++)this._drawSegment(n, r, i), r = this._points[e], i = this._points[e + 1]; n.lineTo(r.x, r.y), n.stroke(), n.restore() }, convertPointsToSVGPath: function (e) { var t = this.width / 1e3; return s.util.getSmoothPathFromPoints(e, t) }, _isEmptySVGPath: function (e) { return "M 0 0 Q 0 0 0 0 L 0 0" === s.util.joinPath(e) }, createPath: function (e) { var t = new s.Path(e, { fill: null, stroke: this.color, strokeWidth: this.width, strokeLineCap: this.strokeLineCap, strokeMiterLimit: this.strokeMiterLimit, strokeLineJoin: this.strokeLineJoin, strokeDashArray: this.strokeDashArray }); return this.shadow && (this.shadow.affectStroke = !0, t.shadow = new s.Shadow(this.shadow)), t }, decimatePoints: function (e, t) { if (e.length <= 2) return e; var n, r = this.canvas.getZoom(), i = Math.pow(t / r, 2), o = e.length - 1, a = e[0], s = [a]; for (n = 1; n < o - 1; n++)Math.pow(a.x - e[n].x, 2) + Math.pow(a.y - e[n].y, 2) >= i && (a = e[n], s.push(a)); return s.push(e[o]), s }, _finalizeAndAddPath: function () { this.canvas.contextTop.closePath(), this.decimate && (this._points = this.decimatePoints(this._points, this.decimate)); var e = this.convertPointsToSVGPath(this._points); if (this._isEmptySVGPath(e)) this.canvas.requestRenderAll(); else { var t = this.createPath(e); this.canvas.clearContext(this.canvas.contextTop), this.canvas.fire("before:path:created", { path: t }), this.canvas.add(t), this.canvas.requestRenderAll(), t.setCoords(), this._resetShadow(), this.canvas.fire("path:created", { path: t }) } } }), s.CircleBrush = s.util.createClass(s.BaseBrush, { width: 10, initialize: function (e) { this.canvas = e, this.points = [] }, drawDot: function (e) { var t = this.addPoint(e), n = this.canvas.contextTop; this._saveAndTransform(n), this.dot(n, t), n.restore() }, dot: function (e, t) { e.fillStyle = t.fill, e.beginPath(), e.arc(t.x, t.y, t.radius, 0, 2 * Math.PI, !1), e.closePath(), e.fill() }, onMouseDown: function (e) { this.points.length = 0, this.canvas.clearContext(this.canvas.contextTop), this._setShadow(), this.drawDot(e) }, _render: function () { var e, t, n = this.canvas.contextTop, r = this.points; for (this._saveAndTransform(n), e = 0, t = r.length; e < t; e++)this.dot(n, r[e]); n.restore() }, onMouseMove: function (e) { !0 === this.limitedToCanvasSize && this._isOutSideCanvas(e) || (this.needsFullRender() ? (this.canvas.clearContext(this.canvas.contextTop), this.addPoint(e), this._render()) : this.drawDot(e)) }, onMouseUp: function () { var e, t, n = this.canvas.renderOnAddRemove; this.canvas.renderOnAddRemove = !1; var r = []; for (e = 0, t = this.points.length; e < t; e++) { var i = this.points[e], o = new s.Circle({ radius: i.radius, left: i.x, top: i.y, originX: "center", originY: "center", fill: i.fill }); this.shadow && (o.shadow = new s.Shadow(this.shadow)), r.push(o) } var a = new s.Group(r); a.canvas = this.canvas, this.canvas.fire("before:path:created", { path: a }), this.canvas.add(a), this.canvas.fire("path:created", { path: a }), this.canvas.clearContext(this.canvas.contextTop), this._resetShadow(), this.canvas.renderOnAddRemove = n, this.canvas.requestRenderAll() }, addPoint: function (e) { var t = new s.Point(e.x, e.y), n = s.util.getRandomInt(Math.max(0, this.width - 20), this.width + 20) / 2, r = new s.Color(this.color).setAlpha(s.util.getRandomInt(0, 100) / 100).toRgba(); return t.radius = n, t.fill = r, this.points.push(t), t } }), s.SprayBrush = s.util.createClass(s.BaseBrush, { width: 10, density: 20, dotWidth: 1, dotWidthVariance: 1, randomOpacity: !1, optimizeOverlapping: !0, initialize: function (e) { this.canvas = e, this.sprayChunks = [] }, onMouseDown: function (e) { this.sprayChunks.length = 0, this.canvas.clearContext(this.canvas.contextTop), this._setShadow(), this.addSprayChunk(e), this.render(this.sprayChunkPoints) }, onMouseMove: function (e) { !0 === this.limitedToCanvasSize && this._isOutSideCanvas(e) || (this.addSprayChunk(e), this.render(this.sprayChunkPoints)) }, onMouseUp: function () { var e = this.canvas.renderOnAddRemove; this.canvas.renderOnAddRemove = !1; for (var t = [], n = 0, r = this.sprayChunks.length; n < r; n++)for (var i = this.sprayChunks[n], o = 0, a = i.length; o < a; o++) { var l = new s.Rect({ width: i[o].width, height: i[o].width, left: i[o].x + 1, top: i[o].y + 1, originX: "center", originY: "center", fill: this.color }); t.push(l) } this.optimizeOverlapping && (t = this._getOptimizedRects(t)); var u = new s.Group(t); this.shadow && u.set("shadow", new s.Shadow(this.shadow)), this.canvas.fire("before:path:created", { path: u }), this.canvas.add(u), this.canvas.fire("path:created", { path: u }), this.canvas.clearContext(this.canvas.contextTop), this._resetShadow(), this.canvas.renderOnAddRemove = e, this.canvas.requestRenderAll() }, _getOptimizedRects: function (e) { var t, n, r, i = {}; for (n = 0, r = e.length; n < r; n++)i[t = e[n].left + "" + e[n].top] || (i[t] = e[n]); var o = []; for (t in i) o.push(i[t]); return o }, render: function (e) { var t, n, r = this.canvas.contextTop; for (r.fillStyle = this.color, this._saveAndTransform(r), t = 0, n = e.length; t < n; t++) { var i = e[t]; void 0 !== i.opacity && (r.globalAlpha = i.opacity), r.fillRect(i.x, i.y, i.width, i.width) } r.restore() }, _render: function () { var e, t, n = this.canvas.contextTop; for (n.fillStyle = this.color, this._saveAndTransform(n), e = 0, t = this.sprayChunks.length; e < t; e++)this.render(this.sprayChunks[e]); n.restore() }, addSprayChunk: function (e) { this.sprayChunkPoints = []; var t, n, r, i, o = this.width / 2; for (i = 0; i < this.density; i++) { t = s.util.getRandomInt(e.x - o, e.x + o), n = s.util.getRandomInt(e.y - o, e.y + o), r = this.dotWidthVariance ? s.util.getRandomInt(Math.max(1, this.dotWidth - this.dotWidthVariance), this.dotWidth + this.dotWidthVariance) : this.dotWidth; var a = new s.Point(t, n); a.width = r, this.randomOpacity && (a.opacity = s.util.getRandomInt(0, 100) / 100), this.sprayChunkPoints.push(a) } this.sprayChunks.push(this.sprayChunkPoints) } }), s.PatternBrush = s.util.createClass(s.PencilBrush, { getPatternSrc: function () { var e = s.util.createCanvasElement(), t = e.getContext("2d"); return e.width = e.height = 25, t.fillStyle = this.color, t.beginPath(), t.arc(10, 10, 10, 0, 2 * Math.PI, !1), t.closePath(), t.fill(), e }, getPatternSrcFunction: function () { return String(this.getPatternSrc).replace("this.color", '"' + this.color + '"') }, getPattern: function () { return this.canvas.contextTop.createPattern(this.source || this.getPatternSrc(), "repeat") }, _setBrushStyles: function () { this.callSuper("_setBrushStyles"), this.canvas.contextTop.strokeStyle = this.getPattern() }, createPath: function (e) { var t = this.callSuper("createPath", e), n = t._getLeftTopCoords().scalarAdd(t.strokeWidth / 2); return t.stroke = new s.Pattern({ source: this.source || this.getPatternSrcFunction(), offsetX: -n.x, offsetY: -n.y }), t } }), function () { var e = s.util.getPointer, t = s.util.degreesToRadians, n = s.util.isTouchEvent; for (var r in s.Canvas = s.util.createClass(s.StaticCanvas, { initialize: function (e, t) { t || (t = {}), this.renderAndResetBound = this.renderAndReset.bind(this), this.requestRenderAllBound = this.requestRenderAll.bind(this), this._initStatic(e, t), this._initInteractive(), this._createCacheCanvas() }, uniformScaling: !0, uniScaleKey: "shiftKey", centeredScaling: !1, centeredRotation: !1, centeredKey: "altKey", altActionKey: "shiftKey", interactive: !0, selection: !0, selectionKey: "shiftKey", altSelectionKey: null, selectionColor: "rgba(100, 100, 255, 0.3)", selectionDashArray: [], selectionBorderColor: "rgba(255, 255, 255, 0.3)", selectionLineWidth: 1, selectionFullyContained: !1, hoverCursor: "move", moveCursor: "move", defaultCursor: "default", freeDrawingCursor: "crosshair", rotationCursor: "crosshair", notAllowedCursor: "not-allowed", containerClass: "canvas-container", perPixelTargetFind: !1, targetFindTolerance: 0, skipTargetFind: !1, isDrawingMode: !1, preserveObjectStacking: !1, snapAngle: 0, snapThreshold: null, stopContextMenu: !1, fireRightClick: !1, fireMiddleClick: !1, targets: [], _hoveredTarget: null, _hoveredTargets: [], _initInteractive: function () { this._currentTransform = null, this._groupSelector = null, this._initWrapperElement(), this._createUpperCanvas(), this._initEventListeners(), this._initRetinaScaling(), this.freeDrawingBrush = s.PencilBrush && new s.PencilBrush(this), this.calcOffset() }, _chooseObjectsToRender: function () { var e, t, n, r = this.getActiveObjects(); if (r.length > 0 && !this.preserveObjectStacking) { t = [], n = []; for (var i = 0, o = this._objects.length; i < o; i++)e = this._objects[i], -1 === r.indexOf(e) ? t.push(e) : n.push(e); r.length > 1 && (this._activeObject._objects = n), t.push.apply(t, n) } else t = this._objects; return t }, renderAll: function () { this.contextTopDirty && !this._groupSelector && !this.isDrawingMode && (this.clearContext(this.contextTop), this.contextTopDirty = !1), this.hasLostContext && this.renderTopLayer(this.contextTop); var e = this.contextContainer; return this.renderCanvas(e, this._chooseObjectsToRender()), this }, renderTopLayer: function (e) { e.save(), this.isDrawingMode && this._isCurrentlyDrawing && (this.freeDrawingBrush && this.freeDrawingBrush._render(), this.contextTopDirty = !0), this.selection && this._groupSelector && (this._drawSelection(e), this.contextTopDirty = !0), e.restore() }, renderTop: function () { var e = this.contextTop; return this.clearContext(e), this.renderTopLayer(e), this.fire("after:render"), this }, _normalizePointer: function (e, t) { var n = e.calcTransformMatrix(), r = s.util.invertTransform(n), i = this.restorePointerVpt(t); return s.util.transformPoint(i, r) }, isTargetTransparent: function (e, t, n) { if (e.shouldCache() && e._cacheCanvas && e !== this._activeObject) { var r = this._normalizePointer(e, { x: t, y: n }), i = Math.max(e.cacheTranslationX + r.x * e.zoomX, 0), o = Math.max(e.cacheTranslationY + r.y * e.zoomY, 0); return s.util.isTransparent(e._cacheContext, Math.round(i), Math.round(o), this.targetFindTolerance) } var a = this.contextCache, l = e.selectionBackgroundColor, u = this.viewportTransform; return e.selectionBackgroundColor = "", this.clearContext(a), a.save(), a.transform(u[0], u[1], u[2], u[3], u[4], u[5]), e.render(a), a.restore(), e.selectionBackgroundColor = l, s.util.isTransparent(a, t, n, this.targetFindTolerance) }, _isSelectionKeyPressed: function (e) { return "[object Array]" === Object.prototype.toString.call(this.selectionKey) ? !!this.selectionKey.find((function (t) { return !0 === e[t] })) : e[this.selectionKey] }, _shouldClearSelection: function (e, t) { var n = this.getActiveObjects(), r = this._activeObject; return !t || t && r && n.length > 1 && -1 === n.indexOf(t) && r !== t && !this._isSelectionKeyPressed(e) || t && !t.evented || t && !t.selectable && r && r !== t }, _shouldCenterTransform: function (e, t, n) { var r; if (e) return "scale" === t || "scaleX" === t || "scaleY" === t || "resizing" === t ? r = this.centeredScaling || e.centeredScaling : "rotate" === t && (r = this.centeredRotation || e.centeredRotation), r ? !n : n }, _getOriginFromCorner: function (e, t) { var n = { x: e.originX, y: e.originY }; return "ml" === t || "tl" === t || "bl" === t ? n.x = "right" : ("mr" === t || "tr" === t || "br" === t) && (n.x = "left"), "tl" === t || "mt" === t || "tr" === t ? n.y = "bottom" : ("bl" === t || "mb" === t || "br" === t) && (n.y = "top"), n }, _getActionFromCorner: function (e, t, n, r) { if (!t || !e) return "drag"; var i = r.controls[t]; return i.getActionName(n, i, r) }, _setupCurrentTransform: function (e, n, r) { if (n) { var i = this.getPointer(e), o = n.__corner, a = n.controls[o], l = r && o ? a.getActionHandler(e, n, a) : s.controlsUtils.dragHandler, u = this._getActionFromCorner(r, o, e, n), c = this._getOriginFromCorner(n, o), f = e[this.centeredKey], h = { target: n, action: u, actionHandler: l, corner: o, scaleX: n.scaleX, scaleY: n.scaleY, skewX: n.skewX, skewY: n.skewY, offsetX: i.x - n.left, offsetY: i.y - n.top, originX: c.x, originY: c.y, ex: i.x, ey: i.y, lastX: i.x, lastY: i.y, theta: t(n.angle), width: n.width * n.scaleX, shiftKey: e.shiftKey, altKey: f, original: s.util.saveObjectTransform(n) }; this._shouldCenterTransform(n, u, f) && (h.originX = "center", h.originY = "center"), h.original.originX = c.x, h.original.originY = c.y, this._currentTransform = h, this._beforeTransform(e) } }, setCursor: function (e) { this.upperCanvasEl.style.cursor = e }, _drawSelection: function (e) { var t = this._groupSelector, n = new s.Point(t.ex, t.ey), r = s.util.transformPoint(n, this.viewportTransform), i = new s.Point(t.ex + t.left, t.ey + t.top), o = s.util.transformPoint(i, this.viewportTransform), a = Math.min(r.x, o.x), l = Math.min(r.y, o.y), u = Math.max(r.x, o.x), c = Math.max(r.y, o.y), f = this.selectionLineWidth / 2; this.selectionColor && (e.fillStyle = this.selectionColor, e.fillRect(a, l, u - a, c - l)), this.selectionLineWidth && this.selectionBorderColor && (e.lineWidth = this.selectionLineWidth, e.strokeStyle = this.selectionBorderColor, a += f, l += f, u -= f, c -= f, s.Object.prototype._setLineDash.call(this, e, this.selectionDashArray), e.strokeRect(a, l, u - a, c - l)) }, findTarget: function (e, t) { if (!this.skipTargetFind) { var r, i, o = this.getPointer(e, !0), a = this._activeObject, s = this.getActiveObjects(), l = n(e), u = s.length > 1 && !t || 1 === s.length; if (this.targets = [], u && a._findTargetCorner(o, l) || s.length > 1 && !t && a === this._searchPossibleTargets([a], o)) return a; if (1 === s.length && a === this._searchPossibleTargets([a], o)) { if (!this.preserveObjectStacking) return a; r = a, i = this.targets, this.targets = [] } var c = this._searchPossibleTargets(this._objects, o); return e[this.altSelectionKey] && c && r && c !== r && (c = r, this.targets = i), c } }, _checkTarget: function (e, t, n) { if (t && t.visible && t.evented && t.containsPoint(e)) { if (!this.perPixelTargetFind && !t.perPixelTargetFind || t.isEditing) return !0; if (!this.isTargetTransparent(t, n.x, n.y)) return !0 } }, _searchPossibleTargets: function (e, t) { for (var n, r, i = e.length; i--;) { var o = e[i], a = o.group ? this._normalizePointer(o.group, t) : t; if (this._checkTarget(a, o, t)) { (n = e[i]).subTargetCheck && n instanceof s.Group && (r = this._searchPossibleTargets(n._objects, t)) && this.targets.push(r); break } } return n }, restorePointerVpt: function (e) { return s.util.transformPoint(e, s.util.invertTransform(this.viewportTransform)) }, getPointer: function (t, n) { if (this._absolutePointer && !n) return this._absolutePointer; if (this._pointer && n) return this._pointer; var r, i = e(t), o = this.upperCanvasEl, a = o.getBoundingClientRect(), s = a.width || 0, l = a.height || 0; (!s || !l) && ("top" in a && "bottom" in a && (l = Math.abs(a.top - a.bottom)), "right" in a && "left" in a && (s = Math.abs(a.right - a.left))), this.calcOffset(), i.x = i.x - this._offset.left, i.y = i.y - this._offset.top, n || (i = this.restorePointerVpt(i)); var u = this.getRetinaScaling(); return 1 !== u && (i.x /= u, i.y /= u), r = 0 === s || 0 === l ? { width: 1, height: 1 } : { width: o.width / s, height: o.height / l }, { x: i.x * r.width, y: i.y * r.height } }, _createUpperCanvas: function () { var e = this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/, ""), t = this.lowerCanvasEl, n = this.upperCanvasEl; n ? n.className = "" : (n = this._createCanvasElement(), this.upperCanvasEl = n), s.util.addClass(n, "upper-canvas " + e), this.wrapperEl.appendChild(n), this._copyCanvasStyle(t, n), this._applyCanvasStyle(n), this.contextTop = n.getContext("2d") }, _createCacheCanvas: function () { this.cacheCanvasEl = this._createCanvasElement(), this.cacheCanvasEl.setAttribute("width", this.width), this.cacheCanvasEl.setAttribute("height", this.height), this.contextCache = this.cacheCanvasEl.getContext("2d") }, _initWrapperElement: function () { this.wrapperEl = s.util.wrapElement(this.lowerCanvasEl, "div", { class: this.containerClass }), s.util.setStyle(this.wrapperEl, { width: this.width + "px", height: this.height + "px", position: "relative" }), s.util.makeElementUnselectable(this.wrapperEl) }, _applyCanvasStyle: function (e) { var t = this.width || e.width, n = this.height || e.height; s.util.setStyle(e, { position: "absolute", width: t + "px", height: n + "px", left: 0, top: 0, "touch-action": this.allowTouchScrolling ? "manipulation" : "none", "-ms-touch-action": this.allowTouchScrolling ? "manipulation" : "none" }), e.width = t, e.height = n, s.util.makeElementUnselectable(e) }, _copyCanvasStyle: function (e, t) { t.style.cssText = e.style.cssText }, getSelectionContext: function () { return this.contextTop }, getSelectionElement: function () { return this.upperCanvasEl }, getActiveObject: function () { return this._activeObject }, getActiveObjects: function () { var e = this._activeObject; return e ? "activeSelection" === e.type && e._objects ? e._objects.slice(0) : [e] : [] }, _onObjectRemoved: function (e) { e === this._activeObject && (this.fire("before:selection:cleared", { target: e }), this._discardActiveObject(), this.fire("selection:cleared", { target: e }), e.fire("deselected")), e === this._hoveredTarget && (this._hoveredTarget = null, this._hoveredTargets = []), this.callSuper("_onObjectRemoved", e) }, _fireSelectionEvents: function (e, t) { var n = !1, r = this.getActiveObjects(), i = [], o = []; e.forEach((function (e) { -1 === r.indexOf(e) && (n = !0, e.fire("deselected", { e: t, target: e }), o.push(e)) })), r.forEach((function (r) { -1 === e.indexOf(r) && (n = !0, r.fire("selected", { e: t, target: r }), i.push(r)) })), e.length > 0 && r.length > 0 ? n && this.fire("selection:updated", { e: t, selected: i, deselected: o, updated: i[0] || o[0], target: this._activeObject }) : r.length > 0 ? this.fire("selection:created", { e: t, selected: i, target: this._activeObject }) : e.length > 0 && this.fire("selection:cleared", { e: t, deselected: o }) }, setActiveObject: function (e, t) { var n = this.getActiveObjects(); return this._setActiveObject(e, t), this._fireSelectionEvents(n, t), this }, _setActiveObject: function (e, t) { return !(this._activeObject === e || !this._discardActiveObject(t, e) || e.onSelect({ e: t }) || (this._activeObject = e, 0)) }, _discardActiveObject: function (e, t) { var n = this._activeObject; if (n) { if (n.onDeselect({ e: e, object: t })) return !1; this._activeObject = null } return !0 }, discardActiveObject: function (e) { var t = this.getActiveObjects(), n = this.getActiveObject(); return t.length && this.fire("before:selection:cleared", { target: n, e: e }), this._discardActiveObject(e), this._fireSelectionEvents(t, e), this }, dispose: function () { var e = this.wrapperEl; return this.removeListeners(), e.removeChild(this.upperCanvasEl), e.removeChild(this.lowerCanvasEl), this.contextCache = null, this.contextTop = null, ["upperCanvasEl", "cacheCanvasEl"].forEach(function (e) { s.util.cleanUpJsdomNode(this[e]), this[e] = void 0 }.bind(this)), e.parentNode && e.parentNode.replaceChild(this.lowerCanvasEl, this.wrapperEl), delete this.wrapperEl, s.StaticCanvas.prototype.dispose.call(this), this }, clear: function () { return this.discardActiveObject(), this.clearContext(this.contextTop), this.callSuper("clear") }, drawControls: function (e) { var t = this._activeObject; t && t._renderControls(e) }, _toObject: function (e, t, n) { var r = this._realizeGroupTransformOnObject(e), i = this.callSuper("_toObject", e, t, n); return this._unwindGroupTransformOnObject(e, r), i }, _realizeGroupTransformOnObject: function (e) { if (e.group && "activeSelection" === e.group.type && this._activeObject === e.group) { var t = {}; return ["angle", "flipX", "flipY", "left", "scaleX", "scaleY", "skewX", "skewY", "top"].forEach((function (n) { t[n] = e[n] })), s.util.addTransformToObject(e, this._activeObject.calcOwnMatrix()), t } return null }, _unwindGroupTransformOnObject: function (e, t) { t && e.set(t) }, _setSVGObject: function (e, t, n) { var r = this._realizeGroupTransformOnObject(t); this.callSuper("_setSVGObject", e, t, n), this._unwindGroupTransformOnObject(t, r) }, setViewportTransform: function (e) { this.renderOnAddRemove && this._activeObject && this._activeObject.isEditing && this._activeObject.clearContextTop(), s.StaticCanvas.prototype.setViewportTransform.call(this, e) } }), s.StaticCanvas) "prototype" !== r && (s.Canvas[r] = s.StaticCanvas[r]) }(), function () { var e = s.util.addListener, t = s.util.removeListener, n = { passive: !1 }; function r(e, t) { return e.button && e.button === t - 1 } s.util.object.extend(s.Canvas.prototype, { mainTouchId: null, _initEventListeners: function () { this.removeListeners(), this._bindEvents(), this.addOrRemove(e, "add") }, _getEventPrefix: function () { return this.enablePointerEvents ? "pointer" : "mouse" }, addOrRemove: function (e, t) { var r = this.upperCanvasEl, i = this._getEventPrefix(); e(s.window, "resize", this._onResize), e(r, i + "down", this._onMouseDown), e(r, i + "move", this._onMouseMove, n), e(r, i + "out", this._onMouseOut), e(r, i + "enter", this._onMouseEnter), e(r, "wheel", this._onMouseWheel), e(r, "contextmenu", this._onContextMenu), e(r, "dblclick", this._onDoubleClick), e(r, "dragover", this._onDragOver), e(r, "dragenter", this._onDragEnter), e(r, "dragleave", this._onDragLeave), e(r, "drop", this._onDrop), this.enablePointerEvents || e(r, "touchstart", this._onTouchStart, n), "undefined" != typeof eventjs && t in eventjs && (eventjs[t](r, "gesture", this._onGesture), eventjs[t](r, "drag", this._onDrag), eventjs[t](r, "orientation", this._onOrientationChange), eventjs[t](r, "shake", this._onShake), eventjs[t](r, "longpress", this._onLongPress)) }, removeListeners: function () { this.addOrRemove(t, "remove"); var e = this._getEventPrefix(); t(s.document, e + "up", this._onMouseUp), t(s.document, "touchend", this._onTouchEnd, n), t(s.document, e + "move", this._onMouseMove, n), t(s.document, "touchmove", this._onMouseMove, n) }, _bindEvents: function () { this.eventsBound || (this._onMouseDown = this._onMouseDown.bind(this), this._onTouchStart = this._onTouchStart.bind(this), this._onMouseMove = this._onMouseMove.bind(this), this._onMouseUp = this._onMouseUp.bind(this), this._onTouchEnd = this._onTouchEnd.bind(this), this._onResize = this._onResize.bind(this), this._onGesture = this._onGesture.bind(this), this._onDrag = this._onDrag.bind(this), this._onShake = this._onShake.bind(this), this._onLongPress = this._onLongPress.bind(this), this._onOrientationChange = this._onOrientationChange.bind(this), this._onMouseWheel = this._onMouseWheel.bind(this), this._onMouseOut = this._onMouseOut.bind(this), this._onMouseEnter = this._onMouseEnter.bind(this), this._onContextMenu = this._onContextMenu.bind(this), this._onDoubleClick = this._onDoubleClick.bind(this), this._onDragOver = this._onDragOver.bind(this), this._onDragEnter = this._simpleEventHandler.bind(this, "dragenter"), this._onDragLeave = this._simpleEventHandler.bind(this, "dragleave"), this._onDrop = this._simpleEventHandler.bind(this, "drop"), this.eventsBound = !0) }, _onGesture: function (e, t) { this.__onTransformGesture && this.__onTransformGesture(e, t) }, _onDrag: function (e, t) { this.__onDrag && this.__onDrag(e, t) }, _onMouseWheel: function (e) { this.__onMouseWheel(e) }, _onMouseOut: function (e) { var t = this._hoveredTarget; this.fire("mouse:out", { target: t, e: e }), this._hoveredTarget = null, t && t.fire("mouseout", { e: e }); var n = this; this._hoveredTargets.forEach((function (r) { n.fire("mouse:out", { target: t, e: e }), r && t.fire("mouseout", { e: e }) })), this._hoveredTargets = [], this._iTextInstances && this._iTextInstances.forEach((function (e) { e.isEditing && e.hiddenTextarea.focus() })) }, _onMouseEnter: function (e) { !this._currentTransform && !this.findTarget(e) && (this.fire("mouse:over", { target: null, e: e }), this._hoveredTarget = null, this._hoveredTargets = []) }, _onOrientationChange: function (e, t) { this.__onOrientationChange && this.__onOrientationChange(e, t) }, _onShake: function (e, t) { this.__onShake && this.__onShake(e, t) }, _onLongPress: function (e, t) { this.__onLongPress && this.__onLongPress(e, t) }, _onDragOver: function (e) { e.preventDefault(); var t = this._simpleEventHandler("dragover", e); this._fireEnterLeaveEvents(t, e) }, _onContextMenu: function (e) { return this.stopContextMenu && (e.stopPropagation(), e.preventDefault()), !1 }, _onDoubleClick: function (e) { this._cacheTransformEventData(e), this._handleEvent(e, "dblclick"), this._resetTransformEventData(e) }, getPointerId: function (e) { var t = e.changedTouches; return t ? t[0] && t[0].identifier : this.enablePointerEvents ? e.pointerId : -1 }, _isMainEvent: function (e) { return !0 === e.isPrimary || !1 !== e.isPrimary && ("touchend" === e.type && 0 === e.touches.length || !e.changedTouches || e.changedTouches[0].identifier === this.mainTouchId) }, _onTouchStart: function (r) { r.preventDefault(), null === this.mainTouchId && (this.mainTouchId = this.getPointerId(r)), this.__onMouseDown(r), this._resetTransformEventData(); var i = this.upperCanvasEl, o = this._getEventPrefix(); e(s.document, "touchend", this._onTouchEnd, n), e(s.document, "touchmove", this._onMouseMove, n), t(i, o + "down", this._onMouseDown) }, _onMouseDown: function (r) { this.__onMouseDown(r), this._resetTransformEventData(); var i = this.upperCanvasEl, o = this._getEventPrefix(); t(i, o + "move", this._onMouseMove, n), e(s.document, o + "up", this._onMouseUp), e(s.document, o + "move", this._onMouseMove, n) }, _onTouchEnd: function (r) { if (!(r.touches.length > 0)) { this.__onMouseUp(r), this._resetTransformEventData(), this.mainTouchId = null; var i = this._getEventPrefix(); t(s.document, "touchend", this._onTouchEnd, n), t(s.document, "touchmove", this._onMouseMove, n); var o = this; this._willAddMouseDown && clearTimeout(this._willAddMouseDown), this._willAddMouseDown = setTimeout((function () { e(o.upperCanvasEl, i + "down", o._onMouseDown), o._willAddMouseDown = 0 }), 400) } }, _onMouseUp: function (r) { this.__onMouseUp(r), this._resetTransformEventData(); var i = this.upperCanvasEl, o = this._getEventPrefix(); this._isMainEvent(r) && (t(s.document, o + "up", this._onMouseUp), t(s.document, o + "move", this._onMouseMove, n), e(i, o + "move", this._onMouseMove, n)) }, _onMouseMove: function (e) { !this.allowTouchScrolling && e.preventDefault && e.preventDefault(), this.__onMouseMove(e) }, _onResize: function () { this.calcOffset() }, _shouldRender: function (e) { var t = this._activeObject; return !!(!!t != !!e || t && e && t !== e) || (t && t.isEditing, !1) }, __onMouseUp: function (e) { var t, n = this._currentTransform, i = this._groupSelector, o = !1, a = !i || 0 === i.left && 0 === i.top; if (this._cacheTransformEventData(e), t = this._target, this._handleEvent(e, "up:before"), r(e, 3)) this.fireRightClick && this._handleEvent(e, "up", 3, a); else { if (r(e, 2)) return this.fireMiddleClick && this._handleEvent(e, "up", 2, a), void this._resetTransformEventData(); if (this.isDrawingMode && this._isCurrentlyDrawing) this._onMouseUpInDrawingMode(e); else if (this._isMainEvent(e)) { if (n && (this._finalizeCurrentTransform(e), o = n.actionPerformed), !a) { var l = t === this._activeObject; this._maybeGroupObjects(e), o || (o = this._shouldRender(t) || !l && t === this._activeObject) } if (t) { if (t.selectable && t !== this._activeObject && "up" === t.activeOn) this.setActiveObject(t, e), o = !0; else { var u = t._findTargetCorner(this.getPointer(e, !0), s.util.isTouchEvent(e)), c = t.controls[u], f = c && c.getMouseUpHandler(e, t, c); if (f) { var h = this.getPointer(e); f(e, n, h.x, h.y) } } t.isMoving = !1 } this._setCursorFromEvent(e, t), this._handleEvent(e, "up", 1, a), this._groupSelector = null, this._currentTransform = null, t && (t.__corner = 0), o ? this.requestRenderAll() : a || this.renderTop() } } }, _simpleEventHandler: function (e, t) { var n = this.findTarget(t), r = this.targets, i = { e: t, target: n, subTargets: r }; if (this.fire(e, i), n && n.fire(e, i), !r) return n; for (var o = 0; o < r.length; o++)r[o].fire(e, i); return n }, _handleEvent: function (e, t, n, r) { var i = this._target, o = this.targets || [], a = { e: e, target: i, subTargets: o, button: n || 1, isClick: r || !1, pointer: this._pointer, absolutePointer: this._absolutePointer, transform: this._currentTransform }; "up" === t && (a.currentTarget = this.findTarget(e), a.currentSubTargets = this.targets), this.fire("mouse:" + t, a), i && i.fire("mouse" + t, a); for (var s = 0; s < o.length; s++)o[s].fire("mouse" + t, a) }, _finalizeCurrentTransform: function (e) { var t, n = this._currentTransform, r = n.target, i = { e: e, target: r, transform: n, action: n.action }; r._scaling && (r._scaling = !1), r.setCoords(), (n.actionPerformed || this.stateful && r.hasStateChanged()) && (n.actionPerformed && (t = this._addEventOptions(i, n), this._fire(t, i)), this._fire("modified", i)) }, _addEventOptions: function (e, t) { var n, r; switch (t.action) { case "scaleX": n = "scaled", r = "x"; break; case "scaleY": n = "scaled", r = "y"; break; case "skewX": n = "skewed", r = "x"; break; case "skewY": n = "skewed", r = "y"; break; case "scale": n = "scaled", r = "equally"; break; case "rotate": n = "rotated"; break; case "drag": n = "moved" }return e.by = r, n }, _onMouseDownInDrawingMode: function (e) { this._isCurrentlyDrawing = !0, this.getActiveObject() && this.discardActiveObject(e).requestRenderAll(); var t = this.getPointer(e); this.freeDrawingBrush.onMouseDown(t, { e: e, pointer: t }), this._handleEvent(e, "down") }, _onMouseMoveInDrawingMode: function (e) { if (this._isCurrentlyDrawing) { var t = this.getPointer(e); this.freeDrawingBrush.onMouseMove(t, { e: e, pointer: t }) } this.setCursor(this.freeDrawingCursor), this._handleEvent(e, "move") }, _onMouseUpInDrawingMode: function (e) { var t = this.getPointer(e); this._isCurrentlyDrawing = this.freeDrawingBrush.onMouseUp({ e: e, pointer: t }), this._handleEvent(e, "up") }, __onMouseDown: function (e) { this._cacheTransformEventData(e), this._handleEvent(e, "down:before"); var t = this._target; if (r(e, 3)) this.fireRightClick && this._handleEvent(e, "down", 3); else if (r(e, 2)) this.fireMiddleClick && this._handleEvent(e, "down", 2); else if (this.isDrawingMode) this._onMouseDownInDrawingMode(e); else if (this._isMainEvent(e) && !this._currentTransform) { var n = this._pointer; this._previousPointer = n; var i = this._shouldRender(t), o = this._shouldGroup(e, t); if (this._shouldClearSelection(e, t) ? this.discardActiveObject(e) : o && (this._handleGrouping(e, t), t = this._activeObject), this.selection && (!t || !t.selectable && !t.isEditing && t !== this._activeObject) && (this._groupSelector = { ex: this._absolutePointer.x, ey: this._absolutePointer.y, top: 0, left: 0 }), t) { var a = t === this._activeObject; t.selectable && "down" === t.activeOn && this.setActiveObject(t, e); var l = t._findTargetCorner(this.getPointer(e, !0), s.util.isTouchEvent(e)); if (t.__corner = l, t === this._activeObject && (l || !o)) { this._setupCurrentTransform(e, t, a); var u = t.controls[l], c = (n = this.getPointer(e), u && u.getMouseDownHandler(e, t, u)); c && c(e, this._currentTransform, n.x, n.y) } } this._handleEvent(e, "down"), (i || o) && this.requestRenderAll() } }, _resetTransformEventData: function () { this._target = null, this._pointer = null, this._absolutePointer = null }, _cacheTransformEventData: function (e) { this._resetTransformEventData(), this._pointer = this.getPointer(e, !0), this._absolutePointer = this.restorePointerVpt(this._pointer), this._target = this._currentTransform ? this._currentTransform.target : this.findTarget(e) || null }, _beforeTransform: function (e) { var t = this._currentTransform; this.stateful && t.target.saveState(), this.fire("before:transform", { e: e, transform: t }) }, __onMouseMove: function (e) { var t, n; if (this._handleEvent(e, "move:before"), this._cacheTransformEventData(e), this.isDrawingMode) this._onMouseMoveInDrawingMode(e); else if (this._isMainEvent(e)) { var r = this._groupSelector; r ? (n = this._absolutePointer, r.left = n.x - r.ex, r.top = n.y - r.ey, this.renderTop()) : this._currentTransform ? this._transformObject(e) : (t = this.findTarget(e) || null, this._setCursorFromEvent(e, t), this._fireOverOutEvents(t, e)), this._handleEvent(e, "move"), this._resetTransformEventData() } }, _fireOverOutEvents: function (e, t) { var n = this._hoveredTarget, r = this._hoveredTargets, i = this.targets, o = Math.max(r.length, i.length); this.fireSyntheticInOutEvents(e, t, { oldTarget: n, evtOut: "mouseout", canvasEvtOut: "mouse:out", evtIn: "mouseover", canvasEvtIn: "mouse:over" }); for (var a = 0; a < o; a++)this.fireSyntheticInOutEvents(i[a], t, { oldTarget: r[a], evtOut: "mouseout", evtIn: "mouseover" }); this._hoveredTarget = e, this._hoveredTargets = this.targets.concat() }, _fireEnterLeaveEvents: function (e, t) { var n = this._draggedoverTarget, r = this._hoveredTargets, i = this.targets, o = Math.max(r.length, i.length); this.fireSyntheticInOutEvents(e, t, { oldTarget: n, evtOut: "dragleave", evtIn: "dragenter" }); for (var a = 0; a < o; a++)this.fireSyntheticInOutEvents(i[a], t, { oldTarget: r[a], evtOut: "dragleave", evtIn: "dragenter" }); this._draggedoverTarget = e }, fireSyntheticInOutEvents: function (e, t, n) { var r, i, o, a = n.oldTarget, s = a !== e, l = n.canvasEvtIn, u = n.canvasEvtOut; s && (r = { e: t, target: e, previousTarget: a }, i = { e: t, target: a, nextTarget: e }), o = e && s, a && s && (u && this.fire(u, i), a.fire(n.evtOut, i)), o && (l && this.fire(l, r), e.fire(n.evtIn, r)) }, __onMouseWheel: function (e) { this._cacheTransformEventData(e), this._handleEvent(e, "wheel"), this._resetTransformEventData() }, _transformObject: function (e) { var t = this.getPointer(e), n = this._currentTransform; n.reset = !1, n.shiftKey = e.shiftKey, n.altKey = e[this.centeredKey], this._performTransformAction(e, n, t), n.actionPerformed && this.requestRenderAll() }, _performTransformAction: function (e, t, n) { var r = n.x, i = n.y, o = t.action, a = !1, s = t.actionHandler; s && (a = s(e, t, r, i)), "drag" === o && a && (t.target.isMoving = !0, this.setCursor(t.target.moveCursor || this.moveCursor)), t.actionPerformed = t.actionPerformed || a }, _fire: s.controlsUtils.fireEvent, _setCursorFromEvent: function (e, t) { if (!t) return this.setCursor(this.defaultCursor), !1; var n = t.hoverCursor || this.hoverCursor, r = this._activeObject && "activeSelection" === this._activeObject.type ? this._activeObject : null, i = (!r || !r.contains(t)) && t._findTargetCorner(this.getPointer(e, !0)); i ? this.setCursor(this.getCornerCursor(i, t, e)) : (t.subTargetCheck && this.targets.concat().reverse().map((function (e) { n = e.hoverCursor || n })), this.setCursor(n)) }, getCornerCursor: function (e, t, n) { var r = t.controls[e]; return r.cursorStyleHandler(n, r, t) } }) }(), function () { var e = Math.min, t = Math.max; s.util.object.extend(s.Canvas.prototype, { _shouldGroup: function (e, t) { var n = this._activeObject; return n && this._isSelectionKeyPressed(e) && t && t.selectable && this.selection && (n !== t || "activeSelection" === n.type) && !t.onSelect({ e: e }) }, _handleGrouping: function (e, t) { var n = this._activeObject; n.__corner || t === n && (!(t = this.findTarget(e, !0)) || !t.selectable) || (n && "activeSelection" === n.type ? this._updateActiveSelection(t, e) : this._createActiveSelection(t, e)) }, _updateActiveSelection: function (e, t) { var n = this._activeObject, r = n._objects.slice(0); n.contains(e) ? (n.removeWithUpdate(e), this._hoveredTarget = e, this._hoveredTargets = this.targets.concat(), 1 === n.size() && this._setActiveObject(n.item(0), t)) : (n.addWithUpdate(e), this._hoveredTarget = n, this._hoveredTargets = this.targets.concat()), this._fireSelectionEvents(r, t) }, _createActiveSelection: function (e, t) { var n = this.getActiveObjects(), r = this._createGroup(e); this._hoveredTarget = r, this._setActiveObject(r, t), this._fireSelectionEvents(n, t) }, _createGroup: function (e) { var t = this._objects, n = t.indexOf(this._activeObject) < t.indexOf(e) ? [this._activeObject, e] : [e, this._activeObject]; return this._activeObject.isEditing && this._activeObject.exitEditing(), new s.ActiveSelection(n, { canvas: this }) }, _groupSelectedObjects: function (e) { var t, n = this._collectObjects(e); 1 === n.length ? this.setActiveObject(n[0], e) : n.length > 1 && (t = new s.ActiveSelection(n.reverse(), { canvas: this }), this.setActiveObject(t, e)) }, _collectObjects: function (n) { for (var r, i = [], o = this._groupSelector.ex, a = this._groupSelector.ey, l = o + this._groupSelector.left, u = a + this._groupSelector.top, c = new s.Point(e(o, l), e(a, u)), f = new s.Point(t(o, l), t(a, u)), h = !this.selectionFullyContained, d = o === l && a === u, p = this._objects.length; p-- && !((r = this._objects[p]) && r.selectable && r.visible && (h && r.intersectsWithRect(c, f, !0) || r.isContainedWithinRect(c, f, !0) || h && r.containsPoint(c, null, !0) || h && r.containsPoint(f, null, !0)) && (i.push(r), d));); return i.length > 1 && (i = i.filter((function (e) { return !e.onSelect({ e: n }) }))), i }, _maybeGroupObjects: function (e) { this.selection && this._groupSelector && this._groupSelectedObjects(e), this.setCursor(this.defaultCursor), this._groupSelector = null } }) }(), s.util.object.extend(s.StaticCanvas.prototype, { toDataURL: function (e) { e || (e = {}); var t = e.format || "png", n = e.quality || 1, r = (e.multiplier || 1) * (e.enableRetinaScaling ? this.getRetinaScaling() : 1), i = this.toCanvasElement(r, e); return s.util.toDataURL(i, t, n) }, toCanvasElement: function (e, t) { e = e || 1; var n = ((t = t || {}).width || this.width) * e, r = (t.height || this.height) * e, i = this.getZoom(), o = this.width, a = this.height, l = i * e, u = this.viewportTransform, c = (u[4] - (t.left || 0)) * e, f = (u[5] - (t.top || 0)) * e, h = this.interactive, d = [l, 0, 0, l, c, f], p = this.enableRetinaScaling, v = s.util.createCanvasElement(), g = this.contextTop; return v.width = n, v.height = r, this.contextTop = null, this.enableRetinaScaling = !1, this.interactive = !1, this.viewportTransform = d, this.width = n, this.height = r, this.calcViewportBoundaries(), this.renderCanvas(v.getContext("2d"), this._objects), this.viewportTransform = u, this.width = o, this.height = a, this.calcViewportBoundaries(), this.interactive = h, this.enableRetinaScaling = p, this.contextTop = g, v } }), s.util.object.extend(s.StaticCanvas.prototype, { loadFromJSON: function (e, t, n) { if (e) { var r = "string" == typeof e ? JSON.parse(e) : s.util.object.clone(e), i = this, o = r.clipPath, a = this.renderOnAddRemove; return this.renderOnAddRemove = !1, delete r.clipPath, this._enlivenObjects(r.objects, (function (e) { i.clear(), i._setBgOverlay(r, (function () { o ? i._enlivenObjects([o], (function (n) { i.clipPath = n[0], i.__setupCanvas.call(i, r, e, a, t) })) : i.__setupCanvas.call(i, r, e, a, t) })) }), n), this } }, __setupCanvas: function (e, t, n, r) { var i = this; t.forEach((function (e, t) { i.insertAt(e, t) })), this.renderOnAddRemove = n, delete e.objects, delete e.backgroundImage, delete e.overlayImage, delete e.background, delete e.overlay, this._setOptions(e), this.renderAll(), r && r() }, _setBgOverlay: function (e, t) { var n = { backgroundColor: !1, overlayColor: !1, backgroundImage: !1, overlayImage: !1 }; if (e.backgroundImage || e.overlayImage || e.background || e.overlay) { var r = function () { n.backgroundImage && n.overlayImage && n.backgroundColor && n.overlayColor && t && t() }; this.__setBgOverlay("backgroundImage", e.backgroundImage, n, r), this.__setBgOverlay("overlayImage", e.overlayImage, n, r), this.__setBgOverlay("backgroundColor", e.background, n, r), this.__setBgOverlay("overlayColor", e.overlay, n, r) } else t && t() }, __setBgOverlay: function (e, t, n, r) { var i = this; if (!t) return n[e] = !0, void (r && r()); "backgroundImage" === e || "overlayImage" === e ? s.util.enlivenObjects([t], (function (t) { i[e] = t[0], n[e] = !0, r && r() })) : this["set" + s.util.string.capitalize(e, !0)](t, (function () { n[e] = !0, r && r() })) }, _enlivenObjects: function (e, t, n) { e && 0 !== e.length ? s.util.enlivenObjects(e, (function (e) { t && t(e) }), null, n) : t && t([]) }, _toDataURL: function (e, t) { this.clone((function (n) { t(n.toDataURL(e)) })) }, _toDataURLWithMultiplier: function (e, t, n) { this.clone((function (r) { n(r.toDataURLWithMultiplier(e, t)) })) }, clone: function (e, t) { var n = JSON.stringify(this.toJSON(t)); this.cloneWithoutData((function (t) { t.loadFromJSON(n, (function () { e && e(t) })) })) }, cloneWithoutData: function (e) { var t = s.util.createCanvasElement(); t.width = this.width, t.height = this.height; var n = new s.Canvas(t); this.backgroundImage ? (n.setBackgroundImage(this.backgroundImage.src, (function () { n.renderAll(), e && e(n) })), n.backgroundImageOpacity = this.backgroundImageOpacity, n.backgroundImageStretch = this.backgroundImageStretch) : e && e(n) } }), function (e) { var t = e.fabric || (e.fabric = {}), n = t.util.object.extend, r = t.util.object.clone, i = t.util.toFixed, o = t.util.string.capitalize, a = t.util.degreesToRadians, s = !t.isLikelyNode; t.Object || (t.Object = t.util.createClass(t.CommonMethods, { type: "object", originX: "left", originY: "top", top: 0, left: 0, width: 0, height: 0, scaleX: 1, scaleY: 1, flipX: !1, flipY: !1, opacity: 1, angle: 0, skewX: 0, skewY: 0, cornerSize: 13, touchCornerSize: 24, transparentCorners: !0, hoverCursor: null, moveCursor: null, padding: 0, borderColor: "rgb(178,204,255)", borderDashArray: null, cornerColor: "rgb(178,204,255)", cornerStrokeColor: null, cornerStyle: "rect", cornerDashArray: null, centeredScaling: !1, centeredRotation: !0, fill: "rgb(0,0,0)", fillRule: "nonzero", globalCompositeOperation: "source-over", backgroundColor: "", selectionBackgroundColor: "", stroke: null, strokeWidth: 1, strokeDashArray: null, strokeDashOffset: 0, strokeLineCap: "butt", strokeLineJoin: "miter", strokeMiterLimit: 4, shadow: null, borderOpacityWhenMoving: .4, borderScaleFactor: 1, minScaleLimit: 0, selectable: !0, evented: !0, visible: !0, hasControls: !0, hasBorders: !0, perPixelTargetFind: !1, includeDefaultValues: !0, lockMovementX: !1, lockMovementY: !1, lockRotation: !1, lockScalingX: !1, lockScalingY: !1, lockSkewingX: !1, lockSkewingY: !1, lockScalingFlip: !1, excludeFromExport: !1, objectCaching: s, statefullCache: !1, noScaleCache: !0, strokeUniform: !1, dirty: !0, __corner: 0, paintFirst: "fill", activeOn: "down", stateProperties: "top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "), cacheProperties: "fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "), colorProperties: "fill stroke backgroundColor".split(" "), clipPath: void 0, inverted: !1, absolutePositioned: !1, initialize: function (e) { e && this.setOptions(e) }, _createCacheCanvas: function () { this._cacheProperties = {}, this._cacheCanvas = t.util.createCanvasElement(), this._cacheContext = this._cacheCanvas.getContext("2d"), this._updateCacheCanvas(), this.dirty = !0 }, _limitCacheSize: function (e) { var n = t.perfLimitSizeTotal, r = e.width, i = e.height, o = t.maxCacheSideLimit, a = t.minCacheSideLimit; if (r <= o && i <= o && r * i <= n) return r < a && (e.width = a), i < a && (e.height = a), e; var s = r / i, l = t.util.limitDimsByArea(s, n), u = t.util.capValue, c = u(a, l.x, o), f = u(a, l.y, o); return r > c && (e.zoomX /= r / c, e.width = c, e.capped = !0), i > f && (e.zoomY /= i / f, e.height = f, e.capped = !0), e }, _getCacheCanvasDimensions: function () { var e = this.getTotalObjectScaling(), t = this._getTransformedDimensions(0, 0), n = t.x * e.scaleX / this.scaleX, r = t.y * e.scaleY / this.scaleY; return { width: n + 2, height: r + 2, zoomX: e.scaleX, zoomY: e.scaleY, x: n, y: r } }, _updateCacheCanvas: function () { var e = this.canvas; if (this.noScaleCache && e && e._currentTransform) { var n = e._currentTransform.target, r = e._currentTransform.action; if (this === n && r.slice && "scale" === r.slice(0, 5)) return !1 } var i, o, a = this._cacheCanvas, s = this._limitCacheSize(this._getCacheCanvasDimensions()), l = t.minCacheSideLimit, u = s.width, c = s.height, f = s.zoomX, h = s.zoomY, d = u !== this.cacheWidth || c !== this.cacheHeight, p = this.zoomX !== f || this.zoomY !== h, v = d || p, g = 0, m = 0, y = !1; if (d) { var b = this._cacheCanvas.width, w = this._cacheCanvas.height, x = u > b || c > w; y = x || (u < .9 * b || c < .9 * w) && b > l && w > l, x && !s.capped && (u > l || c > l) && (g = .1 * u, m = .1 * c) } return this instanceof t.Text && this.path && (v = !0, y = !0, g += this.getHeightOfLine(0) * this.zoomX, m += this.getHeightOfLine(0) * this.zoomY), !!v && (y ? (a.width = Math.ceil(u + g), a.height = Math.ceil(c + m)) : (this._cacheContext.setTransform(1, 0, 0, 1, 0, 0), this._cacheContext.clearRect(0, 0, a.width, a.height)), i = s.x / 2, o = s.y / 2, this.cacheTranslationX = Math.round(a.width / 2 - i) + i, this.cacheTranslationY = Math.round(a.height / 2 - o) + o, this.cacheWidth = u, this.cacheHeight = c, this._cacheContext.translate(this.cacheTranslationX, this.cacheTranslationY), this._cacheContext.scale(f, h), this.zoomX = f, this.zoomY = h, !0) }, setOptions: function (e) { this._setOptions(e), this._initGradient(e.fill, "fill"), this._initGradient(e.stroke, "stroke"), this._initPattern(e.fill, "fill"), this._initPattern(e.stroke, "stroke") }, transform: function (e) { var t = this.group && !this.group._transformDone || this.group && this.canvas && e === this.canvas.contextTop, n = this.calcTransformMatrix(!t); e.transform(n[0], n[1], n[2], n[3], n[4], n[5]) }, toObject: function (e) { var n = t.Object.NUM_FRACTION_DIGITS, r = { type: this.type, version: t.version, originX: this.originX, originY: this.originY, left: i(this.left, n), top: i(this.top, n), width: i(this.width, n), height: i(this.height, n), fill: this.fill && this.fill.toObject ? this.fill.toObject() : this.fill, stroke: this.stroke && this.stroke.toObject ? this.stroke.toObject() : this.stroke, strokeWidth: i(this.strokeWidth, n), strokeDashArray: this.strokeDashArray ? this.strokeDashArray.concat() : this.strokeDashArray, strokeLineCap: this.strokeLineCap, strokeDashOffset: this.strokeDashOffset, strokeLineJoin: this.strokeLineJoin, strokeUniform: this.strokeUniform, strokeMiterLimit: i(this.strokeMiterLimit, n), scaleX: i(this.scaleX, n), scaleY: i(this.scaleY, n), angle: i(this.angle, n), flipX: this.flipX, flipY: this.flipY, opacity: i(this.opacity, n), shadow: this.shadow && this.shadow.toObject ? this.shadow.toObject() : this.shadow, visible: this.visible, backgroundColor: this.backgroundColor, fillRule: this.fillRule, paintFirst: this.paintFirst, globalCompositeOperation: this.globalCompositeOperation, skewX: i(this.skewX, n), skewY: i(this.skewY, n) }; return this.clipPath && !this.clipPath.excludeFromExport && (r.clipPath = this.clipPath.toObject(e), r.clipPath.inverted = this.clipPath.inverted, r.clipPath.absolutePositioned = this.clipPath.absolutePositioned), t.util.populateWithProperties(this, r, e), this.includeDefaultValues || (r = this._removeDefaultValues(r)), r }, toDatalessObject: function (e) { return this.toObject(e) }, _removeDefaultValues: function (e) { var n = t.util.getKlass(e.type).prototype; return n.stateProperties.forEach((function (t) { "left" !== t && "top" !== t && (e[t] === n[t] && delete e[t], "[object Array]" === Object.prototype.toString.call(e[t]) && "[object Array]" === Object.prototype.toString.call(n[t]) && 0 === e[t].length && 0 === n[t].length && delete e[t]) })), e }, toString: function () { return "#<fabric." + o(this.type) + ">" }, getObjectScaling: function () { if (!this.group) return { scaleX: this.scaleX, scaleY: this.scaleY }; var e = t.util.qrDecompose(this.calcTransformMatrix()); return { scaleX: Math.abs(e.scaleX), scaleY: Math.abs(e.scaleY) } }, getTotalObjectScaling: function () { var e = this.getObjectScaling(), t = e.scaleX, n = e.scaleY; if (this.canvas) { var r = this.canvas.getZoom(), i = this.canvas.getRetinaScaling(); t *= r * i, n *= r * i } return { scaleX: t, scaleY: n } }, getObjectOpacity: function () { var e = this.opacity; return this.group && (e *= this.group.getObjectOpacity()), e }, _set: function (e, n) { var r = "scaleX" === e || "scaleY" === e, i = this[e] !== n, o = !1; return r && (n = this._constrainScale(n)), "scaleX" === e && n < 0 ? (this.flipX = !this.flipX, n *= -1) : "scaleY" === e && n < 0 ? (this.flipY = !this.flipY, n *= -1) : "shadow" !== e || !n || n instanceof t.Shadow ? "dirty" === e && this.group && this.group.set("dirty", n) : n = new t.Shadow(n), this[e] = n, i && (o = this.group && this.group.isOnACache(), this.cacheProperties.indexOf(e) > -1 ? (this.dirty = !0, o && this.group.set("dirty", !0)) : o && this.stateProperties.indexOf(e) > -1 && this.group.set("dirty", !0)), this }, setOnGroup: function () { }, getViewportTransform: function () { return this.canvas && this.canvas.viewportTransform ? this.canvas.viewportTransform : t.iMatrix.concat() }, isNotVisible: function () { return 0 === this.opacity || !this.width && !this.height && 0 === this.strokeWidth || !this.visible }, render: function (e) { this.isNotVisible() || this.canvas && this.canvas.skipOffscreen && !this.group && !this.isOnScreen() || (e.save(), this._setupCompositeOperation(e), this.drawSelectionBackground(e), this.transform(e), this._setOpacity(e), this._setShadow(e, this), this.shouldCache() ? (this.renderCache(), this.drawCacheOnCanvas(e)) : (this._removeCacheCanvas(), this.dirty = !1, this.drawObject(e), this.objectCaching && this.statefullCache && this.saveState({ propertySet: "cacheProperties" })), e.restore()) }, renderCache: function (e) { e = e || {}, this._cacheCanvas || this._createCacheCanvas(), this.isCacheDirty() && (this.statefullCache && this.saveState({ propertySet: "cacheProperties" }), this.drawObject(this._cacheContext, e.forClipping), this.dirty = !1) }, _removeCacheCanvas: function () { this._cacheCanvas = null, this.cacheWidth = 0, this.cacheHeight = 0 }, hasStroke: function () { return this.stroke && "transparent" !== this.stroke && 0 !== this.strokeWidth }, hasFill: function () { return this.fill && "transparent" !== this.fill }, needsItsOwnCache: function () { return !!("stroke" === this.paintFirst && this.hasFill() && this.hasStroke() && "object" == C(this.shadow) || this.clipPath) }, shouldCache: function () { return this.ownCaching = this.needsItsOwnCache() || this.objectCaching && (!this.group || !this.group.isOnACache()), this.ownCaching }, willDrawShadow: function () { return !!this.shadow && (0 !== this.shadow.offsetX || 0 !== this.shadow.offsetY) }, drawClipPathOnCache: function (e) { var n = this.clipPath; if (e.save(), n.inverted ? e.globalCompositeOperation = "destination-out" : e.globalCompositeOperation = "destination-in", n.absolutePositioned) { var r = t.util.invertTransform(this.calcTransformMatrix()); e.transform(r[0], r[1], r[2], r[3], r[4], r[5]) } n.transform(e), e.scale(1 / n.zoomX, 1 / n.zoomY), e.drawImage(n._cacheCanvas, -n.cacheTranslationX, -n.cacheTranslationY), e.restore() }, drawObject: function (e, t) { var n = this.fill, r = this.stroke; t ? (this.fill = "black", this.stroke = "", this._setClippingProperties(e)) : this._renderBackground(e), this._render(e), this._drawClipPath(e), this.fill = n, this.stroke = r }, _drawClipPath: function (e) { var t = this.clipPath; !t || (t.canvas = this.canvas, t.shouldCache(), t._transformDone = !0, t.renderCache({ forClipping: !0 }), this.drawClipPathOnCache(e)) }, drawCacheOnCanvas: function (e) { e.scale(1 / this.zoomX, 1 / this.zoomY), e.drawImage(this._cacheCanvas, -this.cacheTranslationX, -this.cacheTranslationY) }, isCacheDirty: function (e) { if (this.isNotVisible()) return !1; if (this._cacheCanvas && !e && this._updateCacheCanvas()) return !0; if (this.dirty || this.clipPath && this.clipPath.absolutePositioned || this.statefullCache && this.hasStateChanged("cacheProperties")) { if (this._cacheCanvas && !e) { var t = this.cacheWidth / this.zoomX, n = this.cacheHeight / this.zoomY; this._cacheContext.clearRect(-t / 2, -n / 2, t, n) } return !0 } return !1 }, _renderBackground: function (e) { if (this.backgroundColor) { var t = this._getNonTransformedDimensions(); e.fillStyle = this.backgroundColor, e.fillRect(-t.x / 2, -t.y / 2, t.x, t.y), this._removeShadow(e) } }, _setOpacity: function (e) { this.group && !this.group._transformDone ? e.globalAlpha = this.getObjectOpacity() : e.globalAlpha *= this.opacity }, _setStrokeStyles: function (e, t) { var n = t.stroke; n && (e.lineWidth = t.strokeWidth, e.lineCap = t.strokeLineCap, e.lineDashOffset = t.strokeDashOffset, e.lineJoin = t.strokeLineJoin, e.miterLimit = t.strokeMiterLimit, n.toLive ? "percentage" === n.gradientUnits || n.gradientTransform || n.patternTransform ? this._applyPatternForTransformedGradient(e, n) : (e.strokeStyle = n.toLive(e, this), this._applyPatternGradientTransform(e, n)) : e.strokeStyle = t.stroke) }, _setFillStyles: function (e, t) { var n = t.fill; n && (n.toLive ? (e.fillStyle = n.toLive(e, this), this._applyPatternGradientTransform(e, t.fill)) : e.fillStyle = n) }, _setClippingProperties: function (e) { e.globalAlpha = 1, e.strokeStyle = "transparent", e.fillStyle = "#000000" }, _setLineDash: function (e, t) { !t || 0 === t.length || (1 & t.length && t.push.apply(t, t), e.setLineDash(t)) }, _renderControls: function (e, n) { var r, i, o, s = this.getViewportTransform(), l = this.calcTransformMatrix(); i = void 0 !== (n = n || {}).hasBorders ? n.hasBorders : this.hasBorders, o = void 0 !== n.hasControls ? n.hasControls : this.hasControls, l = t.util.multiplyTransformMatrices(s, l), r = t.util.qrDecompose(l), e.save(), e.translate(r.translateX, r.translateY), e.lineWidth = 1 * this.borderScaleFactor, this.group || (e.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1), e.rotate(a(r.angle)), n.forActiveSelection || this.group ? i && this.drawBordersInGroup(e, r, n) : i && this.drawBorders(e, n), o && this.drawControls(e, n), e.restore() }, _setShadow: function (e) { if (this.shadow) { var n, r = this.shadow, i = this.canvas, o = i && i.viewportTransform[0] || 1, a = i && i.viewportTransform[3] || 1; n = r.nonScaling ? { scaleX: 1, scaleY: 1 } : this.getObjectScaling(), i && i._isRetinaScaling() && (o *= t.devicePixelRatio, a *= t.devicePixelRatio), e.shadowColor = r.color, e.shadowBlur = r.blur * t.browserShadowBlurConstant * (o + a) * (n.scaleX + n.scaleY) / 4, e.shadowOffsetX = r.offsetX * o * n.scaleX, e.shadowOffsetY = r.offsetY * a * n.scaleY } }, _removeShadow: function (e) { !this.shadow || (e.shadowColor = "", e.shadowBlur = e.shadowOffsetX = e.shadowOffsetY = 0) }, _applyPatternGradientTransform: function (e, t) { if (!t || !t.toLive) return { offsetX: 0, offsetY: 0 }; var n = t.gradientTransform || t.patternTransform, r = -this.width / 2 + t.offsetX || 0, i = -this.height / 2 + t.offsetY || 0; return "percentage" === t.gradientUnits ? e.transform(this.width, 0, 0, this.height, r, i) : e.transform(1, 0, 0, 1, r, i), n && e.transform(n[0], n[1], n[2], n[3], n[4], n[5]), { offsetX: r, offsetY: i } }, _renderPaintInOrder: function (e) { "stroke" === this.paintFirst ? (this._renderStroke(e), this._renderFill(e)) : (this._renderFill(e), this._renderStroke(e)) }, _render: function () { }, _renderFill: function (e) { !this.fill || (e.save(), this._setFillStyles(e, this), "evenodd" === this.fillRule ? e.fill("evenodd") : e.fill(), e.restore()) }, _renderStroke: function (e) { if (this.stroke && 0 !== this.strokeWidth) { if (this.shadow && !this.shadow.affectStroke && this._removeShadow(e), e.save(), this.strokeUniform && this.group) { var t = this.getObjectScaling(); e.scale(1 / t.scaleX, 1 / t.scaleY) } else this.strokeUniform && e.scale(1 / this.scaleX, 1 / this.scaleY); this._setLineDash(e, this.strokeDashArray), this._setStrokeStyles(e, this), e.stroke(), e.restore() } }, _applyPatternForTransformedGradient: function (e, n) { var r, i = this._limitCacheSize(this._getCacheCanvasDimensions()), o = t.util.createCanvasElement(), a = this.canvas.getRetinaScaling(), s = i.x / this.scaleX / a, l = i.y / this.scaleY / a; o.width = s, o.height = l, (r = o.getContext("2d")).beginPath(), r.moveTo(0, 0), r.lineTo(s, 0), r.lineTo(s, l), r.lineTo(0, l), r.closePath(), r.translate(s / 2, l / 2), r.scale(i.zoomX / this.scaleX / a, i.zoomY / this.scaleY / a), this._applyPatternGradientTransform(r, n), r.fillStyle = n.toLive(e), r.fill(), e.translate(-this.width / 2 - this.strokeWidth / 2, -this.height / 2 - this.strokeWidth / 2), e.scale(a * this.scaleX / i.zoomX, a * this.scaleY / i.zoomY), e.strokeStyle = r.createPattern(o, "no-repeat") }, _findCenterFromElement: function () { return { x: this.left + this.width / 2, y: this.top + this.height / 2 } }, _assignTransformMatrixProps: function () { if (this.transformMatrix) { var e = t.util.qrDecompose(this.transformMatrix); this.flipX = !1, this.flipY = !1, this.set("scaleX", e.scaleX), this.set("scaleY", e.scaleY), this.angle = e.angle, this.skewX = e.skewX, this.skewY = 0 } }, _removeTransformMatrix: function (e) { var n = this._findCenterFromElement(); this.transformMatrix && (this._assignTransformMatrixProps(), n = t.util.transformPoint(n, this.transformMatrix)), this.transformMatrix = null, e && (this.scaleX *= e.scaleX, this.scaleY *= e.scaleY, this.cropX = e.cropX, this.cropY = e.cropY, n.x += e.offsetLeft, n.y += e.offsetTop, this.width = e.width, this.height = e.height), this.setPositionByOrigin(n, "center", "center") }, clone: function (e, n) { var r = this.toObject(n); this.constructor.fromObject ? this.constructor.fromObject(r, e) : t.Object._fromObject("Object", r, e) }, cloneAsImage: function (e, n) { var r = this.toCanvasElement(n); return e && e(new t.Image(r)), this }, toCanvasElement: function (e) { e || (e = {}); var n = t.util, r = n.saveObjectTransform(this), i = this.group, o = this.shadow, a = Math.abs, s = (e.multiplier || 1) * (e.enableRetinaScaling ? t.devicePixelRatio : 1); delete this.group, e.withoutTransform && n.resetObjectTransform(this), e.withoutShadow && (this.shadow = null); var l, u, c, f, h = t.util.createCanvasElement(), d = this.getBoundingRect(!0, !0), p = this.shadow, v = { x: 0, y: 0 }; p && (u = p.blur, l = p.nonScaling ? { scaleX: 1, scaleY: 1 } : this.getObjectScaling(), v.x = 2 * Math.round(a(p.offsetX) + u) * a(l.scaleX), v.y = 2 * Math.round(a(p.offsetY) + u) * a(l.scaleY)), c = d.width + v.x, f = d.height + v.y, h.width = Math.ceil(c), h.height = Math.ceil(f); var g = new t.StaticCanvas(h, { enableRetinaScaling: !1, renderOnAddRemove: !1, skipOffscreen: !1 }); "jpeg" === e.format && (g.backgroundColor = "#fff"), this.setPositionByOrigin(new t.Point(g.width / 2, g.height / 2), "center", "center"); var m = this.canvas; g.add(this); var y = g.toCanvasElement(s || 1, e); return this.shadow = o, this.set("canvas", m), i && (this.group = i), this.set(r).setCoords(), g._objects = [], g.dispose(), g = null, y }, toDataURL: function (e) { return e || (e = {}), t.util.toDataURL(this.toCanvasElement(e), e.format || "png", e.quality || 1) }, isType: function (e) { return this.type === e }, complexity: function () { return 1 }, toJSON: function (e) { return this.toObject(e) }, rotate: function (e) { var t = ("center" !== this.originX || "center" !== this.originY) && this.centeredRotation; return t && this._setOriginToCenter(), this.set("angle", e), t && this._resetOrigin(), this }, centerH: function () { return this.canvas && this.canvas.centerObjectH(this), this }, viewportCenterH: function () { return this.canvas && this.canvas.viewportCenterObjectH(this), this }, centerV: function () { return this.canvas && this.canvas.centerObjectV(this), this }, viewportCenterV: function () { return this.canvas && this.canvas.viewportCenterObjectV(this), this }, center: function () { return this.canvas && this.canvas.centerObject(this), this }, viewportCenter: function () { return this.canvas && this.canvas.viewportCenterObject(this), this }, getLocalPointer: function (e, n) { n = n || this.canvas.getPointer(e); var r = new t.Point(n.x, n.y), i = this._getLeftTopCoords(); return this.angle && (r = t.util.rotatePoint(r, i, a(-this.angle))), { x: r.x - i.x, y: r.y - i.y } }, _setupCompositeOperation: function (e) { this.globalCompositeOperation && (e.globalCompositeOperation = this.globalCompositeOperation) } }), t.util.createAccessors && t.util.createAccessors(t.Object), n(t.Object.prototype, t.Observable), t.Object.NUM_FRACTION_DIGITS = 2, t.Object._fromObject = function (e, n, i, o) { var a = t[e]; n = r(n, !0), t.util.enlivenPatterns([n.fill, n.stroke], (function (e) { void 0 !== e[0] && (n.fill = e[0]), void 0 !== e[1] && (n.stroke = e[1]), t.util.enlivenObjects([n.clipPath], (function (e) { n.clipPath = e[0]; var t = o ? new a(n[o], n) : new a(n); i && i(t) })) })) }, t.Object.__uid = 0) }(e), function () { var e = s.util.degreesToRadians, t = { left: -.5, center: 0, right: .5 }, n = { top: -.5, center: 0, bottom: .5 }; s.util.object.extend(s.Object.prototype, { translateToGivenOrigin: function (e, r, i, o, a) { var l, u, c, f = e.x, h = e.y; return "string" == typeof r ? r = t[r] : r -= .5, "string" == typeof o ? o = t[o] : o -= .5, "string" == typeof i ? i = n[i] : i -= .5, "string" == typeof a ? a = n[a] : a -= .5, u = a - i, ((l = o - r) || u) && (c = this._getTransformedDimensions(), f = e.x + l * c.x, h = e.y + u * c.y), new s.Point(f, h) }, translateToCenterPoint: function (t, n, r) { var i = this.translateToGivenOrigin(t, n, r, "center", "center"); return this.angle ? s.util.rotatePoint(i, t, e(this.angle)) : i }, translateToOriginPoint: function (t, n, r) { var i = this.translateToGivenOrigin(t, "center", "center", n, r); return this.angle ? s.util.rotatePoint(i, t, e(this.angle)) : i }, getCenterPoint: function () { var e = new s.Point(this.left, this.top); return this.translateToCenterPoint(e, this.originX, this.originY) }, getPointByOrigin: function (e, t) { var n = this.getCenterPoint(); return this.translateToOriginPoint(n, e, t) }, toLocalPoint: function (t, n, r) { var i, o, a = this.getCenterPoint(); return i = void 0 !== n && void 0 !== r ? this.translateToGivenOrigin(a, "center", "center", n, r) : new s.Point(this.left, this.top), o = new s.Point(t.x, t.y), this.angle && (o = s.util.rotatePoint(o, a, -e(this.angle))), o.subtractEquals(i) }, setPositionByOrigin: function (e, t, n) { var r = this.translateToCenterPoint(e, t, n), i = this.translateToOriginPoint(r, this.originX, this.originY); this.set("left", i.x), this.set("top", i.y) }, adjustPosition: function (n) { var r, i, o = e(this.angle), a = this.getScaledWidth(), l = s.util.cos(o) * a, u = s.util.sin(o) * a; r = "string" == typeof this.originX ? t[this.originX] : this.originX - .5, i = "string" == typeof n ? t[n] : n - .5, this.left += l * (i - r), this.top += u * (i - r), this.setCoords(), this.originX = n }, _setOriginToCenter: function () { this._originalOriginX = this.originX, this._originalOriginY = this.originY; var e = this.getCenterPoint(); this.originX = "center", this.originY = "center", this.left = e.x, this.top = e.y }, _resetOrigin: function () { var e = this.translateToOriginPoint(this.getCenterPoint(), this._originalOriginX, this._originalOriginY); this.originX = this._originalOriginX, this.originY = this._originalOriginY, this.left = e.x, this.top = e.y, this._originalOriginX = null, this._originalOriginY = null }, _getLeftTopCoords: function () { return this.translateToOriginPoint(this.getCenterPoint(), "left", "top") } }) }(), function () { var e = s.util, t = e.degreesToRadians, n = e.multiplyTransformMatrices, r = e.transformPoint; e.object.extend(s.Object.prototype, { oCoords: null, aCoords: null, lineCoords: null, ownMatrixCache: null, matrixCache: null, controls: {}, _getCoords: function (e, t) { return t ? e ? this.calcACoords() : this.calcLineCoords() : ((!this.aCoords || !this.lineCoords) && this.setCoords(!0), e ? this.aCoords : this.lineCoords) }, getCoords: function (e, t) { return function (e) { return [new s.Point(e.tl.x, e.tl.y), new s.Point(e.tr.x, e.tr.y), new s.Point(e.br.x, e.br.y), new s.Point(e.bl.x, e.bl.y)] }(this._getCoords(e, t)) }, intersectsWithRect: function (e, t, n, r) { var i = this.getCoords(n, r); return "Intersection" === s.Intersection.intersectPolygonRectangle(i, e, t).status }, intersectsWithObject: function (e, t, n) { return "Intersection" === s.Intersection.intersectPolygonPolygon(this.getCoords(t, n), e.getCoords(t, n)).status || e.isContainedWithinObject(this, t, n) || this.isContainedWithinObject(e, t, n) }, isContainedWithinObject: function (e, t, n) { for (var r = this.getCoords(t, n), i = t ? e.aCoords : e.lineCoords, o = 0, a = e._getImageLines(i); o < 4; o++)if (!e.containsPoint(r[o], a)) return !1; return !0 }, isContainedWithinRect: function (e, t, n, r) { var i = this.getBoundingRect(n, r); return i.left >= e.x && i.left + i.width <= t.x && i.top >= e.y && i.top + i.height <= t.y }, containsPoint: function (e, t, n, r) { var i = this._getCoords(n, r), o = (t = t || this._getImageLines(i), this._findCrossPoints(e, t)); return 0 !== o && o % 2 == 1 }, isOnScreen: function (e) { if (!this.canvas) return !1; var t = this.canvas.vptCoords.tl, n = this.canvas.vptCoords.br; return !(!this.getCoords(!0, e).some((function (e) { return e.x <= n.x && e.x >= t.x && e.y <= n.y && e.y >= t.y })) && !this.intersectsWithRect(t, n, !0, e)) || this._containsCenterOfCanvas(t, n, e) }, _containsCenterOfCanvas: function (e, t, n) { var r = { x: (e.x + t.x) / 2, y: (e.y + t.y) / 2 }; return !!this.containsPoint(r, null, !0, n) }, isPartiallyOnScreen: function (e) { if (!this.canvas) return !1; var t = this.canvas.vptCoords.tl, n = this.canvas.vptCoords.br; return !!this.intersectsWithRect(t, n, !0, e) || this.getCoords(!0, e).every((function (e) { return (e.x >= n.x || e.x <= t.x) && (e.y >= n.y || e.y <= t.y) })) && this._containsCenterOfCanvas(t, n, e) }, _getImageLines: function (e) { return { topline: { o: e.tl, d: e.tr }, rightline: { o: e.tr, d: e.br }, bottomline: { o: e.br, d: e.bl }, leftline: { o: e.bl, d: e.tl } } }, _findCrossPoints: function (e, t) { var n, r, i, o, a, s = 0; for (var l in t) if (!((a = t[l]).o.y < e.y && a.d.y < e.y || a.o.y >= e.y && a.d.y >= e.y || (a.o.x === a.d.x && a.o.x >= e.x ? o = a.o.x : (n = (a.d.y - a.o.y) / (a.d.x - a.o.x), r = e.y - 0 * e.x, i = a.o.y - n * a.o.x, o = -(r - i) / (0 - n)), o >= e.x && (s += 1), 2 !== s))) break; return s }, getBoundingRect: function (t, n) { var r = this.getCoords(t, n); return e.makeBoundingBoxFromPoints(r) }, getScaledWidth: function () { return this._getTransformedDimensions().x }, getScaledHeight: function () { return this._getTransformedDimensions().y }, _constrainScale: function (e) { return Math.abs(e) < this.minScaleLimit ? e < 0 ? -this.minScaleLimit : this.minScaleLimit : 0 === e ? 1e-4 : e }, scale: function (e) { return this._set("scaleX", e), this._set("scaleY", e), this.setCoords() }, scaleToWidth: function (e, t) { var n = this.getBoundingRect(t).width / this.getScaledWidth(); return this.scale(e / this.width / n) }, scaleToHeight: function (e, t) { var n = this.getBoundingRect(t).height / this.getScaledHeight(); return this.scale(e / this.height / n) }, calcCoords: function (e) { return e ? this.calcACoords() : this.calcOCoords() }, calcLineCoords: function () { var n = this.getViewportTransform(), i = this.padding, o = t(this.angle), a = e.cos(o) * i, s = e.sin(o) * i, l = a + s, u = a - s, c = this.calcACoords(), f = { tl: r(c.tl, n), tr: r(c.tr, n), bl: r(c.bl, n), br: r(c.br, n) }; return i && (f.tl.x -= u, f.tl.y -= l, f.tr.x += l, f.tr.y -= u, f.bl.x -= l, f.bl.y += u, f.br.x += u, f.br.y += l), f }, calcOCoords: function () { var e = this._calcRotateMatrix(), t = this._calcTranslateMatrix(), r = this.getViewportTransform(), i = n(r, t), o = n(i, e), a = (o = n(o, [1 / r[0], 0, 0, 1 / r[3], 0, 0]), this._calculateCurrentDimensions()), s = {}; return this.forEachControl((function (e, t, n) { s[t] = e.positionHandler(a, o, n) })), s }, calcACoords: function () { var e = this._calcRotateMatrix(), t = this._calcTranslateMatrix(), i = n(t, e), o = this._getTransformedDimensions(), a = o.x / 2, s = o.y / 2; return { tl: r({ x: -a, y: -s }, i), tr: r({ x: a, y: -s }, i), bl: r({ x: -a, y: s }, i), br: r({ x: a, y: s }, i) } }, setCoords: function (e) { return this.aCoords = this.calcACoords(), this.lineCoords = this.group ? this.aCoords : this.calcLineCoords(), e || (this.oCoords = this.calcOCoords(), this._setCornerCoords && this._setCornerCoords()), this }, _calcRotateMatrix: function () { return e.calcRotateMatrix(this) }, _calcTranslateMatrix: function () { var e = this.getCenterPoint(); return [1, 0, 0, 1, e.x, e.y] }, transformMatrixKey: function (e) { var t = "_", n = ""; return !e && this.group && (n = this.group.transformMatrixKey(e) + t), n + this.top + t + this.left + t + this.scaleX + t + this.scaleY + t + this.skewX + t + this.skewY + t + this.angle + t + this.originX + t + this.originY + t + this.width + t + this.height + t + this.strokeWidth + this.flipX + this.flipY }, calcTransformMatrix: function (e) { var t = this.calcOwnMatrix(); if (e || !this.group) return t; var r = this.transformMatrixKey(e), i = this.matrixCache || (this.matrixCache = {}); return i.key === r ? i.value : (this.group && (t = n(this.group.calcTransformMatrix(!1), t)), i.key = r, i.value = t, t) }, calcOwnMatrix: function () { var t = this.transformMatrixKey(!0), n = this.ownMatrixCache || (this.ownMatrixCache = {}); if (n.key === t) return n.value; var r = this._calcTranslateMatrix(), i = { angle: this.angle, translateX: r[4], translateY: r[5], scaleX: this.scaleX, scaleY: this.scaleY, skewX: this.skewX, skewY: this.skewY, flipX: this.flipX, flipY: this.flipY }; return n.key = t, n.value = e.composeMatrix(i), n.value }, _calcDimensionsTransformMatrix: function (t, n, r) { return e.calcDimensionsMatrix({ skewX: t, skewY: n, scaleX: this.scaleX * (r && this.flipX ? -1 : 1), scaleY: this.scaleY * (r && this.flipY ? -1 : 1) }) }, _getNonTransformedDimensions: function () { var e = this.strokeWidth; return { x: this.width + e, y: this.height + e } }, _getTransformedDimensions: function (t, n) { void 0 === t && (t = this.skewX), void 0 === n && (n = this.skewY); var r, i, o, a = 0 === t && 0 === n; if (this.strokeUniform ? (i = this.width, o = this.height) : (i = (r = this._getNonTransformedDimensions()).x, o = r.y), a) return this._finalizeDimensions(i * this.scaleX, o * this.scaleY); var s = e.sizeAfterTransform(i, o, { scaleX: this.scaleX, scaleY: this.scaleY, skewX: t, skewY: n }); return this._finalizeDimensions(s.x, s.y) }, _finalizeDimensions: function (e, t) { return this.strokeUniform ? { x: e + this.strokeWidth, y: t + this.strokeWidth } : { x: e, y: t } }, _calculateCurrentDimensions: function () { var e = this.getViewportTransform(), t = this._getTransformedDimensions(); return r(t, e, !0).scalarAdd(2 * this.padding) } }) }(), s.util.object.extend(s.Object.prototype, { sendToBack: function () { return this.group ? s.StaticCanvas.prototype.sendToBack.call(this.group, this) : this.canvas && this.canvas.sendToBack(this), this }, bringToFront: function () { return this.group ? s.StaticCanvas.prototype.bringToFront.call(this.group, this) : this.canvas && this.canvas.bringToFront(this), this }, sendBackwards: function (e) { return this.group ? s.StaticCanvas.prototype.sendBackwards.call(this.group, this, e) : this.canvas && this.canvas.sendBackwards(this, e), this }, bringForward: function (e) { return this.group ? s.StaticCanvas.prototype.bringForward.call(this.group, this, e) : this.canvas && this.canvas.bringForward(this, e), this }, moveTo: function (e) { return this.group && "activeSelection" !== this.group.type ? s.StaticCanvas.prototype.moveTo.call(this.group, this, e) : this.canvas && this.canvas.moveTo(this, e), this } }), function () { function e(e, t) { if (t) { if (t.toLive) return e + ": url(#SVGID_" + t.id + "); "; var n = new s.Color(t), r = e + ": " + n.toRgb() + "; ", i = n.getAlpha(); return 1 !== i && (r += e + "-opacity: " + i.toString() + "; "), r } return e + ": none; " } var t = s.util.toFixed; s.util.object.extend(s.Object.prototype, { getSvgStyles: function (t) { var n = this.fillRule ? this.fillRule : "nonzero", r = this.strokeWidth ? this.strokeWidth : "0", i = this.strokeDashArray ? this.strokeDashArray.join(" ") : "none", o = this.strokeDashOffset ? this.strokeDashOffset : "0", a = this.strokeLineCap ? this.strokeLineCap : "butt", s = this.strokeLineJoin ? this.strokeLineJoin : "miter", l = this.strokeMiterLimit ? this.strokeMiterLimit : "4", u = void 0 !== this.opacity ? this.opacity : "1", c = this.visible ? "" : " visibility: hidden;", f = t ? "" : this.getSvgFilter(), h = e("fill", this.fill); return [e("stroke", this.stroke), "stroke-width: ", r, "; ", "stroke-dasharray: ", i, "; ", "stroke-linecap: ", a, "; ", "stroke-dashoffset: ", o, "; ", "stroke-linejoin: ", s, "; ", "stroke-miterlimit: ", l, "; ", h, "fill-rule: ", n, "; ", "opacity: ", u, ";", f, c].join("") }, getSvgSpanStyles: function (t, n) { var r = "; ", i = t.fontFamily ? "font-family: " + (-1 === t.fontFamily.indexOf("'") && -1 === t.fontFamily.indexOf('"') ? "'" + t.fontFamily + "'" : t.fontFamily) + r : "", o = t.strokeWidth ? "stroke-width: " + t.strokeWidth + r : "", a = t.fontSize ? "font-size: " + t.fontSize + "px" + r : "", s = t.fontStyle ? "font-style: " + t.fontStyle + r : "", l = t.fontWeight ? "font-weight: " + t.fontWeight + r : "", u = t.fill ? e("fill", t.fill) : "", c = t.stroke ? e("stroke", t.stroke) : "", f = this.getSvgTextDecoration(t); return f && (f = "text-decoration: " + f + r), [c, o, i, a, s, l, f, u, t.deltaY ? "baseline-shift: " + -t.deltaY + "; " : "", n ? "white-space: pre; " : ""].join("") }, getSvgTextDecoration: function (e) { return ["overline", "underline", "line-through"].filter((function (t) { return e[t.replace("-", "")] })).join(" ") }, getSvgFilter: function () { return this.shadow ? "filter: url(#SVGID_" + this.shadow.id + ");" : "" }, getSvgCommons: function () { return [this.id ? 'id="' + this.id + '" ' : "", this.clipPath ? 'clip-path="url(#' + this.clipPath.clipPathId + ')" ' : ""].join("") }, getSvgTransform: function (e, t) { var n = e ? this.calcTransformMatrix() : this.calcOwnMatrix(); return 'transform="' + s.util.matrixToSVG(n) + (t || "") + '" ' }, _setSVGBg: function (e) { if (this.backgroundColor) { var n = s.Object.NUM_FRACTION_DIGITS; e.push("\t\t<rect ", this._getFillAttributes(this.backgroundColor), ' x="', t(-this.width / 2, n), '" y="', t(-this.height / 2, n), '" width="', t(this.width, n), '" height="', t(this.height, n), '"></rect>\n') } }, toSVG: function (e) { return this._createBaseSVGMarkup(this._toSVG(e), { reviver: e }) }, toClipPathSVG: function (e) { return "\t" + this._createBaseClipPathSVGMarkup(this._toSVG(e), { reviver: e }) }, _createBaseClipPathSVGMarkup: function (e, t) { var n = (t = t || {}).reviver, r = t.additionalTransform || "", i = [this.getSvgTransform(!0, r), this.getSvgCommons()].join(""), o = e.indexOf("COMMON_PARTS"); return e[o] = i, n ? n(e.join("")) : e.join("") }, _createBaseSVGMarkup: function (e, t) { var n, r, i = (t = t || {}).noStyle, o = t.reviver, a = i ? "" : 'style="' + this.getSvgStyles() + '" ', l = t.withShadow ? 'style="' + this.getSvgFilter() + '" ' : "", u = this.clipPath, c = this.strokeUniform ? 'vector-effect="non-scaling-stroke" ' : "", f = u && u.absolutePositioned, h = this.stroke, d = this.fill, p = this.shadow, v = [], g = e.indexOf("COMMON_PARTS"), m = t.additionalTransform; return u && (u.clipPathId = "CLIPPATH_" + s.Object.__uid++, r = '<clipPath id="' + u.clipPathId + '" >\n' + u.toClipPathSVG(o) + "</clipPath>\n"), f && v.push("<g ", l, this.getSvgCommons(), " >\n"), v.push("<g ", this.getSvgTransform(!1), f ? "" : l + this.getSvgCommons(), " >\n"), n = [a, c, i ? "" : this.addPaintOrder(), " ", m ? 'transform="' + m + '" ' : ""].join(""), e[g] = n, d && d.toLive && v.push(d.toSVG(this)), h && h.toLive && v.push(h.toSVG(this)), p && v.push(p.toSVG(this)), u && v.push(r), v.push(e.join("")), v.push("</g>\n"), f && v.push("</g>\n"), o ? o(v.join("")) : v.join("") }, addPaintOrder: function () { return "fill" !== this.paintFirst ? ' paint-order="' + this.paintFirst + '" ' : "" } }) }(), function () { var e = s.util.object.extend, t = "stateProperties"; function n(t, n, r) { var i = {}; r.forEach((function (e) { i[e] = t[e] })), e(t[n], i, !0) } function r(e, t, n) { if (e === t) return !0; if (Array.isArray(e)) { if (!Array.isArray(t) || e.length !== t.length) return !1; for (var i = 0, o = e.length; i < o; i++)if (!r(e[i], t[i])) return !1; return !0 } if (e && "object" == C(e)) { var a, s = Object.keys(e); if (!t || "object" != C(t) || !n && s.length !== Object.keys(t).length) return !1; for (i = 0, o = s.length; i < o; i++)if ("canvas" !== (a = s[i]) && "group" !== a && !r(e[a], t[a])) return !1; return !0 } } s.util.object.extend(s.Object.prototype, { hasStateChanged: function (e) { var n = "_" + (e = e || t); return Object.keys(this[n]).length < this[e].length || !r(this[n], this, !0) }, saveState: function (e) { var r = e && e.propertySet || t, i = "_" + r; return this[i] ? (n(this, i, this[r]), e && e.stateProperties && n(this, i, e.stateProperties), this) : this.setupState(e) }, setupState: function (e) { var n = (e = e || {}).propertySet || t; return e.propertySet = n, this["_" + n] = {}, this.saveState(e), this } }) }(), function () { var e = s.util.degreesToRadians; s.util.object.extend(s.Object.prototype, { _findTargetCorner: function (e, t) { if (!this.hasControls || this.group || !this.canvas || this.canvas._activeObject !== this) return !1; var n, r, i, o = e.x, a = e.y, s = Object.keys(this.oCoords), l = s.length - 1; for (this.__corner = 0; l >= 0; l--)if (i = s[l], this.isControlVisible(i) && (r = this._getImageLines(t ? this.oCoords[i].touchCorner : this.oCoords[i].corner), 0 !== (n = this._findCrossPoints({ x: o, y: a }, r)) && n % 2 == 1)) return this.__corner = i, i; return !1 }, forEachControl: function (e) { for (var t in this.controls) e(this.controls[t], t, this) }, _setCornerCoords: function () { var e = this.oCoords; for (var t in e) { var n = this.controls[t]; e[t].corner = n.calcCornerCoords(this.angle, this.cornerSize, e[t].x, e[t].y, !1), e[t].touchCorner = n.calcCornerCoords(this.angle, this.touchCornerSize, e[t].x, e[t].y, !0) } }, drawSelectionBackground: function (t) { if (!this.selectionBackgroundColor || this.canvas && !this.canvas.interactive || this.canvas && this.canvas._activeObject !== this) return this; t.save(); var n = this.getCenterPoint(), r = this._calculateCurrentDimensions(), i = this.canvas.viewportTransform; return t.translate(n.x, n.y), t.scale(1 / i[0], 1 / i[3]), t.rotate(e(this.angle)), t.fillStyle = this.selectionBackgroundColor, t.fillRect(-r.x / 2, -r.y / 2, r.x, r.y), t.restore(), this }, drawBorders: function (e, t) { t = t || {}; var n = this._calculateCurrentDimensions(), r = this.borderScaleFactor, i = n.x + r, o = n.y + r, a = void 0 !== t.hasControls ? t.hasControls : this.hasControls, s = !1; return e.save(), e.strokeStyle = t.borderColor || this.borderColor, this._setLineDash(e, t.borderDashArray || this.borderDashArray), e.strokeRect(-i / 2, -o / 2, i, o), a && (e.beginPath(), this.forEachControl((function (t, n, r) { t.withConnection && t.getVisibility(r, n) && (s = !0, e.moveTo(t.x * i, t.y * o), e.lineTo(t.x * i + t.offsetX, t.y * o + t.offsetY)) })), s && e.stroke()), e.restore(), this }, drawBordersInGroup: function (e, t, n) { n = n || {}; var r = s.util.sizeAfterTransform(this.width, this.height, t), i = this.strokeWidth, o = this.strokeUniform, a = this.borderScaleFactor, l = r.x + i * (o ? this.canvas.getZoom() : t.scaleX) + a, u = r.y + i * (o ? this.canvas.getZoom() : t.scaleY) + a; return e.save(), this._setLineDash(e, n.borderDashArray || this.borderDashArray), e.strokeStyle = n.borderColor || this.borderColor, e.strokeRect(-l / 2, -u / 2, l, u), e.restore(), this }, drawControls: function (e, t) { t = t || {}, e.save(); var n, r, i = this.canvas.getRetinaScaling(); return e.setTransform(i, 0, 0, i, 0, 0), e.strokeStyle = e.fillStyle = t.cornerColor || this.cornerColor, this.transparentCorners || (e.strokeStyle = t.cornerStrokeColor || this.cornerStrokeColor), this._setLineDash(e, t.cornerDashArray || this.cornerDashArray), this.setCoords(), this.group && (n = this.group.calcTransformMatrix()), this.forEachControl((function (i, o, a) { r = a.oCoords[o], i.getVisibility(a, o) && (n && (r = s.util.transformPoint(r, n)), i.render(e, r.x, r.y, t, a)) })), e.restore(), this }, isControlVisible: function (e) { return this.controls[e] && this.controls[e].getVisibility(this, e) }, setControlVisible: function (e, t) { return this._controlsVisibility || (this._controlsVisibility = {}), this._controlsVisibility[e] = t, this }, setControlsVisibility: function (e) { for (var t in e || (e = {}), e) this.setControlVisible(t, e[t]); return this }, onDeselect: function () { }, onSelect: function () { } }) }(), s.util.object.extend(s.StaticCanvas.prototype, { FX_DURATION: 500, fxCenterObjectH: function (e, t) { var n = function () { }, r = (t = t || {}).onComplete || n, i = t.onChange || n, o = this; return s.util.animate({ startValue: e.left, endValue: this.getCenter().left, duration: this.FX_DURATION, onChange: function (t) { e.set("left", t), o.requestRenderAll(), i() }, onComplete: function () { e.setCoords(), r() } }), this }, fxCenterObjectV: function (e, t) { var n = function () { }, r = (t = t || {}).onComplete || n, i = t.onChange || n, o = this; return s.util.animate({ startValue: e.top, endValue: this.getCenter().top, duration: this.FX_DURATION, onChange: function (t) { e.set("top", t), o.requestRenderAll(), i() }, onComplete: function () { e.setCoords(), r() } }), this }, fxRemove: function (e, t) { var n = function () { }, r = (t = t || {}).onComplete || n, i = t.onChange || n, o = this; return s.util.animate({ startValue: e.opacity, endValue: 0, duration: this.FX_DURATION, onChange: function (t) { e.set("opacity", t), o.requestRenderAll(), i() }, onComplete: function () { o.remove(e), r() } }), this } }), s.util.object.extend(s.Object.prototype, { animate: function () { if (arguments[0] && "object" == C(arguments[0])) { var e, t, n = []; for (e in arguments[0]) n.push(e); for (var r = 0, i = n.length; r < i; r++)e = n[r], t = r !== i - 1, this._animate(e, arguments[0][e], arguments[1], t) } else this._animate.apply(this, arguments); return this }, _animate: function (e, t, n, r) { var i, o = this; t = t.toString(), n = n ? s.util.object.clone(n) : {}, ~e.indexOf(".") && (i = e.split(".")); var a = o.colorProperties.indexOf(e) > -1 || i && o.colorProperties.indexOf(i[1]) > -1, l = i ? this.get(i[0])[i[1]] : this.get(e); "from" in n || (n.from = l), a || (t = ~t.indexOf("=") ? l + parseFloat(t.replace("=", "")) : parseFloat(t)); var u = { startValue: n.from, endValue: t, byValue: n.by, easing: n.easing, duration: n.duration, abort: n.abort && function (e, t, r) { return n.abort.call(o, e, t, r) }, onChange: function (t, a, s) { i ? o[i[0]][i[1]] = t : o.set(e, t), !r && n.onChange && n.onChange(t, a, s) }, onComplete: function (e, t, i) { r || (o.setCoords(), n.onComplete && n.onComplete(e, t, i)) } }; return a ? s.util.animateColor(u.startValue, u.endValue, u.duration, u) : s.util.animate(u) } }), function (e) { var t = e.fabric || (e.fabric = {}), n = t.util.object.extend, r = t.util.object.clone, i = { x1: 1, x2: 1, y1: 1, y2: 1 }; function o(e, t) { var n = e.origin, r = e.axis1, i = e.axis2, o = e.dimension, a = t.nearest, s = t.center, l = t.farthest; return function () { switch (this.get(n)) { case a: return Math.min(this.get(r), this.get(i)); case s: return Math.min(this.get(r), this.get(i)) + .5 * this.get(o); case l: return Math.max(this.get(r), this.get(i)) } } } t.Line ? t.warn("fabric.Line is already defined") : (t.Line = t.util.createClass(t.Object, { type: "line", x1: 0, y1: 0, x2: 0, y2: 0, cacheProperties: t.Object.prototype.cacheProperties.concat("x1", "x2", "y1", "y2"), initialize: function (e, t) { e || (e = [0, 0, 0, 0]), this.callSuper("initialize", t), this.set("x1", e[0]), this.set("y1", e[1]), this.set("x2", e[2]), this.set("y2", e[3]), this._setWidthHeight(t) }, _setWidthHeight: function (e) { e || (e = {}), this.width = Math.abs(this.x2 - this.x1), this.height = Math.abs(this.y2 - this.y1), this.left = "left" in e ? e.left : this._getLeftToOriginX(), this.top = "top" in e ? e.top : this._getTopToOriginY() }, _set: function (e, t) { return this.callSuper("_set", e, t), void 0 !== i[e] && this._setWidthHeight(), this }, _getLeftToOriginX: o({ origin: "originX", axis1: "x1", axis2: "x2", dimension: "width" }, { nearest: "left", center: "center", farthest: "right" }), _getTopToOriginY: o({ origin: "originY", axis1: "y1", axis2: "y2", dimension: "height" }, { nearest: "top", center: "center", farthest: "bottom" }), _render: function (e) { e.beginPath(); var t = this.calcLinePoints(); e.moveTo(t.x1, t.y1), e.lineTo(t.x2, t.y2), e.lineWidth = this.strokeWidth; var n = e.strokeStyle; e.strokeStyle = this.stroke || e.fillStyle, this.stroke && this._renderStroke(e), e.strokeStyle = n }, _findCenterFromElement: function () { return { x: (this.x1 + this.x2) / 2, y: (this.y1 + this.y2) / 2 } }, toObject: function (e) { return n(this.callSuper("toObject", e), this.calcLinePoints()) }, _getNonTransformedDimensions: function () { var e = this.callSuper("_getNonTransformedDimensions"); return "butt" === this.strokeLineCap && (0 === this.width && (e.y -= this.strokeWidth), 0 === this.height && (e.x -= this.strokeWidth)), e }, calcLinePoints: function () { var e = this.x1 <= this.x2 ? -1 : 1, t = this.y1 <= this.y2 ? -1 : 1, n = e * this.width * .5, r = t * this.height * .5; return { x1: n, x2: e * this.width * -.5, y1: r, y2: t * this.height * -.5 } }, _toSVG: function () { var e = this.calcLinePoints(); return ["<line ", "COMMON_PARTS", 'x1="', e.x1, '" y1="', e.y1, '" x2="', e.x2, '" y2="', e.y2, '" />\n'] } }), t.Line.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")), t.Line.fromElement = function (e, r, i) { i = i || {}; var o = t.parseAttributes(e, t.Line.ATTRIBUTE_NAMES), a = [o.x1 || 0, o.y1 || 0, o.x2 || 0, o.y2 || 0]; r(new t.Line(a, n(o, i))) }, t.Line.fromObject = function (e, n) { var i = r(e, !0); i.points = [e.x1, e.y1, e.x2, e.y2], t.Object._fromObject("Line", i, (function (e) { delete e.points, n && n(e) }), "points") }) }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = Math.PI; t.Circle ? t.warn("fabric.Circle is already defined.") : (t.Circle = t.util.createClass(t.Object, { type: "circle", radius: 0, startAngle: 0, endAngle: 2 * n, cacheProperties: t.Object.prototype.cacheProperties.concat("radius", "startAngle", "endAngle"), _set: function (e, t) { return this.callSuper("_set", e, t), "radius" === e && this.setRadius(t), this }, toObject: function (e) { return this.callSuper("toObject", ["radius", "startAngle", "endAngle"].concat(e)) }, _toSVG: function () { var e, r = (this.endAngle - this.startAngle) % (2 * n); if (0 === r) e = ["<circle ", "COMMON_PARTS", 'cx="0" cy="0" ', 'r="', this.radius, '" />\n']; else { var i = t.util.cos(this.startAngle) * this.radius, o = t.util.sin(this.startAngle) * this.radius, a = t.util.cos(this.endAngle) * this.radius, s = t.util.sin(this.endAngle) * this.radius, l = r > n ? "1" : "0"; e = ['<path d="M ' + i + " " + o, " A " + this.radius + " " + this.radius, " 0 ", +l + " 1", " " + a + " " + s, '" ', "COMMON_PARTS", " />\n"] } return e }, _render: function (e) { e.beginPath(), e.arc(0, 0, this.radius, this.startAngle, this.endAngle, !1), this._renderPaintInOrder(e) }, getRadiusX: function () { return this.get("radius") * this.get("scaleX") }, getRadiusY: function () { return this.get("radius") * this.get("scaleY") }, setRadius: function (e) { return this.radius = e, this.set("width", 2 * e).set("height", 2 * e) } }), t.Circle.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")), t.Circle.fromElement = function (e, n) { var r = t.parseAttributes(e, t.Circle.ATTRIBUTE_NAMES); if (!function (e) { return "radius" in e && e.radius >= 0 }(r)) throw new Error("value of `r` attribute is required and can not be negative"); r.left = (r.left || 0) - r.radius, r.top = (r.top || 0) - r.radius, n(new t.Circle(r)) }, t.Circle.fromObject = function (e, n) { t.Object._fromObject("Circle", e, n) }) }(e), function (e) { var t = e.fabric || (e.fabric = {}); t.Triangle ? t.warn("fabric.Triangle is already defined") : (t.Triangle = t.util.createClass(t.Object, { type: "triangle", width: 100, height: 100, _render: function (e) { var t = this.width / 2, n = this.height / 2; e.beginPath(), e.moveTo(-t, n), e.lineTo(0, -n), e.lineTo(t, n), e.closePath(), this._renderPaintInOrder(e) }, _toSVG: function () { var e = this.width / 2, t = this.height / 2; return ["<polygon ", "COMMON_PARTS", 'points="', [-e + " " + t, "0 " + -t, e + " " + t].join(","), '" />'] } }), t.Triangle.fromObject = function (e, n) { return t.Object._fromObject("Triangle", e, n) }) }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = 2 * Math.PI; t.Ellipse ? t.warn("fabric.Ellipse is already defined.") : (t.Ellipse = t.util.createClass(t.Object, { type: "ellipse", rx: 0, ry: 0, cacheProperties: t.Object.prototype.cacheProperties.concat("rx", "ry"), initialize: function (e) { this.callSuper("initialize", e), this.set("rx", e && e.rx || 0), this.set("ry", e && e.ry || 0) }, _set: function (e, t) { switch (this.callSuper("_set", e, t), e) { case "rx": this.rx = t, this.set("width", 2 * t); break; case "ry": this.ry = t, this.set("height", 2 * t) }return this }, getRx: function () { return this.get("rx") * this.get("scaleX") }, getRy: function () { return this.get("ry") * this.get("scaleY") }, toObject: function (e) { return this.callSuper("toObject", ["rx", "ry"].concat(e)) }, _toSVG: function () { return ["<ellipse ", "COMMON_PARTS", 'cx="0" cy="0" ', 'rx="', this.rx, '" ry="', this.ry, '" />\n'] }, _render: function (e) { e.beginPath(), e.save(), e.transform(1, 0, 0, this.ry / this.rx, 0, 0), e.arc(0, 0, this.rx, 0, n, !1), e.restore(), this._renderPaintInOrder(e) } }), t.Ellipse.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")), t.Ellipse.fromElement = function (e, n) { var r = t.parseAttributes(e, t.Ellipse.ATTRIBUTE_NAMES); r.left = (r.left || 0) - r.rx, r.top = (r.top || 0) - r.ry, n(new t.Ellipse(r)) }, t.Ellipse.fromObject = function (e, n) { t.Object._fromObject("Ellipse", e, n) }) }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = t.util.object.extend; t.Rect ? t.warn("fabric.Rect is already defined") : (t.Rect = t.util.createClass(t.Object, { stateProperties: t.Object.prototype.stateProperties.concat("rx", "ry"), type: "rect", rx: 0, ry: 0, cacheProperties: t.Object.prototype.cacheProperties.concat("rx", "ry"), initialize: function (e) { this.callSuper("initialize", e), this._initRxRy() }, _initRxRy: function () { this.rx && !this.ry ? this.ry = this.rx : this.ry && !this.rx && (this.rx = this.ry) }, _render: function (e) { var t = this.rx ? Math.min(this.rx, this.width / 2) : 0, n = this.ry ? Math.min(this.ry, this.height / 2) : 0, r = this.width, i = this.height, o = -this.width / 2, a = -this.height / 2, s = 0 !== t || 0 !== n, l = .4477152502; e.beginPath(), e.moveTo(o + t, a), e.lineTo(o + r - t, a), s && e.bezierCurveTo(o + r - l * t, a, o + r, a + l * n, o + r, a + n), e.lineTo(o + r, a + i - n), s && e.bezierCurveTo(o + r, a + i - l * n, o + r - l * t, a + i, o + r - t, a + i), e.lineTo(o + t, a + i), s && e.bezierCurveTo(o + l * t, a + i, o, a + i - l * n, o, a + i - n), e.lineTo(o, a + n), s && e.bezierCurveTo(o, a + l * n, o + l * t, a, o + t, a), e.closePath(), this._renderPaintInOrder(e) }, toObject: function (e) { return this.callSuper("toObject", ["rx", "ry"].concat(e)) }, _toSVG: function () { return ["<rect ", "COMMON_PARTS", 'x="', -this.width / 2, '" y="', -this.height / 2, '" rx="', this.rx, '" ry="', this.ry, '" width="', this.width, '" height="', this.height, '" />\n'] } }), t.Rect.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")), t.Rect.fromElement = function (e, r, i) { if (!e) return r(null); i = i || {}; var o = t.parseAttributes(e, t.Rect.ATTRIBUTE_NAMES); o.left = o.left || 0, o.top = o.top || 0, o.height = o.height || 0, o.width = o.width || 0; var a = new t.Rect(n(i ? t.util.object.clone(i) : {}, o)); a.visible = a.visible && a.width > 0 && a.height > 0, r(a) }, t.Rect.fromObject = function (e, n) { return t.Object._fromObject("Rect", e, n) }) }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = t.util.object.extend, r = t.util.array.min, i = t.util.array.max, o = t.util.toFixed; t.Polyline ? t.warn("fabric.Polyline is already defined") : (t.Polyline = t.util.createClass(t.Object, { type: "polyline", points: null, cacheProperties: t.Object.prototype.cacheProperties.concat("points"), initialize: function (e, t) { t = t || {}, this.points = e || [], this.callSuper("initialize", t), this._setPositionDimensions(t) }, _setPositionDimensions: function (e) { var t, n = this._calcDimensions(e); this.width = n.width, this.height = n.height, e.fromSVG || (t = this.translateToGivenOrigin({ x: n.left - this.strokeWidth / 2, y: n.top - this.strokeWidth / 2 }, "left", "top", this.originX, this.originY)), void 0 === e.left && (this.left = e.fromSVG ? n.left : t.x), void 0 === e.top && (this.top = e.fromSVG ? n.top : t.y), this.pathOffset = { x: n.left + this.width / 2, y: n.top + this.height / 2 } }, _calcDimensions: function () { var e = this.points, t = r(e, "x") || 0, n = r(e, "y") || 0; return { left: t, top: n, width: (i(e, "x") || 0) - t, height: (i(e, "y") || 0) - n } }, toObject: function (e) { return n(this.callSuper("toObject", e), { points: this.points.concat() }) }, _toSVG: function () { for (var e = [], n = this.pathOffset.x, r = this.pathOffset.y, i = t.Object.NUM_FRACTION_DIGITS, a = 0, s = this.points.length; a < s; a++)e.push(o(this.points[a].x - n, i), ",", o(this.points[a].y - r, i), " "); return ["<" + this.type + " ", "COMMON_PARTS", 'points="', e.join(""), '" />\n'] }, commonRender: function (e) { var t, n = this.points.length, r = this.pathOffset.x, i = this.pathOffset.y; if (!n || isNaN(this.points[n - 1].y)) return !1; e.beginPath(), e.moveTo(this.points[0].x - r, this.points[0].y - i); for (var o = 0; o < n; o++)t = this.points[o], e.lineTo(t.x - r, t.y - i); return !0 }, _render: function (e) { !this.commonRender(e) || this._renderPaintInOrder(e) }, complexity: function () { return this.get("points").length } }), t.Polyline.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat(), t.Polyline.fromElementGenerator = function (e) { return function (r, i, o) { if (!r) return i(null); o || (o = {}); var a = t.parsePointsAttribute(r.getAttribute("points")), s = t.parseAttributes(r, t[e].ATTRIBUTE_NAMES); s.fromSVG = !0, i(new t[e](a, n(s, o))) } }, t.Polyline.fromElement = t.Polyline.fromElementGenerator("Polyline"), t.Polyline.fromObject = function (e, n) { return t.Object._fromObject("Polyline", e, n, "points") }) }(e), function (e) { var t = e.fabric || (e.fabric = {}); t.Polygon ? t.warn("fabric.Polygon is already defined") : (t.Polygon = t.util.createClass(t.Polyline, { type: "polygon", _render: function (e) { !this.commonRender(e) || (e.closePath(), this._renderPaintInOrder(e)) } }), t.Polygon.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat(), t.Polygon.fromElement = t.Polyline.fromElementGenerator("Polygon"), t.Polygon.fromObject = function (e, n) { t.Object._fromObject("Polygon", e, n, "points") }) }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = t.util.array.min, r = t.util.array.max, i = t.util.object.extend, o = Object.prototype.toString, a = t.util.toFixed; t.Path ? t.warn("fabric.Path is already defined") : (t.Path = t.util.createClass(t.Object, { type: "path", path: null, cacheProperties: t.Object.prototype.cacheProperties.concat("path", "fillRule"), stateProperties: t.Object.prototype.stateProperties.concat("path"), initialize: function (e, n) { n = n || {}, this.callSuper("initialize", n), e || (e = []); var r = "[object Array]" === o.call(e); this.path = t.util.makePathSimpler(r ? e : t.util.parsePath(e)), this.path && t.Polyline.prototype._setPositionDimensions.call(this, n) }, _renderPathCommands: function (e) { var t, n = 0, r = 0, i = 0, o = 0, a = 0, s = 0, l = -this.pathOffset.x, u = -this.pathOffset.y; e.beginPath(); for (var c = 0, f = this.path.length; c < f; ++c)switch ((t = this.path[c])[0]) { case "L": i = t[1], o = t[2], e.lineTo(i + l, o + u); break; case "M": n = i = t[1], r = o = t[2], e.moveTo(i + l, o + u); break; case "C": i = t[5], o = t[6], a = t[3], s = t[4], e.bezierCurveTo(t[1] + l, t[2] + u, a + l, s + u, i + l, o + u); break; case "Q": e.quadraticCurveTo(t[1] + l, t[2] + u, t[3] + l, t[4] + u), i = t[3], o = t[4], a = t[1], s = t[2]; break; case "z": case "Z": i = n, o = r, e.closePath() } }, _render: function (e) { this._renderPathCommands(e), this._renderPaintInOrder(e) }, toString: function () { return "#<fabric.Path (" + this.complexity() + '): { "top": ' + this.top + ', "left": ' + this.left + " }>" }, toObject: function (e) { return i(this.callSuper("toObject", e), { path: this.path.map((function (e) { return e.slice() })) }) }, toDatalessObject: function (e) { var t = this.toObject(["sourcePath"].concat(e)); return t.sourcePath && delete t.path, t }, _toSVG: function () { return ["<path ", "COMMON_PARTS", 'd="', t.util.joinPath(this.path), '" stroke-linecap="round" ', "/>\n"] }, _getOffsetTransform: function () { var e = t.Object.NUM_FRACTION_DIGITS; return " translate(" + a(-this.pathOffset.x, e) + ", " + a(-this.pathOffset.y, e) + ")" }, toClipPathSVG: function (e) { var t = this._getOffsetTransform(); return "\t" + this._createBaseClipPathSVGMarkup(this._toSVG(), { reviver: e, additionalTransform: t }) }, toSVG: function (e) { var t = this._getOffsetTransform(); return this._createBaseSVGMarkup(this._toSVG(), { reviver: e, additionalTransform: t }) }, complexity: function () { return this.path.length }, _calcDimensions: function () { for (var e, i, o = [], a = [], s = 0, l = 0, u = 0, c = 0, f = 0, h = this.path.length; f < h; ++f) { switch ((e = this.path[f])[0]) { case "L": u = e[1], c = e[2], i = []; break; case "M": s = u = e[1], l = c = e[2], i = []; break; case "C": i = t.util.getBoundsOfCurve(u, c, e[1], e[2], e[3], e[4], e[5], e[6]), u = e[5], c = e[6]; break; case "Q": i = t.util.getBoundsOfCurve(u, c, e[1], e[2], e[1], e[2], e[3], e[4]), u = e[3], c = e[4]; break; case "z": case "Z": u = s, c = l }i.forEach((function (e) { o.push(e.x), a.push(e.y) })), o.push(u), a.push(c) } var d = n(o) || 0, p = n(a) || 0; return { left: d, top: p, width: (r(o) || 0) - d, height: (r(a) || 0) - p } } }), t.Path.fromObject = function (e, n) { if ("string" == typeof e.sourcePath) { var r = e.sourcePath; t.loadSVGFromURL(r, (function (t) { var r = t[0]; r.setOptions(e), n && n(r) })) } else t.Object._fromObject("Path", e, n, "path") }, t.Path.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat(["d"]), t.Path.fromElement = function (e, n, r) { var o = t.parseAttributes(e, t.Path.ATTRIBUTE_NAMES); o.fromSVG = !0, n(new t.Path(o.d, i(o, r))) }) }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = t.util.array.min, r = t.util.array.max; t.Group || (t.Group = t.util.createClass(t.Object, t.Collection, { type: "group", strokeWidth: 0, subTargetCheck: !1, cacheProperties: [], useSetOnGroup: !1, initialize: function (e, t, n) { t = t || {}, this._objects = [], n && this.callSuper("initialize", t), this._objects = e || []; for (var r = this._objects.length; r--;)this._objects[r].group = this; if (n) this._updateObjectsACoords(); else { var i = t && t.centerPoint; void 0 !== t.originX && (this.originX = t.originX), void 0 !== t.originY && (this.originY = t.originY), i || this._calcBounds(), this._updateObjectsCoords(i), delete t.centerPoint, this.callSuper("initialize", t) } this.setCoords() }, _updateObjectsACoords: function () { for (var e = this._objects.length; e--;)this._objects[e].setCoords(!0) }, _updateObjectsCoords: function (e) { e = e || this.getCenterPoint(); for (var t = this._objects.length; t--;)this._updateObjectCoords(this._objects[t], e) }, _updateObjectCoords: function (e, t) { var n = e.left, r = e.top; e.set({ left: n - t.x, top: r - t.y }), e.group = this, e.setCoords(!0) }, toString: function () { return "#<fabric.Group: (" + this.complexity() + ")>" }, addWithUpdate: function (e) { var n = !!this.group; return this._restoreObjectsState(), t.util.resetObjectTransform(this), e && (n && t.util.removeTransformFromObject(e, this.group.calcTransformMatrix()), this._objects.push(e), e.group = this, e._set("canvas", this.canvas)), this._calcBounds(), this._updateObjectsCoords(), this.dirty = !0, n ? this.group.addWithUpdate() : this.setCoords(), this }, removeWithUpdate: function (e) { return this._restoreObjectsState(), t.util.resetObjectTransform(this), this.remove(e), this._calcBounds(), this._updateObjectsCoords(), this.setCoords(), this.dirty = !0, this }, _onObjectAdded: function (e) { this.dirty = !0, e.group = this, e._set("canvas", this.canvas) }, _onObjectRemoved: function (e) { this.dirty = !0, delete e.group }, _set: function (e, n) { var r = this._objects.length; if (this.useSetOnGroup) for (; r--;)this._objects[r].setOnGroup(e, n); if ("canvas" === e) for (; r--;)this._objects[r]._set(e, n); t.Object.prototype._set.call(this, e, n) }, toObject: function (e) { var n = this.includeDefaultValues, r = this._objects.filter((function (e) { return !e.excludeFromExport })).map((function (t) { var r = t.includeDefaultValues; t.includeDefaultValues = n; var i = t.toObject(e); return t.includeDefaultValues = r, i })), i = t.Object.prototype.toObject.call(this, e); return i.objects = r, i }, toDatalessObject: function (e) { var n, r = this.sourcePath; if (r) n = r; else { var i = this.includeDefaultValues; n = this._objects.map((function (t) { var n = t.includeDefaultValues; t.includeDefaultValues = i; var r = t.toDatalessObject(e); return t.includeDefaultValues = n, r })) } var o = t.Object.prototype.toDatalessObject.call(this, e); return o.objects = n, o }, render: function (e) { this._transformDone = !0, this.callSuper("render", e), this._transformDone = !1 }, shouldCache: function () { var e = t.Object.prototype.shouldCache.call(this); if (e) for (var n = 0, r = this._objects.length; n < r; n++)if (this._objects[n].willDrawShadow()) return this.ownCaching = !1, !1; return e }, willDrawShadow: function () { if (t.Object.prototype.willDrawShadow.call(this)) return !0; for (var e = 0, n = this._objects.length; e < n; e++)if (this._objects[e].willDrawShadow()) return !0; return !1 }, isOnACache: function () { return this.ownCaching || this.group && this.group.isOnACache() }, drawObject: function (e) { for (var t = 0, n = this._objects.length; t < n; t++)this._objects[t].render(e); this._drawClipPath(e) }, isCacheDirty: function (e) { if (this.callSuper("isCacheDirty", e)) return !0; if (!this.statefullCache) return !1; for (var t = 0, n = this._objects.length; t < n; t++)if (this._objects[t].isCacheDirty(!0)) { if (this._cacheCanvas) { var r = this.cacheWidth / this.zoomX, i = this.cacheHeight / this.zoomY; this._cacheContext.clearRect(-r / 2, -i / 2, r, i) } return !0 } return !1 }, _restoreObjectsState: function () { var e = this.calcOwnMatrix(); return this._objects.forEach((function (n) { t.util.addTransformToObject(n, e), delete n.group, n.setCoords() })), this }, realizeTransform: function (e, n) { return t.util.addTransformToObject(e, n), e }, destroy: function () { return this._objects.forEach((function (e) { e.set("dirty", !0) })), this._restoreObjectsState() }, toActiveSelection: function () { if (this.canvas) { var e = this._objects, n = this.canvas; this._objects = []; var r = this.toObject(); delete r.objects; var i = new t.ActiveSelection([]); return i.set(r), i.type = "activeSelection", n.remove(this), e.forEach((function (e) { e.group = i, e.dirty = !0, n.add(e) })), i.canvas = n, i._objects = e, n._activeObject = i, i.setCoords(), i } }, ungroupOnCanvas: function () { return this._restoreObjectsState() }, setObjectsCoords: function () { return this.forEachObject((function (e) { e.setCoords(!0) })), this }, _calcBounds: function (e) { for (var t, n, r, i, o = [], a = [], s = ["tr", "br", "bl", "tl"], l = 0, u = this._objects.length, c = s.length; l < u; ++l) { for (r = (t = this._objects[l]).calcACoords(), i = 0; i < c; i++)n = s[i], o.push(r[n].x), a.push(r[n].y); t.aCoords = r } this._getBounds(o, a, e) }, _getBounds: function (e, i, o) { var a = new t.Point(n(e), n(i)), s = new t.Point(r(e), r(i)), l = a.y || 0, u = a.x || 0, c = s.x - a.x || 0, f = s.y - a.y || 0; this.width = c, this.height = f, o || this.setPositionByOrigin({ x: u, y: l }, "left", "top") }, _toSVG: function (e) { for (var t = ["<g ", "COMMON_PARTS", " >\n"], n = 0, r = this._objects.length; n < r; n++)t.push("\t\t", this._objects[n].toSVG(e)); return t.push("</g>\n"), t }, getSvgStyles: function () { var e = void 0 !== this.opacity && 1 !== this.opacity ? "opacity: " + this.opacity + ";" : "", t = this.visible ? "" : " visibility: hidden;"; return [e, this.getSvgFilter(), t].join("") }, toClipPathSVG: function (e) { for (var t = [], n = 0, r = this._objects.length; n < r; n++)t.push("\t", this._objects[n].toClipPathSVG(e)); return this._createBaseClipPathSVGMarkup(t, { reviver: e }) } }), t.Group.fromObject = function (e, n) { var r = e.objects, i = t.util.object.clone(e, !0); delete i.objects, "string" != typeof r ? t.util.enlivenObjects(r, (function (r) { t.util.enlivenObjects([e.clipPath], (function (i) { var o = t.util.object.clone(e, !0); o.clipPath = i[0], delete o.objects, n && n(new t.Group(r, o, !0)) })) })) : t.loadSVGFromURL(r, (function (o) { var a = t.util.groupSVGElements(o, e, r); a.set(i), n && n(a) })) }) }(e), function (e) { var t = e.fabric || (e.fabric = {}); t.ActiveSelection || (t.ActiveSelection = t.util.createClass(t.Group, { type: "activeSelection", initialize: function (e, n) { n = n || {}, this._objects = e || []; for (var r = this._objects.length; r--;)this._objects[r].group = this; n.originX && (this.originX = n.originX), n.originY && (this.originY = n.originY), this._calcBounds(), this._updateObjectsCoords(), t.Object.prototype.initialize.call(this, n), this.setCoords() }, toGroup: function () { var e = this._objects.concat(); this._objects = []; var n = t.Object.prototype.toObject.call(this), r = new t.Group([]); if (delete n.type, r.set(n), e.forEach((function (e) { e.canvas.remove(e), e.group = r })), r._objects = e, !this.canvas) return r; var i = this.canvas; return i.add(r), i._activeObject = r, r.setCoords(), r }, onDeselect: function () { return this.destroy(), !1 }, toString: function () { return "#<fabric.ActiveSelection: (" + this.complexity() + ")>" }, shouldCache: function () { return !1 }, isOnACache: function () { return !1 }, _renderControls: function (e, t, n) { e.save(), e.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1, this.callSuper("_renderControls", e, t), void 0 === (n = n || {}).hasControls && (n.hasControls = !1), n.forActiveSelection = !0; for (var r = 0, i = this._objects.length; r < i; r++)this._objects[r]._renderControls(e, n); e.restore() } }), t.ActiveSelection.fromObject = function (e, n) { t.util.enlivenObjects(e.objects, (function (r) { delete e.objects, n && n(new t.ActiveSelection(r, e, !0)) })) }) }(e), function (e) { var t = s.util.object.extend; e.fabric || (e.fabric = {}), e.fabric.Image ? s.warn("fabric.Image is already defined.") : (s.Image = s.util.createClass(s.Object, { type: "image", strokeWidth: 0, srcFromAttribute: !1, _lastScaleX: 1, _lastScaleY: 1, _filterScalingX: 1, _filterScalingY: 1, minimumScaleTrigger: .5, stateProperties: s.Object.prototype.stateProperties.concat("cropX", "cropY"), cacheProperties: s.Object.prototype.cacheProperties.concat("cropX", "cropY"), cacheKey: "", cropX: 0, cropY: 0, imageSmoothing: !0, initialize: function (e, t) { t || (t = {}), this.filters = [], this.cacheKey = "texture" + s.Object.__uid++, this.callSuper("initialize", t), this._initElement(e, t) }, getElement: function () { return this._element || {} }, setElement: function (e, t) { return this.removeTexture(this.cacheKey), this.removeTexture(this.cacheKey + "_filtered"), this._element = e, this._originalElement = e, this._initConfig(t), 0 !== this.filters.length && this.applyFilters(), this.resizeFilter && this.applyResizeFilters(), this }, removeTexture: function (e) { var t = s.filterBackend; t && t.evictCachesForKey && t.evictCachesForKey(e) }, dispose: function () { this.removeTexture(this.cacheKey), this.removeTexture(this.cacheKey + "_filtered"), this._cacheContext = void 0, ["_originalElement", "_element", "_filteredEl", "_cacheCanvas"].forEach(function (e) { s.util.cleanUpJsdomNode(this[e]), this[e] = void 0 }.bind(this)) }, getCrossOrigin: function () { return this._originalElement && (this._originalElement.crossOrigin || null) }, getOriginalSize: function () { var e = this.getElement(); return { width: e.naturalWidth || e.width, height: e.naturalHeight || e.height } }, _stroke: function (e) { if (this.stroke && 0 !== this.strokeWidth) { var t = this.width / 2, n = this.height / 2; e.beginPath(), e.moveTo(-t, -n), e.lineTo(t, -n), e.lineTo(t, n), e.lineTo(-t, n), e.lineTo(-t, -n), e.closePath() } }, toObject: function (e) { var n = []; this.filters.forEach((function (e) { e && n.push(e.toObject()) })); var r = t(this.callSuper("toObject", ["cropX", "cropY"].concat(e)), { src: this.getSrc(), crossOrigin: this.getCrossOrigin(), filters: n }); return this.resizeFilter && (r.resizeFilter = this.resizeFilter.toObject()), r }, hasCrop: function () { return this.cropX || this.cropY || this.width < this._element.width || this.height < this._element.height }, _toSVG: function () { var e, t = [], n = [], r = this._element, i = -this.width / 2, o = -this.height / 2, a = "", l = ""; if (!r) return []; if (this.hasCrop()) { var u = s.Object.__uid++; t.push('<clipPath id="imageCrop_' + u + '">\n', '\t<rect x="' + i + '" y="' + o + '" width="' + this.width + '" height="' + this.height + '" />\n', "</clipPath>\n"), a = ' clip-path="url(#imageCrop_' + u + ')" ' } if (this.imageSmoothing || (l = '" image-rendering="optimizeSpeed'), n.push("\t<image ", "COMMON_PARTS", 'xlink:href="', this.getSvgSrc(!0), '" x="', i - this.cropX, '" y="', o - this.cropY, '" width="', r.width || r.naturalWidth, '" height="', r.height || r.height, l, '"', a, "></image>\n"), this.stroke || this.strokeDashArray) { var c = this.fill; this.fill = null, e = ["\t<rect ", 'x="', i, '" y="', o, '" width="', this.width, '" height="', this.height, '" style="', this.getSvgStyles(), '"/>\n'], this.fill = c } return "fill" !== this.paintFirst ? t.concat(e, n) : t.concat(n, e) }, getSrc: function (e) { var t = e ? this._element : this._originalElement; return t ? t.toDataURL ? t.toDataURL() : this.srcFromAttribute ? t.getAttribute("src") : t.src : this.src || "" }, setSrc: function (e, t, n) { return s.util.loadImage(e, (function (e, r) { this.setElement(e, n), this._setWidthHeight(), t && t(this, r) }), this, n && n.crossOrigin), this }, toString: function () { return '#<fabric.Image: { src: "' + this.getSrc() + '" }>' }, applyResizeFilters: function () { var e = this.resizeFilter, t = this.minimumScaleTrigger, n = this.getTotalObjectScaling(), r = n.scaleX, i = n.scaleY, o = this._filteredEl || this._originalElement; if (this.group && this.set("dirty", !0), !e || r > t && i > t) return this._element = o, this._filterScalingX = 1, this._filterScalingY = 1, this._lastScaleX = r, void (this._lastScaleY = i); s.filterBackend || (s.filterBackend = s.initFilterBackend()); var a = s.util.createCanvasElement(), l = this._filteredEl ? this.cacheKey + "_filtered" : this.cacheKey, u = o.width, c = o.height; a.width = u, a.height = c, this._element = a, this._lastScaleX = e.scaleX = r, this._lastScaleY = e.scaleY = i, s.filterBackend.applyFilters([e], o, u, c, this._element, l), this._filterScalingX = a.width / this._originalElement.width, this._filterScalingY = a.height / this._originalElement.height }, applyFilters: function (e) { if (e = (e = e || this.filters || []).filter((function (e) { return e && !e.isNeutralState() })), this.set("dirty", !0), this.removeTexture(this.cacheKey + "_filtered"), 0 === e.length) return this._element = this._originalElement, this._filteredEl = null, this._filterScalingX = 1, this._filterScalingY = 1, this; var t = this._originalElement, n = t.naturalWidth || t.width, r = t.naturalHeight || t.height; if (this._element === this._originalElement) { var i = s.util.createCanvasElement(); i.width = n, i.height = r, this._element = i, this._filteredEl = i } else this._element = this._filteredEl, this._filteredEl.getContext("2d").clearRect(0, 0, n, r), this._lastScaleX = 1, this._lastScaleY = 1; return s.filterBackend || (s.filterBackend = s.initFilterBackend()), s.filterBackend.applyFilters(e, this._originalElement, n, r, this._element, this.cacheKey), (this._originalElement.width !== this._element.width || this._originalElement.height !== this._element.height) && (this._filterScalingX = this._element.width / this._originalElement.width, this._filterScalingY = this._element.height / this._originalElement.height), this }, _render: function (e) { s.util.setImageSmoothing(e, this.imageSmoothing), !0 !== this.isMoving && this.resizeFilter && this._needsResize() && this.applyResizeFilters(), this._stroke(e), this._renderPaintInOrder(e) }, drawCacheOnCanvas: function (e) { s.util.setImageSmoothing(e, this.imageSmoothing), s.Object.prototype.drawCacheOnCanvas.call(this, e) }, shouldCache: function () { return this.needsItsOwnCache() }, _renderFill: function (e) { var t = this._element; if (t) { var n = this._filterScalingX, r = this._filterScalingY, i = this.width, o = this.height, a = Math.min, s = Math.max, l = s(this.cropX, 0), u = s(this.cropY, 0), c = t.naturalWidth || t.width, f = t.naturalHeight || t.height, h = l * n, d = u * r, p = a(i * n, c - h), v = a(o * r, f - d), g = -i / 2, m = -o / 2, y = a(i, c / n - l), b = a(o, f / r - u); t && e.drawImage(t, h, d, p, v, g, m, y, b) } }, _needsResize: function () { var e = this.getTotalObjectScaling(); return e.scaleX !== this._lastScaleX || e.scaleY !== this._lastScaleY }, _resetWidthHeight: function () { this.set(this.getOriginalSize()) }, _initElement: function (e, t) { this.setElement(s.util.getById(e), t), s.util.addClass(this.getElement(), s.Image.CSS_CANVAS) }, _initConfig: function (e) { e || (e = {}), this.setOptions(e), this._setWidthHeight(e) }, _initFilters: function (e, t) { e && e.length ? s.util.enlivenObjects(e, (function (e) { t && t(e) }), "fabric.Image.filters") : t && t() }, _setWidthHeight: function (e) { e || (e = {}); var t = this.getElement(); this.width = e.width || t.naturalWidth || t.width || 0, this.height = e.height || t.naturalHeight || t.height || 0 }, parsePreserveAspectRatioAttribute: function () { var e, t = s.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio || ""), n = this._element.width, r = this._element.height, i = 1, o = 1, a = 0, l = 0, u = 0, c = 0, f = this.width, h = this.height, d = { width: f, height: h }; return !t || "none" === t.alignX && "none" === t.alignY ? (i = f / n, o = h / r) : ("meet" === t.meetOrSlice && (e = (f - n * (i = o = s.util.findScaleToFit(this._element, d))) / 2, "Min" === t.alignX && (a = -e), "Max" === t.alignX && (a = e), e = (h - r * o) / 2, "Min" === t.alignY && (l = -e), "Max" === t.alignY && (l = e)), "slice" === t.meetOrSlice && (e = n - f / (i = o = s.util.findScaleToCover(this._element, d)), "Mid" === t.alignX && (u = e / 2), "Max" === t.alignX && (u = e), e = r - h / o, "Mid" === t.alignY && (c = e / 2), "Max" === t.alignY && (c = e), n = f / i, r = h / o)), { width: n, height: r, scaleX: i, scaleY: o, offsetLeft: a, offsetTop: l, cropX: u, cropY: c } } }), s.Image.CSS_CANVAS = "canvas-img", s.Image.prototype.getSvgSrc = s.Image.prototype.getSrc, s.Image.fromObject = function (e, t) { var n = s.util.object.clone(e); s.util.loadImage(n.src, (function (e, r) { r ? t && t(null, !0) : s.Image.prototype._initFilters.call(n, n.filters, (function (r) { n.filters = r || [], s.Image.prototype._initFilters.call(n, [n.resizeFilter], (function (r) { n.resizeFilter = r[0], s.util.enlivenObjects([n.clipPath], (function (r) { n.clipPath = r[0]; var i = new s.Image(e, n); t(i, !1) })) })) })) }), null, n.crossOrigin) }, s.Image.fromURL = function (e, t, n) { s.util.loadImage(e, (function (e, r) { t && t(new s.Image(e, n), r) }), null, n && n.crossOrigin) }, s.Image.ATTRIBUTE_NAMES = s.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")), s.Image.fromElement = function (e, n, r) { var i = s.parseAttributes(e, s.Image.ATTRIBUTE_NAMES); s.Image.fromURL(i["xlink:href"], n, t(r ? s.util.object.clone(r) : {}, i)) }) }(e), s.util.object.extend(s.Object.prototype, { _getAngleValueForStraighten: function () { var e = this.angle % 360; return e > 0 ? 90 * Math.round((e - 1) / 90) : 90 * Math.round(e / 90) }, straighten: function () { return this.rotate(this._getAngleValueForStraighten()), this }, fxStraighten: function (e) { var t = function () { }, n = (e = e || {}).onComplete || t, r = e.onChange || t, i = this; return s.util.animate({ startValue: this.get("angle"), endValue: this._getAngleValueForStraighten(), duration: this.FX_DURATION, onChange: function (e) { i.rotate(e), r() }, onComplete: function () { i.setCoords(), n() } }), this } }), s.util.object.extend(s.StaticCanvas.prototype, { straightenObject: function (e) { return e.straighten(), this.requestRenderAll(), this }, fxStraightenObject: function (e) { return e.fxStraighten({ onChange: this.requestRenderAllBound }), this } }), function () { function e(e, t) { var n = "precision " + t + " float;\nvoid main(){}", r = e.createShader(e.FRAGMENT_SHADER); return e.shaderSource(r, n), e.compileShader(r), !!e.getShaderParameter(r, e.COMPILE_STATUS) } function t(e) { e && e.tileSize && (this.tileSize = e.tileSize), this.setupGLContext(this.tileSize, this.tileSize), this.captureGPUInfo() } s.isWebglSupported = function (t) { if (s.isLikelyNode) return !1; t = t || s.WebglFilterBackend.prototype.tileSize; var n = document.createElement("canvas"), r = n.getContext("webgl") || n.getContext("experimental-webgl"), i = !1; if (r) { s.maxTextureSize = r.getParameter(r.MAX_TEXTURE_SIZE), i = s.maxTextureSize >= t; for (var o = ["highp", "mediump", "lowp"], a = 0; a < 3; a++)if (e(r, o[a])) { s.webGlPrecision = o[a]; break } } return this.isSupported = i, i }, s.WebglFilterBackend = t, t.prototype = { tileSize: 2048, resources: {}, setupGLContext: function (e, t) { this.dispose(), this.createWebGLCanvas(e, t), this.aPosition = new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]), this.chooseFastestCopyGLTo2DMethod(e, t) }, chooseFastestCopyGLTo2DMethod: function (e, t) { var n, r = void 0 !== window.performance; try { new ImageData(1, 1), n = !0 } catch (e) { n = !1 } var i = "undefined" != typeof ArrayBuffer, o = "undefined" != typeof Uint8ClampedArray; if (r && n && i && o) { var a = s.util.createCanvasElement(), l = new ArrayBuffer(e * t * 4); if (s.forceGLPutImageData) return this.imageBuffer = l, void (this.copyGLTo2D = c); var f, h, d = { imageBuffer: l, destinationWidth: e, destinationHeight: t, targetCanvas: a }; a.width = e, a.height = t, f = window.performance.now(), u.call(d, this.gl, d), h = window.performance.now() - f, f = window.performance.now(), c.call(d, this.gl, d), h > window.performance.now() - f ? (this.imageBuffer = l, this.copyGLTo2D = c) : this.copyGLTo2D = u } }, createWebGLCanvas: function (e, t) { var n = s.util.createCanvasElement(); n.width = e, n.height = t; var r = { alpha: !0, premultipliedAlpha: !1, depth: !1, stencil: !1, antialias: !1 }, i = n.getContext("webgl", r); i || (i = n.getContext("experimental-webgl", r)), i && (i.clearColor(0, 0, 0, 0), this.canvas = n, this.gl = i) }, applyFilters: function (e, t, n, r, i, o) { var a, s = this.gl; o && (a = this.getCachedTexture(o, t)); var l = { originalWidth: t.width || t.originalWidth, originalHeight: t.height || t.originalHeight, sourceWidth: n, sourceHeight: r, destinationWidth: n, destinationHeight: r, context: s, sourceTexture: this.createTexture(s, n, r, !a && t), targetTexture: this.createTexture(s, n, r), originalTexture: a || this.createTexture(s, n, r, !a && t), passes: e.length, webgl: !0, aPosition: this.aPosition, programCache: this.programCache, pass: 0, filterBackend: this, targetCanvas: i }, u = s.createFramebuffer(); return s.bindFramebuffer(s.FRAMEBUFFER, u), e.forEach((function (e) { e && e.applyTo(l) })), function (e) { var t = e.targetCanvas, n = t.width, r = t.height, i = e.destinationWidth, o = e.destinationHeight; (n !== i || r !== o) && (t.width = i, t.height = o) }(l), this.copyGLTo2D(s, l), s.bindTexture(s.TEXTURE_2D, null), s.deleteTexture(l.sourceTexture), s.deleteTexture(l.targetTexture), s.deleteFramebuffer(u), i.getContext("2d").setTransform(1, 0, 0, 1, 0, 0), l }, dispose: function () { this.canvas && (this.canvas = null, this.gl = null), this.clearWebGLCaches() }, clearWebGLCaches: function () { this.programCache = {}, this.textureCache = {} }, createTexture: function (e, t, n, r) { var i = e.createTexture(); return e.bindTexture(e.TEXTURE_2D, i), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, e.NEAREST), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.NEAREST), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE), r ? e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, e.RGBA, e.UNSIGNED_BYTE, r) : e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, t, n, 0, e.RGBA, e.UNSIGNED_BYTE, null), i }, getCachedTexture: function (e, t) { if (this.textureCache[e]) return this.textureCache[e]; var n = this.createTexture(this.gl, t.width, t.height, t); return this.textureCache[e] = n, n }, evictCachesForKey: function (e) { this.textureCache[e] && (this.gl.deleteTexture(this.textureCache[e]), delete this.textureCache[e]) }, copyGLTo2D: u, captureGPUInfo: function () { if (this.gpuInfo) return this.gpuInfo; var e = this.gl, t = { renderer: "", vendor: "" }; if (!e) return t; var n = e.getExtension("WEBGL_debug_renderer_info"); if (n) { var r = e.getParameter(n.UNMASKED_RENDERER_WEBGL), i = e.getParameter(n.UNMASKED_VENDOR_WEBGL); r && (t.renderer = r.toLowerCase()), i && (t.vendor = i.toLowerCase()) } return this.gpuInfo = t, t } } }(), function () { var e = function () { }; function t() { } s.Canvas2dFilterBackend = t, t.prototype = { evictCachesForKey: e, dispose: e, clearWebGLCaches: e, resources: {}, applyFilters: function (e, t, n, r, i) { var o = i.getContext("2d"); o.drawImage(t, 0, 0, n, r); var a = { sourceWidth: n, sourceHeight: r, imageData: o.getImageData(0, 0, n, r), originalEl: t, originalImageData: o.getImageData(0, 0, n, r), canvasEl: i, ctx: o, filterBackend: this }; return e.forEach((function (e) { e.applyTo(a) })), (a.imageData.width !== n || a.imageData.height !== r) && (i.width = a.imageData.width, i.height = a.imageData.height), o.putImageData(a.imageData, 0, 0), a } } }(), s.Image = s.Image || {}, s.Image.filters = s.Image.filters || {}, s.Image.filters.BaseFilter = s.util.createClass({ type: "BaseFilter", vertexSource: "attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}", fragmentSource: "precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}", initialize: function (e) { e && this.setOptions(e) }, setOptions: function (e) { for (var t in e) this[t] = e[t] }, createProgram: function (e, t, n) { t = t || this.fragmentSource, n = n || this.vertexSource, "highp" !== s.webGlPrecision && (t = t.replace(/precision highp float/g, "precision " + s.webGlPrecision + " float")); var r = e.createShader(e.VERTEX_SHADER); if (e.shaderSource(r, n), e.compileShader(r), !e.getShaderParameter(r, e.COMPILE_STATUS)) throw new Error("Vertex shader compile error for " + this.type + ": " + e.getShaderInfoLog(r)); var i = e.createShader(e.FRAGMENT_SHADER); if (e.shaderSource(i, t), e.compileShader(i), !e.getShaderParameter(i, e.COMPILE_STATUS)) throw new Error("Fragment shader compile error for " + this.type + ": " + e.getShaderInfoLog(i)); var o = e.createProgram(); if (e.attachShader(o, r), e.attachShader(o, i), e.linkProgram(o), !e.getProgramParameter(o, e.LINK_STATUS)) throw new Error('Shader link error for "${this.type}" ' + e.getProgramInfoLog(o)); var a = this.getAttributeLocations(e, o), l = this.getUniformLocations(e, o) || {}; return l.uStepW = e.getUniformLocation(o, "uStepW"), l.uStepH = e.getUniformLocation(o, "uStepH"), { program: o, attributeLocations: a, uniformLocations: l } }, getAttributeLocations: function (e, t) { return { aPosition: e.getAttribLocation(t, "aPosition") } }, getUniformLocations: function () { return {} }, sendAttributeData: function (e, t, n) { var r = t.aPosition, i = e.createBuffer(); e.bindBuffer(e.ARRAY_BUFFER, i), e.enableVertexAttribArray(r), e.vertexAttribPointer(r, 2, e.FLOAT, !1, 0, 0), e.bufferData(e.ARRAY_BUFFER, n, e.STATIC_DRAW) }, _setupFrameBuffer: function (e) { var t, n, r = e.context; e.passes > 1 ? (t = e.destinationWidth, n = e.destinationHeight, (e.sourceWidth !== t || e.sourceHeight !== n) && (r.deleteTexture(e.targetTexture), e.targetTexture = e.filterBackend.createTexture(r, t, n)), r.framebufferTexture2D(r.FRAMEBUFFER, r.COLOR_ATTACHMENT0, r.TEXTURE_2D, e.targetTexture, 0)) : (r.bindFramebuffer(r.FRAMEBUFFER, null), r.finish()) }, _swapTextures: function (e) { e.passes--, e.pass++; var t = e.targetTexture; e.targetTexture = e.sourceTexture, e.sourceTexture = t }, isNeutralState: function () { var e = this.mainParameter, t = s.Image.filters[this.type].prototype; if (e) { if (Array.isArray(t[e])) { for (var n = t[e].length; n--;)if (this[e][n] !== t[e][n]) return !1; return !0 } return t[e] === this[e] } return !1 }, applyTo: function (e) { e.webgl ? (this._setupFrameBuffer(e), this.applyToWebGL(e), this._swapTextures(e)) : this.applyTo2d(e) }, retrieveShader: function (e) { return e.programCache.hasOwnProperty(this.type) || (e.programCache[this.type] = this.createProgram(e.context)), e.programCache[this.type] }, applyToWebGL: function (e) { var t = e.context, n = this.retrieveShader(e); 0 === e.pass && e.originalTexture ? t.bindTexture(t.TEXTURE_2D, e.originalTexture) : t.bindTexture(t.TEXTURE_2D, e.sourceTexture), t.useProgram(n.program), this.sendAttributeData(t, n.attributeLocations, e.aPosition), t.uniform1f(n.uniformLocations.uStepW, 1 / e.sourceWidth), t.uniform1f(n.uniformLocations.uStepH, 1 / e.sourceHeight), this.sendUniformData(t, n.uniformLocations), t.viewport(0, 0, e.destinationWidth, e.destinationHeight), t.drawArrays(t.TRIANGLE_STRIP, 0, 4) }, bindAdditionalTexture: function (e, t, n) { e.activeTexture(n), e.bindTexture(e.TEXTURE_2D, t), e.activeTexture(e.TEXTURE0) }, unbindAdditionalTexture: function (e, t) { e.activeTexture(t), e.bindTexture(e.TEXTURE_2D, null), e.activeTexture(e.TEXTURE0) }, getMainParameter: function () { return this[this.mainParameter] }, setMainParameter: function (e) { this[this.mainParameter] = e }, sendUniformData: function () { }, createHelpLayer: function (e) { if (!e.helpLayer) { var t = document.createElement("canvas"); t.width = e.sourceWidth, t.height = e.sourceHeight, e.helpLayer = t } }, toObject: function () { var e = { type: this.type }, t = this.mainParameter; return t && (e[t] = this[t]), e }, toJSON: function () { return this.toObject() } }), s.Image.filters.BaseFilter.fromObject = function (e, t) { var n = new s.Image.filters[e.type](e); return t && t(n), n }, function (e) { var t = e.fabric || (e.fabric = {}), n = t.Image.filters, r = t.util.createClass; n.ColorMatrix = r(n.BaseFilter, { type: "ColorMatrix", fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}", matrix: [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0], mainParameter: "matrix", colorsOnly: !0, initialize: function (e) { this.callSuper("initialize", e), this.matrix = this.matrix.slice(0) }, applyTo2d: function (e) { var t, n, r, i, o, a = e.imageData.data, s = a.length, l = this.matrix, u = this.colorsOnly; for (o = 0; o < s; o += 4)t = a[o], n = a[o + 1], r = a[o + 2], u ? (a[o] = t * l[0] + n * l[1] + r * l[2] + 255 * l[4], a[o + 1] = t * l[5] + n * l[6] + r * l[7] + 255 * l[9], a[o + 2] = t * l[10] + n * l[11] + r * l[12] + 255 * l[14]) : (i = a[o + 3], a[o] = t * l[0] + n * l[1] + r * l[2] + i * l[3] + 255 * l[4], a[o + 1] = t * l[5] + n * l[6] + r * l[7] + i * l[8] + 255 * l[9], a[o + 2] = t * l[10] + n * l[11] + r * l[12] + i * l[13] + 255 * l[14], a[o + 3] = t * l[15] + n * l[16] + r * l[17] + i * l[18] + 255 * l[19]) }, getUniformLocations: function (e, t) { return { uColorMatrix: e.getUniformLocation(t, "uColorMatrix"), uConstants: e.getUniformLocation(t, "uConstants") } }, sendUniformData: function (e, t) { var n = this.matrix, r = [n[0], n[1], n[2], n[3], n[5], n[6], n[7], n[8], n[10], n[11], n[12], n[13], n[15], n[16], n[17], n[18]], i = [n[4], n[9], n[14], n[19]]; e.uniformMatrix4fv(t.uColorMatrix, !1, r), e.uniform4fv(t.uConstants, i) } }), t.Image.filters.ColorMatrix.fromObject = t.Image.filters.BaseFilter.fromObject }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = t.Image.filters, r = t.util.createClass; n.Brightness = r(n.BaseFilter, { type: "Brightness", fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}", brightness: 0, mainParameter: "brightness", applyTo2d: function (e) { if (0 !== this.brightness) { var t, n = e.imageData.data, r = n.length, i = Math.round(255 * this.brightness); for (t = 0; t < r; t += 4)n[t] = n[t] + i, n[t + 1] = n[t + 1] + i, n[t + 2] = n[t + 2] + i } }, getUniformLocations: function (e, t) { return { uBrightness: e.getUniformLocation(t, "uBrightness") } }, sendUniformData: function (e, t) { e.uniform1f(t.uBrightness, this.brightness) } }), t.Image.filters.Brightness.fromObject = t.Image.filters.BaseFilter.fromObject }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = t.util.object.extend, r = t.Image.filters, i = t.util.createClass; r.Convolute = i(r.BaseFilter, { type: "Convolute", opaque: !1, matrix: [0, 0, 0, 0, 1, 0, 0, 0, 0], fragmentSource: { Convolute_3_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}", Convolute_3_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}", Convolute_5_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}", Convolute_5_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}", Convolute_7_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}", Convolute_7_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}", Convolute_9_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}", Convolute_9_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}" }, retrieveShader: function (e) { var t = Math.sqrt(this.matrix.length), n = this.type + "_" + t + "_" + (this.opaque ? 1 : 0), r = this.fragmentSource[n]; return e.programCache.hasOwnProperty(n) || (e.programCache[n] = this.createProgram(e.context, r)), e.programCache[n] }, applyTo2d: function (e) { var t, n, r, i, o, a, s, l, u, c, f, h, d, p = e.imageData, v = p.data, g = this.matrix, m = Math.round(Math.sqrt(g.length)), y = Math.floor(m / 2), b = p.width, w = p.height, x = e.ctx.createImageData(b, w), _ = x.data, S = this.opaque ? 1 : 0; for (f = 0; f < w; f++)for (c = 0; c < b; c++) { for (o = 4 * (f * b + c), t = 0, n = 0, r = 0, i = 0, d = 0; d < m; d++)for (h = 0; h < m; h++)a = c + h - y, !((s = f + d - y) < 0 || s >= w || a < 0 || a >= b) && (l = 4 * (s * b + a), u = g[d * m + h], t += v[l] * u, n += v[l + 1] * u, r += v[l + 2] * u, S || (i += v[l + 3] * u)); _[o] = t, _[o + 1] = n, _[o + 2] = r, _[o + 3] = S ? v[o + 3] : i } e.imageData = x }, getUniformLocations: function (e, t) { return { uMatrix: e.getUniformLocation(t, "uMatrix"), uOpaque: e.getUniformLocation(t, "uOpaque"), uHalfSize: e.getUniformLocation(t, "uHalfSize"), uSize: e.getUniformLocation(t, "uSize") } }, sendUniformData: function (e, t) { e.uniform1fv(t.uMatrix, this.matrix) }, toObject: function () { return n(this.callSuper("toObject"), { opaque: this.opaque, matrix: this.matrix }) } }), t.Image.filters.Convolute.fromObject = t.Image.filters.BaseFilter.fromObject }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = t.Image.filters, r = t.util.createClass; n.Grayscale = r(n.BaseFilter, { type: "Grayscale", fragmentSource: { average: "precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}", lightness: "precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}", luminosity: "precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}" }, mode: "average", mainParameter: "mode", applyTo2d: function (e) { var t, n, r = e.imageData.data, i = r.length, o = this.mode; for (t = 0; t < i; t += 4)"average" === o ? n = (r[t] + r[t + 1] + r[t + 2]) / 3 : "lightness" === o ? n = (Math.min(r[t], r[t + 1], r[t + 2]) + Math.max(r[t], r[t + 1], r[t + 2])) / 2 : "luminosity" === o && (n = .21 * r[t] + .72 * r[t + 1] + .07 * r[t + 2]), r[t] = n, r[t + 1] = n, r[t + 2] = n }, retrieveShader: function (e) { var t = this.type + "_" + this.mode; if (!e.programCache.hasOwnProperty(t)) { var n = this.fragmentSource[this.mode]; e.programCache[t] = this.createProgram(e.context, n) } return e.programCache[t] }, getUniformLocations: function (e, t) { return { uMode: e.getUniformLocation(t, "uMode") } }, sendUniformData: function (e, t) { e.uniform1i(t.uMode, 1) }, isNeutralState: function () { return !1 } }), t.Image.filters.Grayscale.fromObject = t.Image.filters.BaseFilter.fromObject }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = t.Image.filters, r = t.util.createClass; n.Invert = r(n.BaseFilter, { type: "Invert", fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}", invert: !0, mainParameter: "invert", applyTo2d: function (e) { var t, n = e.imageData.data, r = n.length; for (t = 0; t < r; t += 4)n[t] = 255 - n[t], n[t + 1] = 255 - n[t + 1], n[t + 2] = 255 - n[t + 2] }, isNeutralState: function () { return !this.invert }, getUniformLocations: function (e, t) { return { uInvert: e.getUniformLocation(t, "uInvert") } }, sendUniformData: function (e, t) { e.uniform1i(t.uInvert, this.invert) } }), t.Image.filters.Invert.fromObject = t.Image.filters.BaseFilter.fromObject }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = t.util.object.extend, r = t.Image.filters, i = t.util.createClass; r.Noise = i(r.BaseFilter, { type: "Noise", fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}", mainParameter: "noise", noise: 0, applyTo2d: function (e) { if (0 !== this.noise) { var t, n, r = e.imageData.data, i = r.length, o = this.noise; for (t = 0, i = r.length; t < i; t += 4)n = (.5 - Math.random()) * o, r[t] += n, r[t + 1] += n, r[t + 2] += n } }, getUniformLocations: function (e, t) { return { uNoise: e.getUniformLocation(t, "uNoise"), uSeed: e.getUniformLocation(t, "uSeed") } }, sendUniformData: function (e, t) { e.uniform1f(t.uNoise, this.noise / 255), e.uniform1f(t.uSeed, Math.random()) }, toObject: function () { return n(this.callSuper("toObject"), { noise: this.noise }) } }), t.Image.filters.Noise.fromObject = t.Image.filters.BaseFilter.fromObject }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = t.Image.filters, r = t.util.createClass; n.Pixelate = r(n.BaseFilter, { type: "Pixelate", blocksize: 4, mainParameter: "blocksize", fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}", applyTo2d: function (e) { var t, n, r, i, o, a, s, l, u, c, f, h = e.imageData, d = h.data, p = h.height, v = h.width; for (n = 0; n < p; n += this.blocksize)for (r = 0; r < v; r += this.blocksize)for (i = d[t = 4 * n * v + 4 * r], o = d[t + 1], a = d[t + 2], s = d[t + 3], c = Math.min(n + this.blocksize, p), f = Math.min(r + this.blocksize, v), l = n; l < c; l++)for (u = r; u < f; u++)d[t = 4 * l * v + 4 * u] = i, d[t + 1] = o, d[t + 2] = a, d[t + 3] = s }, isNeutralState: function () { return 1 === this.blocksize }, getUniformLocations: function (e, t) { return { uBlocksize: e.getUniformLocation(t, "uBlocksize"), uStepW: e.getUniformLocation(t, "uStepW"), uStepH: e.getUniformLocation(t, "uStepH") } }, sendUniformData: function (e, t) { e.uniform1f(t.uBlocksize, this.blocksize) } }), t.Image.filters.Pixelate.fromObject = t.Image.filters.BaseFilter.fromObject }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = t.util.object.extend, r = t.Image.filters, i = t.util.createClass; r.RemoveColor = i(r.BaseFilter, { type: "RemoveColor", color: "#FFFFFF", fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}", distance: .02, useAlpha: !1, applyTo2d: function (e) { var n, r, i, o, a = e.imageData.data, s = 255 * this.distance, l = new t.Color(this.color).getSource(), u = [l[0] - s, l[1] - s, l[2] - s], c = [l[0] + s, l[1] + s, l[2] + s]; for (n = 0; n < a.length; n += 4)r = a[n], i = a[n + 1], o = a[n + 2], r > u[0] && i > u[1] && o > u[2] && r < c[0] && i < c[1] && o < c[2] && (a[n + 3] = 0) }, getUniformLocations: function (e, t) { return { uLow: e.getUniformLocation(t, "uLow"), uHigh: e.getUniformLocation(t, "uHigh") } }, sendUniformData: function (e, n) { var r = new t.Color(this.color).getSource(), i = parseFloat(this.distance), o = [0 + r[0] / 255 - i, 0 + r[1] / 255 - i, 0 + r[2] / 255 - i, 1], a = [r[0] / 255 + i, r[1] / 255 + i, r[2] / 255 + i, 1]; e.uniform4fv(n.uLow, o), e.uniform4fv(n.uHigh, a) }, toObject: function () { return n(this.callSuper("toObject"), { color: this.color, distance: this.distance }) } }), t.Image.filters.RemoveColor.fromObject = t.Image.filters.BaseFilter.fromObject }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = t.Image.filters, r = t.util.createClass, i = { Brownie: [.5997, .34553, -.27082, 0, .186, -.0377, .86095, .15059, 0, -.1449, .24113, -.07441, .44972, 0, -.02965, 0, 0, 0, 1, 0], Vintage: [.62793, .32021, -.03965, 0, .03784, .02578, .64411, .03259, 0, .02926, .0466, -.08512, .52416, 0, .02023, 0, 0, 0, 1, 0], Kodachrome: [1.12855, -.39673, -.03992, 0, .24991, -.16404, 1.08352, -.05498, 0, .09698, -.16786, -.56034, 1.60148, 0, .13972, 0, 0, 0, 1, 0], Technicolor: [1.91252, -.85453, -.09155, 0, .04624, -.30878, 1.76589, -.10601, 0, -.27589, -.2311, -.75018, 1.84759, 0, .12137, 0, 0, 0, 1, 0], Polaroid: [1.438, -.062, -.062, 0, 0, -.122, 1.378, -.122, 0, 0, -.016, -.016, 1.483, 0, 0, 0, 0, 0, 1, 0], Sepia: [.393, .769, .189, 0, 0, .349, .686, .168, 0, 0, .272, .534, .131, 0, 0, 0, 0, 0, 1, 0], BlackWhite: [1.5, 1.5, 1.5, 0, -1, 1.5, 1.5, 1.5, 0, -1, 1.5, 1.5, 1.5, 0, -1, 0, 0, 0, 1, 0] }; for (var o in i) n[o] = r(n.ColorMatrix, { type: o, matrix: i[o], mainParameter: !1, colorsOnly: !0 }), t.Image.filters[o].fromObject = t.Image.filters.BaseFilter.fromObject }(e), function (e) { var t = e.fabric, n = t.Image.filters, r = t.util.createClass; n.BlendColor = r(n.BaseFilter, { type: "BlendColor", color: "#F95C63", mode: "multiply", alpha: 1, fragmentSource: { multiply: "gl_FragColor.rgb *= uColor.rgb;\n", screen: "gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n", add: "gl_FragColor.rgb += uColor.rgb;\n", diff: "gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n", subtract: "gl_FragColor.rgb -= uColor.rgb;\n", lighten: "gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n", darken: "gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n", exclusion: "gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n", overlay: "if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n", tint: "gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n" }, buildSource: function (e) { return "precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n" + this.fragmentSource[e] + "}\n}" }, retrieveShader: function (e) { var t, n = this.type + "_" + this.mode; return e.programCache.hasOwnProperty(n) || (t = this.buildSource(this.mode), e.programCache[n] = this.createProgram(e.context, t)), e.programCache[n] }, applyTo2d: function (e) { var n, r, i, o, a, s, l, u = e.imageData.data, c = u.length, f = 1 - this.alpha; n = (l = new t.Color(this.color).getSource())[0] * this.alpha, r = l[1] * this.alpha, i = l[2] * this.alpha; for (var h = 0; h < c; h += 4)switch (o = u[h], a = u[h + 1], s = u[h + 2], this.mode) { case "multiply": u[h] = o * n / 255, u[h + 1] = a * r / 255, u[h + 2] = s * i / 255; break; case "screen": u[h] = 255 - (255 - o) * (255 - n) / 255, u[h + 1] = 255 - (255 - a) * (255 - r) / 255, u[h + 2] = 255 - (255 - s) * (255 - i) / 255; break; case "add": u[h] = o + n, u[h + 1] = a + r, u[h + 2] = s + i; break; case "diff": case "difference": u[h] = Math.abs(o - n), u[h + 1] = Math.abs(a - r), u[h + 2] = Math.abs(s - i); break; case "subtract": u[h] = o - n, u[h + 1] = a - r, u[h + 2] = s - i; break; case "darken": u[h] = Math.min(o, n), u[h + 1] = Math.min(a, r), u[h + 2] = Math.min(s, i); break; case "lighten": u[h] = Math.max(o, n), u[h + 1] = Math.max(a, r), u[h + 2] = Math.max(s, i); break; case "overlay": u[h] = n < 128 ? 2 * o * n / 255 : 255 - 2 * (255 - o) * (255 - n) / 255, u[h + 1] = r < 128 ? 2 * a * r / 255 : 255 - 2 * (255 - a) * (255 - r) / 255, u[h + 2] = i < 128 ? 2 * s * i / 255 : 255 - 2 * (255 - s) * (255 - i) / 255; break; case "exclusion": u[h] = n + o - 2 * n * o / 255, u[h + 1] = r + a - 2 * r * a / 255, u[h + 2] = i + s - 2 * i * s / 255; break; case "tint": u[h] = n + o * f, u[h + 1] = r + a * f, u[h + 2] = i + s * f } }, getUniformLocations: function (e, t) { return { uColor: e.getUniformLocation(t, "uColor") } }, sendUniformData: function (e, n) { var r = new t.Color(this.color).getSource(); r[0] = this.alpha * r[0] / 255, r[1] = this.alpha * r[1] / 255, r[2] = this.alpha * r[2] / 255, r[3] = this.alpha, e.uniform4fv(n.uColor, r) }, toObject: function () { return { type: this.type, color: this.color, mode: this.mode, alpha: this.alpha } } }), t.Image.filters.BlendColor.fromObject = t.Image.filters.BaseFilter.fromObject }(e), function (e) { var t = e.fabric, n = t.Image.filters, r = t.util.createClass; n.BlendImage = r(n.BaseFilter, { type: "BlendImage", image: null, mode: "multiply", alpha: 1, vertexSource: "attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}", fragmentSource: { multiply: "precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}", mask: "precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}" }, retrieveShader: function (e) { var t = this.type + "_" + this.mode, n = this.fragmentSource[this.mode]; return e.programCache.hasOwnProperty(t) || (e.programCache[t] = this.createProgram(e.context, n)), e.programCache[t] }, applyToWebGL: function (e) { var t = e.context, n = this.createTexture(e.filterBackend, this.image); this.bindAdditionalTexture(t, n, t.TEXTURE1), this.callSuper("applyToWebGL", e), this.unbindAdditionalTexture(t, t.TEXTURE1) }, createTexture: function (e, t) { return e.getCachedTexture(t.cacheKey, t._element) }, calculateMatrix: function () { var e = this.image, t = e._element.width, n = e._element.height; return [1 / e.scaleX, 0, 0, 0, 1 / e.scaleY, 0, -e.left / t, -e.top / n, 1] }, applyTo2d: function (e) { var n, r, i, o, a, s, l, u, c, f, h, d = e.imageData, p = e.filterBackend.resources, v = d.data, g = v.length, m = d.width, y = d.height, b = this.image; p.blendImage || (p.blendImage = t.util.createCanvasElement()), f = (c = p.blendImage).getContext("2d"), c.width !== m || c.height !== y ? (c.width = m, c.height = y) : f.clearRect(0, 0, m, y), f.setTransform(b.scaleX, 0, 0, b.scaleY, b.left, b.top), f.drawImage(b._element, 0, 0, m, y), h = f.getImageData(0, 0, m, y).data; for (var w = 0; w < g; w += 4)switch (a = v[w], s = v[w + 1], l = v[w + 2], u = v[w + 3], n = h[w], r = h[w + 1], i = h[w + 2], o = h[w + 3], this.mode) { case "multiply": v[w] = a * n / 255, v[w + 1] = s * r / 255, v[w + 2] = l * i / 255, v[w + 3] = u * o / 255; break; case "mask": v[w + 3] = o } }, getUniformLocations: function (e, t) { return { uTransformMatrix: e.getUniformLocation(t, "uTransformMatrix"), uImage: e.getUniformLocation(t, "uImage") } }, sendUniformData: function (e, t) { var n = this.calculateMatrix(); e.uniform1i(t.uImage, 1), e.uniformMatrix3fv(t.uTransformMatrix, !1, n) }, toObject: function () { return { type: this.type, image: this.image && this.image.toObject(), mode: this.mode, alpha: this.alpha } } }), t.Image.filters.BlendImage.fromObject = function (e, n) { t.Image.fromObject(e.image, (function (r) { var i = t.util.object.clone(e); i.image = r, n(new t.Image.filters.BlendImage(i)) })) } }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = Math.pow, r = Math.floor, i = Math.sqrt, o = Math.abs, a = Math.round, s = Math.sin, l = Math.ceil, u = t.Image.filters, c = t.util.createClass; u.Resize = c(u.BaseFilter, { type: "Resize", resizeType: "hermite", scaleX: 1, scaleY: 1, lanczosLobes: 3, getUniformLocations: function (e, t) { return { uDelta: e.getUniformLocation(t, "uDelta"), uTaps: e.getUniformLocation(t, "uTaps") } }, sendUniformData: function (e, t) { e.uniform2fv(t.uDelta, this.horizontal ? [1 / this.width, 0] : [0, 1 / this.height]), e.uniform1fv(t.uTaps, this.taps) }, retrieveShader: function (e) { var t = this.getFilterWindow(), n = this.type + "_" + t; if (!e.programCache.hasOwnProperty(n)) { var r = this.generateShader(t); e.programCache[n] = this.createProgram(e.context, r) } return e.programCache[n] }, getFilterWindow: function () { var e = this.tempScale; return Math.ceil(this.lanczosLobes / e) }, getTaps: function () { for (var e = this.lanczosCreate(this.lanczosLobes), t = this.tempScale, n = this.getFilterWindow(), r = new Array(n), i = 1; i <= n; i++)r[i - 1] = e(i * t); return r }, generateShader: function (e) { for (var t = new Array(e), n = this.fragmentSourceTOP, r = 1; r <= e; r++)t[r - 1] = r + ".0 * uDelta"; return n += "uniform float uTaps[" + e + "];\n", n += "void main() {\n", n += "  vec4 color = texture2D(uTexture, vTexCoord);\n", n += "  float sum = 1.0;\n", t.forEach((function (e, t) { n += "  color += texture2D(uTexture, vTexCoord + " + e + ") * uTaps[" + t + "];\n", n += "  color += texture2D(uTexture, vTexCoord - " + e + ") * uTaps[" + t + "];\n", n += "  sum += 2.0 * uTaps[" + t + "];\n" })), n += "  gl_FragColor = color / sum;\n", n += "}" }, fragmentSourceTOP: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n", applyTo: function (e) { e.webgl ? (e.passes++, this.width = e.sourceWidth, this.horizontal = !0, this.dW = Math.round(this.width * this.scaleX), this.dH = e.sourceHeight, this.tempScale = this.dW / this.width, this.taps = this.getTaps(), e.destinationWidth = this.dW, this._setupFrameBuffer(e), this.applyToWebGL(e), this._swapTextures(e), e.sourceWidth = e.destinationWidth, this.height = e.sourceHeight, this.horizontal = !1, this.dH = Math.round(this.height * this.scaleY), this.tempScale = this.dH / this.height, this.taps = this.getTaps(), e.destinationHeight = this.dH, this._setupFrameBuffer(e), this.applyToWebGL(e), this._swapTextures(e), e.sourceHeight = e.destinationHeight) : this.applyTo2d(e) }, isNeutralState: function () { return 1 === this.scaleX && 1 === this.scaleY }, lanczosCreate: function (e) { return function (t) { if (t >= e || t <= -e) return 0; if (t < 1.1920929e-7 && t > -1.1920929e-7) return 1; var n = (t *= Math.PI) / e; return s(t) / t * s(n) / n } }, applyTo2d: function (e) { var t = e.imageData, n = this.scaleX, r = this.scaleY; this.rcpScaleX = 1 / n, this.rcpScaleY = 1 / r; var i, o = t.width, s = t.height, l = a(o * n), u = a(s * r); "sliceHack" === this.resizeType ? i = this.sliceByTwo(e, o, s, l, u) : "hermite" === this.resizeType ? i = this.hermiteFastResize(e, o, s, l, u) : "bilinear" === this.resizeType ? i = this.bilinearFiltering(e, o, s, l, u) : "lanczos" === this.resizeType && (i = this.lanczosResize(e, o, s, l, u)), e.imageData = i }, sliceByTwo: function (e, n, i, o, a) { var s, l, u = e.imageData, c = .5, f = !1, h = !1, d = n * c, p = i * c, v = t.filterBackend.resources, g = 0, m = 0, y = n, b = 0; for (v.sliceByTwo || (v.sliceByTwo = document.createElement("canvas")), ((s = v.sliceByTwo).width < 1.5 * n || s.height < i) && (s.width = 1.5 * n, s.height = i), (l = s.getContext("2d")).clearRect(0, 0, 1.5 * n, i), l.putImageData(u, 0, 0), o = r(o), a = r(a); !f || !h;)n = d, i = p, o < r(d * c) ? d = r(d * c) : (d = o, f = !0), a < r(p * c) ? p = r(p * c) : (p = a, h = !0), l.drawImage(s, g, m, n, i, y, b, d, p), g = y, m = b, b += p; return l.getImageData(g, m, o, a) }, lanczosResize: function (e, t, a, s, u) { var c = e.imageData.data, f = e.ctx.createImageData(s, u), h = f.data, d = this.lanczosCreate(this.lanczosLobes), p = this.rcpScaleX, v = this.rcpScaleY, g = 2 / this.rcpScaleX, m = 2 / this.rcpScaleY, y = l(p * this.lanczosLobes / 2), b = l(v * this.lanczosLobes / 2), w = {}, x = {}, _ = {}; return function e(l) { var S, k, C, T, E, O, P, M, A, D, L; for (x.x = (l + .5) * p, _.x = r(x.x), S = 0; S < u; S++) { for (x.y = (S + .5) * v, _.y = r(x.y), E = 0, O = 0, P = 0, M = 0, A = 0, k = _.x - y; k <= _.x + y; k++)if (!(k < 0 || k >= t)) { D = r(1e3 * o(k - x.x)), w[D] || (w[D] = {}); for (var R = _.y - b; R <= _.y + b; R++)R < 0 || R >= a || (L = r(1e3 * o(R - x.y)), w[D][L] || (w[D][L] = d(i(n(D * g, 2) + n(L * m, 2)) / 1e3)), (C = w[D][L]) > 0 && (E += C, O += C * c[T = 4 * (R * t + k)], P += C * c[T + 1], M += C * c[T + 2], A += C * c[T + 3])) } h[T = 4 * (S * s + l)] = O / E, h[T + 1] = P / E, h[T + 2] = M / E, h[T + 3] = A / E } return ++l < s ? e(l) : f }(0) }, bilinearFiltering: function (e, t, n, i, o) { var a, s, l, u, c, f, h, d, p, v = 0, g = this.rcpScaleX, m = this.rcpScaleY, y = 4 * (t - 1), b = e.imageData.data, w = e.ctx.createImageData(i, o), x = w.data; for (l = 0; l < o; l++)for (u = 0; u < i; u++)for (c = g * u - (a = r(g * u)), f = m * l - (s = r(m * l)), p = 4 * (s * t + a), h = 0; h < 4; h++)d = b[p + h] * (1 - c) * (1 - f) + b[p + 4 + h] * c * (1 - f) + b[p + y + h] * f * (1 - c) + b[p + y + 4 + h] * c * f, x[v++] = d; return w }, hermiteFastResize: function (e, t, n, a, s) { for (var u = this.rcpScaleX, c = this.rcpScaleY, f = l(u / 2), h = l(c / 2), d = e.imageData.data, p = e.ctx.createImageData(a, s), v = p.data, g = 0; g < s; g++)for (var m = 0; m < a; m++) { for (var y = 4 * (m + g * a), b = 0, w = 0, x = 0, _ = 0, S = 0, k = 0, C = 0, T = (g + .5) * c, E = r(g * c); E < (g + 1) * c; E++)for (var O = o(T - (E + .5)) / h, P = (m + .5) * u, M = O * O, A = r(m * u); A < (m + 1) * u; A++) { var D = o(P - (A + .5)) / f, L = i(M + D * D); L > 1 && L < -1 || (b = 2 * L * L * L - 3 * L * L + 1) > 0 && (C += b * d[3 + (D = 4 * (A + E * t))], x += b, d[D + 3] < 255 && (b = b * d[D + 3] / 250), _ += b * d[D], S += b * d[D + 1], k += b * d[D + 2], w += b) } v[y] = _ / w, v[y + 1] = S / w, v[y + 2] = k / w, v[y + 3] = C / x } return p }, toObject: function () { return { type: this.type, scaleX: this.scaleX, scaleY: this.scaleY, resizeType: this.resizeType, lanczosLobes: this.lanczosLobes } } }), t.Image.filters.Resize.fromObject = t.Image.filters.BaseFilter.fromObject }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = t.Image.filters, r = t.util.createClass; n.Contrast = r(n.BaseFilter, { type: "Contrast", fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}", contrast: 0, mainParameter: "contrast", applyTo2d: function (e) { if (0 !== this.contrast) { var t, n = e.imageData.data, r = n.length, i = Math.floor(255 * this.contrast), o = 259 * (i + 255) / (255 * (259 - i)); for (t = 0; t < r; t += 4)n[t] = o * (n[t] - 128) + 128, n[t + 1] = o * (n[t + 1] - 128) + 128, n[t + 2] = o * (n[t + 2] - 128) + 128 } }, getUniformLocations: function (e, t) { return { uContrast: e.getUniformLocation(t, "uContrast") } }, sendUniformData: function (e, t) { e.uniform1f(t.uContrast, this.contrast) } }), t.Image.filters.Contrast.fromObject = t.Image.filters.BaseFilter.fromObject }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = t.Image.filters, r = t.util.createClass; n.Saturation = r(n.BaseFilter, { type: "Saturation", fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}", saturation: 0, mainParameter: "saturation", applyTo2d: function (e) { if (0 !== this.saturation) { var t, n, r = e.imageData.data, i = r.length, o = -this.saturation; for (t = 0; t < i; t += 4)n = Math.max(r[t], r[t + 1], r[t + 2]), r[t] += n !== r[t] ? (n - r[t]) * o : 0, r[t + 1] += n !== r[t + 1] ? (n - r[t + 1]) * o : 0, r[t + 2] += n !== r[t + 2] ? (n - r[t + 2]) * o : 0 } }, getUniformLocations: function (e, t) { return { uSaturation: e.getUniformLocation(t, "uSaturation") } }, sendUniformData: function (e, t) { e.uniform1f(t.uSaturation, -this.saturation) } }), t.Image.filters.Saturation.fromObject = t.Image.filters.BaseFilter.fromObject }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = t.Image.filters, r = t.util.createClass; n.Vibrance = r(n.BaseFilter, { type: "Vibrance", fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}", vibrance: 0, mainParameter: "vibrance", applyTo2d: function (e) { if (0 !== this.vibrance) { var t, n, r, i, o = e.imageData.data, a = o.length, s = -this.vibrance; for (t = 0; t < a; t += 4)n = Math.max(o[t], o[t + 1], o[t + 2]), r = (o[t] + o[t + 1] + o[t + 2]) / 3, i = 2 * Math.abs(n - r) / 255 * s, o[t] += n !== o[t] ? (n - o[t]) * i : 0, o[t + 1] += n !== o[t + 1] ? (n - o[t + 1]) * i : 0, o[t + 2] += n !== o[t + 2] ? (n - o[t + 2]) * i : 0 } }, getUniformLocations: function (e, t) { return { uVibrance: e.getUniformLocation(t, "uVibrance") } }, sendUniformData: function (e, t) { e.uniform1f(t.uVibrance, -this.vibrance) } }), t.Image.filters.Vibrance.fromObject = t.Image.filters.BaseFilter.fromObject }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = t.Image.filters, r = t.util.createClass; n.Blur = r(n.BaseFilter, { type: "Blur", fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}", blur: 0, mainParameter: "blur", applyTo: function (e) { e.webgl ? (this.aspectRatio = e.sourceWidth / e.sourceHeight, e.passes++, this._setupFrameBuffer(e), this.horizontal = !0, this.applyToWebGL(e), this._swapTextures(e), this._setupFrameBuffer(e), this.horizontal = !1, this.applyToWebGL(e), this._swapTextures(e)) : this.applyTo2d(e) }, applyTo2d: function (e) { e.imageData = this.simpleBlur(e) }, simpleBlur: function (e) { var n, r, i = e.filterBackend.resources, o = e.imageData.width, a = e.imageData.height; i.blurLayer1 || (i.blurLayer1 = t.util.createCanvasElement(), i.blurLayer2 = t.util.createCanvasElement()), n = i.blurLayer1, r = i.blurLayer2, (n.width !== o || n.height !== a) && (r.width = n.width = o, r.height = n.height = a); var s, l, u, c, f = n.getContext("2d"), h = r.getContext("2d"), d = 15, p = .06 * this.blur * .5; for (f.putImageData(e.imageData, 0, 0), h.clearRect(0, 0, o, a), c = -d; c <= d; c++)u = p * (l = c / d) * o + (s = (Math.random() - .5) / 4), h.globalAlpha = 1 - Math.abs(l), h.drawImage(n, u, s), f.drawImage(r, 0, 0), h.globalAlpha = 1, h.clearRect(0, 0, r.width, r.height); for (c = -d; c <= d; c++)u = p * (l = c / d) * a + (s = (Math.random() - .5) / 4), h.globalAlpha = 1 - Math.abs(l), h.drawImage(n, s, u), f.drawImage(r, 0, 0), h.globalAlpha = 1, h.clearRect(0, 0, r.width, r.height); e.ctx.drawImage(n, 0, 0); var v = e.ctx.getImageData(0, 0, n.width, n.height); return f.globalAlpha = 1, f.clearRect(0, 0, n.width, n.height), v }, getUniformLocations: function (e, t) { return { delta: e.getUniformLocation(t, "uDelta") } }, sendUniformData: function (e, t) { var n = this.chooseRightDelta(); e.uniform2fv(t.delta, n) }, chooseRightDelta: function () { var e, t = 1, n = [0, 0]; return this.horizontal ? this.aspectRatio > 1 && (t = 1 / this.aspectRatio) : this.aspectRatio < 1 && (t = this.aspectRatio), e = t * this.blur * .12, this.horizontal ? n[0] = e : n[1] = e, n } }), n.Blur.fromObject = t.Image.filters.BaseFilter.fromObject }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = t.Image.filters, r = t.util.createClass; n.Gamma = r(n.BaseFilter, { type: "Gamma", fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}", gamma: [1, 1, 1], mainParameter: "gamma", initialize: function (e) { this.gamma = [1, 1, 1], n.BaseFilter.prototype.initialize.call(this, e) }, applyTo2d: function (e) { var t, n = e.imageData.data, r = this.gamma, i = n.length, o = 1 / r[0], a = 1 / r[1], s = 1 / r[2]; for (this.rVals || (this.rVals = new Uint8Array(256), this.gVals = new Uint8Array(256), this.bVals = new Uint8Array(256)), t = 0, i = 256; t < i; t++)this.rVals[t] = 255 * Math.pow(t / 255, o), this.gVals[t] = 255 * Math.pow(t / 255, a), this.bVals[t] = 255 * Math.pow(t / 255, s); for (t = 0, i = n.length; t < i; t += 4)n[t] = this.rVals[n[t]], n[t + 1] = this.gVals[n[t + 1]], n[t + 2] = this.bVals[n[t + 2]] }, getUniformLocations: function (e, t) { return { uGamma: e.getUniformLocation(t, "uGamma") } }, sendUniformData: function (e, t) { e.uniform3fv(t.uGamma, this.gamma) } }), t.Image.filters.Gamma.fromObject = t.Image.filters.BaseFilter.fromObject }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = t.Image.filters, r = t.util.createClass; n.Composed = r(n.BaseFilter, { type: "Composed", subFilters: [], initialize: function (e) { this.callSuper("initialize", e), this.subFilters = this.subFilters.slice(0) }, applyTo: function (e) { e.passes += this.subFilters.length - 1, this.subFilters.forEach((function (t) { t.applyTo(e) })) }, toObject: function () { return t.util.object.extend(this.callSuper("toObject"), { subFilters: this.subFilters.map((function (e) { return e.toObject() })) }) }, isNeutralState: function () { return !this.subFilters.some((function (e) { return !e.isNeutralState() })) } }), t.Image.filters.Composed.fromObject = function (e, n) { var r = (e.subFilters || []).map((function (e) { return new t.Image.filters[e.type](e) })), i = new t.Image.filters.Composed({ subFilters: r }); return n && n(i), i } }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = t.Image.filters, r = t.util.createClass; n.HueRotation = r(n.ColorMatrix, { type: "HueRotation", rotation: 0, mainParameter: "rotation", calculateMatrix: function () { var e = this.rotation * Math.PI, n = t.util.cos(e), r = t.util.sin(e), i = 1 / 3, o = Math.sqrt(i) * r, a = 1 - n; this.matrix = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0], this.matrix[0] = n + a / 3, this.matrix[1] = i * a - o, this.matrix[2] = i * a + o, this.matrix[5] = i * a + o, this.matrix[6] = n + i * a, this.matrix[7] = i * a - o, this.matrix[10] = i * a - o, this.matrix[11] = i * a + o, this.matrix[12] = n + i * a }, isNeutralState: function (e) { return this.calculateMatrix(), n.BaseFilter.prototype.isNeutralState.call(this, e) }, applyTo: function (e) { this.calculateMatrix(), n.BaseFilter.prototype.applyTo.call(this, e) } }), t.Image.filters.HueRotation.fromObject = t.Image.filters.BaseFilter.fromObject }(e), function (e) { var t = e.fabric || (e.fabric = {}), n = t.util.object.clone; if (t.Text) t.warn("fabric.Text is already defined"); else { var r = "fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide".split(" "); t.Text = t.util.createClass(t.Object, { _dimensionAffectingProps: ["fontSize", "fontWeight", "fontFamily", "fontStyle", "lineHeight", "text", "charSpacing", "textAlign", "styles", "path", "pathStartOffset", "pathSide"], _reNewline: /\r?\n/, _reSpacesAndTabs: /[ \t\r]/g, _reSpaceAndTab: /[ \t\r]/, _reWords: /\S+/g, type: "text", fontSize: 40, fontWeight: "normal", fontFamily: "Times New Roman", underline: !1, overline: !1, linethrough: !1, textAlign: "left", fontStyle: "normal", lineHeight: 1.16, superscript: { size: .6, baseline: -.35 }, subscript: { size: .6, baseline: .11 }, textBackgroundColor: "", stateProperties: t.Object.prototype.stateProperties.concat(r), cacheProperties: t.Object.prototype.cacheProperties.concat(r), stroke: null, shadow: null, path: null, pathStartOffset: 0, pathSide: "left", _fontSizeFraction: .222, offsets: { underline: .1, linethrough: -.315, overline: -.88 }, _fontSizeMult: 1.13, charSpacing: 0, styles: null, _measuringContext: null, deltaY: 0, direction: "ltr", _styleProperties: ["stroke", "strokeWidth", "fill", "fontFamily", "fontSize", "fontWeight", "fontStyle", "underline", "overline", "linethrough", "deltaY", "textBackgroundColor"], __charBounds: [], CACHE_FONT_SIZE: 400, MIN_TEXT_WIDTH: 2, initialize: function (e, t) { this.styles = t && t.styles || {}, this.text = e, this.__skipDimension = !0, this.callSuper("initialize", t), this.path && this.setPathInfo(), this.__skipDimension = !1, this.initDimensions(), this.setCoords(), this.setupState({ propertySet: "_dimensionAffectingProps" }) }, setPathInfo: function () { var e = this.path; e && (e.segmentsInfo = t.util.getPathSegmentsInfo(e.path)) }, getMeasuringContext: function () { return t._measuringContext || (t._measuringContext = this.canvas && this.canvas.contextCache || t.util.createCanvasElement().getContext("2d")), t._measuringContext }, _splitText: function () { var e = this._splitTextIntoLines(this.text); return this.textLines = e.lines, this._textLines = e.graphemeLines, this._unwrappedTextLines = e._unwrappedLines, this._text = e.graphemeText, e }, initDimensions: function () { this.__skipDimension || (this._splitText(), this._clearCache(), this.path ? (this.width = this.path.width, this.height = this.path.height) : (this.width = this.calcTextWidth() || this.cursorWidth || this.MIN_TEXT_WIDTH, this.height = this.calcTextHeight()), -1 !== this.textAlign.indexOf("justify") && this.enlargeSpaces(), this.saveState({ propertySet: "_dimensionAffectingProps" })) }, enlargeSpaces: function () { for (var e, t, n, r, i, o, a, s = 0, l = this._textLines.length; s < l; s++)if (("justify" === this.textAlign || s !== l - 1 && !this.isEndOfWrapping(s)) && (r = 0, i = this._textLines[s], (t = this.getLineWidth(s)) < this.width && (a = this.textLines[s].match(this._reSpacesAndTabs)))) { n = a.length, e = (this.width - t) / n; for (var u = 0, c = i.length; u <= c; u++)o = this.__charBounds[s][u], this._reSpaceAndTab.test(i[u]) ? (o.width += e, o.kernedWidth += e, o.left += r, r += e) : o.left += r } }, isEndOfWrapping: function (e) { return e === this._textLines.length - 1 }, missingNewlineOffset: function () { return 1 }, toString: function () { return "#<fabric.Text (" + this.complexity() + '): { "text": "' + this.text + '", "fontFamily": "' + this.fontFamily + '" }>' }, _getCacheCanvasDimensions: function () { var e = this.callSuper("_getCacheCanvasDimensions"), t = this.fontSize; return e.width += t * e.zoomX, e.height += t * e.zoomY, e }, _render: function (e) { var t = this.path; t && !t.isNotVisible() && t._render(e), this._setTextStyles(e), this._renderTextLinesBackground(e), this._renderTextDecoration(e, "underline"), this._renderText(e), this._renderTextDecoration(e, "overline"), this._renderTextDecoration(e, "linethrough") }, _renderText: function (e) { "stroke" === this.paintFirst ? (this._renderTextStroke(e), this._renderTextFill(e)) : (this._renderTextFill(e), this._renderTextStroke(e)) }, _setTextStyles: function (e, t, n) { e.textBaseline = "alphabetic", e.font = this._getFontDeclaration(t, n) }, calcTextWidth: function () { for (var e = this.getLineWidth(0), t = 1, n = this._textLines.length; t < n; t++) { var r = this.getLineWidth(t); r > e && (e = r) } return e }, _renderTextLine: function (e, t, n, r, i, o) { this._renderChars(e, t, n, r, i, o) }, _renderTextLinesBackground: function (e) { if (this.textBackgroundColor || this.styleHas("textBackgroundColor")) { for (var t, n, r, i, o, a, s, l = e.fillStyle, u = this._getLeftOffset(), c = this._getTopOffset(), f = 0, h = 0, d = this.path, p = 0, v = this._textLines.length; p < v; p++)if (t = this.getHeightOfLine(p), this.textBackgroundColor || this.styleHas("textBackgroundColor", p)) { r = this._textLines[p], n = this._getLineLeftOffset(p), h = 0, f = 0, i = this.getValueOfPropertyAt(p, 0, "textBackgroundColor"); for (var g = 0, m = r.length; g < m; g++)o = this.__charBounds[p][g], a = this.getValueOfPropertyAt(p, g, "textBackgroundColor"), d ? (e.save(), e.translate(o.renderLeft, o.renderTop), e.rotate(o.angle), e.fillStyle = a, a && e.fillRect(-o.width / 2, -t / this.lineHeight * (1 - this._fontSizeFraction), o.width, t / this.lineHeight), e.restore()) : a !== i ? (s = u + n + f, "rtl" === this.direction && (s = this.width - s - h), e.fillStyle = i, i && e.fillRect(s, c, h, t / this.lineHeight), f = o.left, h = o.width, i = a) : h += o.kernedWidth; a && !d && (s = u + n + f, "rtl" === this.direction && (s = this.width - s - h), e.fillStyle = a, e.fillRect(s, c, h, t / this.lineHeight)), c += t } else c += t; e.fillStyle = l, this._removeShadow(e) } }, getFontCache: function (e) { var n = e.fontFamily.toLowerCase(); t.charWidthsCache[n] || (t.charWidthsCache[n] = {}); var r = t.charWidthsCache[n], i = e.fontStyle.toLowerCase() + "_" + (e.fontWeight + "").toLowerCase(); return r[i] || (r[i] = {}), r[i] }, _measureChar: function (e, t, n, r) { var i, o, a, s, l = this.getFontCache(t), u = n + e, c = this._getFontDeclaration(t) === this._getFontDeclaration(r), f = t.fontSize / this.CACHE_FONT_SIZE; if (n && void 0 !== l[n] && (a = l[n]), void 0 !== l[e] && (s = i = l[e]), c && void 0 !== l[u] && (s = (o = l[u]) - a), void 0 === i || void 0 === a || void 0 === o) { var h = this.getMeasuringContext(); this._setTextStyles(h, t, !0) } return void 0 === i && (s = i = h.measureText(e).width, l[e] = i), void 0 === a && c && n && (a = h.measureText(n).width, l[n] = a), c && void 0 === o && (o = h.measureText(u).width, l[u] = o, s = o - a), { width: i * f, kernedWidth: s * f } }, getHeightOfChar: function (e, t) { return this.getValueOfPropertyAt(e, t, "fontSize") }, measureLine: function (e) { var t = this._measureLine(e); return 0 !== this.charSpacing && (t.width -= this._getWidthOfCharSpacing()), t.width < 0 && (t.width = 0), t }, _measureLine: function (e) { var n, r, i, o, a, s, l = 0, u = this._textLines[e], c = new Array(u.length), f = 0, h = this.path, d = "right" === this.pathSide; for (this.__charBounds[e] = c, n = 0; n < u.length; n++)r = u[n], o = this._getGraphemeBox(r, e, n, i), c[n] = o, l += o.kernedWidth, i = r; if (c[n] = { left: o ? o.left + o.width : 0, width: 0, kernedWidth: 0, height: this.fontSize }, h) { switch (s = h.segmentsInfo[h.segmentsInfo.length - 1].length, (a = t.util.getPointOnPath(h.path, 0, h.segmentsInfo)).x += h.pathOffset.x, a.y += h.pathOffset.y, this.textAlign) { case "left": f = d ? s - l : 0; break; case "center": f = (s - l) / 2; break; case "right": f = d ? 0 : s - l }for (f += this.pathStartOffset * (d ? -1 : 1), n = d ? u.length - 1 : 0; d ? n >= 0 : n < u.length; d ? n-- : n++)o = c[n], f > s ? f %= s : f < 0 && (f += s), this._setGraphemeOnPath(f, o, a), f += o.kernedWidth } return { width: l, numOfSpaces: 0 } }, _setGraphemeOnPath: function (e, n, r) { var i = e + n.kernedWidth / 2, o = this.path, a = t.util.getPointOnPath(o.path, i, o.segmentsInfo); n.renderLeft = a.x - r.x, n.renderTop = a.y - r.y, n.angle = a.angle + ("right" === this.pathSide ? Math.PI : 0) }, _getGraphemeBox: function (e, t, n, r, i) { var o, a = this.getCompleteStyleDeclaration(t, n), s = r ? this.getCompleteStyleDeclaration(t, n - 1) : {}, l = this._measureChar(e, a, r, s), u = l.kernedWidth, c = l.width; 0 !== this.charSpacing && (c += o = this._getWidthOfCharSpacing(), u += o); var f = { width: c, left: 0, height: a.fontSize, kernedWidth: u, deltaY: a.deltaY }; if (n > 0 && !i) { var h = this.__charBounds[t][n - 1]; f.left = h.left + h.width + l.kernedWidth - l.width } return f }, getHeightOfLine: function (e) { if (this.__lineHeights[e]) return this.__lineHeights[e]; for (var t = this._textLines[e], n = this.getHeightOfChar(e, 0), r = 1, i = t.length; r < i; r++)n = Math.max(this.getHeightOfChar(e, r), n); return this.__lineHeights[e] = n * this.lineHeight * this._fontSizeMult }, calcTextHeight: function () { for (var e, t = 0, n = 0, r = this._textLines.length; n < r; n++)e = this.getHeightOfLine(n), t += n === r - 1 ? e / this.lineHeight : e; return t }, _getLeftOffset: function () { return "ltr" === this.direction ? -this.width / 2 : this.width / 2 }, _getTopOffset: function () { return -this.height / 2 }, _renderTextCommon: function (e, t) { e.save(); for (var n = 0, r = this._getLeftOffset(), i = this._getTopOffset(), o = 0, a = this._textLines.length; o < a; o++) { var s = this.getHeightOfLine(o), l = s / this.lineHeight, u = this._getLineLeftOffset(o); this._renderTextLine(t, e, this._textLines[o], r + u, i + n + l, o), n += s } e.restore() }, _renderTextFill: function (e) { !this.fill && !this.styleHas("fill") || this._renderTextCommon(e, "fillText") }, _renderTextStroke: function (e) { (!this.stroke || 0 === this.strokeWidth) && this.isEmptyStyles() || (this.shadow && !this.shadow.affectStroke && this._removeShadow(e), e.save(), this._setLineDash(e, this.strokeDashArray), e.beginPath(), this._renderTextCommon(e, "strokeText"), e.closePath(), e.restore()) }, _renderChars: function (e, t, n, r, i, o) { var a, s, l, u, c, f = this.getHeightOfLine(o), h = -1 !== this.textAlign.indexOf("justify"), d = "", p = 0, v = this.path, g = !h && 0 === this.charSpacing && this.isEmptyStyles(o) && !v, m = "ltr" === this.direction, y = "ltr" === this.direction ? 1 : -1; if (t.save(), i -= f * this._fontSizeFraction / this.lineHeight, g) return t.canvas.setAttribute("dir", m ? "ltr" : "rtl"), t.direction = m ? "ltr" : "rtl", t.textAlign = m ? "left" : "right", this._renderChar(e, t, o, 0, n.join(""), r, i, f), void t.restore(); for (var b = 0, w = n.length - 1; b <= w; b++)u = b === w || this.charSpacing || v, d += n[b], l = this.__charBounds[o][b], 0 === p ? (r += y * (l.kernedWidth - l.width), p += l.width) : p += l.kernedWidth, h && !u && this._reSpaceAndTab.test(n[b]) && (u = !0), u || (a = a || this.getCompleteStyleDeclaration(o, b), s = this.getCompleteStyleDeclaration(o, b + 1), u = this._hasStyleChanged(a, s)), u && (v ? (t.save(), t.translate(l.renderLeft, l.renderTop), t.rotate(l.angle), this._renderChar(e, t, o, b, d, -p / 2, 0, f), t.restore()) : (c = r, t.canvas.setAttribute("dir", m ? "ltr" : "rtl"), t.direction = m ? "ltr" : "rtl", t.textAlign = m ? "left" : "right", this._renderChar(e, t, o, b, d, c, i, f)), d = "", a = s, r += y * p, p = 0); t.restore() }, _applyPatternGradientTransformText: function (e) { var n, r = t.util.createCanvasElement(), i = this.width + this.strokeWidth, o = this.height + this.strokeWidth; return r.width = i, r.height = o, (n = r.getContext("2d")).beginPath(), n.moveTo(0, 0), n.lineTo(i, 0), n.lineTo(i, o), n.lineTo(0, o), n.closePath(), n.translate(i / 2, o / 2), n.fillStyle = e.toLive(n), this._applyPatternGradientTransform(n, e), n.fill(), n.createPattern(r, "no-repeat") }, handleFiller: function (e, t, n) { var r, i; return n.toLive ? "percentage" === n.gradientUnits || n.gradientTransform || n.patternTransform ? (r = -this.width / 2, i = -this.height / 2, e.translate(r, i), e[t] = this._applyPatternGradientTransformText(n), { offsetX: r, offsetY: i }) : (e[t] = n.toLive(e, this), this._applyPatternGradientTransform(e, n)) : (e[t] = n, { offsetX: 0, offsetY: 0 }) }, _setStrokeStyles: function (e, t) { return e.lineWidth = t.strokeWidth, e.lineCap = this.strokeLineCap, e.lineDashOffset = this.strokeDashOffset, e.lineJoin = this.strokeLineJoin, e.miterLimit = this.strokeMiterLimit, this.handleFiller(e, "strokeStyle", t.stroke) }, _setFillStyles: function (e, t) { return this.handleFiller(e, "fillStyle", t.fill) }, _renderChar: function (e, t, n, r, i, o, a) { var s, l, u = this._getStyleDeclaration(n, r), c = this.getCompleteStyleDeclaration(n, r), f = "fillText" === e && c.fill, h = "strokeText" === e && c.stroke && c.strokeWidth; !h && !f || (t.save(), f && (s = this._setFillStyles(t, c)), h && (l = this._setStrokeStyles(t, c)), t.font = this._getFontDeclaration(c), u && u.textBackgroundColor && this._removeShadow(t), u && u.deltaY && (a += u.deltaY), f && t.fillText(i, o - s.offsetX, a - s.offsetY), h && t.strokeText(i, o - l.offsetX, a - l.offsetY), t.restore()) }, setSuperscript: function (e, t) { return this._setScript(e, t, this.superscript) }, setSubscript: function (e, t) { return this._setScript(e, t, this.subscript) }, _setScript: function (e, t, n) { var r = this.get2DCursorLocation(e, !0), i = this.getValueOfPropertyAt(r.lineIndex, r.charIndex, "fontSize"), o = this.getValueOfPropertyAt(r.lineIndex, r.charIndex, "deltaY"), a = { fontSize: i * n.size, deltaY: o + i * n.baseline }; return this.setSelectionStyles(a, e, t), this }, _hasStyleChanged: function (e, t) { return e.fill !== t.fill || e.stroke !== t.stroke || e.strokeWidth !== t.strokeWidth || e.fontSize !== t.fontSize || e.fontFamily !== t.fontFamily || e.fontWeight !== t.fontWeight || e.fontStyle !== t.fontStyle || e.deltaY !== t.deltaY }, _hasStyleChangedForSvg: function (e, t) { return this._hasStyleChanged(e, t) || e.overline !== t.overline || e.underline !== t.underline || e.linethrough !== t.linethrough }, _getLineLeftOffset: function (e) { var t = this.getLineWidth(e), n = this.width - t, r = this.textAlign, i = this.direction, o = 0, a = this.isEndOfWrapping(e); return "justify" === r || "justify-center" === r && !a || "justify-right" === r && !a || "justify-left" === r && !a ? 0 : ("center" === r && (o = n / 2), "right" === r && (o = n), "justify-center" === r && (o = n / 2), "justify-right" === r && (o = n), "rtl" === i && (o -= n), o) }, _clearCache: function () { this.__lineWidths = [], this.__lineHeights = [], this.__charBounds = [] }, _shouldClearDimensionCache: function () { var e = this._forceClearCache; return e || (e = this.hasStateChanged("_dimensionAffectingProps")), e && (this.dirty = !0, this._forceClearCache = !1), e }, getLineWidth: function (e) { return this.__lineWidths[e] ? this.__lineWidths[e] : (t = "" === this._textLines[e] ? 0 : this.measureLine(e).width, this.__lineWidths[e] = t, t); var t }, _getWidthOfCharSpacing: function () { return 0 !== this.charSpacing ? this.fontSize * this.charSpacing / 1e3 : 0 }, getValueOfPropertyAt: function (e, t, n) { var r = this._getStyleDeclaration(e, t); return r && void 0 !== r[n] ? r[n] : this[n] }, _renderTextDecoration: function (e, t) { if (this[t] || this.styleHas(t)) { for (var n, r, i, o, a, s, l, u, c, f, h, d, p, v, g, m, y = this._getLeftOffset(), b = this._getTopOffset(), w = this.path, x = this._getWidthOfCharSpacing(), _ = this.offsets[t], S = 0, k = this._textLines.length; S < k; S++)if (n = this.getHeightOfLine(S), this[t] || this.styleHas(t, S)) { l = this._textLines[S], v = n / this.lineHeight, o = this._getLineLeftOffset(S), f = 0, h = 0, u = this.getValueOfPropertyAt(S, 0, t), m = this.getValueOfPropertyAt(S, 0, "fill"), c = b + v * (1 - this._fontSizeFraction), r = this.getHeightOfChar(S, 0), a = this.getValueOfPropertyAt(S, 0, "deltaY"); for (var C = 0, T = l.length; C < T; C++)if (d = this.__charBounds[S][C], p = this.getValueOfPropertyAt(S, C, t), g = this.getValueOfPropertyAt(S, C, "fill"), i = this.getHeightOfChar(S, C), s = this.getValueOfPropertyAt(S, C, "deltaY"), w && p && g) e.save(), e.fillStyle = m, e.translate(d.renderLeft, d.renderTop), e.rotate(d.angle), e.fillRect(-d.kernedWidth / 2, _ * i + s, d.kernedWidth, this.fontSize / 15), e.restore(); else if ((p !== u || g !== m || i !== r || s !== a) && h > 0) { var E = y + o + f; "rtl" === this.direction && (E = this.width - E - h), u && m && (e.fillStyle = m, e.fillRect(E, c + _ * r + a, h, this.fontSize / 15)), f = d.left, h = d.width, u = p, m = g, r = i, a = s } else h += d.kernedWidth; E = y + o + f, "rtl" === this.direction && (E = this.width - E - h), e.fillStyle = g, p && g && e.fillRect(E, c + _ * r + a, h - x, this.fontSize / 15), b += n } else b += n; this._removeShadow(e) } }, _getFontDeclaration: function (e, n) { var r = e || this, i = this.fontFamily, o = t.Text.genericFonts.indexOf(i.toLowerCase()) > -1, a = void 0 === i || i.indexOf("'") > -1 || i.indexOf(",") > -1 || i.indexOf('"') > -1 || o ? r.fontFamily : '"' + r.fontFamily + '"'; return [t.isLikelyNode ? r.fontWeight : r.fontStyle, t.isLikelyNode ? r.fontStyle : r.fontWeight, n ? this.CACHE_FONT_SIZE + "px" : r.fontSize + "px", a].join(" ") }, render: function (e) { !this.visible || this.canvas && this.canvas.skipOffscreen && !this.group && !this.isOnScreen() || (this._shouldClearDimensionCache() && this.initDimensions(), this.callSuper("render", e)) }, _splitTextIntoLines: function (e) { for (var n = e.split(this._reNewline), r = new Array(n.length), i = ["\n"], o = [], a = 0; a < n.length; a++)r[a] = t.util.string.graphemeSplit(n[a]), o = o.concat(r[a], i); return o.pop(), { _unwrappedLines: r, lines: n, graphemeText: o, graphemeLines: r } }, toObject: function (e) { var t = r.concat(e), i = this.callSuper("toObject", t); return i.styles = n(this.styles, !0), i.path && (i.path = this.path.toObject()), i }, set: function (e, t) { this.callSuper("set", e, t); var n = !1, r = !1; if ("object" == C(e)) for (var i in e) "path" === i && this.setPathInfo(), n = n || -1 !== this._dimensionAffectingProps.indexOf(i), r = r || "path" === i; else n = -1 !== this._dimensionAffectingProps.indexOf(e), r = "path" === e; return r && this.setPathInfo(), n && (this.initDimensions(), this.setCoords()), this }, complexity: function () { return 1 } }), t.Text.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")), t.Text.DEFAULT_SVG_FONT_SIZE = 16, t.Text.fromElement = function (e, r, i) { if (!e) return r(null); var o = t.parseAttributes(e, t.Text.ATTRIBUTE_NAMES), a = o.textAnchor || "left"; if ((i = t.util.object.extend(i ? n(i) : {}, o)).top = i.top || 0, i.left = i.left || 0, o.textDecoration) { var s = o.textDecoration; -1 !== s.indexOf("underline") && (i.underline = !0), -1 !== s.indexOf("overline") && (i.overline = !0), -1 !== s.indexOf("line-through") && (i.linethrough = !0), delete i.textDecoration } "dx" in o && (i.left += o.dx), "dy" in o && (i.top += o.dy), "fontSize" in i || (i.fontSize = t.Text.DEFAULT_SVG_FONT_SIZE); var l = ""; "textContent" in e ? l = e.textContent : "firstChild" in e && null !== e.firstChild && "data" in e.firstChild && null !== e.firstChild.data && (l = e.firstChild.data), l = l.replace(/^\s+|\s+$|\n+/g, "").replace(/\s+/g, " "); var u = i.strokeWidth; i.strokeWidth = 0; var c = new t.Text(l, i), f = c.getScaledHeight() / c.height, h = ((c.height + c.strokeWidth) * c.lineHeight - c.height) * f, d = c.getScaledHeight() + h, p = 0; "center" === a && (p = c.getScaledWidth() / 2), "right" === a && (p = c.getScaledWidth()), c.set({ left: c.left - p, top: c.top - (d - c.fontSize * (.07 + c._fontSizeFraction)) / c.lineHeight, strokeWidth: void 0 !== u ? u : 1 }), r(c) }, t.Text.fromObject = function (e, r) { var i = n(e), o = e.path; return delete i.path, t.Object._fromObject("Text", i, (function (e) { o ? t.Object._fromObject("Path", o, (function (t) { e.set("path", t), r(e) }), "path") : r(e) }), "text") }, t.Text.genericFonts = ["sans-serif", "serif", "cursive", "fantasy", "monospace"], t.util.createAccessors && t.util.createAccessors(t.Text) } }(e), s.util.object.extend(s.Text.prototype, { isEmptyStyles: function (e) { if (!this.styles || void 0 !== e && !this.styles[e]) return !0; var t = void 0 === e ? this.styles : { line: this.styles[e] }; for (var n in t) for (var r in t[n]) for (var i in t[n][r]) return !1; return !0 }, styleHas: function (e, t) { if (!this.styles || !e || "" === e || void 0 !== t && !this.styles[t]) return !1; var n = void 0 === t ? this.styles : { 0: this.styles[t] }; for (var r in n) for (var i in n[r]) if (void 0 !== n[r][i][e]) return !0; return !1 }, cleanStyle: function (e) { if (!this.styles || !e || "" === e) return !1; var t, n, r = this.styles, i = 0, o = !0, a = 0; for (var s in r) { for (var l in t = 0, r[s]) { var u; i++, (u = r[s][l]).hasOwnProperty(e) ? (n ? u[e] !== n && (o = !1) : n = u[e], u[e] === this[e] && delete u[e]) : o = !1, 0 !== Object.keys(u).length ? t++ : delete r[s][l] } 0 === t && delete r[s] } for (var c = 0; c < this._textLines.length; c++)a += this._textLines[c].length; o && i === a && (this[e] = n, this.removeStyle(e)) }, removeStyle: function (e) { if (this.styles && e && "" !== e) { var t, n, r, i = this.styles; for (n in i) { for (r in t = i[n]) delete t[r][e], 0 === Object.keys(t[r]).length && delete t[r]; 0 === Object.keys(t).length && delete i[n] } } }, _extendStyles: function (e, t) { var n = this.get2DCursorLocation(e); this._getLineStyle(n.lineIndex) || this._setLineStyle(n.lineIndex), this._getStyleDeclaration(n.lineIndex, n.charIndex) || this._setStyleDeclaration(n.lineIndex, n.charIndex, {}), s.util.object.extend(this._getStyleDeclaration(n.lineIndex, n.charIndex), t) }, get2DCursorLocation: function (e, t) { void 0 === e && (e = this.selectionStart); for (var n = t ? this._unwrappedTextLines : this._textLines, r = n.length, i = 0; i < r; i++) { if (e <= n[i].length) return { lineIndex: i, charIndex: e }; e -= n[i].length + this.missingNewlineOffset(i) } return { lineIndex: i - 1, charIndex: n[i - 1].length < e ? n[i - 1].length : e } }, getSelectionStyles: function (e, t, n) { void 0 === e && (e = this.selectionStart || 0), void 0 === t && (t = this.selectionEnd || e); for (var r = [], i = e; i < t; i++)r.push(this.getStyleAtPosition(i, n)); return r }, getStyleAtPosition: function (e, t) { var n = this.get2DCursorLocation(e); return (t ? this.getCompleteStyleDeclaration(n.lineIndex, n.charIndex) : this._getStyleDeclaration(n.lineIndex, n.charIndex)) || {} }, setSelectionStyles: function (e, t, n) { void 0 === t && (t = this.selectionStart || 0), void 0 === n && (n = this.selectionEnd || t); for (var r = t; r < n; r++)this._extendStyles(r, e); return this._forceClearCache = !0, this }, _getStyleDeclaration: function (e, t) { var n = this.styles && this.styles[e]; return n ? n[t] : null }, getCompleteStyleDeclaration: function (e, t) { for (var n, r = this._getStyleDeclaration(e, t) || {}, i = {}, o = 0; o < this._styleProperties.length; o++)i[n = this._styleProperties[o]] = void 0 === r[n] ? this[n] : r[n]; return i }, _setStyleDeclaration: function (e, t, n) { this.styles[e][t] = n }, _deleteStyleDeclaration: function (e, t) { delete this.styles[e][t] }, _getLineStyle: function (e) { return !!this.styles[e] }, _setLineStyle: function (e) { this.styles[e] = {} }, _deleteLineStyle: function (e) { delete this.styles[e] } }), function () { function e(e) { e.textDecoration && (e.textDecoration.indexOf("underline") > -1 && (e.underline = !0), e.textDecoration.indexOf("line-through") > -1 && (e.linethrough = !0), e.textDecoration.indexOf("overline") > -1 && (e.overline = !0), delete e.textDecoration) } s.IText = s.util.createClass(s.Text, s.Observable, { type: "i-text", selectionStart: 0, selectionEnd: 0, selectionColor: "rgba(17,119,255,0.3)", isEditing: !1, editable: !0, editingBorderColor: "rgba(102,153,255,0.25)", cursorWidth: 2, cursorColor: "", cursorDelay: 1e3, cursorDuration: 600, caching: !0, hiddenTextareaContainer: null, _reSpace: /\s|\n/, _currentCursorOpacity: 0, _selectionDirection: null, _abortCursorAnimation: !1, __widthOfSpace: [], inCompositionMode: !1, initialize: function (e, t) { this.callSuper("initialize", e, t), this.initBehavior() }, setSelectionStart: function (e) { e = Math.max(e, 0), this._updateAndFire("selectionStart", e) }, setSelectionEnd: function (e) { e = Math.min(e, this.text.length), this._updateAndFire("selectionEnd", e) }, _updateAndFire: function (e, t) { this[e] !== t && (this._fireSelectionChanged(), this[e] = t), this._updateTextarea() }, _fireSelectionChanged: function () { this.fire("selection:changed"), this.canvas && this.canvas.fire("text:selection:changed", { target: this }) }, initDimensions: function () { this.isEditing && this.initDelayedCursor(), this.clearContextTop(), this.callSuper("initDimensions") }, render: function (e) { this.clearContextTop(), this.callSuper("render", e), this.cursorOffsetCache = {}, this.renderCursorOrSelection() }, _render: function (e) { this.callSuper("_render", e) }, clearContextTop: function (e) { if (this.isEditing && this.canvas && this.canvas.contextTop) { var t = this.canvas.contextTop, n = this.canvas.viewportTransform; t.save(), t.transform(n[0], n[1], n[2], n[3], n[4], n[5]), this.transform(t), this._clearTextArea(t), e || t.restore() } }, renderCursorOrSelection: function () { if (this.isEditing && this.canvas && this.canvas.contextTop) { var e = this._getCursorBoundaries(), t = this.canvas.contextTop; this.clearContextTop(!0), this.selectionStart === this.selectionEnd ? this.renderCursor(e, t) : this.renderSelection(e, t), t.restore() } }, _clearTextArea: function (e) { var t = this.width + 4, n = this.height + 4; e.clearRect(-t / 2, -n / 2, t, n) }, _getCursorBoundaries: function (e) { void 0 === e && (e = this.selectionStart); var t = this._getLeftOffset(), n = this._getTopOffset(), r = this._getCursorBoundariesOffsets(e); return { left: t, top: n, leftOffset: r.left, topOffset: r.top } }, _getCursorBoundariesOffsets: function (e) { if (this.cursorOffsetCache && "top" in this.cursorOffsetCache) return this.cursorOffsetCache; var t, n, r, i, o = 0, a = 0, s = this.get2DCursorLocation(e); r = s.charIndex, n = s.lineIndex; for (var l = 0; l < n; l++)o += this.getHeightOfLine(l); t = this._getLineLeftOffset(n); var u = this.__charBounds[n][r]; return u && (a = u.left), 0 !== this.charSpacing && r === this._textLines[n].length && (a -= this._getWidthOfCharSpacing()), i = { top: o, left: t + (a > 0 ? a : 0) }, "rtl" === this.direction && (i.left *= -1), this.cursorOffsetCache = i, this.cursorOffsetCache }, renderCursor: function (e, t) { var n = this.get2DCursorLocation(), r = n.lineIndex, i = n.charIndex > 0 ? n.charIndex - 1 : 0, o = this.getValueOfPropertyAt(r, i, "fontSize"), a = this.scaleX * this.canvas.getZoom(), s = this.cursorWidth / a, l = e.topOffset, u = this.getValueOfPropertyAt(r, i, "deltaY"); l += (1 - this._fontSizeFraction) * this.getHeightOfLine(r) / this.lineHeight - o * (1 - this._fontSizeFraction), this.inCompositionMode && this.renderSelection(e, t), t.fillStyle = this.cursorColor || this.getValueOfPropertyAt(r, i, "fill"), t.globalAlpha = this.__isMousedown ? 1 : this._currentCursorOpacity, t.fillRect(e.left + e.leftOffset - s / 2, l + e.top + u, s, o) }, renderSelection: function (e, t) { for (var n = this.inCompositionMode ? this.hiddenTextarea.selectionStart : this.selectionStart, r = this.inCompositionMode ? this.hiddenTextarea.selectionEnd : this.selectionEnd, i = -1 !== this.textAlign.indexOf("justify"), o = this.get2DCursorLocation(n), a = this.get2DCursorLocation(r), s = o.lineIndex, l = a.lineIndex, u = o.charIndex < 0 ? 0 : o.charIndex, c = a.charIndex < 0 ? 0 : a.charIndex, f = s; f <= l; f++) { var h, d = this._getLineLeftOffset(f) || 0, p = this.getHeightOfLine(f), v = 0, g = 0; if (f === s && (v = this.__charBounds[s][u].left), f >= s && f < l) g = i && !this.isEndOfWrapping(f) ? this.width : this.getLineWidth(f) || 5; else if (f === l) if (0 === c) g = this.__charBounds[l][c].left; else { var m = this._getWidthOfCharSpacing(); g = this.__charBounds[l][c - 1].left + this.__charBounds[l][c - 1].width - m } h = p, (this.lineHeight < 1 || f === l && this.lineHeight > 1) && (p /= this.lineHeight); var y = e.left + d + v, b = g - v, w = p, x = 0; this.inCompositionMode ? (t.fillStyle = this.compositionColor || "black", w = 1, x = p) : t.fillStyle = this.selectionColor, "rtl" === this.direction && (y = this.width - y - b), t.fillRect(y, e.top + e.topOffset + x, b, w), e.topOffset += h } }, getCurrentCharFontSize: function () { var e = this._getCurrentCharIndex(); return this.getValueOfPropertyAt(e.l, e.c, "fontSize") }, getCurrentCharColor: function () { var e = this._getCurrentCharIndex(); return this.getValueOfPropertyAt(e.l, e.c, "fill") }, _getCurrentCharIndex: function () { var e = this.get2DCursorLocation(this.selectionStart, !0), t = e.charIndex > 0 ? e.charIndex - 1 : 0; return { l: e.lineIndex, c: t } } }), s.IText.fromObject = function (t, n) { if (e(t), t.styles) for (var r in t.styles) for (var i in t.styles[r]) e(t.styles[r][i]); s.Object._fromObject("IText", t, n, "text") } }(), function () { var e = s.util.object.clone; s.util.object.extend(s.IText.prototype, { initBehavior: function () { this.initAddedHandler(), this.initRemovedHandler(), this.initCursorSelectionHandlers(), this.initDoubleClickSimulation(), this.mouseMoveHandler = this.mouseMoveHandler.bind(this) }, onDeselect: function () { this.isEditing && this.exitEditing(), this.selected = !1 }, initAddedHandler: function () { var e = this; this.on("added", (function () { var t = e.canvas; t && (t._hasITextHandlers || (t._hasITextHandlers = !0, e._initCanvasHandlers(t)), t._iTextInstances = t._iTextInstances || [], t._iTextInstances.push(e)) })) }, initRemovedHandler: function () { var e = this; this.on("removed", (function () { var t = e.canvas; t && (t._iTextInstances = t._iTextInstances || [], s.util.removeFromArray(t._iTextInstances, e), 0 === t._iTextInstances.length && (t._hasITextHandlers = !1, e._removeCanvasHandlers(t))) })) }, _initCanvasHandlers: function (e) { e._mouseUpITextHandler = function () { e._iTextInstances && e._iTextInstances.forEach((function (e) { e.__isMousedown = !1 })) }, e.on("mouse:up", e._mouseUpITextHandler) }, _removeCanvasHandlers: function (e) { e.off("mouse:up", e._mouseUpITextHandler) }, _tick: function () { this._currentTickState = this._animateCursor(this, 1, this.cursorDuration, "_onTickComplete") }, _animateCursor: function (e, t, n, r) { var i; return i = { isAborted: !1, abort: function () { this.isAborted = !0 } }, e.animate("_currentCursorOpacity", t, { duration: n, onComplete: function () { i.isAborted || e[r]() }, onChange: function () { e.canvas && e.selectionStart === e.selectionEnd && e.renderCursorOrSelection() }, abort: function () { return i.isAborted } }), i }, _onTickComplete: function () { var e = this; this._cursorTimeout1 && clearTimeout(this._cursorTimeout1), this._cursorTimeout1 = setTimeout((function () { e._currentTickCompleteState = e._animateCursor(e, 0, this.cursorDuration / 2, "_tick") }), 100) }, initDelayedCursor: function (e) { var t = this, n = e ? 0 : this.cursorDelay; this.abortCursorAnimation(), this._currentCursorOpacity = 1, this._cursorTimeout2 = setTimeout((function () { t._tick() }), n) }, abortCursorAnimation: function () { var e = this._currentTickState || this._currentTickCompleteState, t = this.canvas; this._currentTickState && this._currentTickState.abort(), this._currentTickCompleteState && this._currentTickCompleteState.abort(), clearTimeout(this._cursorTimeout1), clearTimeout(this._cursorTimeout2), this._currentCursorOpacity = 0, e && t && t.clearContext(t.contextTop || t.contextContainer) }, selectAll: function () { return this.selectionStart = 0, this.selectionEnd = this._text.length, this._fireSelectionChanged(), this._updateTextarea(), this }, getSelectedText: function () { return this._text.slice(this.selectionStart, this.selectionEnd).join("") }, findWordBoundaryLeft: function (e) { var t = 0, n = e - 1; if (this._reSpace.test(this._text[n])) for (; this._reSpace.test(this._text[n]);)t++, n--; for (; /\S/.test(this._text[n]) && n > -1;)t++, n--; return e - t }, findWordBoundaryRight: function (e) { var t = 0, n = e; if (this._reSpace.test(this._text[n])) for (; this._reSpace.test(this._text[n]);)t++, n++; for (; /\S/.test(this._text[n]) && n < this._text.length;)t++, n++; return e + t }, findLineBoundaryLeft: function (e) { for (var t = 0, n = e - 1; !/\n/.test(this._text[n]) && n > -1;)t++, n--; return e - t }, findLineBoundaryRight: function (e) { for (var t = 0, n = e; !/\n/.test(this._text[n]) && n < this._text.length;)t++, n++; return e + t }, searchWordBoundary: function (e, t) { for (var n = this._text, r = this._reSpace.test(n[e]) ? e - 1 : e, i = n[r], o = s.reNonWord; !o.test(i) && r > 0 && r < n.length;)i = n[r += t]; return o.test(i) && (r += 1 === t ? 0 : 1), r }, selectWord: function (e) { e = e || this.selectionStart; var t = this.searchWordBoundary(e, -1), n = this.searchWordBoundary(e, 1); this.selectionStart = t, this.selectionEnd = n, this._fireSelectionChanged(), this._updateTextarea(), this.renderCursorOrSelection() }, selectLine: function (e) { e = e || this.selectionStart; var t = this.findLineBoundaryLeft(e), n = this.findLineBoundaryRight(e); return this.selectionStart = t, this.selectionEnd = n, this._fireSelectionChanged(), this._updateTextarea(), this }, enterEditing: function (e) { if (!this.isEditing && this.editable) return this.canvas && (this.canvas.calcOffset(), this.exitEditingOnOthers(this.canvas)), this.isEditing = !0, this.initHiddenTextarea(e), this.hiddenTextarea.focus(), this.hiddenTextarea.value = this.text, this._updateTextarea(), this._saveEditingProps(), this._setEditingProps(), this._textBeforeEdit = this.text, this._tick(), this.fire("editing:entered"), this._fireSelectionChanged(), this.canvas ? (this.canvas.fire("text:editing:entered", { target: this }), this.initMouseMoveHandler(), this.canvas.requestRenderAll(), this) : this }, exitEditingOnOthers: function (e) { e._iTextInstances && e._iTextInstances.forEach((function (e) { e.selected = !1, e.isEditing && e.exitEditing() })) }, initMouseMoveHandler: function () { this.canvas.on("mouse:move", this.mouseMoveHandler) }, mouseMoveHandler: function (e) { if (this.__isMousedown && this.isEditing) { var t = this.getSelectionStartFromPointer(e.e), n = this.selectionStart, r = this.selectionEnd; (t !== this.__selectionStartOnMouseDown || n === r) && (n === t || r === t) || (t > this.__selectionStartOnMouseDown ? (this.selectionStart = this.__selectionStartOnMouseDown, this.selectionEnd = t) : (this.selectionStart = t, this.selectionEnd = this.__selectionStartOnMouseDown), (this.selectionStart !== n || this.selectionEnd !== r) && (this.restartCursorIfNeeded(), this._fireSelectionChanged(), this._updateTextarea(), this.renderCursorOrSelection())) } }, _setEditingProps: function () { this.hoverCursor = "text", this.canvas && (this.canvas.defaultCursor = this.canvas.moveCursor = "text"), this.borderColor = this.editingBorderColor, this.hasControls = this.selectable = !1, this.lockMovementX = this.lockMovementY = !0 }, fromStringToGraphemeSelection: function (e, t, n) { var r = n.slice(0, e), i = s.util.string.graphemeSplit(r).length; if (e === t) return { selectionStart: i, selectionEnd: i }; var o = n.slice(e, t); return { selectionStart: i, selectionEnd: i + s.util.string.graphemeSplit(o).length } }, fromGraphemeToStringSelection: function (e, t, n) { var r = n.slice(0, e).join("").length; return e === t ? { selectionStart: r, selectionEnd: r } : { selectionStart: r, selectionEnd: r + n.slice(e, t).join("").length } }, _updateTextarea: function () { if (this.cursorOffsetCache = {}, this.hiddenTextarea) { if (!this.inCompositionMode) { var e = this.fromGraphemeToStringSelection(this.selectionStart, this.selectionEnd, this._text); this.hiddenTextarea.selectionStart = e.selectionStart, this.hiddenTextarea.selectionEnd = e.selectionEnd } this.updateTextareaPosition() } }, updateFromTextArea: function () { if (this.hiddenTextarea) { this.cursorOffsetCache = {}, this.text = this.hiddenTextarea.value, this._shouldClearDimensionCache() && (this.initDimensions(), this.setCoords()); var e = this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart, this.hiddenTextarea.selectionEnd, this.hiddenTextarea.value); this.selectionEnd = this.selectionStart = e.selectionEnd, this.inCompositionMode || (this.selectionStart = e.selectionStart), this.updateTextareaPosition() } }, updateTextareaPosition: function () { if (this.selectionStart === this.selectionEnd) { var e = this._calcTextareaPosition(); this.hiddenTextarea.style.left = e.left, this.hiddenTextarea.style.top = e.top } }, _calcTextareaPosition: function () { if (!this.canvas) return { x: 1, y: 1 }; var e = this.inCompositionMode ? this.compositionStart : this.selectionStart, t = this._getCursorBoundaries(e), n = this.get2DCursorLocation(e), r = n.lineIndex, i = n.charIndex, o = this.getValueOfPropertyAt(r, i, "fontSize") * this.lineHeight, a = t.leftOffset, l = this.calcTransformMatrix(), u = { x: t.left + a, y: t.top + t.topOffset + o }, c = this.canvas.getRetinaScaling(), f = this.canvas.upperCanvasEl, h = f.width / c, d = f.height / c, p = h - o, v = d - o, g = f.clientWidth / h, m = f.clientHeight / d; return u = s.util.transformPoint(u, l), (u = s.util.transformPoint(u, this.canvas.viewportTransform)).x *= g, u.y *= m, u.x < 0 && (u.x = 0), u.x > p && (u.x = p), u.y < 0 && (u.y = 0), u.y > v && (u.y = v), u.x += this.canvas._offset.left, u.y += this.canvas._offset.top, { left: u.x + "px", top: u.y + "px", fontSize: o + "px", charHeight: o } }, _saveEditingProps: function () { this._savedProps = { hasControls: this.hasControls, borderColor: this.borderColor, lockMovementX: this.lockMovementX, lockMovementY: this.lockMovementY, hoverCursor: this.hoverCursor, selectable: this.selectable, defaultCursor: this.canvas && this.canvas.defaultCursor, moveCursor: this.canvas && this.canvas.moveCursor } }, _restoreEditingProps: function () { !this._savedProps || (this.hoverCursor = this._savedProps.hoverCursor, this.hasControls = this._savedProps.hasControls, this.borderColor = this._savedProps.borderColor, this.selectable = this._savedProps.selectable, this.lockMovementX = this._savedProps.lockMovementX, this.lockMovementY = this._savedProps.lockMovementY, this.canvas && (this.canvas.defaultCursor = this._savedProps.defaultCursor, this.canvas.moveCursor = this._savedProps.moveCursor)) }, exitEditing: function () { var e = this._textBeforeEdit !== this.text, t = this.hiddenTextarea; return this.selected = !1, this.isEditing = !1, this.selectionEnd = this.selectionStart, t && (t.blur && t.blur(), t.parentNode && t.parentNode.removeChild(t)), this.hiddenTextarea = null, this.abortCursorAnimation(), this._restoreEditingProps(), this._currentCursorOpacity = 0, this._shouldClearDimensionCache() && (this.initDimensions(), this.setCoords()), this.fire("editing:exited"), e && this.fire("modified"), this.canvas && (this.canvas.off("mouse:move", this.mouseMoveHandler), this.canvas.fire("text:editing:exited", { target: this }), e && this.canvas.fire("object:modified", { target: this })), this }, _removeExtraneousStyles: function () { for (var e in this.styles) this._textLines[e] || delete this.styles[e] }, removeStyleFromTo: function (e, t) { var n, r, i = this.get2DCursorLocation(e, !0), o = this.get2DCursorLocation(t, !0), a = i.lineIndex, s = i.charIndex, l = o.lineIndex, u = o.charIndex; if (a !== l) { if (this.styles[a]) for (n = s; n < this._unwrappedTextLines[a].length; n++)delete this.styles[a][n]; if (this.styles[l]) for (n = u; n < this._unwrappedTextLines[l].length; n++)(r = this.styles[l][n]) && (this.styles[a] || (this.styles[a] = {}), this.styles[a][s + n - u] = r); for (n = a + 1; n <= l; n++)delete this.styles[n]; this.shiftLineStyles(l, a - l) } else if (this.styles[a]) { r = this.styles[a]; var c, f, h = u - s; for (n = s; n < u; n++)delete r[n]; for (f in this.styles[a]) (c = parseInt(f, 10)) >= u && (r[c - h] = r[f], delete r[f]) } }, shiftLineStyles: function (t, n) { var r = e(this.styles); for (var i in this.styles) { var o = parseInt(i, 10); o > t && (this.styles[o + n] = r[o], r[o - n] || delete this.styles[o]) } }, restartCursorIfNeeded: function () { (!this._currentTickState || this._currentTickState.isAborted || !this._currentTickCompleteState || this._currentTickCompleteState.isAborted) && this.initDelayedCursor() }, insertNewlineStyleObject: function (t, n, r, i) { var o, a = {}, s = !1, l = this._unwrappedTextLines[t].length === n; for (var u in r || (r = 1), this.shiftLineStyles(t, r), this.styles[t] && (o = this.styles[t][0 === n ? n : n - 1]), this.styles[t]) { var c = parseInt(u, 10); c >= n && (s = !0, a[c - n] = this.styles[t][u], l && 0 === n || delete this.styles[t][u]) } var f = !1; for (s && !l && (this.styles[t + r] = a, f = !0), f && r--; r > 0;)i && i[r - 1] ? this.styles[t + r] = { 0: e(i[r - 1]) } : o ? this.styles[t + r] = { 0: e(o) } : delete this.styles[t + r], r--; this._forceClearCache = !0 }, insertCharStyleObject: function (t, n, r, i) { this.styles || (this.styles = {}); var o = this.styles[t], a = o ? e(o) : {}; for (var s in r || (r = 1), a) { var l = parseInt(s, 10); l >= n && (o[l + r] = a[l], a[l - r] || delete o[l]) } if (this._forceClearCache = !0, i) for (; r--;)!Object.keys(i[r]).length || (this.styles[t] || (this.styles[t] = {}), this.styles[t][n + r] = e(i[r])); else if (o) for (var u = o[n ? n - 1 : 1]; u && r--;)this.styles[t][n + r] = e(u) }, insertNewStyleBlock: function (e, t, n) { for (var r = this.get2DCursorLocation(t, !0), i = [0], o = 0, a = 0; a < e.length; a++)"\n" === e[a] ? i[++o] = 0 : i[o]++; for (i[0] > 0 && (this.insertCharStyleObject(r.lineIndex, r.charIndex, i[0], n), n = n && n.slice(i[0] + 1)), o && this.insertNewlineStyleObject(r.lineIndex, r.charIndex + i[0], o), a = 1; a < o; a++)i[a] > 0 ? this.insertCharStyleObject(r.lineIndex + a, 0, i[a], n) : n && (this.styles[r.lineIndex + a][0] = n[0]), n = n && n.slice(i[a] + 1); i[a] > 0 && this.insertCharStyleObject(r.lineIndex + a, 0, i[a], n) }, setSelectionStartEndWithShift: function (e, t, n) { n <= e ? (t === e ? this._selectionDirection = "left" : "right" === this._selectionDirection && (this._selectionDirection = "left", this.selectionEnd = e), this.selectionStart = n) : n > e && n < t ? "right" === this._selectionDirection ? this.selectionEnd = n : this.selectionStart = n : (t === e ? this._selectionDirection = "right" : "left" === this._selectionDirection && (this._selectionDirection = "right", this.selectionStart = t), this.selectionEnd = n) }, setSelectionInBoundaries: function () { var e = this.text.length; this.selectionStart > e ? this.selectionStart = e : this.selectionStart < 0 && (this.selectionStart = 0), this.selectionEnd > e ? this.selectionEnd = e : this.selectionEnd < 0 && (this.selectionEnd = 0) } }) }(), s.util.object.extend(s.IText.prototype, { initDoubleClickSimulation: function () { this.__lastClickTime = +new Date, this.__lastLastClickTime = +new Date, this.__lastPointer = {}, this.on("mousedown", this.onMouseDown) }, onMouseDown: function (e) { if (this.canvas) { this.__newClickTime = +new Date; var t = e.pointer; this.isTripleClick(t) && (this.fire("tripleclick", e), this._stopEvent(e.e)), this.__lastLastClickTime = this.__lastClickTime, this.__lastClickTime = this.__newClickTime, this.__lastPointer = t, this.__lastIsEditing = this.isEditing, this.__lastSelected = this.selected } }, isTripleClick: function (e) { return this.__newClickTime - this.__lastClickTime < 500 && this.__lastClickTime - this.__lastLastClickTime < 500 && this.__lastPointer.x === e.x && this.__lastPointer.y === e.y }, _stopEvent: function (e) { e.preventDefault && e.preventDefault(), e.stopPropagation && e.stopPropagation() }, initCursorSelectionHandlers: function () { this.initMousedownHandler(), this.initMouseupHandler(), this.initClicks() }, doubleClickHandler: function (e) { !this.isEditing || this.selectWord(this.getSelectionStartFromPointer(e.e)) }, tripleClickHandler: function (e) { !this.isEditing || this.selectLine(this.getSelectionStartFromPointer(e.e)) }, initClicks: function () { this.on("mousedblclick", this.doubleClickHandler), this.on("tripleclick", this.tripleClickHandler) }, _mouseDownHandler: function (e) { !this.canvas || !this.editable || e.e.button && 1 !== e.e.button || (this.__isMousedown = !0, this.selected && (this.inCompositionMode = !1, this.setCursorByClick(e.e)), this.isEditing && (this.__selectionStartOnMouseDown = this.selectionStart, this.selectionStart === this.selectionEnd && this.abortCursorAnimation(), this.renderCursorOrSelection())) }, _mouseDownHandlerBefore: function (e) { !this.canvas || !this.editable || e.e.button && 1 !== e.e.button || (this.selected = this === this.canvas._activeObject) }, initMousedownHandler: function () { this.on("mousedown", this._mouseDownHandler), this.on("mousedown:before", this._mouseDownHandlerBefore) }, initMouseupHandler: function () { this.on("mouseup", this.mouseUpHandler) }, mouseUpHandler: function (e) { if (this.__isMousedown = !1, !(!this.editable || this.group || e.transform && e.transform.actionPerformed || e.e.button && 1 !== e.e.button)) { if (this.canvas) { var t = this.canvas._activeObject; if (t && t !== this) return } this.__lastSelected && !this.__corner ? (this.selected = !1, this.__lastSelected = !1, this.enterEditing(e.e), this.selectionStart === this.selectionEnd ? this.initDelayedCursor(!0) : this.renderCursorOrSelection()) : this.selected = !0 } }, setCursorByClick: function (e) { var t = this.getSelectionStartFromPointer(e), n = this.selectionStart, r = this.selectionEnd; e.shiftKey ? this.setSelectionStartEndWithShift(n, r, t) : (this.selectionStart = t, this.selectionEnd = t), this.isEditing && (this._fireSelectionChanged(), this._updateTextarea()) }, getSelectionStartFromPointer: function (e) { for (var t, n = this.getLocalPointer(e), r = 0, i = 0, o = 0, a = 0, s = 0, l = 0, u = this._textLines.length; l < u && o <= n.y; l++)o += this.getHeightOfLine(l) * this.scaleY, s = l, l > 0 && (a += this._textLines[l - 1].length + this.missingNewlineOffset(l - 1)); i = this._getLineLeftOffset(s) * this.scaleX, t = this._textLines[s], "rtl" === this.direction && (n.x = this.width * this.scaleX - n.x + i); for (var c = 0, f = t.length; c < f && (r = i, (i += this.__charBounds[s][c].kernedWidth * this.scaleX) <= n.x); c++)a++; return this._getNewSelectionStartFromOffset(n, r, i, a, f) }, _getNewSelectionStartFromOffset: function (e, t, n, r, i) { var o = e.x - t, a = n - e.x, s = r + (a > o || a < 0 ? 0 : 1); return this.flipX && (s = i - s), s > this._text.length && (s = this._text.length), s } }), s.util.object.extend(s.IText.prototype, { initHiddenTextarea: function () { this.hiddenTextarea = s.document.createElement("textarea"), this.hiddenTextarea.setAttribute("autocapitalize", "off"), this.hiddenTextarea.setAttribute("autocorrect", "off"), this.hiddenTextarea.setAttribute("autocomplete", "off"), this.hiddenTextarea.setAttribute("spellcheck", "false"), this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea", ""), this.hiddenTextarea.setAttribute("wrap", "off"); var e = this._calcTextareaPosition(); this.hiddenTextarea.style.cssText = "position: absolute; top: " + e.top + "; left: " + e.left + "; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingｰtop: " + e.fontSize + ";", this.hiddenTextareaContainer ? this.hiddenTextareaContainer.appendChild(this.hiddenTextarea) : s.document.body.appendChild(this.hiddenTextarea), s.util.addListener(this.hiddenTextarea, "keydown", this.onKeyDown.bind(this)), s.util.addListener(this.hiddenTextarea, "keyup", this.onKeyUp.bind(this)), s.util.addListener(this.hiddenTextarea, "input", this.onInput.bind(this)), s.util.addListener(this.hiddenTextarea, "copy", this.copy.bind(this)), s.util.addListener(this.hiddenTextarea, "cut", this.copy.bind(this)), s.util.addListener(this.hiddenTextarea, "paste", this.paste.bind(this)), s.util.addListener(this.hiddenTextarea, "compositionstart", this.onCompositionStart.bind(this)), s.util.addListener(this.hiddenTextarea, "compositionupdate", this.onCompositionUpdate.bind(this)), s.util.addListener(this.hiddenTextarea, "compositionend", this.onCompositionEnd.bind(this)), !this._clickHandlerInitialized && this.canvas && (s.util.addListener(this.canvas.upperCanvasEl, "click", this.onClick.bind(this)), this._clickHandlerInitialized = !0) }, keysMap: { 9: "exitEditing", 27: "exitEditing", 33: "moveCursorUp", 34: "moveCursorDown", 35: "moveCursorRight", 36: "moveCursorLeft", 37: "moveCursorLeft", 38: "moveCursorUp", 39: "moveCursorRight", 40: "moveCursorDown" }, keysMapRtl: { 9: "exitEditing", 27: "exitEditing", 33: "moveCursorUp", 34: "moveCursorDown", 35: "moveCursorLeft", 36: "moveCursorRight", 37: "moveCursorRight", 38: "moveCursorUp", 39: "moveCursorLeft", 40: "moveCursorDown" }, ctrlKeysMapUp: { 67: "copy", 88: "cut" }, ctrlKeysMapDown: { 65: "selectAll" }, onClick: function () { this.hiddenTextarea && this.hiddenTextarea.focus() }, onKeyDown: function (e) { if (this.isEditing) { var t = "rtl" === this.direction ? this.keysMapRtl : this.keysMap; if (e.keyCode in t) this[t[e.keyCode]](e); else { if (!(e.keyCode in this.ctrlKeysMapDown) || !e.ctrlKey && !e.metaKey) return; this[this.ctrlKeysMapDown[e.keyCode]](e) } e.stopImmediatePropagation(), e.preventDefault(), e.keyCode >= 33 && e.keyCode <= 40 ? (this.inCompositionMode = !1, this.clearContextTop(), this.renderCursorOrSelection()) : this.canvas && this.canvas.requestRenderAll() } }, onKeyUp: function (e) { !this.isEditing || this._copyDone || this.inCompositionMode ? this._copyDone = !1 : e.keyCode in this.ctrlKeysMapUp && (e.ctrlKey || e.metaKey) && (this[this.ctrlKeysMapUp[e.keyCode]](e), e.stopImmediatePropagation(), e.preventDefault(), this.canvas && this.canvas.requestRenderAll()) }, onInput: function (e) { var t = this.fromPaste; if (this.fromPaste = !1, e && e.stopPropagation(), this.isEditing) { var n, r, i, o, a, l = this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText, u = this._text.length, c = l.length, f = c - u, h = this.selectionStart, d = this.selectionEnd, p = h !== d; if ("" === this.hiddenTextarea.value) return this.styles = {}, this.updateFromTextArea(), this.fire("changed"), void (this.canvas && (this.canvas.fire("text:changed", { target: this }), this.canvas.requestRenderAll())); var v = this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart, this.hiddenTextarea.selectionEnd, this.hiddenTextarea.value), g = h > v.selectionStart; p ? (n = this._text.slice(h, d), f += d - h) : c < u && (n = g ? this._text.slice(d + f, d) : this._text.slice(h, h - f)), r = l.slice(v.selectionEnd - f, v.selectionEnd), n && n.length && (r.length && (i = this.getSelectionStyles(h, h + 1, !1), i = r.map((function () { return i[0] }))), p ? (o = h, a = d) : g ? (o = d - n.length, a = d) : (o = d, a = d + n.length), this.removeStyleFromTo(o, a)), r.length && (t && r.join("") === s.copiedText && !s.disableStyleCopyPaste && (i = s.copiedTextStyle), this.insertNewStyleBlock(r, h, i)), this.updateFromTextArea(), this.fire("changed"), this.canvas && (this.canvas.fire("text:changed", { target: this }), this.canvas.requestRenderAll()) } }, onCompositionStart: function () { this.inCompositionMode = !0 }, onCompositionEnd: function () { this.inCompositionMode = !1 }, onCompositionUpdate: function (e) { this.compositionStart = e.target.selectionStart, this.compositionEnd = e.target.selectionEnd, this.updateTextareaPosition() }, copy: function () { this.selectionStart !== this.selectionEnd && (s.copiedText = this.getSelectedText(), s.disableStyleCopyPaste ? s.copiedTextStyle = null : s.copiedTextStyle = this.getSelectionStyles(this.selectionStart, this.selectionEnd, !0), this._copyDone = !0) }, paste: function () { this.fromPaste = !0 }, _getClipboardData: function (e) { return e && e.clipboardData || s.window.clipboardData }, _getWidthBeforeCursor: function (e, t) { var n, r = this._getLineLeftOffset(e); return t > 0 && (r += (n = this.__charBounds[e][t - 1]).left + n.width), r }, getDownCursorOffset: function (e, t) { var n = this._getSelectionForOffset(e, t), r = this.get2DCursorLocation(n), i = r.lineIndex; if (i === this._textLines.length - 1 || e.metaKey || 34 === e.keyCode) return this._text.length - n; var o = r.charIndex, a = this._getWidthBeforeCursor(i, o), s = this._getIndexOnLine(i + 1, a); return this._textLines[i].slice(o).length + s + 1 + this.missingNewlineOffset(i) }, _getSelectionForOffset: function (e, t) { return e.shiftKey && this.selectionStart !== this.selectionEnd && t ? this.selectionEnd : this.selectionStart }, getUpCursorOffset: function (e, t) { var n = this._getSelectionForOffset(e, t), r = this.get2DCursorLocation(n), i = r.lineIndex; if (0 === i || e.metaKey || 33 === e.keyCode) return -n; var o = r.charIndex, a = this._getWidthBeforeCursor(i, o), s = this._getIndexOnLine(i - 1, a), l = this._textLines[i].slice(0, o), u = this.missingNewlineOffset(i - 1); return -this._textLines[i - 1].length + s - l.length + (1 - u) }, _getIndexOnLine: function (e, t) { for (var n, r, i = this._textLines[e], o = this._getLineLeftOffset(e), a = 0, s = 0, l = i.length; s < l; s++)if ((o += n = this.__charBounds[e][s].width) > t) { r = !0; var u = o - n, c = o, f = Math.abs(u - t); a = Math.abs(c - t) < f ? s : s - 1; break } return r || (a = i.length - 1), a }, moveCursorDown: function (e) { this.selectionStart >= this._text.length && this.selectionEnd >= this._text.length || this._moveCursorUpOrDown("Down", e) }, moveCursorUp: function (e) { 0 === this.selectionStart && 0 === this.selectionEnd || this._moveCursorUpOrDown("Up", e) }, _moveCursorUpOrDown: function (e, t) { var n = this["get" + e + "CursorOffset"](t, "right" === this._selectionDirection); t.shiftKey ? this.moveCursorWithShift(n) : this.moveCursorWithoutShift(n), 0 !== n && (this.setSelectionInBoundaries(), this.abortCursorAnimation(), this._currentCursorOpacity = 1, this.initDelayedCursor(), this._fireSelectionChanged(), this._updateTextarea()) }, moveCursorWithShift: function (e) { var t = "left" === this._selectionDirection ? this.selectionStart + e : this.selectionEnd + e; return this.setSelectionStartEndWithShift(this.selectionStart, this.selectionEnd, t), 0 !== e }, moveCursorWithoutShift: function (e) { return e < 0 ? (this.selectionStart += e, this.selectionEnd = this.selectionStart) : (this.selectionEnd += e, this.selectionStart = this.selectionEnd), 0 !== e }, moveCursorLeft: function (e) { 0 === this.selectionStart && 0 === this.selectionEnd || this._moveCursorLeftOrRight("Left", e) }, _move: function (e, t, n) { var r; if (e.altKey) r = this["findWordBoundary" + n](this[t]); else { if (!e.metaKey && 35 !== e.keyCode && 36 !== e.keyCode) return this[t] += "Left" === n ? -1 : 1, !0; r = this["findLineBoundary" + n](this[t]) } if (void 0 !== C(r) && this[t] !== r) return this[t] = r, !0 }, _moveLeft: function (e, t) { return this._move(e, t, "Left") }, _moveRight: function (e, t) { return this._move(e, t, "Right") }, moveCursorLeftWithoutShift: function (e) { var t = !0; return this._selectionDirection = "left", this.selectionEnd === this.selectionStart && 0 !== this.selectionStart && (t = this._moveLeft(e, "selectionStart")), this.selectionEnd = this.selectionStart, t }, moveCursorLeftWithShift: function (e) { return "right" === this._selectionDirection && this.selectionStart !== this.selectionEnd ? this._moveLeft(e, "selectionEnd") : 0 !== this.selectionStart ? (this._selectionDirection = "left", this._moveLeft(e, "selectionStart")) : void 0 }, moveCursorRight: function (e) { this.selectionStart >= this._text.length && this.selectionEnd >= this._text.length || this._moveCursorLeftOrRight("Right", e) }, _moveCursorLeftOrRight: function (e, t) { var n = "moveCursor" + e + "With"; this._currentCursorOpacity = 1, t.shiftKey ? n += "Shift" : n += "outShift", this[n](t) && (this.abortCursorAnimation(), this.initDelayedCursor(), this._fireSelectionChanged(), this._updateTextarea()) }, moveCursorRightWithShift: function (e) { return "left" === this._selectionDirection && this.selectionStart !== this.selectionEnd ? this._moveRight(e, "selectionStart") : this.selectionEnd !== this._text.length ? (this._selectionDirection = "right", this._moveRight(e, "selectionEnd")) : void 0 }, moveCursorRightWithoutShift: function (e) { var t = !0; return this._selectionDirection = "right", this.selectionStart === this.selectionEnd ? (t = this._moveRight(e, "selectionStart"), this.selectionEnd = this.selectionStart) : this.selectionStart = this.selectionEnd, t }, removeChars: function (e, t) { void 0 === t && (t = e + 1), this.removeStyleFromTo(e, t), this._text.splice(e, t - e), this.text = this._text.join(""), this.set("dirty", !0), this._shouldClearDimensionCache() && (this.initDimensions(), this.setCoords()), this._removeExtraneousStyles() }, insertChars: function (e, t, n, r) { void 0 === r && (r = n), r > n && this.removeStyleFromTo(n, r); var i = s.util.string.graphemeSplit(e); this.insertNewStyleBlock(i, n, t), this._text = [].concat(this._text.slice(0, n), i, this._text.slice(r)), this.text = this._text.join(""), this.set("dirty", !0), this._shouldClearDimensionCache() && (this.initDimensions(), this.setCoords()), this._removeExtraneousStyles() } }), function () { var e = s.util.toFixed, t = /  +/g; s.util.object.extend(s.Text.prototype, { _toSVG: function () { var e = this._getSVGLeftTopOffsets(), t = this._getSVGTextAndBg(e.textTop, e.textLeft); return this._wrapSVGTextAndBg(t) }, toSVG: function (e) { return this._createBaseSVGMarkup(this._toSVG(), { reviver: e, noStyle: !0, withShadow: !0 }) }, _getSVGLeftTopOffsets: function () { return { textLeft: -this.width / 2, textTop: -this.height / 2, lineTop: this.getHeightOfLine(0) } }, _wrapSVGTextAndBg: function (e) { var t = this.getSvgTextDecoration(this); return [e.textBgRects.join(""), '\t\t<text xml:space="preserve" ', this.fontFamily ? 'font-family="' + this.fontFamily.replace(/"/g, "'") + '" ' : "", this.fontSize ? 'font-size="' + this.fontSize + '" ' : "", this.fontStyle ? 'font-style="' + this.fontStyle + '" ' : "", this.fontWeight ? 'font-weight="' + this.fontWeight + '" ' : "", t ? 'text-decoration="' + t + '" ' : "", 'style="', this.getSvgStyles(!0), '"', this.addPaintOrder(), " >", e.textSpans.join(""), "</text>\n"] }, _getSVGTextAndBg: function (e, t) { var n, r = [], i = [], o = e; this._setSVGBg(i); for (var a = 0, s = this._textLines.length; a < s; a++)n = this._getLineLeftOffset(a), (this.textBackgroundColor || this.styleHas("textBackgroundColor", a)) && this._setSVGTextLineBg(i, a, t + n, o), this._setSVGTextLineText(r, a, t + n, o), o += this.getHeightOfLine(a); return { textSpans: r, textBgRects: i } }, _createTextCharSpan: function (n, r, i, o) { var a = n !== n.trim() || n.match(t), l = this.getSvgSpanStyles(r, a), u = l ? 'style="' + l + '"' : "", c = r.deltaY, f = "", h = s.Object.NUM_FRACTION_DIGITS; return c && (f = ' dy="' + e(c, h) + '" '), ['<tspan x="', e(i, h), '" y="', e(o, h), '" ', f, u, ">", s.util.string.escapeXml(n), "</tspan>"].join("") }, _setSVGTextLineText: function (e, t, n, r) { var i, o, a, s, l, u = this.getHeightOfLine(t), c = -1 !== this.textAlign.indexOf("justify"), f = "", h = 0, d = this._textLines[t]; r += u * (1 - this._fontSizeFraction) / this.lineHeight; for (var p = 0, v = d.length - 1; p <= v; p++)l = p === v || this.charSpacing, f += d[p], a = this.__charBounds[t][p], 0 === h ? (n += a.kernedWidth - a.width, h += a.width) : h += a.kernedWidth, c && !l && this._reSpaceAndTab.test(d[p]) && (l = !0), l || (i = i || this.getCompleteStyleDeclaration(t, p), o = this.getCompleteStyleDeclaration(t, p + 1), l = this._hasStyleChangedForSvg(i, o)), l && (s = this._getStyleDeclaration(t, p) || {}, e.push(this._createTextCharSpan(f, s, n, r)), f = "", i = o, n += h, h = 0) }, _pushTextBgRect: function (t, n, r, i, o, a) { var l = s.Object.NUM_FRACTION_DIGITS; t.push("\t\t<rect ", this._getFillAttributes(n), ' x="', e(r, l), '" y="', e(i, l), '" width="', e(o, l), '" height="', e(a, l), '"></rect>\n') }, _setSVGTextLineBg: function (e, t, n, r) { for (var i, o, a = this._textLines[t], s = this.getHeightOfLine(t) / this.lineHeight, l = 0, u = 0, c = this.getValueOfPropertyAt(t, 0, "textBackgroundColor"), f = 0, h = a.length; f < h; f++)i = this.__charBounds[t][f], (o = this.getValueOfPropertyAt(t, f, "textBackgroundColor")) !== c ? (c && this._pushTextBgRect(e, c, n + u, r, l, s), u = i.left, l = i.width, c = o) : l += i.kernedWidth; o && this._pushTextBgRect(e, o, n + u, r, l, s) }, _getFillAttributes: function (e) { var t = e && "string" == typeof e ? new s.Color(e) : ""; return t && t.getSource() && 1 !== t.getAlpha() ? 'opacity="' + t.getAlpha() + '" fill="' + t.setAlpha(1).toRgb() + '"' : 'fill="' + e + '"' }, _getSVGLineTopOffset: function (e) { for (var t, n = 0, r = 0; r < e; r++)n += this.getHeightOfLine(r); return t = this.getHeightOfLine(r), { lineTop: n, offset: (this._fontSizeMult - this._fontSizeFraction) * t / (this.lineHeight * this._fontSizeMult) } }, getSvgStyles: function (e) { return s.Object.prototype.getSvgStyles.call(this, e) + " white-space: pre;" } }) }(), function (e) { var t = e.fabric || (e.fabric = {}); t.Textbox = t.util.createClass(t.IText, t.Observable, { type: "textbox", minWidth: 20, dynamicMinWidth: 2, __cachedLines: null, lockScalingFlip: !0, noScaleCache: !1, _dimensionAffectingProps: t.Text.prototype._dimensionAffectingProps.concat("width"), _wordJoiners: /[ \t\r]/, splitByGrapheme: !1, initDimensions: function () { this.__skipDimension || (this.isEditing && this.initDelayedCursor(), this.clearContextTop(), this._clearCache(), this.dynamicMinWidth = 0, this._styleMap = this._generateStyleMap(this._splitText()), this.dynamicMinWidth > this.width && this._set("width", this.dynamicMinWidth), -1 !== this.textAlign.indexOf("justify") && this.enlargeSpaces(), this.height = this.calcTextHeight(), this.saveState({ propertySet: "_dimensionAffectingProps" })) }, _generateStyleMap: function (e) { for (var t = 0, n = 0, r = 0, i = {}, o = 0; o < e.graphemeLines.length; o++)"\n" === e.graphemeText[r] && o > 0 ? (n = 0, r++, t++) : !this.splitByGrapheme && this._reSpaceAndTab.test(e.graphemeText[r]) && o > 0 && (n++, r++), i[o] = { line: t, offset: n }, r += e.graphemeLines[o].length, n += e.graphemeLines[o].length; return i }, styleHas: function (e, n) { if (this._styleMap && !this.isWrapping) { var r = this._styleMap[n]; r && (n = r.line) } return t.Text.prototype.styleHas.call(this, e, n) }, isEmptyStyles: function (e) { if (!this.styles) return !0; var t, n, r = 0, i = !1, o = this._styleMap[e], a = this._styleMap[e + 1]; for (var s in o && (e = o.line, r = o.offset), a && (i = a.line === e, t = a.offset), n = void 0 === e ? this.styles : { line: this.styles[e] }) for (var l in n[s]) if (l >= r && (!i || l < t)) for (var u in n[s][l]) return !1; return !0 }, _getStyleDeclaration: function (e, t) { if (this._styleMap && !this.isWrapping) { var n = this._styleMap[e]; if (!n) return null; e = n.line, t = n.offset + t } return this.callSuper("_getStyleDeclaration", e, t) }, _setStyleDeclaration: function (e, t, n) { var r = this._styleMap[e]; e = r.line, t = r.offset + t, this.styles[e][t] = n }, _deleteStyleDeclaration: function (e, t) { var n = this._styleMap[e]; e = n.line, t = n.offset + t, delete this.styles[e][t] }, _getLineStyle: function (e) { var t = this._styleMap[e]; return !!this.styles[t.line] }, _setLineStyle: function (e) { var t = this._styleMap[e]; this.styles[t.line] = {} }, _wrapText: function (e, t) { var n, r = []; for (this.isWrapping = !0, n = 0; n < e.length; n++)r = r.concat(this._wrapLine(e[n], n, t)); return this.isWrapping = !1, r }, _measureWord: function (e, t, n) { var r, i = 0; n = n || 0; for (var o = 0, a = e.length; o < a; o++)i += this._getGraphemeBox(e[o], t, o + n, r, !0).kernedWidth, r = e[o]; return i }, _wrapLine: function (e, n, r, i) { var o = 0, a = this.splitByGrapheme, s = [], l = [], u = a ? t.util.string.graphemeSplit(e) : e.split(this._wordJoiners), c = "", f = 0, h = a ? "" : " ", d = 0, p = 0, v = 0, g = !0, m = this._getWidthOfCharSpacing(); i = i || 0, 0 === u.length && u.push([]), r -= i; for (var y = 0; y < u.length; y++)c = a ? u[y] : t.util.string.graphemeSplit(u[y]), d = this._measureWord(c, n, f), f += c.length, (o += p + d - m) > r && !g ? (s.push(l), l = [], o = d, g = !0) : o += m, !g && !a && l.push(h), l = l.concat(c), p = a ? 0 : this._measureWord([h], n, f), f++, g = !1, d > v && (v = d); return y && s.push(l), v + i > this.dynamicMinWidth && (this.dynamicMinWidth = v - m + i), s }, isEndOfWrapping: function (e) { return !this._styleMap[e + 1] || this._styleMap[e + 1].line !== this._styleMap[e].line }, missingNewlineOffset: function (e) { return this.splitByGrapheme ? this.isEndOfWrapping(e) ? 1 : 0 : 1 }, _splitTextIntoLines: function (e) { for (var n = t.Text.prototype._splitTextIntoLines.call(this, e), r = this._wrapText(n.lines, this.width), i = new Array(r.length), o = 0; o < r.length; o++)i[o] = r[o].join(""); return n.lines = i, n.graphemeLines = r, n }, getMinWidth: function () { return Math.max(this.minWidth, this.dynamicMinWidth) }, _removeExtraneousStyles: function () { var e = {}; for (var t in this._styleMap) this._textLines[t] && (e[this._styleMap[t].line] = 1); for (var t in this.styles) e[t] || delete this.styles[t] }, toObject: function (e) { return this.callSuper("toObject", ["minWidth", "splitByGrapheme"].concat(e)) } }), t.Textbox.fromObject = function (e, n) { return t.Object._fromObject("Textbox", e, n, "text") } }(e), function () { var e = s.controlsUtils, t = e.scaleSkewCursorStyleHandler, n = e.scaleCursorStyleHandler, r = e.scalingEqually, i = e.scalingYOrSkewingX, o = e.scalingXOrSkewingY, a = e.scaleOrSkewActionName, l = s.Object.prototype.controls; if (l.ml = new s.Control({ x: -.5, y: 0, cursorStyleHandler: t, actionHandler: o, getActionName: a }), l.mr = new s.Control({ x: .5, y: 0, cursorStyleHandler: t, actionHandler: o, getActionName: a }), l.mb = new s.Control({ x: 0, y: .5, cursorStyleHandler: t, actionHandler: i, getActionName: a }), l.mt = new s.Control({ x: 0, y: -.5, cursorStyleHandler: t, actionHandler: i, getActionName: a }), l.tl = new s.Control({ x: -.5, y: -.5, cursorStyleHandler: n, actionHandler: r }), l.tr = new s.Control({ x: .5, y: -.5, cursorStyleHandler: n, actionHandler: r }), l.bl = new s.Control({ x: -.5, y: .5, cursorStyleHandler: n, actionHandler: r }), l.br = new s.Control({ x: .5, y: .5, cursorStyleHandler: n, actionHandler: r }), l.mtr = new s.Control({ x: 0, y: -.5, actionHandler: e.rotationWithSnapping, cursorStyleHandler: e.rotationStyleHandler, offsetY: -40, withConnection: !0, actionName: "rotate" }), s.Textbox) { var u = s.Textbox.prototype.controls = {}; u.mtr = l.mtr, u.tr = l.tr, u.br = l.br, u.tl = l.tl, u.bl = l.bl, u.mt = l.mt, u.mb = l.mb, u.mr = new s.Control({ x: .5, y: 0, actionHandler: e.changeWidth, cursorStyleHandler: t, actionName: "resizing" }), u.ml = new s.Control({ x: -.5, y: 0, actionHandler: e.changeWidth, cursorStyleHandler: t, actionName: "resizing" }) } }() }(UO); var WO = { lockScalingFlip: !0, originY: "center", originX: "center", lockMovementX: !0, lockMovementY: !0, borderColor: "transparent" }; function KO() { for (var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 36, t = "", n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", r = 0; r < e; r += 1)t += n.charAt(Math.floor(Math.random() * n.length)); return t } function YO() { return lw.getState() } function XO() { return YO().editor.tools } function GO() { return YO().fabric } var qO = function () { function e() { var t = this; g(this, e), B(this, "maxZoom", 2), B(this, "minZoom", 1), B(this, "step", .05), this.allowUserZoom && this.bindMouseWheel(), lw.subscribe((function (e) { return e.stageSize }), (function () { setTimeout((function () { t.fitToScreen() }), 1) })) } return y(e, [{ key: "allowUserZoom", get: function () { var e, t, n, r; return null == (r = null == (n = null == (t = null == (e = YO().config) ? void 0 : e.tools) ? void 0 : t.zoom) ? void 0 : n.allowUserZoom) || r } }, { key: "currentZoom", get: function () { return YO().zoom } }, { key: "zoomIn", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.step; this.set(this.currentZoom + e) } }, { key: "canZoomIn", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.step; return this.currentZoom + e <= this.maxZoom } }, { key: "canZoomOut", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.step; return this.currentZoom - e >= this.minZoom } }, { key: "zoomOut", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.step; this.set(this.currentZoom - e) } }, { key: "set", value: function (e) { var t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1]; if (!(e < this.minZoom || e > this.maxZoom)) { var n = Fc(YO().original.width * e, 0), r = Fc(YO().original.height * e, 0); GO().setZoom(e), t && GO().setDimensions({ width: n, height: r }), YO().setZoom(e) } } }, { key: "fitToScreen", value: function () { var e, t; if (null == (t = null == (e = YO().config.tools) ? void 0 : e.zoom) ? void 0 : t.fitImageToScreen) { var n = YO().stageSize, r = n.width, i = n.height, o = Math.max(i, 1), a = Math.max(r, 1); if (YO().original.height > o || YO().original.width > a) { var s = Math.min(o / YO().original.height, a / YO().original.width); this.minZoom = Math.min(s, 1) } else this.minZoom = 1; this.set(this.minZoom) } } }, { key: "bindMouseWheel", value: function () { var e = this; GO().on("mouse:wheel", (function (t) { t.e.preventDefault(), t.e.stopPropagation(), t.e.deltaY < 0 ? e.zoomIn() : e.zoomOut() })) } }]), e }(), JO = { selectable: !1, evented: !1, lockMovementX: !0, lockMovementY: !0, lockRotation: !0, lockScalingX: !0, lockScalingY: !0, lockUniScaling: !0, hasControls: !1, hasBorders: !1, hasRotatingPoint: !1, strokeWidth: 0 }; function ZO(e) { return new Promise((function (t) { UO.fabric.util.loadImage(e, (function (e) { return t(new UO.fabric.Image(e)) }), null, YO().config.crossOrigin ? "anonymous" : void 0) })) } function $O() { return !(YO().config.image || YO().config.blankCanvasSize || GO() && 0 !== GO().getObjects().length) } function QO(e) { return eP.apply(this, arguments) } function eP() { return eP = x(b().mark((function e(t) { return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, fetch(t); case 2: return e.abrupt("return", e.sent.json()); case 3: case "end": return e.stop() } }), e) }))), eP.apply(this, arguments) } var tP = function () { function e() { g(this, e), B(this, "minWidth", 50), B(this, "minHeight", 50) } var t, n; return y(e, [{ key: "resize", value: function (e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, r = n.applyZoom, i = void 0 !== r && r, o = n.resizeHelper, a = void 0 === o || o, s = YO().zoom; GO().setWidth(e * (i ? s : 1)), GO().setHeight(t * (i ? s : 1)), YO().setOriginal(e, t), a && XO().transform.resetStraightenAnchor() } }, { key: "addMainImage", value: (n = x(b().mark((function e(t) { var n, r, i, o, a = arguments; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return n = a.length > 1 && void 0 !== a[1] ? a[1] : "mainImage", YO().toggleLoading(n), e.next = 4, ZO(t); case 4: if (!(o = e.sent)) { e.next = 7; break } return e.abrupt("return", (this.clear(), o.set(JO), o.name = ew.MainImage, GO().add(o), this.resize(o.width, o.height), o.center(), o.setCoords(), XO().zoom.fitToScreen(), YO().toggleLoading(!1), null == (i = (r = YO().config).onMainImageLoaded) || i.call(r, o), o)); case 7: case "end": return e.stop() } }), e, this) }))), function (e) { return n.apply(this, arguments) }) }, { key: "openNew", value: function (e, t, n) { return e = Math.max(this.minWidth, e), t = Math.max(this.minHeight, t), this.clear(), this.resize(e, t), GO().backgroundColor = n, XO().zoom.fitToScreen(), YO().toggleLoading("newCanvas"), requestAnimationFrame((function () { YO().toggleLoading(!1) })), Promise.resolve({ width: e, height: t }) } }, { key: "getMainImage", value: function () { return GO().getObjects().find((function (e) { return e.name === ew.MainImage })) } }, { key: "render", value: function () { GO().requestRenderAll() } }, { key: "loadInitialContent", value: (t = x(b().mark((function e() { var t, n, r, i, o, a; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (r = YO().config.image, i = YO().config.blankCanvasSize, o = YO().config.state, !r || !r.endsWith("json")) { e.next = 9; break } return e.next = 4, QO(r); case 4: return a = e.sent, e.next = 7, XO().import.loadState(a); case 7: case 12: case 17: case 22: e.next = 28; break; case 9: if (!r || !r.startsWith('{"canvas')) { e.next = 14; break } return e.next = 12, XO().import.loadState(r); case 14: if (!r) { e.next = 19; break } return e.next = 17, this.addMainImage(r); case 19: if (!o) { e.next = 24; break } return e.next = 22, XO().import.loadState(o); case 24: if (e.t0 = i, !e.t0) { e.next = 28; break } return e.next = 28, this.openNew(i.width, i.height); case 28: return e.abrupt("return", ($O() && (null == (n = null == (t = YO().config.ui) ? void 0 : t.openImageDialog) ? void 0 : n.show) && YO().togglePanel("newImage", !0), new Promise((function (e) { setTimeout((function () { XO().history.addInitial(), e() }), 10) })))); case 29: case "end": return e.stop() } }), e, this) }))), function () { return t.apply(this, arguments) }) }, { key: "clear", value: function () { GO().clear(), XO().frame.remove(), XO().transform.resetStraightenAnchor() } }]), e }(), nP = ["fontSize", "fontFamily", "left", "top", "width", "height", "scaleX", "scaleY", "flipX", "flipY", "angle", "src", "strokeWidth"]; function rP() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; GO().fire("object:modified", iP(e)) } function iP(e) { return { values: e, sizeOrPositionChanged: oP(e) } } function oP(e) { return Object.keys(e).some((function (e) { return nP.includes(e) })) } function aP() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; if (!YO().dirty) { XO().zoom.fitToScreen(); var t = sP(GO().getActiveObject()), n = _(t, 2), r = n[0], i = n[1]; e ? YO().setActiveTool(e, r === e ? i : null) : YO().setActiveTool(r, i) } } function sP(e) { switch (null == e ? void 0 : e.name) { case ew.Text: return [py.TEXT, Jb.Text]; case ew.Sticker: case ew.Image: return [py.STICKERS, Jb.ActiveObject]; case ew.Shape: return [py.SHAPES, Jb.ActiveObject]; default: return [null, null] } } function lP(e) { var t = _(sP(e.target), 1)[0] === YO().activeTool; return !(!YO().dirty || e.target && t || (e.deselected && XO().objects.select(e.deselected[0]), 0)) } function uP(e) { (null == e ? void 0 : e.data.id) !== YO().objects.active.id && (YO().objects.setActive(null != e ? e : null), aP()) } var cP = function () { function e() { var t = this; g(this, e), this.syncObjects(), YO().fabric.on("selection:created", (function (e) { lP(e) || uP(e.target) })), YO().fabric.on("selection:updated", (function (e) { lP(e) || uP(e.target) })), YO().fabric.on("selection:cleared", (function () { uP() })), YO().fabric.on("text:editing:entered", (function () { YO().objects.setIsEditingText(!0) })), YO().fabric.on("text:editing:exited", (function () { YO().objects.setIsEditingText(!1) })), YO().fabric.on("object:added", (function () { t.syncObjects() })), YO().fabric.on("object:removed", (function () { t.syncObjects() })) } return y(e, [{ key: "getAll", value: function () { return GO().getObjects().filter((function (e) { var t; return !(null == (t = null == e ? void 0 : e.data) ? void 0 : t.pixieInternal) })) } }, { key: "get", value: function (e) { return this.getAll().find((function (t) { return t.name === e })) } }, { key: "getById", value: function (e) { return this.getAll().find((function (t) { return t.data.id === e })) } }, { key: "isActive", value: function (e) { var t, n = "string" == typeof e ? e : e.data.id; return (null == (t = YO().objects.active) ? void 0 : t.id) === n } }, { key: "getActive", value: function () { return GO().getActiveObject() } }, { key: "has", value: function (e) { return this.getAll().findIndex((function (t) { return t.name === e })) > -1 } }, { key: "select", value: function (e) { var t = "string" == typeof e ? this.getById(e) : e; !t || (GO().setActiveObject(t), GO().requestRenderAll()) } }, { key: "deselectActive", value: function () { GO().discardActiveObject(), GO().requestRenderAll() } }, { key: "setValues", value: function (e, t) { if (t = t || this.getActive()) { var n = !1; (function (e) { return e.name === ew.Sticker && "forEachObject" in e })(t) && e.fill !== t.fill && t.forEachObject((function (t) { return t.set("fill", e.fill) })), Qb(t) ? ((e.fontFamily !== t.fontFamily || e.fontSize !== t.fontSize) && (n = !0), t.selectionStart !== t.selectionEnd ? t.setSelectionStyles(e) : t.set(e)) : t.set(e), n ? setTimeout((function () { GO().requestRenderAll() }), 50) : GO().requestRenderAll(), YO().objects.setActive(t), rP(e) } } }, { key: "move", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, n = arguments.length > 2 ? arguments[2] : void 0; (n = n || this.getActive()) && ("up" === e ? this.setValues({ top: n.top - t }) : "down" === e ? this.setValues({ top: n.top + t }) : "left" === e ? this.setValues({ left: n.left - t }) : "right" === e && this.setValues({ left: n.left + t }), XO().canvas.render()) } }, { key: "bringToFront", value: function (e) { (e = e || this.getActive()) && (e.bringToFront(), XO().canvas.render()) } }, { key: "sendToBack", value: function (e) { (e = e || this.getActive()) && (e.sendToBack(), XO().canvas.render()) } }, { key: "flipHorizontally", value: function (e) { (e = e || this.getActive()) && (this.setValues({ flipX: !e.flipX }), XO().canvas.render()) } }, { key: "duplicate", value: function (e) { var t = this, n = e || this.getActive(); !n || (this.deselectActive(), n.clone((function (e) { e.set({ left: n.left + 40, top: n.top + 40, data: N(F({}, n.data), { id: KO(10) }), name: n.name }), GO().add(e), t.select(e), XO().canvas.render() }))) } }, { key: "delete", value: function (e) { (e = e || this.getActive()) && (this.deselectActive(), GO().remove(e), GO().requestRenderAll(), XO().history.addHistoryItem({ name: "deletedObject" })) } }, { key: "syncObjects", value: function () { var e = this.getAll().map((function (e) { var t; return { name: e.name, selectable: null != (t = e.selectable) && t, id: e.data.id } })); lw.setState({ objects: N(F({}, YO().objects), { all: e }) }) } }]), e }(), fP = { frame: null, fonts: [] }; function hP() { var e, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : []; t = [].concat(S(Object.keys(JO)), ["crossOrigin", "name", "displayName", "data"], S(t)); var n = GO().toJSON(t); n.objects = n.objects.filter((function (e) { return !e.data.pixieInternal })).map((function (e) { return "image" === e.type && YO().config.crossOrigin && (e.crossOrigin = "anonymous"), Qb(e) && (e.selectable = !0, e.lockMovementX = !1, e.lockMovementY = !1, e.lockUniScaling = !1), N(F({}, e), { data: e.data ? F({}, e.data) : {} }) })); var r = XO().frame.active.config ? { name: XO().frame.active.config.name, sizePercent: XO().frame.active.currentSizeInPercent } : null; return { canvas: n, editor: { frame: r, zoom: YO().zoom, activeObjectId: (null == (e = YO().objects.active) ? void 0 : e.id) || null }, canvasWidth: YO().original.width, canvasHeight: YO().original.height } } function dP(e) { e.state || (e.state = hP()); var t = e.state || hP(); return N(F({}, t), { name: e.name, id: KO(15) }) } var pP = function () { function e() { g(this, e), B(this, "minWidth", 250) } return y(e, [{ key: "add", value: function (e) { var t, n, r, i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; if (e = e || (null == (n = null == (t = YO().config.tools) ? void 0 : t.text) ? void 0 : n.defaultText)) { var o = N(F(F({}, null == (r = YO().config.objectDefaults) ? void 0 : r.text), i), { name: ew.Text, padding: 15, editingBorderColor: cy.fill }), a = new UO.fabric.IText(e, o); GO().add(a), this.autoPositionText(a), XO().objects.select(a) } } }, { key: "autoPositionText", value: function (e) { var t = GO().getWidth(), n = GO().getHeight(), r = Math.min(GO().getWidth(), this.minWidth); e.scaleToWidth(Math.max(t / 3, r)), e.getScaledHeight() > n && e.scaleToHeight(n - e.getScaledHeight() - 20), e.viewportCenter(), GO().getObjects("i-text").forEach((function (t) { if (t !== e && t.intersectsWithObject(e)) { var n = t.top - e.top + t.getScaledHeight(), r = e.top + n; r > YO().original.height - t.getScaledHeight() && (r = 0), e.set("top", r), e.setCoords() } })) } }]), e }(); function vP(e) { return e ? function (e) { return !!e && /^[a-zA-Z][a-zA-Z\d+\-.]*?:/.test(e) }(e) ? e : "".concat(YO().config.baseUrl ? "".concat(YO().config.baseUrl, "/") : "").concat(e) : "" } function gP(e) { var t = e.map(function () { var e = x(b().mark((function e(t) { var n, r; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (!(n = Array.from(document.fonts.values()).find((function (e) { return e.family === t.family })))) { e.next = 3; break } return e.abrupt("return", n.loaded); case 3: return r = new FontFace(t.family, "url(".concat(vP(t.src), ")"), t.descriptors), e.abrupt("return", (document.fonts.add(r), r.load())); case 5: case "end": return e.stop() } }), e) }))); return function (t) { return e.apply(this, arguments) } }()); return Promise.all(t) } var mP = function () { function e() { g(this, e) } var t, n; return y(e, [{ key: "undo", value: (n = x(b().mark((function e() { var t; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (!this.canUndo()) { e.next = 4; break } return t = YO().history.items[YO().history.pointer - 1], e.next = 4, this.load(t); case 4: case "end": return e.stop() } }), e, this) }))), function () { return n.apply(this, arguments) }) }, { key: "redo", value: (t = x(b().mark((function e() { var t; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (!this.canRedo()) { e.next = 4; break } return t = YO().history.items[YO().history.pointer + 1], e.next = 4, this.load(t); case 4: case "end": return e.stop() } }), e, this) }))), function () { return t.apply(this, arguments) }) }, { key: "canUndo", value: function () { return YO().history.canUndo } }, { key: "canRedo", value: function () { return YO().history.canRedo } }, { key: "reload", value: function () { return this.load(YO().history.items[YO().history.pointer]) } }, { key: "replaceCurrent", value: function () { var e = YO().history.items[YO().history.pointer]; S(YO().history.items)[YO().history.pointer] = dP({ name: e.name, state: e }) } }, { key: "addHistoryItem", value: function (e) { var t = dP(e), n = [].concat(S(YO().history.items.slice(0, YO().history.pointer + 1)), [t]); YO().history.update(n.length - 1, n) } }, { key: "load", value: function (e) { return e = N(F({}, e), { editor: e.editor || fP }), new Promise((function (t) { gP(function (e) { var t = []; return e.forEach((function (e) { var n, r, i; if (Qb(e)) { var o = null == (i = null == (r = null == (n = YO().config.tools) ? void 0 : n.text) ? void 0 : r.items) ? void 0 : i.find((function (t) { return t.family === e.fontFamily })); o && t.push(o) } })), t }(e.canvas.objects)).then((function () { GO().loadFromJSON(e.canvas, (function () { XO().zoom.set(1), e.canvasWidth && e.canvasHeight && XO().canvas.resize(e.canvasWidth, e.canvasHeight, { resizeHelper: !1, applyZoom: !1 }), XO().frame.remove(), e.editor.frame && XO().frame.add(e.editor.frame.name, e.editor.frame.sizePercent), XO().objects.syncObjects(), XO().objects.getAll().forEach((function (e) { if (!e.data.pixieInternal && "left" === e.originX && "top" === e.originY) { var t = e.getPointByOrigin("center", "center"); e.set("left", t.x), e.set("top", t.y) } e.set(F({}, WO)), "i-text" === e.type && (e.padding = 15) })), XO().canvas.render(), GO().calcOffset(), XO().zoom.fitToScreen(), YO().history.updatePointerById(e.id), XO().transform.resetStraightenAnchor(), t() })) })) })) } }, { key: "addInitial", value: function (e) { !YO().history.items.find((function (e) { return "initial" === e.name })) && (e || !$O()) && this.addHistoryItem({ name: "initial", state: e }) } }]), e }(), yP = function () { function e() { g(this, e) } var t; return y(e, [{ key: "canMerge", value: function () { return XO().objects.getAll().filter((function (e) { return e.name !== ew.MainImage })).length > 0 } }, { key: "apply", value: (t = x(b().mark((function e() { var t; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (YO().toggleLoading("merge"), t = XO().export.getDataUrl(), e.t0 = t, !e.t0) { e.next = 6; break } return e.next = 6, XO().canvas.addMainImage(t, "merge"); case 6: case "end": return e.stop() } }), e) }))), function () { return t.apply(this, arguments) }) }]), e }(), bP = [{ name: "grayscale" }, { name: "blackWhite", fabricType: "blackwhite" }, { name: "sharpen", uses: "Convolute", matrix: [0, -1, 0, -1, 5, -1, 0, -1, 0] }, { name: "invert" }, { name: "vintage" }, { name: "polaroid" }, { name: "kodachrome" }, { name: "technicolor" }, { name: "brownie" }, { name: "sepia" }, { name: "removeColor", fabricType: "removecolor", options: { distance: { type: "slider", current: .1, min: 0, max: 1, step: .01 }, color: { current: "#fff", type: "colorPicker" } } }, { name: "brightness", options: { brightness: { type: "slider", current: .1, min: -1, max: 1, step: .1 } } }, { name: "gamma", options: { red: { type: "slider", current: .1, min: .2, max: 2.2, step: .003921 }, green: { type: "slider", current: .1, min: .2, max: 2.2, step: .003921 }, blue: { type: "slider", current: .1, min: .2, max: 2.2, step: .003921 } }, apply: function (e) { e.gamma = [e.red, e.green, e.blue] } }, { name: "noise", options: { noise: { type: "slider", current: 40, min: 1, max: 600 } } }, { name: "pixelate", options: { blocksize: { type: "slider", min: 1, max: 40, current: 6 } } }, { name: "blur", uses: "Convolute", matrix: [1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9] }, { name: "emboss", uses: "Convolute", matrix: [1, 1, 1, 1, .7, -1, -1, -1, -1] }, { name: "blendColor", fabricType: "blendcolor", options: { alpha: { type: "slider", current: .5, min: .1, max: 1, step: .1 }, mode: { current: "add", type: "select", available: [{ key: "add" }, { key: "multiply" }, { key: "subtract" }, { key: "diff" }, { key: "screen" }, { key: "lighten" }, { key: "darken" }] }, color: { type: "colorPicker", current: "#FF4081" } } }], wP = { grayscale: { id: "hanSko", defaultMessage: [{ type: 0, value: "grayscale" }] }, blackWhite: { id: "PPBwfo", defaultMessage: [{ type: 0, value: "Black & White" }] }, sharpen: { id: "zigryQ", defaultMessage: [{ type: 0, value: "Sharpen" }] }, invert: { id: "LmfbOm", defaultMessage: [{ type: 0, value: "Invert" }] }, vintage: { id: "I9oSmn", defaultMessage: [{ type: 0, value: "Vintage" }] }, polaroid: { id: "bWw3nL", defaultMessage: [{ type: 0, value: "Polaroid" }] }, kodachrome: { id: "ntXTEb", defaultMessage: [{ type: 0, value: "Kodachrome" }] }, technicolor: { id: "eiirdl", defaultMessage: [{ type: 0, value: "Technicolor" }] }, brownie: { id: "7Vuh3m", defaultMessage: [{ type: 0, value: "Brownie" }] }, sepia: { id: "Ax70Ky", defaultMessage: [{ type: 0, value: "Sepia" }] }, removeColor: { id: "t+ijui", defaultMessage: [{ type: 0, value: "Remove Color" }] }, brightness: { id: "/4ssxy", defaultMessage: [{ type: 0, value: "Brightness" }] }, gamma: { id: "BQrhdi", defaultMessage: [{ type: 0, value: "Gamma" }] }, noise: { id: "N0/0z5", defaultMessage: [{ type: 0, value: "Noise" }] }, pixelate: { id: "thCGjq", defaultMessage: [{ type: 0, value: "Pixelate" }] }, blur: { id: "VXV22v", defaultMessage: [{ type: 0, value: "Blur" }] }, emboss: { id: "+EGmqP", defaultMessage: [{ type: 0, value: "Emboss" }] }, blendColor: { id: "3wuUmC", defaultMessage: [{ type: 0, value: "Blend Color" }] } }, xP = { distance: { id: "b1UO8a", defaultMessage: [{ type: 0, value: "distance" }] }, color: { id: "uHla4C", defaultMessage: [{ type: 0, value: "color" }] }, brightness: { id: "UFDwMY", defaultMessage: [{ type: 0, value: "brightness" }] }, red: { id: "2qELFK", defaultMessage: [{ type: 0, value: "red" }] }, green: { id: "biDOz4", defaultMessage: [{ type: 0, value: "green" }] }, blue: { id: "QOD43s", defaultMessage: [{ type: 0, value: "blue" }] }, noise: { id: "t2y9+Z", defaultMessage: [{ type: 0, value: "noise" }] }, blocksize: { id: "90afbG", defaultMessage: [{ type: 0, value: "blocksize" }] }, mode: { id: "s3GkYx", defaultMessage: [{ type: 0, value: "mode" }] }, alpha: { id: "tyl8L5", defaultMessage: [{ type: 0, value: "alpha" }] } }; function _P(e) { return e && e.charAt(0).toUpperCase() + e.slice(1) } var SP = function () { function e() { var t = this; g(this, e), lw.subscribe((function (e) { return e.history.pointer }), (function () { t.syncState() })) } return y(e, [{ key: "apply", value: function (e) { YO().filter.select(e, this.hasOptions(e)); var t = this.getByName(e); if (this.isApplied(t.name)) this.remove(t.name); else { var n = this.create(t); this.getImages().forEach((function (e) { var t; null == (t = e.filters) || t.push(n), e.applyFilters() })), this.syncState(), XO().canvas.render() } } }, { key: "remove", value: function (e) { var t = this; YO().filter.deselect(e); var n = this.getByName(e); this.getImages().forEach((function (e) { var r, i = t.findFilterIndex(n.name, e.filters); null == (r = e.filters) || r.splice(i, 1), e.applyFilters() })), this.syncState(), XO().canvas.render() } }, { key: "getAll", value: function () { return bP } }, { key: "getByName", value: function (e) { return bP.find((function (t) { return t.name === e })) } }, { key: "isApplied", value: function (e) { var t = XO().canvas.getMainImage(); return !!t && this.findFilterIndex(e, t.filters) > -1 } }, { key: "applyValue", value: function (e, t, n) { var r = this.getByName(e); this.getImages().forEach((function (e) { var i = (e.filters || []).find((function (e) { return e.type.toLowerCase() === r.name.toLowerCase() })); !i || (i[t] = n, r.apply && r.apply(i, t, n), e.applyFilters()) })), XO().canvas.render() } }, { key: "addCustom", value: function (e, t, n, r) { var i = UO.fabric.Image.filters; i[_P(e)] = UO.fabric.util.createClass(i.BaseFilter, t), i[_P(e)].fromObject = i.BaseFilter.fromObject, bP.push({ name: e, options: n, initialConfig: r }) } }, { key: "create", value: function (e) { var t, n = e.initialConfig || {}; return e.uses ? (n.matrix = e.matrix, t = new (UO.fabric.Image.filters[_P(e.uses)])(n)) : (Object.entries(e.options || {}).forEach((function (e) { var t = _(e, 2), r = t[0], i = t[1]; n[r] = i.current })), t = new (UO.fabric.Image.filters[_P(e.name)])(n)), t.name = e.name, t } }, { key: "hasOptions", value: function (e) { return !!this.getByName(e).options } }, { key: "findFilterIndex", value: function (e, t) { var n = this; if (!(null == t ? void 0 : t.length)) return -1; var r = this.getByName(e); return t.findIndex((function (e) { return n.configMatchesFabricFilter(r, e) })) } }, { key: "syncState", value: function () { var e, t = this, n = []; ((null == (e = this.getImages()[0]) ? void 0 : e.filters) || []).forEach((function (e) { var r = t.getByFabricFilter(e); r && n.push(r.name) })), lw.setState({ filter: N(F({}, YO().filter), { applied: n }) }) } }, { key: "getByFabricFilter", value: function (e) { var t = this; return bP.find((function (n) { return t.configMatchesFabricFilter(n, e) })) } }, { key: "configMatchesFabricFilter", value: function (e, t) { var n = t.type.toLowerCase().replace(" ", ""); return n === e.fabricType || n === e.name || "convolute" === n && this.matrixAreEqual(e.matrix, t.matrix) } }, { key: "matrixAreEqual", value: function (e, t) { if (!e || !t || e.length !== t.length) return !1; for (var n = e.length; n--;)if (e[n] !== t[n]) return !1; return !0 } }, { key: "getImages", value: function () { return XO().objects.getAll().filter((function (e) { return e.name === ew.Image || ew.MainImage })) } }]), e }(); function kP(e) { var t, n, r = (null == (n = null == (t = YO().config.tools) ? void 0 : t.resize) ? void 0 : n.minWidth) || 50; return e ? Math.ceil(100 * r / YO().original.width) : r } function CP(e) { var t, n, r = (null == (n = null == (t = YO().config.tools) ? void 0 : t.resize) ? void 0 : n.maxWidth) || 2400; return e ? Math.ceil(100 * r / YO().original.width) : r } function TP(e) { var t, n, r = (null == (n = null == (t = YO().config.tools) ? void 0 : t.resize) ? void 0 : n.minHeight) || 50; return e ? Math.ceil(100 * r / YO().original.height) : r } function EP(e) { var t, n, r = (null == (n = null == (t = YO().config.tools) ? void 0 : t.resize) ? void 0 : n.maxHeight) || 2400; return e ? Math.ceil(100 * r / YO().original.height) : r } function OP(e, t) { if (t) return e; var n = YO().original.height / e; return Math.floor(YO().original.width / n) } function PP(e, t) { if (t) return e; var n = YO().original.width / e; return Math.floor(YO().original.height / n) } var MP = function () { function e() { g(this, e) } return y(e, [{ key: "apply", value: function (e) { var t, n, r = function (e) { return e.width < kP(e.usePercentages) && (e.width = kP(e.usePercentages), e.maintainAspect && (e.height = PP(e.width, e.usePercentages))), e.width > CP(e.usePercentages) && (e.width = CP(e.usePercentages), e.maintainAspect && (e.height = PP(e.width, e.usePercentages))), e.height < TP(e.usePercentages) && (e.height = TP(e.usePercentages), e.maintainAspect && (e.width = OP(e.height, e.usePercentages))), e.height > EP(e.usePercentages) && (e.height = EP(e.usePercentages), e.maintainAspect && (e.width = OP(e.height, e.usePercentages))), e }(e), i = r.width, o = r.height, a = r.usePercentages, s = Math.ceil(YO().original.width), l = Math.ceil(YO().original.height), u = Math.ceil(i), c = Math.ceil(o); a ? (t = i / 100, n = o / 100) : (t = i / YO().original.width, n = o / YO().original.height), (s !== u || l !== c) && this.resize(t, n) } }, { key: "resize", value: function (e, t) { XO().zoom.set(1, !1); var n = Math.round(YO().original.height * t), r = Math.round(YO().original.width * e); XO().canvas.resize(r, n, { applyZoom: !1, resizeHelper: !0 }), XO().objects.getAll().forEach((function (n) { var r = n.scaleX || 1, i = n.scaleY || 1, o = n.left || 0, a = n.top || 0, s = r * e, l = i * t, u = o * e, c = a * t; n.scaleX = s, n.scaleY = l, n.left = u, n.top = c, n.setCoords() })), XO().zoom.fitToScreen(), GO().requestRenderAll() } }]), e }(); function AP(e, t, n) { var r = t, i = n; return e && (n * e > t ? i = t / e : r = n * e), { width: Math.floor(r), height: Math.floor(i) } } function DP(e) { if (!e) return null; var t = e.split(":"); return parseInt(t[0], 10) / parseInt(t[1], 10) } var LP = function () { function e() { g(this, e), B(this, "refs", null), B(this, "zone") } return y(e, [{ key: "apply", value: function (e) { var t, n = null == (t = XO().frame.active.config) ? void 0 : t.name, r = XO().frame.active.currentSizeInPercent; return XO().frame.active.hide(), XO().merge.apply().then((function () { XO().canvas.resize(Math.round(e.width), Math.round(e.height), { applyZoom: !0, resizeHelper: !0 }); var t = XO().canvas.getMainImage(); t.cropX = Math.round(e.left), t.cropY = Math.round(e.top), t.width = Math.round(e.width), t.height = Math.round(e.height), t.viewportCenter(), n && XO().frame.add(n, r), XO().zoom.fitToScreen(), XO().canvas.render() })) } }, { key: "drawZone", value: function (e) { var t; (null == (t = this.refs) ? void 0 : t.current) && (YO().crop.setCropzoneRect(e), function (e, t) { null !== t.innerZone && (function (e, t) { t.innerZone.style.width = "".concat(e.width, "px"), t.innerZone.style.height = "".concat(e.height, "px"), t.innerZone.style.transform = "translate(".concat(e.left, "px, ").concat(e.top, "px)") }(e, t), function (e, t) { var n = YO().canvasSize.width, r = YO().canvasSize.height; t.maskTop.style.height = "".concat(e.top, "px"), t.maskTop.style.width = "".concat(n, "px"), t.maskLeft.style.top = "".concat(e.top, "px"), t.maskLeft.style.height = "".concat(e.height, "px"), t.maskLeft.style.width = "".concat(e.left, "px"); var i = e.left + e.width; t.maskRight.style.left = "".concat(i, "px"), t.maskRight.style.top = "".concat(e.top, "px"), t.maskRight.style.height = "".concat(e.height, "px"), t.maskRight.style.width = "".concat(n - i, "px"), t.maskBottom.style.height = "".concat(r - (e.top + e.height), "px"), t.maskBottom.style.width = "".concat(n, "px") }(e, t), function (e, t) { var n = (e.width - 2) / 3; t.lineVer1.style.height = "".concat(e.height, "px"), t.lineVer1.style.transform = "translate(".concat(n, "px, 0)"), t.lineVer2.style.height = "".concat(e.height, "px"), t.lineVer2.style.transform = "translate(".concat(2 * n, "px, 0)"); var r = (e.height - 2) / 3; t.lineHor1.style.width = "".concat(e.width, "px"), t.lineHor1.style.transform = "translate(0, ".concat(r, "px)"), t.lineHor2.style.width = "".concat(e.width, "px"), t.lineHor2.style.transform = "translate(0, ".concat(2 * r, "px)") }(e, t)) }(e, this.refs.current)) } }, { key: "resetCropzone", value: function (e) { var t, n = YO().canvasSize, r = DP(e); if (n) { null == (t = this.zone) || t.setConfig({ aspectRatio: r, boundaryRect: n }), YO().crop.setAspectRatio(e); var i = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, n = { width: e.width, height: e.height, top: 0, left: 0, angle: 0 }; if (t) { var r = AP(t, n.width, n.height); n.width = r.width, n.height = r.height } return n.left = (e.width - n.width) / 2, n.top = (e.height - n.height) / 2, n }(n, r); this.drawZone(i) } } }, { key: "registerRefs", value: function (e) { this.refs = e } }]), e }(), RP = function () { function e() { g(this, e) } return y(e, [{ key: "getShapeByName", value: function (e) { var t, n, r = null == (n = null == (t = YO().config.tools) ? void 0 : t.shapes) ? void 0 : n.items; return (null == r ? void 0 : r.find((function (t) { return t.name === e }))) || null } }, { key: "addBasicShape", value: function (e) { var t, n = this.getShapeByName(e); if (!n) return null; var r, i = (null == (t = YO().config.objectDefaults) ? void 0 : t.shape) || {}, o = i.width, a = i.height, s = z(i, ["width", "height"]), l = F(F({}, s), n.options); if ("circle" === n.name) r = new UO.fabric.Circle(N(F({}, l), { radius: 100 })); else if ("ellipse" === n.name) r = new UO.fabric.Ellipse(N(F({}, l), { rx: 100, ry: 50 })); else if ("Path" === n.type) r = new UO.fabric.Path(l.path, F({ displayName: n.name }, l)); else { var u = n.type; r = new UO.fabric[u](N(F({}, l), { width: 150, height: 150 })) } return this.addAndPositionShape(r, ew.Shape, { width: o, height: a }), r } }, { key: "addSticker", value: function (e, t) { var n, r, i, o = null == (i = null == (r = null == (n = YO().config.tools) ? void 0 : n.stickers) ? void 0 : r.items) ? void 0 : i.find((function (t) { return t.name === e })); if (!o) return Promise.resolve(); if ("svg" === o.type) { var a = IP(o, t); return this.addSvgSticker(a) } return this.addRegularSticker(o, t) } }, { key: "addRegularSticker", value: function (e, t) { var n = this; return new Promise((function (r) { UO.fabric.util.loadImage(IP(e, t), (function (e) { var t, i = (null == (t = YO().config.objectDefaults) ? void 0 : t.sticker) || {}, o = i.width, a = i.height, s = z(i, ["width", "height"]), l = new UO.fabric.Image(e, s); n.addAndPositionShape(l, ew.Sticker, { width: o, height: a }), r() })) })) } }, { key: "addSvgSticker", value: function (e) { var t = this, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : ew.Sticker; return new Promise((function (r) { UO.fabric.loadSVGFromURL(e, (function (e, i) { var o, a = (null == (o = YO().config.objectDefaults) ? void 0 : o.sticker) || {}, s = a.width, l = a.height, u = z(a, ["width", "height"]), c = UO.fabric.util.groupSVGElements(e, i); c.set(u), t.addAndPositionShape(c, n, { width: s, height: l }), r() })) })) } }, { key: "addAndPositionShape", value: function (e, t, n) { var r = n.width; e.name = t, e.scaleX = 1, e.scaleY = 1, GO().add(e); var i = r || YO().original.width * YO().zoom / 4; e.scaleToWidth(Math.min(150, i)), e.viewportCenter(), e.setCoords(), XO().canvas.render(), GO().setActiveObject(e) } }]), e }(); function IP(e, t) { return vP("images/stickers/".concat(e.name, "/").concat(t, ".").concat(e.type)) } var jP = function () { function e(t) { g(this, e), B(this, "patternCache", []), this.activeFrame = t } return y(e, [{ key: "fillParts", value: function (e) { var t = this; this.patternCache.forEach((function (n) { t.fillPartWithPattern(n, e) })) } }, { key: "fillPartWithPattern", value: function (e, t) { if (this.activeFrame.parts) { e.canvas = new UO.fabric.StaticCanvas(null), e.canvas.add(e.img); var n = new UO.fabric.Pattern({ source: e.canvas.getElement(), repeat: "repeat" === t ? "repeat" : "no-repeat" }); this.activeFrame.parts[e.name] && this.activeFrame.parts[e.name].set("fill", n) } } }, { key: "scale", value: function (e) { var t = this; if (this.activeFrame.config && this.patternCache) { var n = this.activeFrame.config.mode; e /= GO().getRetinaScaling(), this.patternCache.forEach((function (r) { !t.activeFrame.parts || ("top" === r.name || "bottom" === r.name ? "stretch" === n ? (t.scalePatternToWidth(r.img, t.activeFrame.parts.top.getScaledWidth()), t.scalePatternToHeight(r.img, e)) : r.img.scaleToHeight(e) : "left" === r.name || "right" === r.name ? "stretch" === n ? (t.scalePatternToWidth(r.img, e), t.scalePatternToHeight(r.img, t.activeFrame.parts.left.getScaledHeight())) : r.img.scaleToWidth(e) : "stretch" === n ? (t.scalePatternToWidth(r.img, e), t.scalePatternToHeight(r.img, e)) : r.img.scaleToWidth(e), r.canvas.setDimensions({ width: r.img.getScaledWidth(), height: r.img.getScaledHeight() })) })), XO().canvas.render() } } }, { key: "scalePatternToWidth", value: function (e, t) { if (e.width) { var n = e.getBoundingRect().width / e.getScaledWidth(); e.set("scaleX", t / e.width / n), e.setCoords() } } }, { key: "scalePatternToHeight", value: function (e, t) { if (e.height) { var n = e.getBoundingRect().height / e.getScaledHeight(); e.set("scaleY", t / e.height / n), e.setCoords() } } }, { key: "load", value: function (e) { var t = this, n = this.activeFrame.getPartNames().map((function (n) { return new Promise((function (r) { var i = N(F({}, JO), { originX: "left", originY: "top" }); YO().config.crossOrigin && (i.crossOrigin = "anonymous"), UO.fabric.Image.fromURL(t.getPartUrl(e, n), (function (e) { r({ name: n, img: e }) }), i) })) })); return Promise.all(n).then((function (n) { t.patternCache = n, t.fillParts(e.mode) })) } }, { key: "getPartUrl", value: function (e, t) { return vP("images/frames/".concat(e.name, "/").concat(t, ".png")) } }]), e }(), FP = function () { function e(t, n) { g(this, e), this.activeFrame = t, this.patterns = n } return y(e, [{ key: "defaultColor", get: function () { var e, t; return null == (t = null == (e = YO().config.objectDefaults) ? void 0 : e.global) ? void 0 : t.fill } }, { key: "build", value: function (e, t) { var n = this; this.createParts(e), this.resize(t), this.activeFrame.config = e, "basic" !== e.mode ? this.patterns.load(e).then((function () { n.patterns.scale(t), XO().canvas.render() })) : XO().canvas.render() } }, { key: "createParts", value: function (e) { var t = this, n = {}; this.activeFrame.getPartNames().forEach((function (r) { var i = "basic" === e.mode ? t.defaultColor : void 0; n[r] = new UO.fabric.Rect(N(F({}, JO), { fill: i, originX: "left", originY: "top", name: "frame.rect.".concat(r), objectCaching: !1, data: { pixieInternal: !0 } })), GO().add(n[r]) })), this.activeFrame.parts = n } }, { key: "resize", value: function (e) { var t = YO().original.width, n = YO().original.height, r = this.activeFrame, i = e; !r.parts || (r.parts.topLeft.set({ width: i, height: i }), r.parts.topRight.set({ left: t - r.parts.topLeft.getScaledWidth(), width: i, height: i }), r.parts.top.set({ left: r.parts.topLeft.getScaledWidth() - 1, width: t - r.parts.topLeft.getScaledWidth() - r.parts.topRight.getScaledWidth() + 3, height: i }), r.parts.bottomLeft.set({ top: n - r.parts.topLeft.getScaledHeight(), width: i, height: i }), r.parts.left.set({ top: r.parts.topLeft.getScaledHeight() - 1, width: i, height: n - r.parts.topLeft.getScaledHeight() - r.parts.bottomLeft.getScaledHeight() + 3 }), r.parts.bottomRight.set({ left: t - r.parts.bottomLeft.getScaledWidth(), top: n - r.parts.topRight.getScaledWidth(), width: i, height: i }), r.parts.bottom.set({ left: r.parts.top.left, top: n - r.parts.top.getScaledHeight(), width: r.parts.top.getScaledWidth(), height: i }), r.parts.right.set({ left: t - r.parts.left.getScaledWidth(), top: r.parts.left.top, width: r.parts.left.width, height: r.parts.left.getScaledHeight() })) } }]), e }(), NP = function () { function e() { g(this, e), B(this, "corners", ["topLeft", "topRight", "bottomLeft", "bottomRight"]), B(this, "sides", ["top", "right", "bottom", "left"]), B(this, "parts", null), B(this, "config", null), B(this, "currentSizeInPercent", 100) } return y(e, [{ key: "getPartNames", value: function () { return [].concat(S(this.corners), S(this.sides)) } }, { key: "hide", value: function () { !this.parts || (Object.values(this.parts).forEach((function (e) { return e.set({ visible: !1 }) })), XO().canvas.render()) } }, { key: "show", value: function () { !this.parts || (Object.values(this.parts).forEach((function (e) { return e.set({ visible: !0 }) })), XO().canvas.render()) } }, { key: "remove", value: function () { !this.parts || (this.config = null, Object.values(this.parts).forEach((function (e) { GO().remove(e) })), this.parts = null, XO().canvas.render()) } }, { key: "is", value: function (e) { return !!this.config && this.config.name === e.name } }, { key: "changeColor", value: function (e) { var t; "basic" !== (null == (t = this.config) ? void 0 : t.mode) || !this.parts || (Object.values(this.parts).forEach((function (t) { t.set("fill", e) })), XO().canvas.render()) } }, { key: "getMinSize", value: function () { var e, t; return null != (t = null == (e = this.config) ? void 0 : e.size.min) ? t : 1 } }, { key: "getMaxSize", value: function () { var e, t; return null != (t = null == (e = this.config) ? void 0 : e.size.max) ? t : 35 } }]), e }(), zP = function () { function e() { var t = this; g(this, e), B(this, "patterns"), B(this, "builder"), B(this, "active"), this.active = new NP, this.patterns = new jP(this.active), this.builder = new FP(this.active, this.patterns), GO().on("object:added", (function () { Object.values(t.active.parts || []).forEach((function (e) { return e.moveTo(98) })) })) } return y(e, [{ key: "add", value: function (e, t) { var n = this.getByName(e); if (n && !this.active.is(n)) { this.active.remove(), this.active.currentSizeInPercent = null != t ? t : n.size.default; var r = this.calcFrameSizeInPixels(this.active.currentSizeInPercent); this.builder.build(n, r), YO().frame.select(n) } } }, { key: "resize", value: function (e) { if (this.active.parts && this.active.config) { e ? this.active.currentSizeInPercent = e : e = this.active.currentSizeInPercent; var t = this.calcFrameSizeInPixels(e); this.builder.resize(t), this.patterns.scale(t), XO().canvas.render() } } }, { key: "changeColor", value: function (e) { this.active.changeColor(e) } }, { key: "remove", value: function () { this.active.remove(), YO().frame.deselect() } }, { key: "getByName", value: function (e) { var t, n, r = null == (n = null == (t = YO().config.tools) ? void 0 : t.frame) ? void 0 : n.items; if (r) return r.find((function (t) { return t.name === e })) } }, { key: "getActiveFrameConfig", value: function () { return this.active.config } }, { key: "calcFrameSizeInPixels", value: function (e) { var t = Math.min(YO().original.width, YO().original.height); return Math.ceil(e / 100 * t) } }]), e }(), BP = function (e) { var t = new UO.fabric.PatternBrush(e); return t.getPatternSrc = function () { var e = UO.fabric.document.createElement("canvas"); e.width = 10, e.height = 10; var t = e.getContext("2d"); return t.strokeStyle = this.color, t.lineWidth = 5, t.beginPath(), t.moveTo(0, 5), t.lineTo(10, 5), t.closePath(), t.stroke(), e }, t }, VP = function (e) { var t = new UO.fabric.PatternBrush(e); return t.getPatternSrc = function () { var e = document.createElement("canvas"); e.width = 10, e.height = 10; var t = e.getContext("2d"); return t.strokeStyle = this.color, t.lineWidth = 5, t.beginPath(), t.moveTo(5, 0), t.lineTo(5, 10), t.closePath(), t.stroke(), e }, t }, UP = function (e) { var t = new UO.fabric.PatternBrush(e); return t.getPatternSrc = function () { var e = this.width / 2, t = document.createElement("canvas"), n = new UO.fabric.Rect({ width: e, height: e, angle: 45, fill: this.color }), r = n.getBoundingRect().width; t.width = r + 5, t.height = r + 5, n.set({ left: r / 2, top: r / 2 }); var i = t.getContext("2d"); return n.render(i), t }, t }, HP = function (e) { var t = new UO.fabric.PatternBrush(e); return t.getPatternSrc = function () { var e = document.createElement("canvas"); e.width = 12, e.height = 12; var t = e.getContext("2d"); return t.fillStyle = this.color, t.fillRect(0, 0, 10, 10), e }, t }, WP = function () { function e() { g(this, e), B(this, "customBrushes", { VLineBrush: BP, HLineBrush: VP, DiamondBrush: UP, SquareBrush: HP }), B(this, "currentBrush", { type: "PencilBrush", color: null == (a = null == (i = YO().config.objectDefaults) ? void 0 : i.global) ? void 0 : a.fill, width: fy[1] }), B(this, "onPathCreated", (function (e) { e.path.name = ew.Drawing, e.path.set(function () { var e = F({}, JO); return delete e.strokeWidth, e }()), YO().setDirty(!0) })) } return y(e, [{ key: "enable", value: function () { GO().on("path:created", this.onPathCreated), GO().isDrawingMode = !0, this.setBrushType(this.currentBrush.type), this.setBrushSize(this.currentBrush.width) } }, { key: "disable", value: function () { GO().off("path:created", this.onPathCreated), GO().isDrawingMode = !1 } }, { key: "getBrushType", value: function () { return this.currentBrush.type } }, { key: "setBrushType", value: function (e) { this.currentBrush.type = e, GO().freeDrawingBrush = e in UO.fabric ? new UO.fabric[e](GO()) : this.customBrushes[e](GO()), this.applyBrushStyles() } }, { key: "applyBrushStyles", value: function () { var e = this; Object.keys(this.currentBrush).forEach((function (t) { GO().freeDrawingBrush[t] = e.currentBrush[t] })); var t = GO().freeDrawingBrush; t.getPatternSrc && (t.source = t.getPatternSrc.call(t)) } }, { key: "setBrushSize", value: function (e) { this.currentBrush.width = e, this.applyBrushStyles() } }, { key: "getBrushSize", value: function () { return this.currentBrush.width } }, { key: "setBrushColor", value: function (e) { this.currentBrush.color = e, this.applyBrushStyles() } }, { key: "getBrushColor", value: function () { return this.currentBrush.color } }]), e }(); function KP(e) { var t; return null == (t = /(?:\.([^.]+))?$/.exec(e)) ? void 0 : t[1] } var YP = function () { function e(t, n) { g(this, e), B(this, "name"), B(this, "relativePath"), B(this, "size"), B(this, "mime"), B(this, "extension"), B(this, "native"), B(this, "lastModified"), B(this, "url", null), B(this, "cachedData"), this.name = t.name, this.size = t.size, this.mime = function (e) { var t = { md: "text/markdown", markdown: "text/markdown", mp4: "video/mp4", mp3: "audio/mp3", svg: "image/svg+xml", jpg: "image/jpeg", png: "image/png", gif: "image/gif", yaml: "text/yaml", yml: "text/yaml" }, n = e.name ? KP(e.name) : null; return e.type ? e.type : n && n in t ? t[n] : null }(t), this.lastModified = t.lastModified, this.extension = KP(t.name), this.native = t, (n = n || t.webkitRelativePath || null) && n.match(/\//g).length > 1 && (this.relativePath = n) } return y(e, [{ key: "data", get: function () { var e = this; return new Promise((function (t) { e.cachedData && t(e.cachedData); var n = new FileReader; n.addEventListener("load", (function () { e.cachedData = n.result, t(e.cachedData) })), "json" === e.extension ? n.readAsText(e.native) : n.readAsDataURL(e.native) })) } }]), e }(); function XP() { var e, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = document.querySelector("#hidden-file-upload-input"); n && n.remove(); var r = document.createElement("input"); return r.type = "file", r.multiple = null != (e = t.multiple) && e, r.classList.add("hidden"), r.style.display = "none", r.style.visibility = "hidden", r.id = "hidden-file-upload-input", r.accept = GP(t), t.directory && (r.webkitdirectory = !0), document.body.appendChild(r), r } function GP(e) { var t = e.extensions, n = void 0 === t ? [] : t, r = e.types, i = void 0 === r ? [] : r, o = []; return n && (n = n.map((function (e) { return e.startsWith(".") ? e : ".".concat(e) })), o.push(n.join(","))), i && o.push(i.join(",")), o.join(",") } function qP() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; return new Promise((function (t) { var n = XP(e); n.onchange = function (e) { var r = e.target.files; if (!r) return t([]); var i = Array.from(r).map((function (e) { return new YP(e) })); t(i), n.remove() }, document.body.appendChild(n), n.click() })) } var JP = { data: "" }, ZP = function (e) { return "object" == ("undefined" == typeof window ? "undefined" : C(window)) ? ((e ? e.querySelector("#_goober") : window._goober) || Object.assign((e || document.head).appendChild(document.createElement("style")), { innerHTML: " ", id: "_goober" })).firstChild : e || JP }, $P = /(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g, QP = /\/\*[^]*?\*\/|\s\s+|\n/g, eM = function e(t, n) { var r = "", i = "", o = "", a = function (a) { var l = t[a]; "@" == a[0] ? "i" == a[1] ? r = a + " " + l + ";" : i += "f" == a[1] ? e(l, a) : a + "{" + e(l, "k" == a[1] ? "" : n) + "}" : "object" == C(l) ? i += e(l, n ? n.replace(/([^,])+/g, (function (e) { return a.replace(/(^:.*)|([^,])+/g, (function (t) { return /&/.test(t) ? t.replace(/&/g, e) : e ? e + " " + t : t })) })) : a) : null != l && (a = /^--/.test(a) ? a : a.replace(/[A-Z]/g, "-$&").toLowerCase(), o += e.p ? e.p(a, l) : a + ":" + l + ";"), s = a }; for (var s in t) a(s); return r + (n && o ? n + "{" + o + "}" : o) + i }, tM = {}, nM = function e(t) { if ("object" == C(t)) { var n = ""; for (var r in t) n += r + e(t[r]); return n } return t }, rM = function (e, t, n, r, i) { var o = nM(e), a = tM[o] || (tM[o] = function (e) { for (var t = 0, n = 11; t < e.length;)n = 101 * n + e.charCodeAt(t++) >>> 0; return "go" + n }(o)); if (!tM[a]) { var s = o !== e ? e : function (e) { for (var t, n = [{}]; t = $P.exec(e.replace(QP, ""));)t[4] ? n.shift() : t[3] ? n.unshift(n[0][t[3]] = n[0][t[3]] || {}) : n[0][t[1]] = t[2]; return n[0] }(e); tM[a] = eM(i ? k({}, "@keyframes " + a, s) : s, n ? "" : "." + a) } return function (e, t, n) { -1 == t.data.indexOf(e) && (t.data = n ? e + t.data : t.data + e) }(tM[a], t, r), a }, iM = function (e, t, n) { return e.reduce((function (e, r, i) { var o = t[i]; if (o && o.call) { var a = o(n), s = a && a.props && a.props.className || /^go/.test(a) && a; o = s ? "." + s : a && "object" == C(a) ? a.props ? "" : eM(a, "") : !1 === a ? "" : a } return e + r + (null == o ? "" : o) }), "") }; function oM(e) { var t = this || {}, n = e.call ? e(t.p) : e; return rM(n.unshift ? n.raw ? iM(n, [].slice.call(arguments, 1), t.p) : n.reduce((function (e, n) { return Object.assign(e, n && n.call ? n(t.p) : n) }), {}) : n, ZP(t.target), t.g, t.o, t.k) } function aM() { return aM = Object.assign || function (e) { for (var t = 1; t < arguments.length; t++) { var n = arguments[t]; for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]) } return e }, aM.apply(this, arguments) } oM.bind({ g: 1 }), oM.bind({ k: 1 }); var sM, lM = function (e, t) { return function (e) { return "function" == typeof e }(e) ? e(t) : e }, uM = function () { var e = 0; return function () { return (++e).toString() } }(); !function (e) { e[e.ADD_TOAST = 0] = "ADD_TOAST", e[e.UPDATE_TOAST = 1] = "UPDATE_TOAST", e[e.UPSERT_TOAST = 2] = "UPSERT_TOAST", e[e.DISMISS_TOAST = 3] = "DISMISS_TOAST", e[e.REMOVE_TOAST = 4] = "REMOVE_TOAST", e[e.START_PAUSE = 5] = "START_PAUSE", e[e.END_PAUSE = 6] = "END_PAUSE" }(sM || (sM = {})); var cM = new Map, fM = function (e) { if (!cM.has(e)) { var t = setTimeout((function () { cM.delete(e), vM({ type: sM.REMOVE_TOAST, toastId: e }) }), 1e3); cM.set(e, t) } }, hM = function e(t, n) { switch (n.type) { case sM.ADD_TOAST: return aM({}, t, { toasts: [n.toast].concat(t.toasts).slice(0, 20) }); case sM.UPDATE_TOAST: return n.toast.id && function (e) { var t = cM.get(e); t && clearTimeout(t) }(n.toast.id), aM({}, t, { toasts: t.toasts.map((function (e) { return e.id === n.toast.id ? aM({}, e, n.toast) : e })) }); case sM.UPSERT_TOAST: var r = n.toast; return t.toasts.find((function (e) { return e.id === r.id })) ? e(t, { type: sM.UPDATE_TOAST, toast: r }) : e(t, { type: sM.ADD_TOAST, toast: r }); case sM.DISMISS_TOAST: var i = n.toastId; return i ? fM(i) : t.toasts.forEach((function (e) { fM(e.id) })), aM({}, t, { toasts: t.toasts.map((function (e) { return e.id === i || void 0 === i ? aM({}, e, { visible: !1 }) : e })) }); case sM.REMOVE_TOAST: return void 0 === n.toastId ? aM({}, t, { toasts: [] }) : aM({}, t, { toasts: t.toasts.filter((function (e) { return e.id !== n.toastId })) }); case sM.START_PAUSE: return aM({}, t, { pausedAt: n.time }); case sM.END_PAUSE: var o = n.time - (t.pausedAt || 0); return aM({}, t, { pausedAt: void 0, toasts: t.toasts.map((function (e) { return aM({}, e, { pauseDuration: e.pauseDuration + o }) })) }) } }, dM = [], pM = { toasts: [], pausedAt: void 0 }, vM = function (e) { pM = hM(pM, e), dM.forEach((function (e) { e(pM) })) }, gM = { blank: 4e3, error: 4e3, success: 2e3, loading: 1 / 0, custom: 4e3 }, mM = function (e) { return function (t, n) { var r = function (e, t, n) { return void 0 === t && (t = "blank"), aM({ createdAt: Date.now(), visible: !0, type: t, ariaProps: { role: "status", "aria-live": "polite" }, message: e, pauseDuration: 0 }, n, { id: (null == n ? void 0 : n.id) || uM() }) }(t, e, n); return vM({ type: sM.UPSERT_TOAST, toast: r }), r.id } }, yM = function (e, t) { return mM("blank")(e, t) }; yM.error = mM("error"), yM.success = mM("success"), yM.loading = mM("loading"), yM.custom = mM("custom"), yM.dismiss = function (e) { vM({ type: sM.DISMISS_TOAST, toastId: e }) }, yM.remove = function (e) { return vM({ type: sM.REMOVE_TOAST, toastId: e }) }, yM.promise = function (e, t, n) { var r = yM.loading(t.loading, aM({}, n, null == n ? void 0 : n.loading)); return e.then((function (e) { return yM.success(lM(t.success, e), aM({ id: r }, n, null == n ? void 0 : n.success)), e })).catch((function (e) { yM.error(lM(t.error, e), aM({ id: r }, n, null == n ? void 0 : n.error)) })), e }; function bM(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, n = t.type; return "error" === n ? yM.error(e) : yM(e) } eM.p = void 0; var wM = function () { function e() { g(this, e), B(this, "validations", []), B(this, "showToast", !1) } return y(e, [{ key: "validate", value: function (e) { this.validations.length || this.initValidations(); var t = this.validations.find((function (t) { return t.fails(e) })); return t && this.showToast && t.errorMessage && bM(t.errorMessage, { type: "error" }), { failed: !!t, errorMessage: t ? t.errorMessage : null } } }]), e }(), xM = function () { function e() { g(this, e), B(this, "errorMessage") } return y(e, [{ key: "passes", value: function (e) { return !this.fails(e) } }]), e }(); function _M(e) { var t = e < 0, n = ["B", "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB"]; if (t && (e = -e), e < 1) return "".concat((t ? "-" : "") + e, " B"); var r = Math.min(Math.floor(Math.log(e) / Math.log(1024)), n.length - 1); e = Number(e / Math.pow(1024, r)); var i = n[r]; return e >= 10 || e % 1 == 0 ? "".concat((t ? "-" : "") + e.toFixed(0), " ").concat(i) : "".concat((t ? "-" : "") + e.toFixed(1), " ").concat(i) } var SM = function (e) { u(n, e); var t = f(n); function n(e) { var r; return g(this, n), (r = t.call(this)).params = e, r.errorMessage = { id: "+vMr4s", defaultMessage: [{ type: 0, value: "Maximum file size is " }, { type: 1, value: "number" }], values: { number: _M(+r.params.maxSize) } }, r } return y(n, [{ key: "fails", value: function (e) { return this.params.maxSize < e.size } }]), n }(xM), kM = function (e) { u(n, e); var t = f(n); function n(e) { var r; return g(this, n), (r = t.call(this)).params = e, r.errorMessage = { id: "4pGuOJ", defaultMessage: [{ type: 0, value: "Only these file types are allowed: " }, { type: 1, value: "extensions" }], values: { extensions: r.params.extensions.join(", ") } }, r } return y(n, [{ key: "fails", value: function (e) { return !this.params.extensions.some((function (t) { var n; return t.toLowerCase() === (null == (n = e.extension) ? void 0 : n.toLowerCase()) })) } }]), n }(xM), CM = function (e) { u(n, e); var t = f(n); function n() { var e; return g(this, n), e = t.apply(this, arguments), B(d(e), "DEFAULT_MAX_FILE_SIZE_MB", 10), B(d(e), "showToast", !0), e } return y(n, [{ key: "initValidations", value: function () { this.validations.push(new SM({ maxSize: this.getMaxFileSize() })); var e = this.getAllowedExtensions(); e && e.length && this.validations.push(new kM({ extensions: e })) } }, { key: "getMaxFileSize", value: function () { var e, t, n; return null != (n = null == (t = null == (e = YO().config.tools) ? void 0 : e.import) ? void 0 : t.maxFileSize) ? n : function (e, t) { return null == e ? 0 : e * Math.pow(1024, 2) }(this.DEFAULT_MAX_FILE_SIZE_MB) } }, { key: "getAllowedExtensions", value: function () { var e, t, n; return [].concat(S(null != (n = null == (t = null == (e = YO().config.tools) ? void 0 : e.import) ? void 0 : t.validImgExtensions) ? n : []), ["json"]) } }]), n }(wM); function TM(e) { return EM.apply(this, arguments) } function EM() { return EM = x(b().mark((function e(t) { var n, r, i = arguments; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return n = !(i.length > 1 && void 0 !== i[1]) || i[1], e.next = 3, ZO(t); case 3: if (!(r = e.sent)) { e.next = 6; break } return e.abrupt("return", new Promise((function (e) { r.name = ew.Image, r.opacity = 0; var t = YO().original.width, i = YO().original.height; if (n && (r.width >= t || r.height >= i)) { var o = t - .1 * t, a = i - .1 * i, s = 1 / Math.min(a / r.getScaledHeight(), o / r.getScaledWidth()); r.scaleX *= 1 / s, r.scaleY *= 1 / s } YO().fabric.add(r), YO().fabric.setActiveObject(r), r.viewportCenter(), r.setCoords(), YO().fabric.requestRenderAll(), XO().zoom.fitToScreen(), r.animate("opacity", "1", { duration: 425, onChange: function () { YO().fabric.requestRenderAll() }, onComplete: function () { e(r) } }) }))); case 6: case "end": return e.stop() } }), e) }))), EM.apply(this, arguments) } function OM(e) { return XO().canvas.clear(), XO().frame.remove(), YO().setConfig(F({ image: void 0, blankCanvasSize: void 0 }, e)), YO().reset(), new Promise((function (e) { return setTimeout(e) })) } var PM = function (e) { return e.image = "image/*", e.audio = "audio/*", e.json = "application/json", e.video = "video/mp4,video/mpeg,video/x-m4v,video/*", e }(PM || {}), MM = function () { function e() { g(this, e), B(this, "validator", new CM) } var t, n, r, i, o, a, s; return y(e, [{ key: "uploadAndAddImage", value: (s = x(b().mark((function e() { var t; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, this.openUploadWindow(); case 2: return t = e.sent, e.next = 5, this.openUploadedFile(t); case 5: case "end": return e.stop() } }), e, this) }))), function () { return s.apply(this, arguments) }) }, { key: "uploadAndReplaceMainImage", value: (a = x(b().mark((function e() { var t; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, this.openUploadWindow(); case 2: if (t = e.sent, e.t0 = t, !e.t0) { e.next = 7; break } return e.next = 7, this.openBackgroundImage(t); case 7: case "end": return e.stop() } }), e, this) }))), function () { return a.apply(this, arguments) }) }, { key: "uploadAndOpenStateFile", value: (o = x(b().mark((function e() { var t; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, this.openUploadWindow(DM); case 2: if (t = e.sent, e.t0 = t, !e.t0) { e.next = 11; break } return e.t1 = this, e.next = 8, t.data; case 8: return e.t2 = e.sent, e.next = 11, e.t1.loadState.call(e.t1, e.t2); case 11: case "end": return e.stop() } }), e, this) }))), function () { return o.apply(this, arguments) }) }, { key: "openUploadedFile", value: (i = x(b().mark((function e(t) { var n, r, i, o; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (t) { e.next = 2; break } return e.abrupt("return"); case 2: return e.next = 4, t.data; case 4: o = e.sent, e.t0 = t.extension, e.next = "json" === e.t0 ? 8 : "svg" === e.t0 ? 11 : 15; break; case 8: return e.next = 10, this.loadState(o); case 10: return e.abrupt("break", 18); case 11: return e.next = 13, XO().shape.addSvgSticker(o, ew.Image); case 13: return XO().history.addHistoryItem({ name: "overlayImage" }), e.abrupt("break", 18); case 15: return e.next = 17, TM(o, null == (i = null == (r = null == (n = YO().config.tools) ? void 0 : n.import) ? void 0 : r.fitOverlayToScreen) || i); case 17: XO().history.addHistoryItem({ name: "overlayImage" }); case 18: case "end": return e.stop() } }), e, this) }))), function (e) { return i.apply(this, arguments) }) }, { key: "loadState", value: (r = x(b().mark((function e(t) { var n; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return YO().toggleLoading("state"), e.next = 3, OM(); case 3: if ("string" != typeof t) { e.next = 13; break } if (!t.endsWith(".json")) { e.next = 10; break } return e.next = 7, QO(t); case 7: n = e.sent, e.next = 11; break; case 10: n = JSON.parse(t); case 11: e.next = 14; break; case 13: n = t; case 14: return e.next = 16, XO().history.addInitial(n); case 16: return e.next = 18, XO().history.reload(); case 18: YO().toggleLoading(!1); case 19: case "end": return e.stop() } }), e) }))), function (e) { return r.apply(this, arguments) }) }, { key: "openUploadWindow", value: (n = x(b().mark((function e(t) { var n, r, i; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return t = t || AM(), e.next = 3, qP(t); case 3: return i = e.sent[0], e.abrupt("return", this.fileIsValid(i) ? (null == (r = (n = YO().config).onFileOpen) || r.call(n, i), i) : null); case 5: case "end": return e.stop() } }), e, this) }))), function (e) { return n.apply(this, arguments) }) }, { key: "openBackgroundImage", value: (t = x(b().mark((function e(t) { var n, r; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, OM(); case 2: if (!(t instanceof HTMLImageElement)) { e.next = 6; break } n = t.src, e.next = 13; break; case 6: if (!(t instanceof YP)) { e.next = 12; break } return e.next = 9, t.data; case 9: n = e.sent, e.next = 13; break; case 12: n = t; case 13: return e.next = 15, XO().canvas.addMainImage(n); case 15: return r = e.sent, e.next = 18, XO().history.addInitial(); case 18: return e.abrupt("return", r); case 19: case "end": return e.stop() } }), e) }))), function (e) { return t.apply(this, arguments) }) }, { key: "fileIsValid", value: function (e) { return !this.validator.validate(e).failed } }]), e }(); function AM() { var e, t, n = null == (t = null == (e = YO().config.tools) ? void 0 : e.import) ? void 0 : t.validImgExtensions; return n ? { extensions: n } : { types: [PM.image] } } var DM = { types: [".json", PM.json] }, LM = function () { function e() { g(this, e), B(this, "watermark", null), B(this, "lineStyle", { stroke: "rgba(255,255,255,0.3)", strokeWidth: 5, strokeLineCap: "round", strokeLineJoin: "round" }) } return y(e, [{ key: "add", value: function (e) { this.createGroup(), this.addText(e), this.addLines(), GO().add(this.watermark), XO().canvas.render() } }, { key: "remove", value: function () { !this.watermark || (GO().remove(this.watermark), this.watermark = null, XO().canvas.render()) } }, { key: "createGroup", value: function () { this.watermark = new UO.fabric.Group(void 0, N(F({}, JO), { width: YO().original.width, height: YO().original.height, excludeFromExport: !0, top: 0, left: 0, originX: "left", originY: "top" })) } }, { key: "addText", value: function (e) { var t, n = new UO.fabric.Text(e, { fill: "rgba(255,255,255,0.3)", strokeWidth: 2, stroke: "rgba(255,255,255,0.4)", originX: "center", originY: "center", fontWeight: 600, fontSize: 150, fontFamily: "Courier New" }); n.scaleToWidth(YO().original.width / 2), null == (t = this.watermark) || t.add(n) } }, { key: "addLines", value: function () { var e; if (this.watermark) { var t = null == (e = this.watermark) ? void 0 : e.getObjects("text")[0], n = YO().original.width / 2, r = YO().original.height / 2, i = 100, o = t.width / 4, a = new UO.fabric.Line(void 0, this.lineStyle), s = new UO.fabric.Line(void 0, this.lineStyle), l = new UO.fabric.Line(void 0, this.lineStyle), u = new UO.fabric.Line(void 0, this.lineStyle); this.watermark.add(a, s, l, u), a.set({ x1: o, y1: -i, x2: n, y2: -r }), s.set({ x1: o, y1: i, x2: n, y2: r }), l.set({ x1: -o, y1: -i, x2: -n, y2: -r }), u.set({ x1: -o, y1: i, x2: -n, y2: r }) } } }]), e }(), RM = { exports: {} }; !function (e, t) { !function () { function t(e, t, n) { var r = new XMLHttpRequest; r.open("GET", e), r.responseType = "blob", r.onload = function () { a(r.response, t, n) }, r.onerror = function () { console.error("could not download file") }, r.send() } function n(e) { var t = new XMLHttpRequest; t.open("HEAD", e, !1); try { t.send() } catch (e) { } return 200 <= t.status && 299 >= t.status } function r(e) { try { e.dispatchEvent(new MouseEvent("click")) } catch (n) { var t = document.createEvent("MouseEvents"); t.initMouseEvent("click", !0, !0, window, 0, 0, 0, 80, 20, !1, !1, !1, !1, 0, null), e.dispatchEvent(t) } } var i = "object" == ("undefined" == typeof window ? "undefined" : C(window)) && window.window === window ? window : "object" == ("undefined" == typeof self ? "undefined" : C(self)) && self.self === self ? self : "object" == C(l) && l.global === l ? l : void 0, o = i.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent), a = i.saveAs || ("object" != ("undefined" == typeof window ? "undefined" : C(window)) || window !== i ? function () { } : "download" in HTMLAnchorElement.prototype && !o ? function (e, o, a) { var s = i.URL || i.webkitURL, l = document.createElement("a"); o = o || e.name || "download", l.download = o, l.rel = "noopener", "string" == typeof e ? (l.href = e, l.origin === location.origin ? r(l) : n(l.href) ? t(e, o, a) : r(l, l.target = "_blank")) : (l.href = s.createObjectURL(e), setTimeout((function () { s.revokeObjectURL(l.href) }), 4e4), setTimeout((function () { r(l) }), 0)) } : "msSaveOrOpenBlob" in navigator ? function (e, i, o) { if (i = i || e.name || "download", "string" != typeof e) navigator.msSaveOrOpenBlob(function (e, t) { return void 0 === t ? t = { autoBom: !1 } : "object" != C(t) && (console.warn("Deprecated: Expected third argument to be a object"), t = { autoBom: !t }), t.autoBom && /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type) ? new Blob(["\ufeff", e], { type: e.type }) : e }(e, o), i); else if (n(e)) t(e, i, o); else { var a = document.createElement("a"); a.href = e, a.target = "_blank", setTimeout((function () { r(a) })) } } : function (e, n, r, a) { if ((a = a || open("", "_blank")) && (a.document.title = a.document.body.innerText = "downloading..."), "string" == typeof e) return t(e, n, r); var s = "application/octet-stream" === e.type, l = /constructor/i.test(i.HTMLElement) || i.safari, u = /CriOS\/[\d]+/.test(navigator.userAgent); if ((u || s && l || o) && "undefined" != typeof FileReader) { var c = new FileReader; c.onloadend = function () { var e = c.result; e = u ? e : e.replace(/^data:[^;]*;/, "data:attachment/file;"), a ? a.location.href = e : location = e, a = null }, c.readAsDataURL(e) } else { var f = i.URL || i.webkitURL, h = f.createObjectURL(e); a ? a.location = h : location.href = h, a = null, setTimeout((function () { f.revokeObjectURL(h) }), 4e4) } }); i.saveAs = a.saveAs = a, e.exports = a }() }(RM); var IM = function () { function e() { g(this, e) } return y(e, [{ key: "save", value: function (e, t, n) { var r, i, o, a = null == (r = YO().config.tools) ? void 0 : r.export; e = e || (null == a ? void 0 : a.defaultName), t = this.getFormat(t), n = this.getQuality(n); var s = "".concat(e, ".").concat(t); this.applyWaterMark(); var l = "json" === t ? this.getJsonState() : this.getDataUrl(t, n); if (XO().watermark.remove(), l) if (YO().config.saveUrl) fetch(YO().config.saveUrl, { method: "POST", body: JSON.stringify({ data: l, filename: s, format: t }) }); else if (YO().config.onSave) null == (o = (i = YO().config).onSave) || o.call(i, l, s, t); else { var u = this.getCanvasBlob(t, l); RM.exports.saveAs(u, s) } } }, { key: "getDataUrl", value: function (e, t) { this.prepareCanvas(); try { return "svg" === e ? GO().toSVG() : GO().toDataURL({ format: this.getFormat(e), quality: this.getQuality(t), multiplier: Math.max(YO().original.width / GO().width, YO().original.height / GO().height) }) } catch (e) { e.message.toLowerCase().includes("tainted") && bM({ id: "m45ghm", defaultMessage: [{ type: 0, value: "Could not export canvas with external image." }] }, { type: "error" }) } return null } }, { key: "getCanvasBlob", value: function (e, t) { if ("json" === e) return new Blob([t], { type: "application/json" }); if ("svg" === e) return new Blob([t], { type: "image/svg+xml" }); var n = "image/".concat(e); return function (e, t, n) { t = t || "", n = n || 512; for (var r = atob(e), i = [], o = 0; o < r.length; o += n) { for (var a = r.slice(o, o + n), s = new Array(a.length), l = 0; l < a.length; l++)s[l] = a.charCodeAt(l); var u = new Uint8Array(s); i.push(u) } return new Blob(i, { type: t }) }(t = t.replace(/data:image\/([a-z]*)?;base64,/, ""), n) } }, { key: "getJsonState", value: function () { return JSON.stringify(hP()) } }, { key: "prepareCanvas", value: function () { GO().discardActiveObject() } }, { key: "applyWaterMark", value: function () { var e = YO().config.watermarkText; e && XO().watermark.add(e) } }, { key: "getFormat", value: function (e) { var t, n = null == (t = YO().config.tools) ? void 0 : t.export; return "jpg" === (e = e || (null == n ? void 0 : n.defaultFormat) || "png") && (e = "jpeg"), e } }, { key: "getQuality", value: function (e) { var t, n = null == (t = YO().config.tools) ? void 0 : t.export; return e || (null == n ? void 0 : n.defaultQuality) || .8 } }]), e }(), jM = function () { function e() { g(this, e), B(this, "previewRect", null) } var t; return y(e, [{ key: "apply", value: (t = x(b().mark((function e(t) { var n; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (this.previewRect || this.showPreview(), this.updatePreview(t), GO().remove(this.previewRect), GO().clipPath = this.previewRect, (n = XO().export.getDataUrl()) && XO().canvas.clear(), this.hidePreview(), e.t0 = n, !e.t0) { e.next = 8; break } return e.next = 8, XO().canvas.addMainImage(n); case 8: GO().clipPath = void 0; case 9: case "end": return e.stop() } }), e, this) }))), function (e) { return t.apply(this, arguments) }) }, { key: "getPreviewRadius", value: function () { var e; return (null == (e = this.previewRect) ? void 0 : e.rx) || 0 } }, { key: "updatePreview", value: function (e) { !this.previewRect || (this.previewRect.set({ rx: e, ry: e }), XO().canvas.render()) } }, { key: "showPreview", value: function () { this.previewRect = new UO.fabric.Rect({ width: YO().original.width, height: YO().original.height, rx: 50, ry: 50, objectCaching: !1, fill: "transparent", name: "round.rect", data: { pixieInternal: !0 }, stroke: "rgba(255,255,255,0.8)", strokeWidth: 3, strokeDashArray: [4, 4], selectable: !1, evented: !1 }), GO().add(this.previewRect), this.previewRect.moveTo(99), this.previewRect.viewportCenter(), XO().canvas.render() } }, { key: "hidePreview", value: function () { !this.previewRect || (GO().remove(this.previewRect), XO().canvas.render(), this.previewRect = null) } }]), e }(), FM = function () { function e() { g(this, e) } return y(e, [{ key: "straightenAnchor", get: function () { return GO().getObjects().find((function (e) { return e.name === ew.StraightenAnchor })) } }, { key: "rotateLeft", value: function () { this.rotateFixed(-90) } }, { key: "rotateRight", value: function () { this.rotateFixed(90) } }, { key: "straighten", value: function (e) { this.storeObjectsRelationToHelper(), XO().objects.deselectActive(); var t = (this.straightenAnchor.data.rotateAngle || 0) + e, n = this.getImageScale(t, this.straightenAnchor); this.straightenAnchor.angle = t, this.straightenAnchor.scaleX = n, this.straightenAnchor.scaleY = n, this.straightenAnchor.data.straightenAngle = e, this.transformObjectsBasedOnHelper() } }, { key: "flip", value: function (e) { var t = "horizontal" === e ? "flipY" : "flipX"; XO().objects.getAll().forEach((function (e) { e[t] = !e[t] })), XO().canvas.render() } }, { key: "rotateFixed", value: function (e) { XO().zoom.set(1, !1), XO().objects.deselectActive(); var t = this.straightenAnchor.data.rotateAngle || 0; e = 90 * Math.round(e / 90); var n = t + (this.straightenAnchor.data.straightenAngle || 0) + e; XO().canvas.resize(YO().original.height, YO().original.width, { applyZoom: !1, resizeHelper: !1 }), this.storeObjectsRelationToHelper(), this.straightenAnchor.rotate(n), this.straightenAnchor.data.rotateAngle = t + e, this.straightenAnchor.center(), this.transformObjectsBasedOnHelper(), XO().frame.resize(XO().frame.active.currentSizeInPercent), requestAnimationFrame((function () { XO().zoom.fitToScreen() })) } }, { key: "getImageScale", value: function (e, t) { e = UO.fabric.util.degreesToRadians(e); var n = YO().original.width / 2, r = YO().original.height / 2, i = t.width / 2, o = t.height / 2, a = Math.sqrt(Math.pow(n, 2) + Math.pow(r, 2)), s = Math.asin(r / a), l = (e % (2 * Math.PI) + 4 * Math.PI) % (2 * Math.PI); l > Math.PI && (l -= Math.PI), l > Math.PI / 2 && l <= Math.PI && (l = Math.PI / 2 - (l - Math.PI / 2)); var u = Math.PI / 2 - s - Math.abs(l), c = Math.abs(s - Math.abs(l)), f = Math.cos(u) * a, h = Math.cos(c) * a; return Math.max(h / i, f / o) } }, { key: "storeObjectsRelationToHelper", value: function () { var e = this; XO().objects.getAll().forEach((function (t) { if (t !== e.straightenAnchor) { var n = UO.fabric.util.multiplyTransformMatrices(UO.fabric.util.invertTransform(e.straightenAnchor.calcTransformMatrix()), t.calcTransformMatrix()); t.data = N(F({}, t.data), { relationToCanvas: n }) } })) } }, { key: "transformObjectsBasedOnHelper", value: function () { var e = this; XO().objects.getAll().forEach((function (t) { if (t.data.relationToCanvas) { var n = UO.fabric.util.multiplyTransformMatrices(e.straightenAnchor.calcTransformMatrix(), t.data.relationToCanvas), r = UO.fabric.util.qrDecompose(n); t.set({ flipX: !1, flipY: !1 }), t.setPositionByOrigin({ x: r.translateX, y: r.translateY }, "center", "center"), t.set(r), t.setCoords(), t.data.relationToCanvas = null } })) } }, { key: "resetStraightenAnchor", value: function () { var e = this.straightenAnchor; e && GO().remove(e); var t = new UO.fabric.Rect(N(F({}, JO), { name: ew.StraightenAnchor, visible: !1, width: YO().original.width, height: YO().original.height, data: { pixieInternal: !0, straightenAngle: 0, rotateAngle: 0 } })); GO().add(t), t.viewportCenter() } }]), e }(); function NM(e, t) { var n = new ResizeObserver((function (e) { var n = e[0].contentRect; t({ width: n.width, height: n.height }) })); return n.observe(e), function () { return n.unobserve(e) } } function zM(e) { var t = e.getBoundingClientRect(); return { top: t.top, right: t.right, bottom: t.bottom, left: t.left, width: t.width, height: t.height } } var BM = { exports: {} }, VM = { aliceblue: [240, 248, 255], antiquewhite: [250, 235, 215], aqua: [0, 255, 255], aquamarine: [127, 255, 212], azure: [240, 255, 255], beige: [245, 245, 220], bisque: [255, 228, 196], black: [0, 0, 0], blanchedalmond: [255, 235, 205], blue: [0, 0, 255], blueviolet: [138, 43, 226], brown: [165, 42, 42], burlywood: [222, 184, 135], cadetblue: [95, 158, 160], chartreuse: [127, 255, 0], chocolate: [210, 105, 30], coral: [255, 127, 80], cornflowerblue: [100, 149, 237], cornsilk: [255, 248, 220], crimson: [220, 20, 60], cyan: [0, 255, 255], darkblue: [0, 0, 139], darkcyan: [0, 139, 139], darkgoldenrod: [184, 134, 11], darkgray: [169, 169, 169], darkgreen: [0, 100, 0], darkgrey: [169, 169, 169], darkkhaki: [189, 183, 107], darkmagenta: [139, 0, 139], darkolivegreen: [85, 107, 47], darkorange: [255, 140, 0], darkorchid: [153, 50, 204], darkred: [139, 0, 0], darksalmon: [233, 150, 122], darkseagreen: [143, 188, 143], darkslateblue: [72, 61, 139], darkslategray: [47, 79, 79], darkslategrey: [47, 79, 79], darkturquoise: [0, 206, 209], darkviolet: [148, 0, 211], deeppink: [255, 20, 147], deepskyblue: [0, 191, 255], dimgray: [105, 105, 105], dimgrey: [105, 105, 105], dodgerblue: [30, 144, 255], firebrick: [178, 34, 34], floralwhite: [255, 250, 240], forestgreen: [34, 139, 34], fuchsia: [255, 0, 255], gainsboro: [220, 220, 220], ghostwhite: [248, 248, 255], gold: [255, 215, 0], goldenrod: [218, 165, 32], gray: [128, 128, 128], green: [0, 128, 0], greenyellow: [173, 255, 47], grey: [128, 128, 128], honeydew: [240, 255, 240], hotpink: [255, 105, 180], indianred: [205, 92, 92], indigo: [75, 0, 130], ivory: [255, 255, 240], khaki: [240, 230, 140], lavender: [230, 230, 250], lavenderblush: [255, 240, 245], lawngreen: [124, 252, 0], lemonchiffon: [255, 250, 205], lightblue: [173, 216, 230], lightcoral: [240, 128, 128], lightcyan: [224, 255, 255], lightgoldenrodyellow: [250, 250, 210], lightgray: [211, 211, 211], lightgreen: [144, 238, 144], lightgrey: [211, 211, 211], lightpink: [255, 182, 193], lightsalmon: [255, 160, 122], lightseagreen: [32, 178, 170], lightskyblue: [135, 206, 250], lightslategray: [119, 136, 153], lightslategrey: [119, 136, 153], lightsteelblue: [176, 196, 222], lightyellow: [255, 255, 224], lime: [0, 255, 0], limegreen: [50, 205, 50], linen: [250, 240, 230], magenta: [255, 0, 255], maroon: [128, 0, 0], mediumaquamarine: [102, 205, 170], mediumblue: [0, 0, 205], mediumorchid: [186, 85, 211], mediumpurple: [147, 112, 219], mediumseagreen: [60, 179, 113], mediumslateblue: [123, 104, 238], mediumspringgreen: [0, 250, 154], mediumturquoise: [72, 209, 204], mediumvioletred: [199, 21, 133], midnightblue: [25, 25, 112], mintcream: [245, 255, 250], mistyrose: [255, 228, 225], moccasin: [255, 228, 181], navajowhite: [255, 222, 173], navy: [0, 0, 128], oldlace: [253, 245, 230], olive: [128, 128, 0], olivedrab: [107, 142, 35], orange: [255, 165, 0], orangered: [255, 69, 0], orchid: [218, 112, 214], palegoldenrod: [238, 232, 170], palegreen: [152, 251, 152], paleturquoise: [175, 238, 238], palevioletred: [219, 112, 147], papayawhip: [255, 239, 213], peachpuff: [255, 218, 185], peru: [205, 133, 63], pink: [255, 192, 203], plum: [221, 160, 221], powderblue: [176, 224, 230], purple: [128, 0, 128], rebeccapurple: [102, 51, 153], red: [255, 0, 0], rosybrown: [188, 143, 143], royalblue: [65, 105, 225], saddlebrown: [139, 69, 19], salmon: [250, 128, 114], sandybrown: [244, 164, 96], seagreen: [46, 139, 87], seashell: [255, 245, 238], sienna: [160, 82, 45], silver: [192, 192, 192], skyblue: [135, 206, 235], slateblue: [106, 90, 205], slategray: [112, 128, 144], slategrey: [112, 128, 144], snow: [255, 250, 250], springgreen: [0, 255, 127], steelblue: [70, 130, 180], tan: [210, 180, 140], teal: [0, 128, 128], thistle: [216, 191, 216], tomato: [255, 99, 71], turquoise: [64, 224, 208], violet: [238, 130, 238], wheat: [245, 222, 179], white: [255, 255, 255], whitesmoke: [245, 245, 245], yellow: [255, 255, 0], yellowgreen: [154, 205, 50] }, UM = { exports: {} }, HM = function (e) { return !(!e || "string" == typeof e) && (e instanceof Array || Array.isArray(e) || e.length >= 0 && (e.splice instanceof Function || Object.getOwnPropertyDescriptor(e, e.length - 1) && "String" !== e.constructor.name)) }, WM = Array.prototype.concat, KM = Array.prototype.slice, YM = UM.exports = function (e) { for (var t = [], n = 0, r = e.length; n < r; n++) { var i = e[n]; HM(i) ? t = WM.call(t, KM.call(i)) : t.push(i) } return t }; YM.wrap = function (e) { return function () { return e(YM(arguments)) } }; var XM = VM, GM = UM.exports, qM = Object.hasOwnProperty, JM = {}; for (var ZM in XM) qM.call(XM, ZM) && (JM[XM[ZM]] = ZM); var $M = BM.exports = { to: {}, get: {} }; function QM(e, t, n) { return Math.min(Math.max(t, e), n) } function eA(e) { var t = Math.round(e).toString(16).toUpperCase(); return t.length < 2 ? "0" + t : t } $M.get = function (e) { var t, n; switch (e.substring(0, 3).toLowerCase()) { case "hsl": t = $M.get.hsl(e), n = "hsl"; break; case "hwb": t = $M.get.hwb(e), n = "hwb"; break; default: t = $M.get.rgb(e), n = "rgb" }return t ? { model: n, value: t } : null }, $M.get.rgb = function (e) { if (!e) return null; var t, n, r, i = [0, 0, 0, 1]; if (t = e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)) { for (r = t[2], t = t[1], n = 0; n < 3; n++) { var o = 2 * n; i[n] = parseInt(t.slice(o, o + 2), 16) } r && (i[3] = parseInt(r, 16) / 255) } else if (t = e.match(/^#([a-f0-9]{3,4})$/i)) { for (r = (t = t[1])[3], n = 0; n < 3; n++)i[n] = parseInt(t[n] + t[n], 16); r && (i[3] = parseInt(r + r, 16) / 255) } else if (t = e.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)) { for (n = 0; n < 3; n++)i[n] = parseInt(t[n + 1], 0); t[4] && (t[5] ? i[3] = .01 * parseFloat(t[4]) : i[3] = parseFloat(t[4])) } else { if (!(t = e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/))) return (t = e.match(/^(\w+)$/)) ? "transparent" === t[1] ? [0, 0, 0, 0] : qM.call(XM, t[1]) ? ((i = XM[t[1]])[3] = 1, i) : null : null; for (n = 0; n < 3; n++)i[n] = Math.round(2.55 * parseFloat(t[n + 1])); t[4] && (t[5] ? i[3] = .01 * parseFloat(t[4]) : i[3] = parseFloat(t[4])) } for (n = 0; n < 3; n++)i[n] = QM(i[n], 0, 255); return i[3] = QM(i[3], 0, 1), i }, $M.get.hsl = function (e) { if (!e) return null; var t = e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/); if (t) { var n = parseFloat(t[4]); return [(parseFloat(t[1]) % 360 + 360) % 360, QM(parseFloat(t[2]), 0, 100), QM(parseFloat(t[3]), 0, 100), QM(isNaN(n) ? 1 : n, 0, 1)] } return null }, $M.get.hwb = function (e) { if (!e) return null; var t = e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/); if (t) { var n = parseFloat(t[4]); return [(parseFloat(t[1]) % 360 + 360) % 360, QM(parseFloat(t[2]), 0, 100), QM(parseFloat(t[3]), 0, 100), QM(isNaN(n) ? 1 : n, 0, 1)] } return null }, $M.to.hex = function () { var e = GM(arguments); return "#" + eA(e[0]) + eA(e[1]) + eA(e[2]) + (e[3] < 1 ? eA(Math.round(255 * e[3])) : "") }, $M.to.rgb = function () { var e = GM(arguments); return e.length < 4 || 1 === e[3] ? "rgb(" + Math.round(e[0]) + ", " + Math.round(e[1]) + ", " + Math.round(e[2]) + ")" : "rgba(" + Math.round(e[0]) + ", " + Math.round(e[1]) + ", " + Math.round(e[2]) + ", " + e[3] + ")" }, $M.to.rgb.percent = function () { var e = GM(arguments), t = Math.round(e[0] / 255 * 100), n = Math.round(e[1] / 255 * 100), r = Math.round(e[2] / 255 * 100); return e.length < 4 || 1 === e[3] ? "rgb(" + t + "%, " + n + "%, " + r + "%)" : "rgba(" + t + "%, " + n + "%, " + r + "%, " + e[3] + ")" }, $M.to.hsl = function () { var e = GM(arguments); return e.length < 4 || 1 === e[3] ? "hsl(" + e[0] + ", " + e[1] + "%, " + e[2] + "%)" : "hsla(" + e[0] + ", " + e[1] + "%, " + e[2] + "%, " + e[3] + ")" }, $M.to.hwb = function () { var e = GM(arguments), t = ""; return e.length >= 4 && 1 !== e[3] && (t = ", " + e[3]), "hwb(" + e[0] + ", " + e[1] + "%, " + e[2] + "%" + t + ")" }, $M.to.keyword = function (e) { return JM[e.slice(0, 3)] }; for (var tA = VM, nA = {}, rA = 0, iA = Object.keys(tA); rA < iA.length; rA++) { var oA = iA[rA]; nA[tA[oA]] = oA } for (var aA = { rgb: { channels: 3, labels: "rgb" }, hsl: { channels: 3, labels: "hsl" }, hsv: { channels: 3, labels: "hsv" }, hwb: { channels: 3, labels: "hwb" }, cmyk: { channels: 4, labels: "cmyk" }, xyz: { channels: 3, labels: "xyz" }, lab: { channels: 3, labels: "lab" }, lch: { channels: 3, labels: "lch" }, hex: { channels: 1, labels: ["hex"] }, keyword: { channels: 1, labels: ["keyword"] }, ansi16: { channels: 1, labels: ["ansi16"] }, ansi256: { channels: 1, labels: ["ansi256"] }, hcg: { channels: 3, labels: ["h", "c", "g"] }, apple: { channels: 3, labels: ["r16", "g16", "b16"] }, gray: { channels: 1, labels: ["gray"] } }, sA = aA, lA = 0, uA = Object.keys(aA); lA < uA.length; lA++) { var cA = uA[lA]; if (!("channels" in aA[cA])) throw new Error("missing channels property: " + cA); if (!("labels" in aA[cA])) throw new Error("missing channel labels property: " + cA); if (aA[cA].labels.length !== aA[cA].channels) throw new Error("channel and label counts mismatch: " + cA); var fA = aA[cA], hA = fA.channels, dA = fA.labels; delete aA[cA].channels, delete aA[cA].labels, Object.defineProperty(aA[cA], "channels", { value: hA }), Object.defineProperty(aA[cA], "labels", { value: dA }) } function pA(e, t) { return Math.pow(e[0] - t[0], 2) + Math.pow(e[1] - t[1], 2) + Math.pow(e[2] - t[2], 2) } aA.rgb.hsl = function (e) { var t, n = e[0] / 255, r = e[1] / 255, i = e[2] / 255, o = Math.min(n, r, i), a = Math.max(n, r, i), s = a - o; a === o ? t = 0 : n === a ? t = (r - i) / s : r === a ? t = 2 + (i - n) / s : i === a && (t = 4 + (n - r) / s), (t = Math.min(60 * t, 360)) < 0 && (t += 360); var l = (o + a) / 2; return [t, 100 * (a === o ? 0 : l <= .5 ? s / (a + o) : s / (2 - a - o)), 100 * l] }, aA.rgb.hsv = function (e) { var t, n, r, i, o, a = e[0] / 255, s = e[1] / 255, l = e[2] / 255, u = Math.max(a, s, l), c = u - Math.min(a, s, l), f = function (e) { return (u - e) / 6 / c + .5 }; return 0 === c ? (i = 0, o = 0) : (o = c / u, t = f(a), n = f(s), r = f(l), a === u ? i = r - n : s === u ? i = 1 / 3 + t - r : l === u && (i = 2 / 3 + n - t), i < 0 ? i += 1 : i > 1 && (i -= 1)), [360 * i, 100 * o, 100 * u] }, aA.rgb.hwb = function (e) { var t = e[0], n = e[1], r = e[2]; return [aA.rgb.hsl(e)[0], 1 / 255 * Math.min(t, Math.min(n, r)) * 100, 100 * (r = 1 - 1 / 255 * Math.max(t, Math.max(n, r)))] }, aA.rgb.cmyk = function (e) { var t = e[0] / 255, n = e[1] / 255, r = e[2] / 255, i = Math.min(1 - t, 1 - n, 1 - r); return [100 * ((1 - t - i) / (1 - i) || 0), 100 * ((1 - n - i) / (1 - i) || 0), 100 * ((1 - r - i) / (1 - i) || 0), 100 * i] }, aA.rgb.keyword = function (e) { var t = nA[e]; if (t) return t; for (var n, r = 1 / 0, i = 0, o = Object.keys(tA); i < o.length; i++) { var a = o[i], s = pA(e, tA[a]); s < r && (r = s, n = a) } return n }, aA.keyword.rgb = function (e) { return tA[e] }, aA.rgb.xyz = function (e) { var t = e[0] / 255, n = e[1] / 255, r = e[2] / 255; return [100 * (.4124 * (t = t > .04045 ? Math.pow((t + .055) / 1.055, 2.4) : t / 12.92) + .3576 * (n = n > .04045 ? Math.pow((n + .055) / 1.055, 2.4) : n / 12.92) + .1805 * (r = r > .04045 ? Math.pow((r + .055) / 1.055, 2.4) : r / 12.92)), 100 * (.2126 * t + .7152 * n + .0722 * r), 100 * (.0193 * t + .1192 * n + .9505 * r)] }, aA.rgb.lab = function (e) { var t = aA.rgb.xyz(e), n = t[0], r = t[1], i = t[2]; return r /= 100, i /= 108.883, n = (n /= 95.047) > .008856 ? Math.pow(n, 1 / 3) : 7.787 * n + 16 / 116, [116 * (r = r > .008856 ? Math.pow(r, 1 / 3) : 7.787 * r + 16 / 116) - 16, 500 * (n - r), 200 * (r - (i = i > .008856 ? Math.pow(i, 1 / 3) : 7.787 * i + 16 / 116))] }, aA.hsl.rgb = function (e) { var t, n, r, i = e[0] / 360, o = e[1] / 100, a = e[2] / 100; if (0 === o) return [r = 255 * a, r, r]; for (var s = 2 * a - (t = a < .5 ? a * (1 + o) : a + o - a * o), l = [0, 0, 0], u = 0; u < 3; u++)(n = i + 1 / 3 * -(u - 1)) < 0 && n++, n > 1 && n--, r = 6 * n < 1 ? s + 6 * (t - s) * n : 2 * n < 1 ? t : 3 * n < 2 ? s + (t - s) * (2 / 3 - n) * 6 : s, l[u] = 255 * r; return l }, aA.hsl.hsv = function (e) { var t = e[0], n = e[1] / 100, r = e[2] / 100, i = n, o = Math.max(r, .01); return n *= (r *= 2) <= 1 ? r : 2 - r, i *= o <= 1 ? o : 2 - o, [t, 100 * (0 === r ? 2 * i / (o + i) : 2 * n / (r + n)), (r + n) / 2 * 100] }, aA.hsv.rgb = function (e) { var t = e[0] / 60, n = e[1] / 100, r = e[2] / 100, i = Math.floor(t) % 6, o = t - Math.floor(t), a = 255 * r * (1 - n), s = 255 * r * (1 - n * o), l = 255 * r * (1 - n * (1 - o)); switch (r *= 255, i) { case 0: return [r, l, a]; case 1: return [s, r, a]; case 2: return [a, r, l]; case 3: return [a, s, r]; case 4: return [l, a, r]; case 5: return [r, a, s] } }, aA.hsv.hsl = function (e) { var t, n, r = e[0], i = e[1] / 100, o = e[2] / 100, a = Math.max(o, .01); n = (2 - i) * o; var s = (2 - i) * a; return t = i * a, [r, 100 * (t = (t /= s <= 1 ? s : 2 - s) || 0), 100 * (n /= 2)] }, aA.hwb.rgb = function (e) { var t, n = e[0] / 360, r = e[1] / 100, i = e[2] / 100, o = r + i; o > 1 && (r /= o, i /= o); var a = Math.floor(6 * n), s = 1 - i; t = 6 * n - a, 0 != (1 & a) && (t = 1 - t); var l, u, c, f = r + t * (s - r); switch (a) { default: case 6: case 0: l = s, u = f, c = r; break; case 1: l = f, u = s, c = r; break; case 2: l = r, u = s, c = f; break; case 3: l = r, u = f, c = s; break; case 4: l = f, u = r, c = s; break; case 5: l = s, u = r, c = f }return [255 * l, 255 * u, 255 * c] }, aA.cmyk.rgb = function (e) { var t = e[0] / 100, n = e[1] / 100, r = e[2] / 100, i = e[3] / 100; return [255 * (1 - Math.min(1, t * (1 - i) + i)), 255 * (1 - Math.min(1, n * (1 - i) + i)), 255 * (1 - Math.min(1, r * (1 - i) + i))] }, aA.xyz.rgb = function (e) { var t, n, r, i = e[0] / 100, o = e[1] / 100, a = e[2] / 100; return n = -.9689 * i + 1.8758 * o + .0415 * a, r = .0557 * i + -.204 * o + 1.057 * a, t = (t = 3.2406 * i + -1.5372 * o + -.4986 * a) > .0031308 ? 1.055 * Math.pow(t, 1 / 2.4) - .055 : 12.92 * t, n = n > .0031308 ? 1.055 * Math.pow(n, 1 / 2.4) - .055 : 12.92 * n, r = r > .0031308 ? 1.055 * Math.pow(r, 1 / 2.4) - .055 : 12.92 * r, [255 * (t = Math.min(Math.max(0, t), 1)), 255 * (n = Math.min(Math.max(0, n), 1)), 255 * (r = Math.min(Math.max(0, r), 1))] }, aA.xyz.lab = function (e) { var t = e[0], n = e[1], r = e[2]; return n /= 100, r /= 108.883, t = (t /= 95.047) > .008856 ? Math.pow(t, 1 / 3) : 7.787 * t + 16 / 116, [116 * (n = n > .008856 ? Math.pow(n, 1 / 3) : 7.787 * n + 16 / 116) - 16, 500 * (t - n), 200 * (n - (r = r > .008856 ? Math.pow(r, 1 / 3) : 7.787 * r + 16 / 116))] }, aA.lab.xyz = function (e) { var t, n, r, i = e[0]; t = e[1] / 500 + (n = (i + 16) / 116), r = n - e[2] / 200; var o = Math.pow(n, 3), a = Math.pow(t, 3), s = Math.pow(r, 3); return n = o > .008856 ? o : (n - 16 / 116) / 7.787, t = a > .008856 ? a : (t - 16 / 116) / 7.787, r = s > .008856 ? s : (r - 16 / 116) / 7.787, [t *= 95.047, n *= 100, r *= 108.883] }, aA.lab.lch = function (e) { var t, n = e[0], r = e[1], i = e[2]; return (t = 360 * Math.atan2(i, r) / 2 / Math.PI) < 0 && (t += 360), [n, Math.sqrt(r * r + i * i), t] }, aA.lch.lab = function (e) { var t = e[0], n = e[1], r = e[2] / 360 * 2 * Math.PI; return [t, n * Math.cos(r), n * Math.sin(r)] }, aA.rgb.ansi16 = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, n = _(e, 3), r = n[0], i = n[1], o = n[2], a = null === t ? aA.rgb.hsv(e)[2] : t; if (0 === (a = Math.round(a / 50))) return 30; var s = 30 + (Math.round(o / 255) << 2 | Math.round(i / 255) << 1 | Math.round(r / 255)); return 2 === a && (s += 60), s }, aA.hsv.ansi16 = function (e) { return aA.rgb.ansi16(aA.hsv.rgb(e), e[2]) }, aA.rgb.ansi256 = function (e) { var t = e[0], n = e[1], r = e[2]; return t === n && n === r ? t < 8 ? 16 : t > 248 ? 231 : Math.round((t - 8) / 247 * 24) + 232 : 16 + 36 * Math.round(t / 255 * 5) + 6 * Math.round(n / 255 * 5) + Math.round(r / 255 * 5) }, aA.ansi16.rgb = function (e) { var t = e % 10; if (0 === t || 7 === t) return e > 50 && (t += 3.5), [t = t / 10.5 * 255, t, t]; var n = .5 * (1 + ~~(e > 50)); return [(1 & t) * n * 255, (t >> 1 & 1) * n * 255, (t >> 2 & 1) * n * 255] }, aA.ansi256.rgb = function (e) { if (e >= 232) { var t = 10 * (e - 232) + 8; return [t, t, t] } var n; return e -= 16, [Math.floor(e / 36) / 5 * 255, Math.floor((n = e % 36) / 6) / 5 * 255, n % 6 / 5 * 255] }, aA.rgb.hex = function (e) { var t = (((255 & Math.round(e[0])) << 16) + ((255 & Math.round(e[1])) << 8) + (255 & Math.round(e[2]))).toString(16).toUpperCase(); return "000000".substring(t.length) + t }, aA.hex.rgb = function (e) { var t = e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i); if (!t) return [0, 0, 0]; var n = t[0]; 3 === t[0].length && (n = n.split("").map((function (e) { return e + e })).join("")); var r = parseInt(n, 16); return [r >> 16 & 255, r >> 8 & 255, 255 & r] }, aA.rgb.hcg = function (e) { var t, n = e[0] / 255, r = e[1] / 255, i = e[2] / 255, o = Math.max(Math.max(n, r), i), a = Math.min(Math.min(n, r), i), s = o - a; return t = s <= 0 ? 0 : o === n ? (r - i) / s % 6 : o === r ? 2 + (i - n) / s : 4 + (n - r) / s, t /= 6, [360 * (t %= 1), 100 * s, 100 * (s < 1 ? a / (1 - s) : 0)] }, aA.hsl.hcg = function (e) { var t = e[1] / 100, n = e[2] / 100, r = n < .5 ? 2 * t * n : 2 * t * (1 - n), i = 0; return r < 1 && (i = (n - .5 * r) / (1 - r)), [e[0], 100 * r, 100 * i] }, aA.hsv.hcg = function (e) { var t = e[1] / 100, n = e[2] / 100, r = t * n, i = 0; return r < 1 && (i = (n - r) / (1 - r)), [e[0], 100 * r, 100 * i] }, aA.hcg.rgb = function (e) { var t = e[0] / 360, n = e[1] / 100, r = e[2] / 100; if (0 === n) return [255 * r, 255 * r, 255 * r]; var i, o = [0, 0, 0], a = t % 1 * 6, s = a % 1, l = 1 - s; switch (Math.floor(a)) { case 0: o[0] = 1, o[1] = s, o[2] = 0; break; case 1: o[0] = l, o[1] = 1, o[2] = 0; break; case 2: o[0] = 0, o[1] = 1, o[2] = s; break; case 3: o[0] = 0, o[1] = l, o[2] = 1; break; case 4: o[0] = s, o[1] = 0, o[2] = 1; break; default: o[0] = 1, o[1] = 0, o[2] = l }return i = (1 - n) * r, [255 * (n * o[0] + i), 255 * (n * o[1] + i), 255 * (n * o[2] + i)] }, aA.hcg.hsv = function (e) { var t = e[1] / 100, n = t + e[2] / 100 * (1 - t), r = 0; return n > 0 && (r = t / n), [e[0], 100 * r, 100 * n] }, aA.hcg.hsl = function (e) { var t = e[1] / 100, n = e[2] / 100 * (1 - t) + .5 * t, r = 0; return n > 0 && n < .5 ? r = t / (2 * n) : n >= .5 && n < 1 && (r = t / (2 * (1 - n))), [e[0], 100 * r, 100 * n] }, aA.hcg.hwb = function (e) { var t = e[1] / 100, n = t + e[2] / 100 * (1 - t); return [e[0], 100 * (n - t), 100 * (1 - n)] }, aA.hwb.hcg = function (e) { var t = e[1] / 100, n = 1 - e[2] / 100, r = n - t, i = 0; return r < 1 && (i = (n - r) / (1 - r)), [e[0], 100 * r, 100 * i] }, aA.apple.rgb = function (e) { return [e[0] / 65535 * 255, e[1] / 65535 * 255, e[2] / 65535 * 255] }, aA.rgb.apple = function (e) { return [e[0] / 255 * 65535, e[1] / 255 * 65535, e[2] / 255 * 65535] }, aA.gray.rgb = function (e) { return [e[0] / 100 * 255, e[0] / 100 * 255, e[0] / 100 * 255] }, aA.gray.hsl = function (e) { return [0, 0, e[0]] }, aA.gray.hsv = aA.gray.hsl, aA.gray.hwb = function (e) { return [0, 100, e[0]] }, aA.gray.cmyk = function (e) { return [0, 0, 0, e[0]] }, aA.gray.lab = function (e) { return [e[0], 0, 0] }, aA.gray.hex = function (e) { var t = 255 & Math.round(e[0] / 100 * 255), n = ((t << 16) + (t << 8) + t).toString(16).toUpperCase(); return "000000".substring(n.length) + n }, aA.rgb.gray = function (e) { return [(e[0] + e[1] + e[2]) / 3 / 255 * 100] }; var vA = sA; function gA(e, t) { return function (n) { return t(e(n)) } } function mA(e, t) { for (var n = [t[e].parent, e], r = vA[t[e].parent][e], i = t[e].parent; t[i].parent;)n.unshift(t[i].parent), r = gA(vA[t[i].parent][i], r), i = t[i].parent; return r.conversion = n, r } var yA = sA, bA = function (e) { for (var t = function (e) { var t = function () { for (var e = {}, t = Object.keys(vA), n = t.length, r = 0; r < n; r++)e[t[r]] = { distance: -1, parent: null }; return e }(), n = [e]; for (t[e].distance = 0; n.length;)for (var r = n.pop(), i = Object.keys(vA[r]), o = i.length, a = 0; a < o; a++) { var s = i[a], l = t[s]; -1 === l.distance && (l.distance = t[r].distance + 1, l.parent = r, n.unshift(s)) } return t }(e), n = {}, r = Object.keys(t), i = r.length, o = 0; o < i; o++) { var a = r[o]; null !== t[a].parent && (n[a] = mA(a, t)) } return n }, wA = {}; Object.keys(yA).forEach((function (e) { wA[e] = {}, Object.defineProperty(wA[e], "channels", { value: yA[e].channels }), Object.defineProperty(wA[e], "labels", { value: yA[e].labels }); var t = bA(e); Object.keys(t).forEach((function (n) { var r = t[n]; wA[e][n] = function (e) { var t = function () { for (var t = arguments.length, n = new Array(t), r = 0; r < t; r++)n[r] = arguments[r]; var i = n[0]; if (null == i) return i; i.length > 1 && (n = i); var o = e(n); if ("object" == C(o)) for (var a = o.length, s = 0; s < a; s++)o[s] = Math.round(o[s]); return o }; return "conversion" in e && (t.conversion = e.conversion), t }(r), wA[e][n].raw = function (e) { var t = function () { for (var t = arguments.length, n = new Array(t), r = 0; r < t; r++)n[r] = arguments[r]; var i = n[0]; return null == i ? i : (i.length > 1 && (n = i), e(n)) }; return "conversion" in e && (t.conversion = e.conversion), t }(r) })) })); for (var xA = wA, _A = BM.exports, SA = xA, kA = [].slice, CA = ["keyword", "gray", "hex"], TA = {}, EA = 0, OA = Object.keys(SA); EA < OA.length; EA++) { var PA = OA[EA]; TA[kA.call(SA[PA].labels).sort().join("")] = PA } var MA = {}; function AA(e, t) { if (!(this instanceof AA)) return new AA(e, t); if (t && t in CA && (t = null), t && !(t in SA)) throw new Error("Unknown model: " + t); var n, r; if (null == e) this.model = "rgb", this.color = [0, 0, 0], this.valpha = 1; else if (e instanceof AA) this.model = e.model, this.color = e.color.slice(), this.valpha = e.valpha; else if ("string" == typeof e) { var i = _A.get(e); if (null === i) throw new Error("Unable to parse color from string: " + e); this.model = i.model, r = SA[this.model].channels, this.color = i.value.slice(0, r), this.valpha = "number" == typeof i.value[r] ? i.value[r] : 1 } else if (e.length > 0) { this.model = t || "rgb", r = SA[this.model].channels; var o = kA.call(e, 0, r); this.color = NA(o, r), this.valpha = "number" == typeof e[r] ? e[r] : 1 } else if ("number" == typeof e) this.model = "rgb", this.color = [e >> 16 & 255, e >> 8 & 255, 255 & e], this.valpha = 1; else { this.valpha = 1; var a = Object.keys(e); "alpha" in e && (a.splice(a.indexOf("alpha"), 1), this.valpha = "number" == typeof e.alpha ? e.alpha : 0); var s = a.sort().join(""); if (!(s in TA)) throw new Error("Unable to parse color from object: " + JSON.stringify(e)); this.model = TA[s]; var l = SA[this.model].labels, u = []; for (n = 0; n < l.length; n++)u.push(e[l[n]]); this.color = NA(u) } if (MA[this.model]) for (r = SA[this.model].channels, n = 0; n < r; n++) { var c = MA[this.model][n]; c && (this.color[n] = c(this.color[n])) } this.valpha = Math.max(0, Math.min(1, this.valpha)), Object.freeze && Object.freeze(this) } AA.prototype = { toString: function () { return this.string() }, toJSON: function () { return this[this.model]() }, string: function (e) { var t = this.model in _A.to ? this : this.rgb(), n = 1 === (t = t.round("number" == typeof e ? e : 1)).valpha ? t.color : t.color.concat(this.valpha); return _A.to[t.model](n) }, percentString: function (e) { var t = this.rgb().round("number" == typeof e ? e : 1), n = 1 === t.valpha ? t.color : t.color.concat(this.valpha); return _A.to.rgb.percent(n) }, array: function () { return 1 === this.valpha ? this.color.slice() : this.color.concat(this.valpha) }, object: function () { for (var e = {}, t = SA[this.model].channels, n = SA[this.model].labels, r = 0; r < t; r++)e[n[r]] = this.color[r]; return 1 !== this.valpha && (e.alpha = this.valpha), e }, unitArray: function () { var e = this.rgb().color; return e[0] /= 255, e[1] /= 255, e[2] /= 255, 1 !== this.valpha && e.push(this.valpha), e }, unitObject: function () { var e = this.rgb().object(); return e.r /= 255, e.g /= 255, e.b /= 255, 1 !== this.valpha && (e.alpha = this.valpha), e }, round: function (e) { return e = Math.max(e || 0, 0), new AA(this.color.map(function (e) { return function (t) { return function (e, t) { return Number(e.toFixed(t)) }(t, e) } }(e)).concat(this.valpha), this.model) }, alpha: function (e) { return arguments.length > 0 ? new AA(this.color.concat(Math.max(0, Math.min(1, e))), this.model) : this.valpha }, red: IA("rgb", 0, jA(255)), green: IA("rgb", 1, jA(255)), blue: IA("rgb", 2, jA(255)), hue: IA(["hsl", "hsv", "hsl", "hwb", "hcg"], 0, (function (e) { return (e % 360 + 360) % 360 })), saturationl: IA("hsl", 1, jA(100)), lightness: IA("hsl", 2, jA(100)), saturationv: IA("hsv", 1, jA(100)), value: IA("hsv", 2, jA(100)), chroma: IA("hcg", 1, jA(100)), gray: IA("hcg", 2, jA(100)), white: IA("hwb", 1, jA(100)), wblack: IA("hwb", 2, jA(100)), cyan: IA("cmyk", 0, jA(100)), magenta: IA("cmyk", 1, jA(100)), yellow: IA("cmyk", 2, jA(100)), black: IA("cmyk", 3, jA(100)), x: IA("xyz", 0, jA(100)), y: IA("xyz", 1, jA(100)), z: IA("xyz", 2, jA(100)), l: IA("lab", 0, jA(100)), a: IA("lab", 1), b: IA("lab", 2), keyword: function (e) { return arguments.length > 0 ? new AA(e) : SA[this.model].keyword(this.color) }, hex: function (e) { return arguments.length > 0 ? new AA(e) : _A.to.hex(this.rgb().round().color) }, hexa: function (e) { if (arguments.length > 0) return new AA(e); var t = this.rgb().round().color, n = Math.round(255 * this.valpha).toString(16).toUpperCase(); return 1 === n.length && (n = "0" + n), _A.to.hex(t) + n }, rgbNumber: function () { var e = this.rgb().color; return (255 & e[0]) << 16 | (255 & e[1]) << 8 | 255 & e[2] }, luminosity: function () { var e, t = [], n = T(this.rgb().color.entries()); try { for (n.s(); !(e = n.n()).done;) { var r = _(e.value, 2), i = r[0], o = r[1] / 255; t[i] = o <= .03928 ? o / 12.92 : Math.pow((o + .055) / 1.055, 2.4) } } catch (e) { n.e(e) } finally { n.f() } return .2126 * t[0] + .7152 * t[1] + .0722 * t[2] }, contrast: function (e) { var t = this.luminosity(), n = e.luminosity(); return t > n ? (t + .05) / (n + .05) : (n + .05) / (t + .05) }, level: function (e) { var t = this.contrast(e); return t >= 7.1 ? "AAA" : t >= 4.5 ? "AA" : "" }, isDark: function () { var e = this.rgb().color; return (299 * e[0] + 587 * e[1] + 114 * e[2]) / 1e3 < 128 }, isLight: function () { return !this.isDark() }, negate: function () { for (var e = this.rgb(), t = 0; t < 3; t++)e.color[t] = 255 - e.color[t]; return e }, lighten: function (e) { var t = this.hsl(); return t.color[2] += t.color[2] * e, t }, darken: function (e) { var t = this.hsl(); return t.color[2] -= t.color[2] * e, t }, saturate: function (e) { var t = this.hsl(); return t.color[1] += t.color[1] * e, t }, desaturate: function (e) { var t = this.hsl(); return t.color[1] -= t.color[1] * e, t }, whiten: function (e) { var t = this.hwb(); return t.color[1] += t.color[1] * e, t }, blacken: function (e) { var t = this.hwb(); return t.color[2] += t.color[2] * e, t }, grayscale: function () { var e = this.rgb().color, t = .3 * e[0] + .59 * e[1] + .11 * e[2]; return AA.rgb(t, t, t) }, fade: function (e) { return this.alpha(this.valpha - this.valpha * e) }, opaquer: function (e) { return this.alpha(this.valpha + this.valpha * e) }, rotate: function (e) { var t = this.hsl(), n = t.color[0]; return n = (n = (n + e) % 360) < 0 ? 360 + n : n, t.color[0] = n, t }, mix: function (e, t) { if (!e || !e.rgb) throw new Error('Argument to "mix" was not a Color instance, but rather an instance of ' + C(e)); var n = e.rgb(), r = this.rgb(), i = void 0 === t ? .5 : t, o = 2 * i - 1, a = n.alpha() - r.alpha(), s = ((o * a == -1 ? o : (o + a) / (1 + o * a)) + 1) / 2, l = 1 - s; return AA.rgb(s * n.red() + l * r.red(), s * n.green() + l * r.green(), s * n.blue() + l * r.blue(), n.alpha() * i + r.alpha() * (1 - i)) } }; for (var DA = function () { var e = RA[LA]; if (CA.includes(e)) return "continue"; var t = SA[e].channels; AA.prototype[e] = function () { if (this.model === e) return new AA(this); if (arguments.length > 0) return new AA(arguments, e); var n = "number" == typeof arguments[t] ? t : this.valpha; return new AA(FA(SA[this.model][e].raw(this.color)).concat(n), e) }, AA[e] = function (n) { return "number" == typeof n && (n = NA(kA.call(arguments), t)), new AA(n, e) } }, LA = 0, RA = Object.keys(SA); LA < RA.length; LA++)DA(); function IA(e, t, n) { var r, i = T(e = Array.isArray(e) ? e : [e]); try { for (i.s(); !(r = i.n()).done;) { var o = r.value; (MA[o] || (MA[o] = []))[t] = n } } catch (e) { i.e(e) } finally { i.f() } return e = e[0], function (r) { var i; return arguments.length > 0 ? (n && (r = n(r)), (i = this[e]()).color[t] = r, i) : (i = this[e]().color[t], n && (i = n(i)), i) } } function jA(e) { return function (t) { return Math.max(0, Math.min(e, t)) } } function FA(e) { return Array.isArray(e) ? e : [e] } function NA(e, t) { for (var n = 0; n < t; n++)"number" != typeof e[n] && (e[n] = 0); return e } var zA = AA; function BA() { var e = lw((function (e) { var t; return null == (t = e.config.ui) ? void 0 : t.activeTheme })); return lw((function (t) { var n; return ((null == (n = t.config.ui) ? void 0 : n.themes) || []).find((function (t) { return t.name === e })) })) } var VA = ce.createContext(null), UA = "flex flex-shrink-0 items-center justify-between px-12 py-[9px] w-full h-[54px]", HA = { initial: { opacity: 0 }, animate: { opacity: 1 }, exit: { opacity: 0, position: "absolute" }, transition: { type: "tween", duration: .15 } }; function WA(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, n = t.padding, r = t.equalWidth; switch (e) { case "xs": return "text-xs h-30 ".concat(r ? "w-30" : n || "px-14"); case "sm": return "text-sm h-36 ".concat(r ? "w-36" : n || "px-18"); case "lg": return "text-lg h-50 ".concat(r ? "w-50" : n || "px-26"); case "xl": return "text-xl h-60 ".concat(r ? "w-60" : n || "px-32"); case "md": return "text-base h-42 ".concat(r ? "w-42" : n || "px-22"); default: return "" } } function KA(e) { switch (e) { case "xs": return "icon-xs"; case "sm": return "icon-sm"; case "md": return "icon-md"; case "lg": return "icon-lg"; case "xl": return "icon-xl"; default: return "" } } function YA(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } var XA = {}; function GA(e) { if ("virtual" === yO()) { var t = document.activeElement; aE((function () { document.activeElement === t && document.contains(e) && QT(e) })) } else QT(e) } function qA(e, t) { return "#comment" !== e.nodeName && function (e) { if (!(e instanceof HTMLElement || e instanceof SVGElement)) return !1; var t = e.style, n = t.display, r = t.visibility, i = "none" !== n && "hidden" !== r && "collapse" !== r; if (i) { var o = (0, e.ownerDocument.defaultView.getComputedStyle)(e), a = o.display, s = o.visibility; i = "none" !== a && "hidden" !== s && "collapse" !== s } return i }(e) && function (e, t) { return !e.hasAttribute("hidden") && ("DETAILS" !== e.nodeName || !t || "SUMMARY" === t.nodeName || e.hasAttribute("open")) }(e, t) && (!e.parentElement || qA(e.parentElement, e)) } YA(XA, "FocusScope", (function () { return QA })), YA(XA, "useFocusManager", (function () { return eD })), YA(XA, "getFocusableTreeWalker", (function () { return cD })), YA(XA, "createFocusManager", (function () { return fD })), YA({}, "focusSafely", (function () { return GA })); var JA = ce.createContext(null), ZA = null, $A = new Map; function QA(e) { var t = e.children, n = e.contain, r = e.restoreFocus, i = e.autoFocus, o = h.exports.useRef(), a = h.exports.useRef(), s = h.exports.useRef([]), l = h.exports.useContext(JA), u = null == l ? void 0 : l.scopeRef; UT((function () { for (var e = o.current.nextSibling, t = []; e && e !== a.current;)t.push(e), e = e.nextSibling; s.current = t }), [t, u]), UT((function () { return $A.set(s, u), function () { (s === ZA || sD(s, ZA)) && (!u || $A.has(u)) && (ZA = u), $A.delete(s) } }), [s, u]), function (e, t) { var n = h.exports.useRef(), r = h.exports.useRef(null); UT((function () { var i = e.current; if (t) { var o = function (t) { if (!("Tab" !== t.key || t.altKey || t.ctrlKey || t.metaKey || e !== ZA)) { var n = document.activeElement, r = e.current; if (oD(n, r)) { var i = cD(iD(r), { tabbable: !0 }, r); i.currentNode = n; var o = t.shiftKey ? i.previousNode() : i.nextNode(); o || (i.currentNode = t.shiftKey ? r[r.length - 1].nextElementSibling : r[0].previousElementSibling, o = t.shiftKey ? i.previousNode() : i.nextNode()), t.preventDefault(), o && lD(o, !0) } } }, a = function (t) { !ZA || sD(ZA, e) ? (ZA = e, n.current = t.target) : e !== ZA || aD(t.target, e) ? e === ZA && (n.current = t.target) : n.current ? n.current.focus() : ZA && uD(ZA.current) }, s = function (t) { r.current = requestAnimationFrame((function () { e === ZA && !aD(document.activeElement, e) && (ZA = e, n.current = t.target, n.current.focus()) })) }; return document.addEventListener("keydown", o, !1), document.addEventListener("focusin", a, !1), i.forEach((function (e) { return e.addEventListener("focusin", a, !1) })), i.forEach((function (e) { return e.addEventListener("focusout", s, !1) })), function () { document.removeEventListener("keydown", o, !1), document.removeEventListener("focusin", a, !1), i.forEach((function (e) { return e.removeEventListener("focusin", a, !1) })), i.forEach((function (e) { return e.removeEventListener("focusout", s, !1) })) } } }), [e, t]), h.exports.useEffect((function () { return function () { return cancelAnimationFrame(r.current) } }), [r]) }(s, n), function (e, t, n) { var r = h.exports.useRef("undefined" != typeof document ? document.activeElement : null); UT((function () { var i = r.current; if (t) { var o = function (t) { if (!("Tab" !== t.key || t.altKey || t.ctrlKey || t.metaKey)) { var n = document.activeElement; if (oD(n, e.current)) { var r = cD(document.body, { tabbable: !0 }); r.currentNode = n; var o = t.shiftKey ? r.previousNode() : r.nextNode(); if ((!document.body.contains(i) || i === document.body) && (i = null), (!o || !oD(o, e.current)) && i) { r.currentNode = i; do { o = t.shiftKey ? r.previousNode() : r.nextNode() } while (oD(o, e.current)); t.preventDefault(), t.stopPropagation(), o ? lD(o, !0) : function (e) { var t, n = T($A.keys()); try { for (n.s(); !(t = n.n()).done;)if (oD(e, t.value.current)) return !0 } catch (e) { n.e(e) } finally { n.f() } return !1 }(i) ? lD(i, !0) : n.blur() } } } }; return n || document.addEventListener("keydown", o, !0), function () { n || document.removeEventListener("keydown", o, !0), t && i && oD(document.activeElement, e.current) && requestAnimationFrame((function () { document.body.contains(i) && lD(i) })) } } }), [e, t, n]) }(s, r, n), function (e, t) { var n = ce.useRef(t); h.exports.useEffect((function () { n.current && (ZA = e, oD(document.activeElement, ZA.current) || uD(e.current)), n.current = !1 }), []) }(s, i); var c = function (e) { return { focusNext: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = e.current, r = t.from, i = t.tabbable, o = t.wrap, a = r || document.activeElement, s = n[0].previousElementSibling, l = cD(iD(n), { tabbable: i }, n); l.currentNode = oD(a, n) ? a : s; var u = l.nextNode(); return !u && o && (l.currentNode = s, u = l.nextNode()), u && lD(u, !0), u }, focusPrevious: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = e.current, r = t.from, i = t.tabbable, o = t.wrap, a = r || document.activeElement, s = n[n.length - 1].nextElementSibling, l = cD(iD(n), { tabbable: i }, n); l.currentNode = oD(a, n) ? a : s; var u = l.previousNode(); return !u && o && (l.currentNode = s, u = l.previousNode()), u && lD(u, !0), u }, focusFirst: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = e.current, r = t.tabbable, i = cD(iD(n), { tabbable: r }, n); i.currentNode = n[0].previousElementSibling; var o = i.nextNode(); return o && lD(o, !0), o }, focusLast: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = e.current, r = t.tabbable, i = cD(iD(n), { tabbable: r }, n); i.currentNode = n[n.length - 1].nextElementSibling; var o = i.previousNode(); return o && lD(o, !0), o } } }(s); return ce.createElement(JA.Provider, { value: { scopeRef: s, focusManager: c } }, ce.createElement("span", { "data-focus-scope-start": !0, hidden: !0, ref: o }), t, ce.createElement("span", { "data-focus-scope-end": !0, hidden: !0, ref: a })) } function eD() { var e; return null === (e = h.exports.useContext(JA)) || void 0 === e ? void 0 : e.focusManager } var tD = ["input:not([disabled]):not([type=hidden])", "select:not([disabled])", "textarea:not([disabled])", "button:not([disabled])", "a[href]", "area[href]", "summary", "iframe", "object", "embed", "audio[controls]", "video[controls]", "[contenteditable]"], nD = tD.join(":not([hidden]),") + ",[tabindex]:not([disabled]):not([hidden])"; tD.push('[tabindex]:not([tabindex="-1"]):not([disabled])'); var rD = tD.join(':not([hidden]):not([tabindex="-1"]),'); function iD(e) { return e[0].parentElement } function oD(e, t) { return t.some((function (t) { return t.contains(e) })) } function aD(e, t) { var n, r = T($A.keys()); try { for (r.s(); !(n = r.n()).done;) { var i = n.value; if ((i === t || sD(t, i)) && oD(e, i.current)) return !0 } } catch (e) { r.e(e) } finally { r.f() } return !1 } function sD(e, t) { var n = $A.get(t); return !!n && (n === e || sD(e, n)) } function lD(e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; if (null == e || t) { if (null != e) try { e.focus() } catch (e) { } } else try { GA(e) } catch (e) { } } function uD(e) { var t = e[0].previousElementSibling, n = cD(iD(e), { tabbable: !0 }, e); n.currentNode = t, lD(n.nextNode()) } function cD(e, t, n) { var r = (null == t ? void 0 : t.tabbable) ? rD : nD, i = document.createTreeWalker(e, NodeFilter.SHOW_ELEMENT, { acceptNode: function (e) { var i; return (null == t || null === (i = t.from) || void 0 === i ? void 0 : i.contains(e)) ? NodeFilter.FILTER_REJECT : e.matches(r) && qA(e) && (!n || oD(e, n)) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP } }); return (null == t ? void 0 : t.from) && (i.currentNode = t.from), i } function fD(e) { return { focusNext: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = e.current, r = t.from, i = t.tabbable, o = t.wrap, a = r || document.activeElement, s = cD(n, { tabbable: i }); n.contains(a) && (s.currentNode = a); var l = s.nextNode(); return !l && o && (s.currentNode = n, l = s.nextNode()), l && lD(l, !0), l }, focusPrevious: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = e.current, r = t.from, i = t.tabbable, o = t.wrap, a = r || document.activeElement, s = cD(n, { tabbable: i }); if (!n.contains(a)) { var l = hD(s); return l && lD(l, !0), l } s.currentNode = a; var u = s.previousNode(); return !u && o && (s.currentNode = n, u = hD(s)), u && lD(u, !0), u }, focusFirst: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = e.current, r = t.tabbable, i = cD(n, { tabbable: r }).nextNode(); return i && lD(i, !0), i }, focusLast: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = e.current, r = t.tabbable, i = cD(n, { tabbable: r }), o = hD(i); return o && lD(o, !0), o } } } function hD(e) { var t, n; do { (n = e.lastChild()) && (t = n) } while (n); return t } function dD() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = e.autoFocus, n = void 0 !== t && t, r = e.isTextInput, i = e.within, o = h.exports.useRef({ isFocused: !1, isFocusVisible: n || mO() }).current, a = h.exports.useState(!1), s = _(a, 2), l = s[0], u = s[1], c = h.exports.useState((function () { return o.isFocused && o.isFocusVisible })), f = _(c, 2), d = f[0], p = f[1], v = function () { return p(o.isFocused && o.isFocusVisible) }, g = function (e) { o.isFocused = e, u(e), v() }; _O((function (e) { o.isFocusVisible = e, v() }), [], { isTextInput: r }); var m = nO({ isDisabled: i, onFocusChange: g }), y = m.focusProps, b = SO({ isDisabled: !i, onFocusWithinChange: g }), w = b.focusWithinProps; return { isFocused: l, isFocusVisible: o.isFocused && d, focusProps: i ? w : y } } function pD(e) { var t, n = e.children, r = e.focusClass, i = e.focusRingClass, o = dD(e), a = o.isFocused, s = o.isFocusVisible, l = o.focusProps, u = ce.Children.only(n); return ce.cloneElement(u, GT(u.props, N(F({}, l), { className: CT((t = {}, k(t, r || "", a), k(t, i || "", s), t)) }))) } YA({}, "FocusRing", (function () { return pD })), YA({}, "useFocusRing", (function () { return dD })); var vD = {}; YA(vD, "FocusableProvider", (function () { return mD })), YA(vD, "useFocusable", (function () { return yD })); var gD = ce.createContext(null), mD = ce.forwardRef((function (e, t) { var n = e, r = n.children, i = z(n, ["children"]), o = N(F({}, i), { ref: t }); return ce.createElement(gD.Provider, { value: o }, r) })); function yD(e, t) { var n = GT(nO(e).focusProps, LO(e).keyboardProps), r = function (e) { var t = h.exports.useContext(gD) || {}; pE(t, e); var n = t; return n.ref, z(n, ["ref"]) }(t), i = e.isDisabled ? {} : r, o = h.exports.useRef(e.autoFocus); return h.exports.useEffect((function () { o.current && t.current && t.current.focus(), o.current = !1 }), []), { focusableProps: GT(N(F({}, n), { tabIndex: e.excludeFromTabOrder && !e.isDisabled ? -1 : void 0 }), i) } } function bD(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } function wD(e, t) { var n, r = e.elementType, i = void 0 === r ? "button" : r, o = e.isDisabled, a = e.onPress, s = e.onPressStart, l = e.onPressEnd, u = e.onPressChange, c = e.preventFocusOnPress, f = e.allowFocusWhenDisabled, h = e.onClick, d = e.href, p = e.target, v = e.rel, g = e.type, m = void 0 === g ? "button" : g; n = "button" === i ? { type: m, disabled: o } : { role: "button", tabIndex: o ? void 0 : 0, href: "a" === i && o ? void 0 : d, target: "a" === i ? p : void 0, type: "input" === i ? m : void 0, disabled: "input" === i ? o : void 0, "aria-disabled": o && "input" !== i ? o : void 0, rel: "a" === i ? v : void 0 }; var y = YE({ onPressStart: s, onPressEnd: l, onPressChange: u, onPress: a, isDisabled: o, preventFocusOnPress: c, ref: t }), b = y.pressProps, w = y.isPressed, x = yD(e, t).focusableProps; f && (x.tabIndex = o ? -1 : x.tabIndex); var _ = GT(x, b, $T(e, { labelable: !0 })); return { isPressed: w, buttonProps: GT(n, _, { "aria-haspopup": e["aria-haspopup"], "aria-expanded": e["aria-expanded"], "aria-controls": e["aria-controls"], "aria-pressed": e["aria-pressed"], onClick: function (e) { h && (h(e), console.warn("onClick is deprecated, please use onPress")) } }) } } function xD(e, t, n) { var r = t.isSelected, i = wD(N(F({}, e), { onPress: XT(t.toggle, e.onPress) }), n); return { isPressed: i.isPressed, buttonProps: GT(i.buttonProps, { "aria-pressed": r }) } } function _D(e, t) { var n = []; return "outline" === e ? n = function (e) { var t = "disabled:text-disabled disabled:bg-transparent disabled:border-disabled-bg"; switch (e) { case "primary": return ["text-primary bg-transparent border border-primary/50", "hover:bg-primary/hover hover:border-primary", t]; case "error": return ["text-error bg-transparent border border-error/50", "hover:bg-error/4 hover:border-error", t]; case "paper": return ["text bg-paper border", "hover:bg-hover", t]; default: return ["text-current bg-transparent border", "hover:bg-hover", t] } }(t) : "text" === e ? n = function (e) { var t = "disabled:text-disabled disabled:bg-transparent"; switch (e) { case "primary": return ["text-primary bg-transparent border-transparent", "hover:bg-primary/4", t]; case "error": return ["text-error bg-transparent border-transparent", "hover:bg-error/4", t]; default: return ["text-current bg-transparent border-transparent", "hover:bg-hover", t] } }(t) : ("flat" === e || "raised" === e) && (n = function (e) { var t = "disabled:text-disabled disabled:bg-disabled disabled:border-transparent disabled:shadow-none"; switch (e) { case "primary": return ["text-on-primary bg-primary border border-primary", "hover:bg-primary-dark hover:border-primary-dark", t]; case "error": return ["text-on-error bg-error border border-error", "hover:bg-error/90 hover:border-error/90", t]; default: return ["text-current bg border-background", "hover:bg-hover", t] } }(t)), [].concat(S(n), ["raised" === e && "shadow-md", e && "align-middle whitespace-nowrap inline-flex items-center transition-button duration-200", "select-none appearance-none no-underline outline-none disabled:pointer-events-none disabled:cursor-default"]) } bD({}, "useButton", (function () { return wD })), bD({}, "useToggleButton", (function () { return xD })); var SD = ce.forwardRef((function (e, t) { var n = e.children, r = e.color, i = void 0 === r ? null : r, o = e.variant, a = e.radius, s = e.justify, l = void 0 === s ? "justify-center" : s, u = e.className, c = e.href, f = e.style, h = dD(), d = h.isFocusVisible, p = h.focusProps, v = wD(N(F({}, e), { elementType: c ? "a" : "button" }), t), g = v.buttonProps, m = v.isPressed; return ky(c ? "a" : "button", N(F({}, GT(g, p)), { ref: t, style: f, className: CT(m && "translate-y-1", d && "outline outline-offset-2", _D(o, i), a, l, u), children: n })) })), kD = ce.forwardRef((function (e, t) { var n = e, r = n.children, i = n.startIcon, o = n.endIcon, a = n.size, s = n.className, l = n.equalWidth, u = void 0 !== l && l, c = n.radius, f = void 0 === c ? "rounded" : c, h = n.variant, d = void 0 === h ? "flat" : h, p = z(n, ["children", "startIcon", "endIcon", "size", "className", "equalWidth", "radius", "variant"]), v = CT("font-semibold", WA(a, { equalWidth: u }), s), g = KA(a); return Cy(SD, N(F({ className: v, ref: t, radius: f, variant: d }, p), { children: [i && ky(CD, { position: "start", icon: i, size: g }), r, o && ky(CD, { position: "end", icon: o, size: g })] })) })); function CD(e) { var t = e.icon, n = e.position, r = CT("m-auto", e.size, { "-ml-4 mr-8": "start" === n, "-mr-4 ml-8": "end" === n }, t.props.className); return ce.cloneElement(t, { className: r }) } function TD(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } function ED(e) { return null } function OD(e) { return null != e.hasChildItems ? e.hasChildItems : !!(e.childItems || e.title && ce.Children.count(e.children) > 0) } TD({}, "Item", (function () { return PD })), ED.getCollectionNode = b().mark((function e(t, n) { var r, i, o, a, s; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return r = t.childItems, i = t.title, o = t.children, a = t.title || t.children, !(s = t.textValue || ("string" == typeof a ? a : "") || t["aria-label"] || "") && !(null == n ? void 0 : n.suppressTextValueWarning) && console.warn("<Item> with non-plain text contents is unsupported by type to select for accessibility. Please add a `textValue` prop."), e.next = 4, { type: "item", props: t, rendered: a, textValue: s, "aria-label": t["aria-label"], hasChildNodes: OD(t), childNodes: b().mark((function e() { var t, n, a, s; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (!r) { e.next = 20; break } t = T(r), e.prev = 2, t.s(); case 4: if ((n = t.n()).done) { e.next = 10; break } return a = n.value, e.next = 8, { type: "item", value: a }; case 8: e.next = 4; break; case 10: e.next = 15; break; case 12: e.prev = 12, e.t0 = e.catch(2), t.e(e.t0); case 15: return e.prev = 15, t.f(), e.finish(15); case 18: e.next = 24; break; case 20: if (!i) { e.next = 24; break } return s = [], ce.Children.forEach(o, (function (e) { s.push({ type: "item", element: e }) })), e.delegateYield(s, "t1", 24); case 24: case "end": return e.stop() } }), e, null, [[2, 12, 15, 18]]) })) }; case 4: case "end": return e.stop() } }), e) })); var PD = ED; function MD(e) { return null } TD({}, "Section", (function () { return AD })), MD.getCollectionNode = b().mark((function e(t) { var n, r, i; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return n = t.children, r = t.title, i = t.items, e.next = 3, { type: "section", hasChildNodes: !0, rendered: r, "aria-label": t["aria-label"], childNodes: b().mark((function e() { var t, r, o, a; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if ("function" != typeof n) { e.next = 22; break } if (i) { e.next = 3; break } throw new Error("props.children was a function but props.items is missing"); case 3: t = T(i), e.prev = 4, t.s(); case 6: if ((r = t.n()).done) { e.next = 12; break } return o = r.value, e.next = 10, { type: "item", value: o, renderer: n }; case 10: e.next = 6; break; case 12: e.next = 17; break; case 14: e.prev = 14, e.t0 = e.catch(4), t.e(e.t0); case 17: return e.prev = 17, t.f(), e.finish(17); case 20: e.next = 25; break; case 22: return a = [], ce.Children.forEach(n, (function (e) { a.push({ type: "item", element: e }) })), e.delegateYield(a, "t1", 25); case 25: case "end": return e.stop() } }), e, null, [[4, 14, 17, 20]]) })) }; case 3: case "end": return e.stop() } }), e) })); var AD = MD; TD({}, "useCollection", (function () { return jD })); var DD = function () { function e() { g(this, e), this.cache = new WeakMap } return y(e, [{ key: "build", value: function (e, t) { var n = this; return this.context = t, LD((function () { return n.iterateCollection(e) })) } }, { key: "iterateCollection", value: b().mark((function e(t) { var n, r, i, o, a, s, l, u, c, f, h, d, p, v; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (n = t.children, r = t.items, "function" != typeof n) { e.next = 22; break } if (r) { e.next = 4; break } throw new Error("props.children was a function but props.items is missing"); case 4: i = T(t.items), e.prev = 5, i.s(); case 7: if ((o = i.n()).done) { e.next = 12; break } return a = o.value, e.delegateYield(this.getFullNode({ value: a }, { renderer: n }), "t0", 10); case 10: e.next = 7; break; case 12: e.next = 17; break; case 14: e.prev = 14, e.t1 = e.catch(5), i.e(e.t1); case 17: return e.prev = 17, i.f(), e.finish(17); case 20: e.next = 50; break; case 22: s = [], ce.Children.forEach(n, (function (e) { s.push(e) })), l = 0, u = 0, c = s; case 26: if (!(u < c.length)) { e.next = 50; break } f = c[u], h = this.getFullNode({ element: f, index: l }, {}), d = T(h), e.prev = 30, d.s(); case 32: if ((p = d.n()).done) { e.next = 39; break } return v = p.value, l++, e.next = 37, v; case 37: e.next = 32; break; case 39: e.next = 44; break; case 41: e.prev = 41, e.t2 = e.catch(30), d.e(e.t2); case 44: return e.prev = 44, d.f(), e.finish(44); case 47: u++, e.next = 26; break; case 50: case "end": return e.stop() } }), e, this, [[5, 14, 17, 20], [30, 41, 44, 47]]) })) }, { key: "getKey", value: function (e, t, n, r) { if (null != e.key) return e.key; if ("cell" === t.type && null != t.key) return "".concat(r).concat(t.key); var i = t.value; if (null != i) { var o, a = null !== (o = i.key) && void 0 !== o ? o : i.id; if (null == a) throw new Error("No key found for item"); return a } return r ? "".concat(r, ".").concat(t.index) : "$.".concat(t.index) } }, { key: "getChildState", value: function (e, t) { return { renderer: t.renderer || e.renderer } } }, { key: "getFullNode", value: b().mark((function e(t, n, r, i) { var o, a, s, l, u, c, f, h, d, p, v, g, m, y, w; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if ((o = t.element) || !t.value || !n || !n.renderer) { e.next = 10; break } if (!(a = this.cache.get(t.value)) || a.shouldInvalidate && a.shouldInvalidate(this.context)) { e.next = 9; break } return a.index = t.index, a.parentKey = i ? i.key : null, e.next = 8, a; case 8: return e.abrupt("return"); case 9: o = n.renderer(t.value); case 10: if (!ce.isValidElement(o)) { e.next = 46; break } if ("function" == typeof (s = o.type) || "function" == typeof s.getCollectionNode) { e.next = 15; break } throw l = "function" == typeof o.type ? o.type.name : o.type, new Error("Unknown element <".concat(l, "> in collection.")); case 15: u = s.getCollectionNode(o.props, this.context), c = t.index, f = u.next(); case 16: if (f.done || !f.value) { e.next = 45; break } h = f.value, t.index = c, (d = h.key) || (d = h.element ? null : this.getKey(o, t, n, r)), p = S(this.getFullNode(N(F({}, h), { key: d, index: c, wrapper: RD(t.wrapper, h.wrapper) }), this.getChildState(n, h), r ? "".concat(r).concat(o.key) : o.key, i)), v = T(p), e.prev = 23, v.s(); case 25: if ((g = v.n()).done) { e.next = 34; break } if ((m = g.value).value = h.value || t.value, m.value && this.cache.set(m.value, m), !t.type || m.type === t.type) { e.next = 29; break } throw new Error("Unsupported type <".concat(ID(m.type), "> in <").concat(ID(i.type), ">. Only <").concat(ID(t.type), "> is supported.")); case 29: return c++, e.next = 32, m; case 32: e.next = 25; break; case 34: e.next = 39; break; case 36: e.prev = 36, e.t0 = e.catch(23), v.e(e.t0); case 39: return e.prev = 39, v.f(), e.finish(39); case 42: f = u.next(p); case 43: e.next = 16; break; case 45: return e.abrupt("return"); case 46: if (null != t.key) { e.next = 48; break } return e.abrupt("return"); case 48: return y = this, w = { type: t.type, props: t.props, key: t.key, parentKey: i ? i.key : null, value: t.value, level: i ? i.level + 1 : 0, index: t.index, rendered: t.rendered, textValue: t.textValue, "aria-label": t["aria-label"], wrapper: t.wrapper, shouldInvalidate: t.shouldInvalidate, hasChildNodes: t.hasChildNodes, childNodes: LD(b().mark((function e() { var r, i, o, a, s, l, u, c; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (t.hasChildNodes) { e.next = 2; break } return e.abrupt("return"); case 2: r = 0, i = T(t.childNodes()), e.prev = 4, i.s(); case 6: if ((o = i.n()).done) { e.next = 30; break } null != (a = o.value).key && (a.key = "".concat(w.key).concat(a.key)), a.index = r, s = y.getFullNode(a, y.getChildState(n, a), w.key, w), l = T(s), e.prev = 11, l.s(); case 13: if ((u = l.n()).done) { e.next = 20; break } return c = u.value, r++, e.next = 18, c; case 18: e.next = 13; break; case 20: e.next = 25; break; case 22: e.prev = 22, e.t0 = e.catch(11), l.e(e.t0); case 25: return e.prev = 25, l.f(), e.finish(25); case 28: e.next = 6; break; case 30: e.next = 35; break; case 32: e.prev = 32, e.t1 = e.catch(4), i.e(e.t1); case 35: return e.prev = 35, i.f(), e.finish(35); case 38: case "end": return e.stop() } }), e, null, [[4, 32, 35, 38], [11, 22, 25, 28]]) }))) }, e.next = 51, w; case 51: case "end": return e.stop() } }), e, this, [[23, 36, 39, 42]]) })) }]), e }(); function LD(e) { var t = [], n = null; return k({}, Symbol.iterator, b().mark((function r() { var i, o, a, s, l, u; return b().wrap((function (r) { for (; ;)switch (r.prev = r.next) { case 0: i = T(t), r.prev = 1, i.s(); case 3: if ((o = i.n()).done) { r.next = 9; break } return a = o.value, r.next = 7, a; case 7: r.next = 3; break; case 9: r.next = 14; break; case 11: r.prev = 11, r.t0 = r.catch(1), i.e(r.t0); case 14: return r.prev = 14, i.f(), r.finish(14); case 17: n || (n = e()), s = T(n), r.prev = 19, s.s(); case 21: if ((l = s.n()).done) { r.next = 28; break } return u = l.value, t.push(u), r.next = 26, u; case 26: r.next = 21; break; case 28: r.next = 33; break; case 30: r.prev = 30, r.t1 = r.catch(19), s.e(r.t1); case 33: return r.prev = 33, s.f(), r.finish(33); case 36: case "end": return r.stop() } }), r, null, [[1, 11, 14, 17], [19, 30, 33, 36]]) }))) } function RD(e, t) { return e && t ? function (n) { return e(t(n)) } : e || t || void 0 } function ID(e) { return e[0].toUpperCase() + e.slice(1) } function jD(e, t, n) { var r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : [], i = h.exports.useMemo((function () { return new DD }), []), o = h.exports.useRef(null); return h.exports.useMemo((function () { var r = i.build(e, n); return o.current = t(r, o.current), o.current }), [i, e.children, e.items, n].concat(S(r))) } TD({}, "getItemCount", (function () { return ND })); var FD = new WeakMap; function ND(e) { var t = FD.get(e); if (null != t) return t; t = 0; var n, r = T(e); try { for (r.s(); !(n = r.n()).done;) { var i = n.value; "section" === i.type ? t += ND(i.childNodes) : t++ } } catch (e) { r.e(e) } finally { r.f() } return FD.set(e, t), t } function zD(e) { var t = _(IT(e.isOpen, e.defaultOpen || !1, e.onOpenChange), 2), n = t[0], r = t[1]; return { isOpen: n, open: function () { r(!0) }, close: function () { r(!1) }, toggle: function () { r(!n) } } } function BD(e) { var t = zD(e), n = _(h.exports.useState(null), 2), r = n[0], i = n[1]; return N(F({ focusStrategy: r }, t), { open: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; i(e), t.open() }, toggle: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; i(e), t.toggle() } }) } function VD(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } Object.defineProperty({}, "useOverlayTriggerState", { get: function () { return zD }, set: void 0, enumerable: !0, configurable: !0 }), Object.defineProperty({}, "useMenuTriggerState", { get: function () { return BD }, set: void 0, enumerable: !0, configurable: !0 }), VD({}, "MessageDictionary", (function () { return UD })); var UD = function () { function e(t) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "en-US"; g(this, e), this.messages = F({}, t), this.defaultLocale = n } return y(e, [{ key: "getStringForLocale", value: function (e, t) { var n = this.messages[t]; n || (n = function (e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "en-US"; if (t[e]) return t[e]; var r = HD(e); for (var i in t) if (i.startsWith(r + "-")) return t[i]; return t[n] }(t, this.messages, this.defaultLocale), this.messages[t] = n); var r = n[e]; if (!r) throw new Error("Could not find intl message ".concat(e, " in ").concat(t, " locale")); return r } }]), e }(); function HD(e) { return Intl.Locale ? new Intl.Locale(e).language : e.split("-")[0] } VD({}, "MessageFormatter", (function () { return WD })); var WD = function () { function e(t, n) { g(this, e), this.locale = t, this.messages = n, this.cache = {} } return y(e, [{ key: "format", value: function (e, t) { var n, r = this.cache[e]; if (!r) { var i = this.messages.getStringForLocale(e, this.locale); if (!i) throw new Error("Could not find intl message ".concat(e, " in ").concat(this.locale, " locale")); r = new sm(i, this.locale), this.cache[e] = r } return t && (n = Object.keys(t).reduce((function (e, n) { return e[n] = null != t[n] && t[n], e }), {})), r.format(n) } }]), e }(); function KD(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } var YD = {}; KD(YD, "CalendarDate", (function () { return BR })), KD(YD, "Time", (function () { return UR })), KD(YD, "CalendarDateTime", (function () { return WR })), KD(YD, "ZonedDateTime", (function () { return YR })); var XD = {}; KD(XD, "epochFromDate", (function () { return RL })), KD(XD, "toCalendar", (function () { return $L })), KD(XD, "getTimeZoneOffset", (function () { return jL })), KD(XD, "possibleAbsolutes", (function () { return BL })), KD(XD, "toAbsolute", (function () { return UL })), KD(XD, "toCalendarDateTime", (function () { return JL })), KD(XD, "toDate", (function () { return HL })), KD(XD, "fromAbsolute", (function () { return WL })), KD(XD, "fromDate", (function () { return KL })), KD(XD, "fromDateToLocal", (function () { return YL })), KD(XD, "toCalendarDate", (function () { return XL })), KD(XD, "toDateFields", (function () { return GL })), KD(XD, "toTimeFields", (function () { return qL })), KD(XD, "toTime", (function () { return ZL })), KD(XD, "toZoned", (function () { return QL })), KD(XD, "toTimeZone", (function () { return tR })), KD(XD, "zonedToDate", (function () { return eR })), KD(XD, "toLocalTimeZone", (function () { return nR })); var GD = {}; KD(GD, "isSameDay", (function () { return JD })), KD(GD, "isSameMonth", (function () { return ZD })), KD(GD, "startOfMonth", (function () { return hL })), KD(GD, "isSameYear", (function () { return $D })), KD(GD, "startOfYear", (function () { return pL })), KD(GD, "isEqualDay", (function () { return QD })), KD(GD, "isEqualMonth", (function () { return eL })), KD(GD, "isEqualYear", (function () { return tL })), KD(GD, "isToday", (function () { return nL })), KD(GD, "today", (function () { return oL })), KD(GD, "getDayOfWeek", (function () { return rL })), KD(GD, "now", (function () { return iL })), KD(GD, "compareDate", (function () { return aL })), KD(GD, "compareTime", (function () { return sL })), KD(GD, "getHoursInDay", (function () { return uL })), KD(GD, "getLocalTimeZone", (function () { return fL })), KD(GD, "endOfMonth", (function () { return dL })), KD(GD, "endOfYear", (function () { return vL })), KD(GD, "getMinimumMonthInYear", (function () { return gL })), KD(GD, "getMinimumDayInMonth", (function () { return mL })), KD(GD, "startOfWeek", (function () { return yL })), KD(GD, "endOfWeek", (function () { return bL })), KD(GD, "getWeeksInMonth", (function () { return _L })), KD(GD, "minDate", (function () { return SL })), KD(GD, "maxDate", (function () { return kL })), KD(GD, "isWeekend", (function () { return TL })), KD(GD, "isWeekday", (function () { return EL })); var qD = { "001": 1, AD: 1, AE: 6, AF: 6, AI: 1, AL: 1, AM: 1, AN: 1, AT: 1, AX: 1, AZ: 1, BA: 1, BE: 1, BG: 1, BH: 6, BM: 1, BN: 1, BY: 1, CH: 1, CL: 1, CM: 1, CR: 1, CY: 1, CZ: 1, DE: 1, DJ: 6, DK: 1, DZ: 6, EC: 1, EE: 1, EG: 6, ES: 1, FI: 1, FJ: 1, FO: 1, FR: 1, GB: 1, GE: 1, GF: 1, GP: 1, GR: 1, HR: 1, HU: 1, IE: 1, IQ: 6, IR: 6, IS: 1, IT: 1, JO: 6, KG: 1, KW: 6, KZ: 1, LB: 1, LI: 1, LK: 1, LT: 1, LU: 1, LV: 1, LY: 6, MC: 1, MD: 1, ME: 1, MK: 1, MN: 1, MQ: 1, MV: 5, MY: 1, NL: 1, NO: 1, NZ: 1, OM: 6, PL: 1, QA: 6, RE: 1, RO: 1, RS: 1, RU: 1, SD: 6, SE: 1, SI: 1, SK: 1, SM: 1, SY: 6, TJ: 1, TM: 1, TR: 1, UA: 1, UY: 1, UZ: 1, VA: 1, VN: 1, XK: 1 }; function JD(e, t) { return t = $L(t, e.calendar), e.era === t.era && e.year === t.year && e.month === t.month && e.day === t.day } function ZD(e, t) { return t = $L(t, e.calendar), e = hL(e), t = hL(t), e.era === t.era && e.year === t.year && e.month === t.month } function $D(e, t) { return t = $L(t, e.calendar), e = pL(e), t = pL(t), e.era === t.era && e.year === t.year } function QD(e, t) { return e.calendar.identifier === t.calendar.identifier && e.era === t.era && e.year === t.year && e.month === t.month && e.day === t.day } function eL(e, t) { return e = hL(e), t = hL(t), e.calendar.identifier === t.calendar.identifier && e.era === t.era && e.year === t.year && e.month === t.month } function tL(e, t) { return e = pL(e), t = pL(t), e.calendar.identifier === t.calendar.identifier && e.era === t.era && e.year === t.year } function nL(e, t) { return JD(e, oL(t)) } function rL(e, t) { var n = e.calendar.toJulianDay(e), r = Math.ceil(n + 1 - function (e) { var t = xL(e); return qD[t] || 0 }(t)) % 7; return r < 0 && (r += 7), r } function iL(e) { return WL(Date.now(), e) } function oL(e) { return XL(iL(e)) } function aL(e, t) { return e.calendar.toJulianDay(e) - t.calendar.toJulianDay(t) } function sL(e, t) { return lL(e) - lL(t) } function lL(e) { return 36e5 * e.hour + 6e4 * e.minute + 1e3 * e.second + e.millisecond } function uL(e, t) { var n = UL(e, t); return (UL(e.add({ days: 1 }), t) - n) / 36e5 } var cL = null; function fL() { return null == cL && (cL = (new Intl.DateTimeFormat).resolvedOptions().timeZone), cL } function hL(e) { return e.subtract({ days: e.day - 1 }) } function dL(e) { return e.add({ days: e.calendar.getDaysInMonth(e) - e.day }) } function pL(e) { return hL(e.subtract({ months: e.month - 1 })) } function vL(e) { return dL(e.add({ months: e.calendar.getMonthsInYear(e) - e.month })) } function gL(e) { return e.calendar.getMinimumMonthInYear ? e.calendar.getMinimumMonthInYear(e) : 1 } function mL(e) { return e.calendar.getMinimumDayInMonth ? e.calendar.getMinimumDayInMonth(e) : 1 } function yL(e, t) { var n = rL(e, t); return e.subtract({ days: n }) } function bL(e, t) { return yL(e, t).add({ days: 6 }) } var wL = new Map; function xL(e) { if (Intl.Locale) { var t = wL.get(e); return t || (t = new Intl.Locale(e).maximize().region, wL.set(e, t)), t } var n = e.split("-")[1]; return "u" === n ? null : n } function _L(e, t) { var n = e.calendar.getDaysInMonth(e); return Math.ceil((rL(hL(e), t) + n) / 7) } function SL(e, t) { return e.compare(t) <= 0 ? e : t } function kL(e, t) { return e.compare(t) >= 0 ? e : t } var CL = { AF: [4, 5], AE: [5, 6], BH: [5, 6], DZ: [5, 6], EG: [5, 6], IL: [5, 6], IQ: [5, 6], IR: [5, 5], JO: [5, 6], KW: [5, 6], LY: [5, 6], OM: [5, 6], QA: [5, 6], SA: [5, 6], SD: [5, 6], SY: [5, 6], YE: [5, 6] }; function TL(e, t) { var n = e.calendar.toJulianDay(e), r = Math.ceil(n + 1) % 7; r < 0 && (r += 7); var i = xL(t), o = _(CL[i] || [6, 0], 2), a = o[0], s = o[1]; return r === a || r === s } function EL(e, t) { return !TL(e, t) } function OL(e, t) { return e - t * Math.floor(e / t) } var PL = 1721426; function ML(e, t, n) { var r = e - 1, i = -2; return t <= 2 ? i = 0 : AL(e) && (i = -1), PL - 1 + 365 * r + Math.floor(r / 4) - Math.floor(r / 100) + Math.floor(r / 400) + Math.floor((367 * t - 362) / 12 + i + n) } function AL(e) { return e % 4 == 0 && (e % 100 != 0 || e % 400 == 0) } var DL = { standard: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], leapyear: [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31] }, LL = function () { function e() { g(this, e), this.identifier = "gregory" } return y(e, [{ key: "fromJulianDay", value: function (e) { var t = e, n = t - PL, r = Math.floor(n / 146097), i = OL(n, 146097), o = Math.floor(i / 36524), a = OL(i, 36524), s = Math.floor(a / 1461), l = OL(a, 1461), u = Math.floor(l / 365), c = 400 * r + 100 * o + 4 * s + u + (4 !== o && 4 !== u ? 1 : 0), f = t - ML(c, 1, 1), h = 2; t < ML(c, 3, 1) ? h = 0 : AL(c) && (h = 1); var d = Math.floor((12 * (f + h) + 373) / 367), p = t - ML(c, d, 1) + 1; return new BR(this, c, d, p) } }, { key: "toJulianDay", value: function (e) { return ML(e.year, e.month, e.day) } }, { key: "getDaysInMonth", value: function (e) { return DL[AL(e.year) ? "leapyear" : "standard"][e.month - 1] } }, { key: "getMonthsInYear", value: function (e) { return 12 } }, { key: "getDaysInYear", value: function (e) { return AL(e.year) ? 366 : 365 } }, { key: "getYearsInEra", value: function (e) { return 9999 } }, { key: "getEras", value: function () { return ["BC", "AD"] } }, { key: "getYearsToAdd", value: function (e, t) { return "BC" === e.era ? -t : t } }, { key: "balanceDate", value: function (e) { e.year <= 0 && (e.era = "BC" === e.era ? "AD" : "BC", e.year = 1 - e.year) } }]), e }(); function RL(e) { return IL((e = $L(e, new LL)).year, e.month, e.day, e.hour, e.minute, e.second, e.millisecond) } function IL(e, t, n, r, i, o, a) { var s = new Date; return s.setUTCHours(r, i, o, a), s.setUTCFullYear(e, t - 1, n), s.getTime() } function jL(e, t) { if (t === fL()) return -6e4 * new Date(e).getTimezoneOffset(); var n = NL(e, t); return IL(n.year, n.month, n.day, n.hour, n.minute, n.second, 0) - 1e3 * Math.floor(e / 1e3) } var FL = new Map; function NL(e, t) { var n = FL.get(t); n || (n = new Intl.DateTimeFormat("en-US", { timeZone: t, hour12: !1, era: "short", year: "numeric", month: "numeric", day: "numeric", hour: "numeric", minute: "numeric", second: "numeric" }), FL.set(t, n)); var r, i = {}, o = T(n.formatToParts(new Date(e))); try { for (o.s(); !(r = o.n()).done;) { var a = r.value; "literal" !== a.type && (i[a.type] = a.value) } } catch (e) { o.e(e) } finally { o.f() } return { year: "BC" === i.era ? 1 - i.year : +i.year, month: +i.month, day: +i.day, hour: "24" === i.hour ? 0 : +i.hour, minute: +i.minute, second: +i.second } } var zL = 864e5; function BL(e, t) { var n = RL(e); return VL(e, t, n - jL(n - zL, t), n - jL(n + zL, t)) } function VL(e, t, n, r) { return (n === r ? [n] : [n, r]).filter((function (n) { return function (e, t, n) { var r = NL(n, t); return e.year === r.year && e.month === r.month && e.day === r.day && e.hour === r.hour && e.minute === r.minute && e.second === r.second }(e, t, n) })) } function UL(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "compatible", r = JL(e); if (t === fL() && "compatible" === n) { r = $L(r, new LL); var i = new Date; return i.setFullYear(r.year, r.month - 1, r.day), i.setHours(r.hour, r.minute, r.second, r.millisecond), i.getTime() } var o = RL(r), a = jL(o - zL, t), s = jL(o + zL, t), l = VL(r, t, o - a, o - s); if (1 === l.length) return l[0]; if (l.length > 1) switch (n) { case "compatible": case "earlier": return l[0]; case "later": return l[l.length - 1]; case "reject": throw new RangeError("Multiple possible absolute times found") }switch (n) { case "earlier": return Math.min(o - a, o - s); case "compatible": case "later": return Math.max(o - a, o - s); case "reject": throw new RangeError("No such absolute time found") } } function HL(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "compatible"; return new Date(UL(e, t, n)) } function WL(e, t) { var n = jL(e, t), r = new Date(e + n), i = r.getUTCFullYear(), o = r.getUTCMonth() + 1, a = r.getUTCDate(), s = r.getUTCHours(), l = r.getUTCMinutes(), u = r.getUTCSeconds(), c = r.getUTCMilliseconds(); return new YR(i, o, a, t, n, s, l, u, c) } function KL(e, t) { return WL(e.getTime(), t) } function YL(e) { return KL(e, fL()) } function XL(e) { return new BR(e.calendar, e.era, e.year, e.month, e.day) } function GL(e) { return { era: e.era, year: e.year, month: e.month, day: e.day } } function qL(e) { return { hour: e.hour, minute: e.minute, second: e.second, millisecond: e.millisecond } } function JL(e, t) { var n, r = 0, i = 0, o = 0, a = 0; if ("timeZone" in e) r = e.hour, i = e.minute, o = e.second, a = e.millisecond; else if ("hour" in e && !t) return e; return t && (r = (n = t).hour, i = n.minute, o = n.second, a = n.millisecond), new WR(e.calendar, e.era, e.year, e.month, e.day, r, i, o, a) } function ZL(e) { return new UR(e.hour, e.minute, e.second, e.millisecond) } function $L(e, t) { if (e.calendar.identifier === t.identifier) return e; var n = t.fromJulianDay(e.calendar.toJulianDay(e)), r = e.copy(); return r.calendar = t, r.era = n.era, r.year = n.year, r.month = n.month, r.day = n.day, r } function QL(e, t, n) { return e instanceof YR ? e.timeZone === t ? e : tR(e, t) : WL(UL(e, t, n), t) } function eR(e) { var t = RL(e) - e.offset; return new Date(t) } function tR(e, t) { return $L(WL(RL(e) - e.offset, t), e.calendar) } function nR(e) { return tR(e, fL()) } var rR = 36e5; function iR(e, t) { var n = e.copy(), r = "hour" in e ? vR(e, t) : 0; return oR(n, t.years || 0), n.calendar.balanceYearMonth && n.calendar.balanceYearMonth(n, e), n.month += t.months || 0, aR(n), sR(n), n.day += 7 * (t.weeks || 0), n.day += t.days || 0, n.day += r, function (e) { for (; e.day < 1;)e.month--, aR(e), e.day += e.calendar.getDaysInMonth(e); for (; e.day > e.calendar.getDaysInMonth(e);)e.day -= e.calendar.getDaysInMonth(e), e.month++, aR(e) }(n), n.calendar.balanceDate && n.calendar.balanceDate(n), n } function oR(e, t) { e.calendar.getYearsToAdd && (t = e.calendar.getYearsToAdd(e, t)), e.year += t } function aR(e) { for (; e.month < 1;)oR(e, -1), e.month += e.calendar.getMonthsInYear(e); for (var t = 0; e.month > (t = e.calendar.getMonthsInYear(e));)e.month -= t, oR(e, 1) } function sR(e) { e.month = Math.max(1, Math.min(e.calendar.getMonthsInYear(e), e.month)), e.day = Math.max(1, Math.min(e.calendar.getDaysInMonth(e), e.day)) } function lR(e) { e.calendar.constrainDate && e.calendar.constrainDate(e), e.year = Math.max(1, Math.min(e.calendar.getYearsInEra(e), e.year)), sR(e) } function uR(e) { var t = {}; for (var n in e) "number" == typeof e[n] && (t[n] = -e[n]); return t } function cR(e, t) { return iR(e, uR(t)) } function fR(e, t) { var n = e.copy(); return null != t.era && (n.era = t.era), null != t.year && (n.year = t.year), null != t.month && (n.month = t.month), null != t.day && (n.day = t.day), lR(n), n } function hR(e, t) { var n = e.copy(); return null != t.hour && (n.hour = t.hour), null != t.minute && (n.minute = t.minute), null != t.second && (n.second = t.second), null != t.millisecond && (n.millisecond = t.millisecond), dR(n), n } function dR(e) { e.millisecond = Math.max(0, Math.min(e.millisecond, 1e3)), e.second = Math.max(0, Math.min(e.second, 59)), e.minute = Math.max(0, Math.min(e.minute, 59)), e.hour = Math.max(0, Math.min(e.hour, 23)) } function pR(e, t) { var n = e % t; return n < 0 && (n += t), n } function vR(e, t) { return e.hour += t.hours || 0, e.minute += t.minutes || 0, e.second += t.seconds || 0, e.millisecond += t.milliseconds || 0, function (e) { e.second += Math.floor(e.millisecond / 1e3), e.millisecond = pR(e.millisecond, 1e3), e.minute += Math.floor(e.second / 60), e.second = pR(e.second, 60), e.hour += Math.floor(e.minute / 60), e.minute = pR(e.minute, 60); var t = Math.floor(e.hour / 24); return e.hour = pR(e.hour, 24), t }(e) } function gR(e, t) { var n = e.copy(); return vR(n, t), n } function mR(e, t, n, r) { var i = e.copy(); switch (t) { case "era": var o = e.calendar.getEras(), a = o.indexOf(e.era); if (a < 0) throw new Error("Invalid era: " + e.era); a = bR(a, n, 0, o.length - 1, null == r ? void 0 : r.round), i.era = o[a], lR(i); break; case "year": i.calendar.getYearsToAdd && (n = i.calendar.getYearsToAdd(i, n)), i.year = bR(e.year, n, -1 / 0, 9999, null == r ? void 0 : r.round), i.year === -1 / 0 && (i.year = 1), i.calendar.balanceYearMonth && i.calendar.balanceYearMonth(i, e); break; case "month": i.month = bR(e.month, n, 1, e.calendar.getMonthsInYear(e), null == r ? void 0 : r.round); break; case "day": i.day = bR(e.day, n, 1, e.calendar.getDaysInMonth(e), null == r ? void 0 : r.round); break; default: throw new Error("Unsupported field " + t) }return e.calendar.balanceDate && e.calendar.balanceDate(i), lR(i), i } function yR(e, t, n, r) { var i = e.copy(); switch (t) { case "hour": var o = e.hour, a = 0, s = 23; if (12 === (null == r ? void 0 : r.hourCycle)) { var l = o >= 12; a = l ? 12 : 0, s = l ? 23 : 11 } i.hour = bR(o, n, a, s, null == r ? void 0 : r.round); break; case "minute": i.minute = bR(e.minute, n, 0, 59, null == r ? void 0 : r.round); break; case "second": i.second = bR(e.second, n, 0, 59, null == r ? void 0 : r.round); break; case "millisecond": i.millisecond = bR(e.millisecond, n, 0, 999, null == r ? void 0 : r.round); break; default: throw new Error("Unsupported field " + t) }return i } function bR(e, t, n, r) { var i = arguments.length > 4 && void 0 !== arguments[4] && arguments[4]; if (i) { (e += Math.sign(t)) < n && (e = r); var o = Math.abs(t); (e = t > 0 ? Math.ceil(e / o) * o : Math.floor(e / o) * o) > r && (e = n) } else (e += t) < n ? e = r - (n - e - 1) : e > r && (e = n + (e - r - 1)); return e } function wR(e, t) { var n; return n = null != t.years && 0 !== t.years || null != t.months && 0 !== t.months || null != t.days && 0 !== t.days ? UL(iR(JL(e), { years: t.years, months: t.months, days: t.days }), e.timeZone) : RL(e) - e.offset, n += t.milliseconds || 0, n += 1e3 * (t.seconds || 0), n += 6e4 * (t.minutes || 0), $L(WL(n += 36e5 * (t.hours || 0), e.timeZone), e.calendar) } var xR = {}; KD(xR, "parseTime", (function () { return ER })), KD(xR, "parseDate", (function () { return OR })), KD(xR, "parseDateTime", (function () { return PR })), KD(xR, "parseZonedDateTime", (function () { return MR })), KD(xR, "dateTimeToString", (function () { return jR })), KD(xR, "parseAbsolute", (function () { return AR })), KD(xR, "parseAbsoluteToLocal", (function () { return DR })), KD(xR, "timeToString", (function () { return RR })), KD(xR, "dateToString", (function () { return IR })), KD(xR, "zonedDateTimeToString", (function () { return NR })); var _R = /^(\d{2})(?::(\d{2}))?(?::(\d{2}))?(\.\d+)?$/, SR = /^(\d{4})-(\d{2})-(\d{2})$/, kR = /^(\d{4})-(\d{2})-(\d{2})(?:T(\d{2}))?(?::(\d{2}))?(?::(\d{2}))?(\.\d+)?$/, CR = /^(\d{4})-(\d{2})-(\d{2})(?:T(\d{2}))?(?::(\d{2}))?(?::(\d{2}))?(\.\d+)?(?:([+-]\d{2})(?::(\d{2}))?)?\[(.*?)\]$/, TR = /^(\d{4})-(\d{2})-(\d{2})(?:T(\d{2}))?(?::(\d{2}))?(?::(\d{2}))?(\.\d+)?(?:(?:([+-]\d{2})(?::(\d{2}))?)|Z)$/; function ER(e) { var t = e.match(_R); if (!t) throw new Error("Invalid ISO 8601 time string: " + e); return new UR(LR(t[1], 0, 23), t[2] ? LR(t[2], 0, 59) : 0, t[3] ? LR(t[3], 0, 59) : 0, t[4] ? 1e3 * LR(t[4], 0, 1 / 0) : 0) } function OR(e) { var t = e.match(SR); if (!t) throw new Error("Invalid ISO 8601 date string: " + e); var n = new BR(LR(t[1], 0, 9999), LR(t[2], 1, 12), 1); return n.day = LR(t[3], 0, n.calendar.getDaysInMonth(n)), n } function PR(e) { var t = e.match(kR); if (!t) throw new Error("Invalid ISO 8601 date time string: " + e); var n = new WR(LR(t[1], 1, 9999), LR(t[2], 1, 12), 1, t[4] ? LR(t[4], 0, 23) : 0, t[5] ? LR(t[5], 0, 59) : 0, t[6] ? LR(t[6], 0, 59) : 0, t[7] ? 1e3 * LR(t[7], 0, 1 / 0) : 0); return n.day = LR(t[3], 0, n.calendar.getDaysInMonth(n)), n } function MR(e, t) { var n = e.match(CR); if (!n) throw new Error("Invalid ISO 8601 date time string: " + e); var r = new YR(LR(n[1], 1, 9999), LR(n[2], 1, 12), 1, n[10], 0, n[4] ? LR(n[4], 0, 23) : 0, n[5] ? LR(n[5], 0, 59) : 0, n[6] ? LR(n[6], 0, 59) : 0, n[7] ? 1e3 * LR(n[7], 0, 1 / 0) : 0); r.day = LR(n[3], 0, r.calendar.getDaysInMonth(r)); var i, o, a = JL(r); if (n[8]) { if (r.offset = 36e5 * LR(n[8], -23, 23) + 6e4 * LR(null !== (o = n[9]) && void 0 !== o ? o : "0", 0, 59), i = RL(r) - r.offset, !BL(a, r.timeZone).includes(i)) throw new Error("Offset ".concat(FR(r.offset), " is invalid for ").concat(jR(r), " in ").concat(r.timeZone)) } else i = UL(JL(a), r.timeZone, t); return WL(i, r.timeZone) } function AR(e, t) { var n = e.match(TR); if (!n) throw new Error("Invalid ISO 8601 date time string: " + e); var r, i = new YR(LR(n[1], 1, 9999), LR(n[2], 1, 12), 1, t, 0, n[4] ? LR(n[4], 0, 23) : 0, n[5] ? LR(n[5], 0, 59) : 0, n[6] ? LR(n[6], 0, 59) : 0, n[7] ? 1e3 * LR(n[7], 0, 1 / 0) : 0); return i.day = LR(n[3], 0, i.calendar.getDaysInMonth(i)), n[8] && (i.offset = 36e5 * LR(n[8], -23, 23) + 6e4 * LR(null !== (r = n[9]) && void 0 !== r ? r : "0", 0, 59)), tR(i, t) } function DR(e) { return AR(e, fL()) } function LR(e, t, n) { var r = Number(e); if (r < t || r > n) throw new RangeError("Value out of range: ".concat(t, " <= ").concat(r, " <= ").concat(n)); return r } function RR(e) { return "".concat(String(e.hour).padStart(2, "0"), ":").concat(String(e.minute).padStart(2, "0"), ":").concat(String(e.second).padStart(2, "0")).concat(e.millisecond ? String(e.millisecond / 1e3).slice(1) : "") } function IR(e) { var t = $L(e, new LL); return "".concat(String(t.year).padStart(4, "0"), "-").concat(String(t.month).padStart(2, "0"), "-").concat(String(t.day).padStart(2, "0")) } function jR(e) { return "".concat(IR(e), "T").concat(RR(e)) } function FR(e) { var t = Math.sign(e) < 0 ? "-" : "+"; e = Math.abs(e); var n = Math.floor(e / 36e5), r = e % 36e5 / 6e4; return "".concat(t).concat(String(n).padStart(2, "0"), ":").concat(String(r).padStart(2, "0")) } function NR(e) { return "".concat(jR(e)).concat(FR(e.offset), "[").concat(e.timeZone, "]") } function zR(e) { var t, n = "object" == C(e[0]) ? e.shift() : new LL; if ("string" == typeof e[0]) t = e.shift(); else { var r = n.getEras(); t = r[r.length - 1] } return [n, t, e.shift(), e.shift(), e.shift()] } var BR = function () { function e() { g(this, e), VR.set(this, { writable: !0, value: void 0 }); for (var t = arguments.length, n = new Array(t), r = 0; r < t; r++)n[r] = arguments[r]; var i = zR(n), o = _(i, 5), a = o[0], s = o[1], l = o[2], u = o[3], c = o[4]; this.calendar = a, this.era = s, this.year = l, this.month = u, this.day = c, lR(this) } return y(e, [{ key: "copy", value: function () { return this.era ? new e(this.calendar, this.era, this.year, this.month, this.day) : new e(this.calendar, this.year, this.month, this.day) } }, { key: "add", value: function (e) { return iR(this, e) } }, { key: "subtract", value: function (e) { return cR(this, e) } }, { key: "set", value: function (e) { return fR(this, e) } }, { key: "cycle", value: function (e, t, n) { return mR(this, e, t, n) } }, { key: "toDate", value: function (e) { return HL(this, e) } }, { key: "toString", value: function () { return IR(this) } }, { key: "compare", value: function (e) { return aL(this, e) } }]), e }(), VR = new WeakMap, UR = function () { function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0; g(this, e), HR.set(this, { writable: !0, value: void 0 }), this.hour = t, this.minute = n, this.second = r, this.millisecond = i, dR(this) } return y(e, [{ key: "copy", value: function () { return new e(this.hour, this.minute, this.second, this.millisecond) } }, { key: "add", value: function (e) { return gR(this, e) } }, { key: "subtract", value: function (e) { return function (e, t) { return gR(e, uR(t)) }(this, e) } }, { key: "set", value: function (e) { return hR(this, e) } }, { key: "cycle", value: function (e, t, n) { return yR(this, e, t, n) } }, { key: "toString", value: function () { return RR(this) } }, { key: "compare", value: function (e) { return sL(this, e) } }]), e }(), HR = new WeakMap, WR = function () { function e() { g(this, e), KR.set(this, { writable: !0, value: void 0 }); for (var t = arguments.length, n = new Array(t), r = 0; r < t; r++)n[r] = arguments[r]; var i = zR(n), o = _(i, 5), a = o[0], s = o[1], l = o[2], u = o[3], c = o[4]; this.calendar = a, this.era = s, this.year = l, this.month = u, this.day = c, this.hour = n.shift() || 0, this.minute = n.shift() || 0, this.second = n.shift() || 0, this.millisecond = n.shift() || 0, lR(this) } return y(e, [{ key: "copy", value: function () { return this.era ? new e(this.calendar, this.era, this.year, this.month, this.day, this.hour, this.minute, this.second, this.millisecond) : new e(this.calendar, this.year, this.month, this.day, this.hour, this.minute, this.second, this.millisecond) } }, { key: "add", value: function (e) { return iR(this, e) } }, { key: "subtract", value: function (e) { return cR(this, e) } }, { key: "set", value: function (e) { return fR(hR(this, e), e) } }, { key: "cycle", value: function (e, t, n) { switch (e) { case "era": case "year": case "month": case "day": return mR(this, e, t, n); default: return yR(this, e, t, n) } } }, { key: "toDate", value: function (e) { return HL(this, e) } }, { key: "toString", value: function () { return jR(this) } }, { key: "compare", value: function (e) { var t = aL(this, e); return 0 === t ? sL(this, JL(e)) : t } }]), e }(), KR = new WeakMap, YR = function () { function e() { g(this, e), XR.set(this, { writable: !0, value: void 0 }); for (var t = arguments.length, n = new Array(t), r = 0; r < t; r++)n[r] = arguments[r]; var i = zR(n), o = _(i, 5), a = o[0], s = o[1], l = o[2], u = o[3], c = o[4], f = n.shift(), h = n.shift(); this.calendar = a, this.era = s, this.year = l, this.month = u, this.day = c, this.timeZone = f, this.offset = h, this.hour = n.shift() || 0, this.minute = n.shift() || 0, this.second = n.shift() || 0, this.millisecond = n.shift() || 0, lR(this) } return y(e, [{ key: "copy", value: function () { return this.era ? new e(this.calendar, this.era, this.year, this.month, this.day, this.timeZone, this.offset, this.hour, this.minute, this.second, this.millisecond) : new e(this.calendar, this.year, this.month, this.day, this.timeZone, this.offset, this.hour, this.minute, this.second, this.millisecond) } }, { key: "add", value: function (e) { return wR(this, e) } }, { key: "subtract", value: function (e) { return function (e, t) { return wR(e, uR(t)) }(this, e) } }, { key: "set", value: function (e, t) { return function (e, t, n) { var r = JL(e), i = hR(fR(r, t), t); return 0 === i.compare(r) ? e : $L(WL(UL(i, e.timeZone, n), e.timeZone), e.calendar) }(this, e, t) } }, { key: "cycle", value: function (e, t, n) { return function (e, t, n, r) { switch (t) { case "hour": var i = 0, o = 23; if (12 === (null == r ? void 0 : r.hourCycle)) { var a = e.hour >= 12; i = a ? 12 : 0, o = a ? 23 : 11 } var s = JL(e), l = $L(hR(s, { hour: i }), new LL), u = [UL(l, e.timeZone, "earlier"), UL(l, e.timeZone, "later")].filter((function (t) { return WL(t, e.timeZone).day === l.day }))[0], c = $L(hR(s, { hour: o }), new LL), f = [UL(c, e.timeZone, "earlier"), UL(c, e.timeZone, "later")].filter((function (t) { return WL(t, e.timeZone).day === c.day })).pop(), h = RL(e) - e.offset, d = Math.floor(h / rR), p = h % rR; return $L(WL(h = bR(d, n, Math.floor(u / rR), Math.floor(f / rR), null == r ? void 0 : r.round) * rR + p, e.timeZone), e.calendar); case "minute": case "second": case "millisecond": return yR(e, t, n, r); case "era": case "year": case "month": case "day": return $L(WL(UL(mR(JL(e), t, n, r), e.timeZone), e.timeZone), e.calendar); default: throw new Error("Unsupported field " + t) } }(this, e, t, n) } }, { key: "toDate", value: function () { return eR(this) } }, { key: "toString", value: function () { return NR(this) } }, { key: "toAbsoluteString", value: function () { return this.toDate().toISOString() } }, { key: "compare", value: function (e) { return this.toDate().getTime() - QL(e, this.timeZone).toDate().getTime() } }]), e }(), XR = new WeakMap; KD({}, "DateFormatter", (function () { return qR })); var GR = new Map, qR = function () { function e(t) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; g(this, e), this.formatter = ZR(t, n), this.options = n } return y(e, [{ key: "format", value: function (e) { return this.formatter.format(e) } }, { key: "formatToParts", value: function (e) { return this.formatter.formatToParts(e) } }, { key: "formatRange", value: function (e, t) { if ("function" == typeof this.formatter.formatRange) return this.formatter.formatRange(e, t); if (t < e) throw new RangeError("End date must be >= start date"); return "".concat(this.formatter.format(e), " – ").concat(this.formatter.format(t)) } }, { key: "formatRangeToParts", value: function (e, t) { if ("function" == typeof this.formatter.formatRangeToParts) return this.formatter.formatRangeToParts(e, t); if (t < e) throw new RangeError("End date must be >= start date"); var n = this.formatter.formatToParts(e), r = this.formatter.formatToParts(t); return [].concat(S(n.map((function (e) { return N(F({}, e), { source: "startRange" }) }))), [{ type: "literal", value: " – ", source: "shared" }], S(r.map((function (e) { return N(F({}, e), { source: "endRange" }) })))) } }, { key: "resolvedOptions", value: function () { var e = this.formatter.resolvedOptions(); return null == eI && (eI = "h12" === new Intl.DateTimeFormat("fr", { hour: "numeric", hour12: !1 }).resolvedOptions().hourCycle), eI && (this.resolvedHourCycle || (this.resolvedHourCycle = function (e, t) { if (t.timeStyle || t.hour) { e = e.replace(/(-u-)?-nu-[a-zA-Z0-9]+/, ""); var n = ZR(e += (e.includes("-u-") ? "" : "-u") + "-nu-latn", N(F({}, t), { timeZone: void 0 })), r = parseInt(n.formatToParts(new Date(2020, 2, 3, 0)).find((function (e) { return "hour" === e.type })).value, 10), i = parseInt(n.formatToParts(new Date(2020, 2, 3, 23)).find((function (e) { return "hour" === e.type })).value, 10); if (0 === r && 23 === i) return "h23"; if (24 === r && 23 === i) return "h24"; if (0 === r && 11 === i) return "h11"; if (12 === r && 11 === i) return "h12"; throw new Error("Unexpected hour cycle result") } }(e.locale, this.options)), e.hourCycle = this.resolvedHourCycle, e.hour12 = "h11" === this.resolvedHourCycle || "h12" === this.resolvedHourCycle), e } }]), e }(), JR = { true: { ja: "h11" }, false: {} }; function ZR(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; if ("boolean" == typeof t.hour12 && QR()) { t = F({}, t); var n = JR[String(t.hour12)][e.split("-")[0]], r = t.hour12 ? "h12" : "h23"; t.hourCycle = null != n ? n : r, delete t.hour12 } var i = e + (t ? Object.entries(t).sort((function (e, t) { return e[0] < t[0] ? -1 : 1 })).join() : ""); if (GR.has(i)) return GR.get(i); var o = new Intl.DateTimeFormat(e, t); return GR.set(i, o), o } var $R = null; function QR() { return null == $R && ($R = "24" === new Intl.DateTimeFormat("en-US", { hour: "numeric", hour12: !1 }).format(new Date(2020, 2, 3, 0))), $R } var eI = null, tI = new Map, nI = !1; try { nI = "exceptZero" === new Intl.NumberFormat("de-DE", { signDisplay: "exceptZero" }).resolvedOptions().signDisplay } catch (e) { } var rI = !1; try { rI = "unit" === new Intl.NumberFormat("de-DE", { style: "unit", unit: "degree" }).resolvedOptions().style } catch (e) { } var iI = { degree: { narrow: { default: "°", "ja-JP": " 度", "zh-TW": "度", "sl-SI": " °" } } }, oI = function () { function e(t) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; g(this, e), this.numberFormatter = aI(t, n), this.options = n } return y(e, [{ key: "format", value: function (e) { var t = ""; if (t = nI || null == this.options.signDisplay ? this.numberFormatter.format(e) : function (e, t, n) { if ("auto" === t) return e.format(n); if ("never" === t) return e.format(Math.abs(n)); var r = !1; if ("always" === t ? r = n > 0 || Object.is(n, 0) : "exceptZero" === t && (Object.is(n, -0) || Object.is(n, 0) ? n = Math.abs(n) : r = n > 0), r) { var i = e.format(-n), o = e.format(n), a = i.replace(o, "").replace(/\u200e|\u061C/, ""); return 1 !== S(a).length && console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"), i.replace(o, "!!!").replace(a, "+").replace("!!!", o) } return e.format(n) }(this.numberFormatter, this.options.signDisplay, e), "unit" === this.options.style && !rI) { var n, r = this.resolvedOptions(), i = r.unit, o = r.unitDisplay, a = void 0 === o ? "short" : o, s = r.locale, l = null === (n = iI[i]) || void 0 === n ? void 0 : n[a]; t += l[s] || l.default } return t } }, { key: "formatToParts", value: function (e) { return this.numberFormatter.formatToParts(e) } }, { key: "resolvedOptions", value: function () { var e = this.numberFormatter.resolvedOptions(); return !nI && null != this.options.signDisplay && (e = N(F({}, e), { signDisplay: this.options.signDisplay })), !rI && "unit" === this.options.style && (e = N(F({}, e), { style: "unit", unit: this.options.unit, unitDisplay: this.options.unitDisplay })), e } }]), e }(); function aI(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, n = t, r = n.numberingSystem; if (r && -1 === e.indexOf("-u-nu-") && (e = "".concat(e, "-u-nu-").concat(r)), "unit" === t.style && !rI) { var i, o = t, a = o.unit, s = o.unitDisplay, l = void 0 === s ? "short" : s; if (!a) throw new Error('unit option must be provided with style: "unit"'); if (!(null === (i = iI[a]) || void 0 === i ? void 0 : i[l])) throw new Error("Unsupported unit ".concat(a, " with unitDisplay = ").concat(l)); t = N(F({}, t), { style: "decimal" }) } var u = e + (t ? Object.entries(t).sort((function (e, t) { return e[0] < t[0] ? -1 : 1 })).join() : ""); if (tI.has(u)) return tI.get(u); var c = new Intl.NumberFormat(e, t); return tI.set(u, c), c } var sI = new RegExp("^.*\\(.*\\).*$"), lI = ["latn", "arab", "hanidec"], uI = function () { function e(t) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; g(this, e), this.locale = t, this.options = n } return y(e, [{ key: "parse", value: function (e) { return fI(this.locale, this.options, e).parse(e) } }, { key: "isValidPartialNumber", value: function (e, t, n) { return fI(this.locale, this.options, e).isValidPartialNumber(e, t, n) } }, { key: "getNumberingSystem", value: function (e) { return fI(this.locale, this.options, e).options.numberingSystem } }]), e }(), cI = new Map; function fI(e, t, n) { var r = hI(e, t); if (!e.includes("-nu-") && !r.isValidPartialNumber(n)) { var i, o = T(lI); try { for (o.s(); !(i = o.n()).done;) { var a = i.value; if (a !== r.options.numberingSystem) { var s = hI(e + (e.includes("-u-") ? "-nu-" : "-u-nu-") + a, t); if (s.isValidPartialNumber(n)) return s } } } catch (e) { o.e(e) } finally { o.f() } } return r } function hI(e, t) { var n = e + (t ? Object.entries(t).sort((function (e, t) { return e[0] < t[0] ? -1 : 1 })).join() : ""), r = cI.get(n); return r || (r = new dI(e, t), cI.set(n, r)), r } var dI = function () { function e(t) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; g(this, e), this.formatter = new Intl.NumberFormat(t, n), this.options = this.formatter.resolvedOptions(), this.symbols = vI(this.formatter, this.options, n) } return y(e, [{ key: "parse", value: function (e) { var t, n = this.sanitize(e), r = (n = gI(n, this.symbols.group, "").replace(this.symbols.decimal, ".").replace(this.symbols.minusSign, "-").replace(this.symbols.numeral, this.symbols.index)) ? +n : NaN; return isNaN(r) ? NaN : ("accounting" === this.options.currencySign && sI.test(e) && (r *= -1), "percent" === this.options.style && (r = +(r /= 100).toFixed((null !== (t = this.options.maximumFractionDigits) && void 0 !== t ? t : 0) + 2)), r) } }, { key: "sanitize", value: function (e) { return e = (e = e.replace(this.symbols.literals, "")).replace("-", this.symbols.minusSign), "arab" === this.options.numberingSystem && (e = gI(e = (e = e.replace(",", this.symbols.decimal)).replace(String.fromCharCode(1548), this.symbols.decimal), ".", this.symbols.group)), "fr-FR" === this.options.locale && (e = gI(e, ".", String.fromCharCode(8239))), e } }, { key: "isValidPartialNumber", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : -1 / 0, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1 / 0; return (e = this.sanitize(e)).startsWith(this.symbols.minusSign) && t < 0 ? e = e.slice(this.symbols.minusSign.length) : this.symbols.plusSign && e.startsWith(this.symbols.plusSign) && n > 0 && (e = e.slice(this.symbols.plusSign.length)), !e.startsWith(this.symbols.group) && 0 === (e = gI(e, this.symbols.group, "").replace(this.symbols.numeral, "").replace(this.symbols.decimal, "")).length } }]), e }(), pI = new Set(["decimal", "fraction", "integer", "minusSign", "plusSign", "group"]); function vI(e, t, n) { var r, i, o, a, s, l = e.formatToParts(-10000.111), u = e.formatToParts(10000.111), c = e.formatToParts(1), f = null !== (s = null === (r = l.find((function (e) { return "minusSign" === e.type }))) || void 0 === r ? void 0 : r.value) && void 0 !== s ? s : "-", h = null === (i = u.find((function (e) { return "plusSign" === e.type }))) || void 0 === i ? void 0 : i.value; !h && ("exceptZero" === (null == n ? void 0 : n.signDisplay) || "always" === (null == n ? void 0 : n.signDisplay)) && (h = "+"); var d = null === (o = l.find((function (e) { return "decimal" === e.type }))) || void 0 === o ? void 0 : o.value, p = null === (a = l.find((function (e) { return "group" === e.type }))) || void 0 === a ? void 0 : a.value, v = l.filter((function (e) { return !pI.has(e.type) })).map((function (e) { return mI(e.value) })), g = c.filter((function (e) { return !pI.has(e.type) })).map((function (e) { return mI(e.value) })), m = S(new Set([].concat(S(g), S(v)))).sort((function (e, t) { return t.length - e.length })), y = new RegExp("".concat(m.join("|"), "|[\\p{White_Space}]"), "gu"), b = S(new Intl.NumberFormat(t.locale, { useGrouping: !1 }).format(9876543210)).reverse(), w = new Map(b.map((function (e, t) { return [e, t] }))); return { minusSign: f, plusSign: h, decimal: d, group: p, literals: y, numeral: new RegExp("[".concat(b.join(""), "]"), "g"), index: function (e) { return String(w.get(e)) } } } function gI(e, t, n) { return e.replaceAll ? e.replaceAll(t, n) : e.split(t).join(n) } function mI(e) { return e.replace(/[-/\\^$*+?.()|[\]{}]/g, "\\$&") } function yI(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } var bI = {}; yI(bI, "I18nProvider", (function () { return PI })), yI(bI, "useLocale", (function () { return MI })); var wI = new Set(["Arab", "Syrc", "Samr", "Mand", "Thaa", "Mend", "Nkoo", "Adlm", "Rohg", "Hebr"]), xI = new Set(["ae", "ar", "arc", "bcc", "bqi", "ckb", "dv", "fa", "glk", "he", "ku", "mzn", "nqo", "pnb", "ps", "sd", "ug", "ur", "yi"]); function _I(e) { if (Intl.Locale) { var t = new Intl.Locale(e).maximize().script; return wI.has(t) } var n = e.split("-")[0]; return xI.has(n) } function SI() { var e = "undefined" != typeof navigator && (navigator.language || navigator.userLanguage) || "en-US"; return { locale: e, direction: _I(e) ? "rtl" : "ltr" } } var kI = SI(), CI = new Set; function TI() { kI = SI(); var e, t = T(CI); try { for (t.s(); !(e = t.n()).done;)(0, e.value)(kI) } catch (e) { t.e(e) } finally { t.f() } } function EI() { var e = LT(), t = _(h.exports.useState(kI), 2), n = t[0], r = t[1]; return h.exports.useEffect((function () { return 0 === CI.size && window.addEventListener("languagechange", TI), CI.add(r), function () { CI.delete(r), 0 === CI.size && window.removeEventListener("languagechange", TI) } }), []), e ? { locale: "en-US", direction: "ltr" } : n } var OI = ce.createContext(null); function PI(e) { var t = e.locale, n = e.children, r = EI(), i = t ? { locale: t, direction: _I(t) ? "rtl" : "ltr" } : r; return ce.createElement(OI.Provider, { value: i }, n) } function MI() { var e = EI(); return h.exports.useContext(OI) || e } yI({}, "useMessageFormatter", (function () { return DI })); var AI = new WeakMap; function DI(e) { var t = MI().locale, n = h.exports.useMemo((function () { return function (e) { var t = AI.get(e); return t || (t = new UD(e), AI.set(e, t)), t }(e) }), [e]), r = h.exports.useMemo((function () { return new WD(t, n) }), [t, n]); return h.exports.useCallback((function (e, t) { return r.format(e, t) }), [r]) } function LI(e) { var t = h.exports.useRef(null); e && t.current && function (e, t) { if (e === t) return !0; var n = Object.keys(e), r = Object.keys(t); if (n.length !== r.length) return !1; for (var i = 0, o = n; i < o.length; i++) { var a = o[i]; if (t[a] !== e[a]) return !1 } return !0 }(e, t.current) && (e = t.current), t.current = e; var n = MI().locale; return h.exports.useMemo((function () { return new qR(n, e) }), [n, e]) } function RI() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = MI(), n = t.locale; return h.exports.useMemo((function () { return new oI(n, e) }), [n, e]) } yI({}, "useDateFormatter", (function () { return LI })), yI({}, "useNumberFormatter", (function () { return RI })), yI({}, "useCollator", (function () { return jI })); var II = new Map; function jI(e) { var t = MI().locale, n = t + (e ? Object.entries(e).sort((function (e, t) { return e[0] < t[0] ? -1 : 1 })).join() : ""); if (II.has(n)) return II.get(n); var r = new Intl.Collator(t, e); return II.set(n, r), r } function FI(e) { var t = jI(F({ usage: "search" }, e)); return { startsWith: function (e, n) { return 0 === n.length || (e = e.normalize("NFC"), n = n.normalize("NFC"), 0 === t.compare(e.slice(0, n.length), n)) }, endsWith: function (e, n) { return 0 === n.length || (e = e.normalize("NFC"), n = n.normalize("NFC"), 0 === t.compare(e.slice(-n.length), n)) }, contains: function (e, n) { if (0 === n.length) return !0; e = e.normalize("NFC"); for (var r = 0, i = (n = n.normalize("NFC")).length; r + i <= e.length; r++) { var o = e.slice(r, r + i); if (0 === t.compare(n, o)) return !0 } return !1 } } } yI({}, "useFilter", (function () { return FI })); var NI = { exports: {} }, zI = { exports: {} }; !function (e) { e.exports = function (e) { return e && e.__esModule ? e : { default: e } }, e.exports.__esModule = !0, e.exports.default = e.exports }(zI); var BI = { exports: {} }, VI = { exports: {} }; (function (e, t) { t.__esModule = !0, t.default = function (e) { return e.replace(n, (function (e, t) { return t.toUpperCase() })) }; var n = /-(.)/g; e.exports = t.default })(VI, VI.exports), function (e, t) { var n = zI.exports; t.__esModule = !0, t.default = function (e) { return (0, r.default)(e.replace(i, "ms-")) }; var r = n(VI.exports), i = /^-ms-/; e.exports = t.default }(BI, BI.exports); var UI = { exports: {} }, HI = { exports: {} }; (function (e, t) { t.__esModule = !0, t.default = function (e) { return e.replace(n, "-$1").toLowerCase() }; var n = /([A-Z])/g; e.exports = t.default })(HI, HI.exports), function (e, t) { var n = zI.exports; t.__esModule = !0, t.default = function (e) { return (0, r.default)(e).replace(i, "-ms-") }; var r = n(HI.exports), i = /^ms-/; e.exports = t.default }(UI, UI.exports); var WI = { exports: {} }; !function (e, t) { var n = zI.exports; t.__esModule = !0, t.default = function (e) { if (!e) throw new TypeError("No Element passed to `getComputedStyle()`"); var t = e.ownerDocument; return "defaultView" in t ? t.defaultView.opener ? e.ownerDocument.defaultView.getComputedStyle(e, null) : window.getComputedStyle(e, null) : { getPropertyValue: function (t) { var n = e.style; "float" == (t = (0, r.default)(t)) && (t = "styleFloat"); var a = e.currentStyle[t] || null; if (null == a && n && n[t] && (a = n[t]), o.test(a) && !i.test(t)) { var s = n.left, l = e.runtimeStyle, u = l && l.left; u && (l.left = e.currentStyle.left), n.left = "fontSize" === t ? "1em" : a, a = n.pixelLeft + "px", n.left = s, u && (l.left = u) } return a } } }; var r = n(BI.exports), i = /^(top|right|bottom|left)$/, o = /^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i; e.exports = t.default }(WI, WI.exports); var KI = { exports: {} }; !function (e, t) { t.__esModule = !0, t.default = function (e, t) { return "removeProperty" in e.style ? e.style.removeProperty(t) : e.style.removeAttribute(t) }, e.exports = t.default }(KI, KI.exports); var YI = {}, XI = { exports: {} }; !function (e, t) { t.__esModule = !0, t.default = void 0; var n = !("undefined" == typeof window || !window.document || !window.document.createElement); t.default = n, e.exports = t.default }(XI, XI.exports); var GI = zI.exports; YI.__esModule = !0, YI.default = YI.animationEnd = YI.animationDelay = YI.animationTiming = YI.animationDuration = YI.animationName = YI.transitionEnd = YI.transitionDuration = YI.transitionDelay = YI.transitionTiming = YI.transitionProperty = YI.transform = void 0; var qI, JI, ZI, $I, QI, ej, tj, nj, rj, ij, oj, aj = GI(XI.exports), sj = "transform"; if (YI.transform = sj, YI.animationEnd = ZI, YI.transitionEnd = JI, YI.transitionDelay = tj, YI.transitionTiming = ej, YI.transitionDuration = QI, YI.transitionProperty = $I, YI.animationDelay = oj, YI.animationTiming = ij, YI.animationDuration = rj, YI.animationName = nj, aj.default) { var lj = function () { for (var e, t, n = document.createElement("div").style, r = { O: function (e) { return "o" + e.toLowerCase() }, Moz: function (e) { return e.toLowerCase() }, Webkit: function (e) { return "webkit" + e }, ms: function (e) { return "MS" + e } }, i = Object.keys(r), o = "", a = 0; a < i.length; a++) { var s = i[a]; if (s + "TransitionProperty" in n) { o = "-" + s.toLowerCase(), e = r[s]("TransitionEnd"), t = r[s]("AnimationEnd"); break } } return !e && "transitionProperty" in n && (e = "transitionend"), !t && "animationName" in n && (t = "animationend"), n = null, { animationEnd: t, transitionEnd: e, prefix: o } }(); qI = lj.prefix, YI.transitionEnd = JI = lj.transitionEnd, YI.animationEnd = ZI = lj.animationEnd, YI.transform = sj = qI + "-" + sj, YI.transitionProperty = $I = qI + "-transition-property", YI.transitionDuration = QI = qI + "-transition-duration", YI.transitionDelay = tj = qI + "-transition-delay", YI.transitionTiming = ej = qI + "-transition-timing-function", YI.animationName = nj = qI + "-animation-name", YI.animationDuration = rj = qI + "-animation-duration", YI.animationTiming = ij = qI + "-animation-delay", YI.animationDelay = oj = qI + "-animation-timing-function" } var uj = { transform: sj, end: JI, property: $I, timing: ej, delay: tj, duration: QI }; YI.default = uj; var cj = { exports: {} }; (function (e, t) { t.__esModule = !0, t.default = function (e) { return !(!e || !n.test(e)) }; var n = /^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i; e.exports = t.default })(cj, cj.exports), function (e, t) { var n = zI.exports; t.__esModule = !0, t.default = function (e, t, n) { var u = "", c = "", f = t; if ("string" == typeof t) { if (void 0 === n) return e.style[(0, r.default)(t)] || (0, o.default)(e).getPropertyValue((0, i.default)(t)); (f = {})[t] = n } Object.keys(f).forEach((function (t) { var n = f[t]; n || 0 === n ? (0, l.default)(t) ? c += t + "(" + n + ") " : u += (0, i.default)(t) + ": " + n + ";" : (0, a.default)(e, (0, i.default)(t)) })), c && (u += s.transform + ": " + c + ";"), e.style.cssText += ";" + u }; var r = n(BI.exports), i = n(UI.exports), o = n(WI.exports), a = n(KI.exports), s = YI, l = n(cj.exports); e.exports = t.default }(NI, NI.exports); var fj = c(NI.exports), hj = { exports: {} }, dj = { exports: {} }; !function (e, t) { var n = zI.exports; t.__esModule = !0, t.default = void 0; var r = n(XI.exports).default ? function (e, t) { return e.contains ? e.contains(t) : e.compareDocumentPosition ? e === t || !!(16 & e.compareDocumentPosition(t)) : i(e, t) } : i; function i(e, t) { if (t) do { if (t === e) return !0 } while (t = t.parentNode); return !1 } t.default = r, e.exports = t.default }(dj, dj.exports); var pj = { exports: {} }; !function (e, t) { t.__esModule = !0, t.default = function (e) { return e === e.window ? e : 9 === e.nodeType && (e.defaultView || e.parentWindow) }, e.exports = t.default }(pj, pj.exports); var vj = { exports: {} }; !function (e, t) { t.__esModule = !0, t.default = function (e) { return e && e.ownerDocument || document }, e.exports = t.default }(vj, vj.exports); var gj = c(vj.exports); !function (e, t) { var n = zI.exports; t.__esModule = !0, t.default = function (e) { var t = (0, o.default)(e), n = (0, i.default)(t), a = t && t.documentElement, s = { top: 0, left: 0, height: 0, width: 0 }; if (t) return (0, r.default)(a, e) && (void 0 !== e.getBoundingClientRect && (s = e.getBoundingClientRect()), s = { top: s.top + (n.pageYOffset || a.scrollTop) - (a.clientTop || 0), left: s.left + (n.pageXOffset || a.scrollLeft) - (a.clientLeft || 0), width: (null == s.width ? e.offsetWidth : s.width) || 0, height: (null == s.height ? e.offsetHeight : s.height) || 0 }), s }; var r = n(dj.exports), i = n(pj.exports), o = n(vj.exports); e.exports = t.default }(hj, hj.exports); var mj = c(hj.exports), yj = { exports: {} }, bj = { exports: {} }; !function (e) { function t() { return e.exports = t = Object.assign || function (e) { for (var t = 1; t < arguments.length; t++) { var n = arguments[t]; for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]) } return e }, e.exports.__esModule = !0, e.exports.default = e.exports, t.apply(this, arguments) } e.exports = t, e.exports.__esModule = !0, e.exports.default = e.exports }(bj); var wj = { exports: {} }; !function (e, t) { var n = zI.exports; t.__esModule = !0, t.default = function (e) { for (var t = (0, r.default)(e), n = e && e.offsetParent; n && "html" !== o(e) && "static" === (0, i.default)(n, "position");)n = n.offsetParent; return n || t.documentElement }; var r = n(vj.exports), i = n(NI.exports); function o(e) { return e.nodeName && e.nodeName.toLowerCase() } e.exports = t.default }(wj, wj.exports); var xj = { exports: {} }; !function (e, t) { var n = zI.exports; t.__esModule = !0, t.default = function (e, t) { var n = (0, r.default)(e); if (void 0 === t) return n ? "pageYOffset" in n ? n.pageYOffset : n.document.documentElement.scrollTop : e.scrollTop; n ? n.scrollTo("pageXOffset" in n ? n.pageXOffset : n.document.documentElement.scrollLeft, t) : e.scrollTop = t }; var r = n(pj.exports); e.exports = t.default }(xj, xj.exports); var _j = c(xj.exports), Sj = { exports: {} }; !function (e, t) { var n = zI.exports; t.__esModule = !0, t.default = function (e, t) { var n = (0, r.default)(e); if (void 0 === t) return n ? "pageXOffset" in n ? n.pageXOffset : n.document.documentElement.scrollLeft : e.scrollLeft; n ? n.scrollTo(t, "pageYOffset" in n ? n.pageYOffset : n.document.documentElement.scrollTop) : e.scrollLeft = t }; var r = n(pj.exports); e.exports = t.default }(Sj, Sj.exports); var kj = c(Sj.exports); !function (e, t) { var n = zI.exports; t.__esModule = !0, t.default = function (e, t) { var n, u = { top: 0, left: 0 }; return "fixed" === (0, l.default)(e, "position") ? n = e.getBoundingClientRect() : (t = t || (0, o.default)(e), n = (0, i.default)(e), "html" !== function (e) { return e.nodeName && e.nodeName.toLowerCase() }(t) && (u = (0, i.default)(t)), u.top += parseInt((0, l.default)(t, "borderTopWidth"), 10) - (0, a.default)(t) || 0, u.left += parseInt((0, l.default)(t, "borderLeftWidth"), 10) - (0, s.default)(t) || 0), (0, r.default)({}, n, { top: n.top - u.top - (parseInt((0, l.default)(e, "marginTop"), 10) || 0), left: n.left - u.left - (parseInt((0, l.default)(e, "marginLeft"), 10) || 0) }) }; var r = n(bj.exports), i = n(hj.exports), o = n(wj.exports), a = n(xj.exports), s = n(Sj.exports), l = n(NI.exports); e.exports = t.default }(yj, yj.exports); var Cj = c(yj.exports); function Tj(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } Tj({}, "useOverlayPosition", (function () { return Bj })); var Ej = { top: "top", bottom: "top", left: "left", right: "left" }, Oj = { top: "bottom", bottom: "top", left: "right", right: "left" }, Pj = { top: "left", left: "top" }, Mj = { top: "height", left: "width" }, Aj = {}, Dj = "undefined" != typeof window && window.visualViewport; function Lj(e, t, n, r, i) { var o = r.scroll[e], a = r[Mj[e]], s = t - i - o, l = t + i - o + n; return s < 0 ? -s : l > a ? Math.max(a - l, -s) : 0 } function Rj(e) { if (Aj[e]) return Aj[e]; var t = _(e.split(" "), 2), n = t[0], r = t[1], i = Ej[n] || "right", o = Pj[i]; Ej[r] || (r = "center"); var a = Mj[i], s = Mj[o]; return Aj[e] = { placement: n, crossPlacement: r, axis: i, crossAxis: o, size: a, crossSize: s }, Aj[e] } function Ij(e, t, n, r, i, o, a, s) { var l = r.placement, u = r.crossPlacement, c = r.axis, f = r.crossAxis, h = r.size, d = r.crossSize, p = {}; p[f] = e[f], "center" === u ? p[f] += (e[d] - n[d]) / 2 : u !== f && (p[f] += e[d] - n[d]), p[f] += o; var v = e[f] + e[d] / 2 - n[d], g = e[f] + e[d] / 2; if (p[f] = Math.min(Math.max(v, p[f]), g), l === c) { var m = s ? a[h] : t[h]; p[Oj[c]] = Math.floor(m - e[c] + i) } else p[c] = Math.floor(e[c] + e[h] + i); return p } function jj(e, t, n, r, i, o) { var a = o.placement, s = o.axis, l = o.size; return a === s ? Math.max(0, n[s] - e[s] - e.scroll[s] + t[s] - r[s] - r[Oj[s]] - i) : Math.max(0, e[l] + e[s] + e.scroll[s] - t[s] - n[s] - n[l] - r[s] - r[Oj[s]] - i) } function Fj(e) { var t = e.placement, n = e.targetNode, r = e.overlayNode, i = e.scrollNode, o = e.padding, a = e.shouldFlip, s = e.boundaryElement, l = e.offset, u = e.crossOffset, c = e.maxHeight, f = r.offsetParent || document.body, h = "BODY" === f.tagName, d = window.getComputedStyle(f).position, p = !!d && "static" !== d, v = h ? mj(n) : Cj(n, f); h || (v.top += parseInt(fj(n, "marginTop"), 10) || 0, v.left += parseInt(fj(n, "marginLeft"), 10) || 0); var g = mj(r), m = function (e) { var t = window.getComputedStyle(e); return { top: parseInt(t.marginTop, 10) || 0, bottom: parseInt(t.marginBottom, 10) || 0, left: parseInt(t.marginLeft, 10) || 0, right: parseInt(t.marginRight, 10) || 0 } }(r); g.width += m.left + m.right, g.height += m.top + m.bottom; var y = function (e) { return { top: e.scrollTop, left: e.scrollLeft, width: e.scrollWidth, height: e.scrollHeight } }(i), b = function (e) { var t, n, r, i = 0, o = 0, a = 0, s = 0, l = {}; return "BODY" === e.tagName ? (i = null !== (n = null == Dj ? void 0 : Dj.width) && void 0 !== n ? n : document.documentElement.clientWidth, o = null !== (r = null == Dj ? void 0 : Dj.height) && void 0 !== r ? r : document.documentElement.clientHeight, l.top = _j(gj(e).documentElement) || _j(e), l.left = kj(gj(e).documentElement) || kj(e)) : (i = (t = mj(e)).width, o = t.height, a = t.top, s = t.left, l.top = _j(e), l.left = kj(e)), { width: i, height: o, scroll: l, top: a, left: s } }(s); return function (e, t, n, r, i, o, a, s, l, u, c, f, h) { var d = Rj(e), p = d, v = p.size, g = p.crossAxis, m = p.crossSize, y = p.placement, b = p.crossPlacement, w = Ij(t, s, n, d, u, c, l, f), x = u, _ = jj(s, l, t, i, o + u, d); if (a && r[v] > _) { var S = Rj("".concat(Oj[y], " ").concat(b)), k = Ij(t, s, n, S, u, c, l, f); jj(s, l, t, i, o + u, S) > _ && (d = S, w = k, x = u) } var C = Lj(g, w[g], n[m], s, o); w[g] += C; var T = function (e, t, n, r, i, o) { return null != e.top ? Math.max(0, t.height + t.top + t.scroll.top - (n.top + e.top) - (i.top + i.bottom + o)) : Math.max(0, r.top + n.top - (t.top + t.scroll.top) - (i.top + i.bottom + o)) }(w, s, l, t, i, o); h && h < T && (T = h), n.height = Math.min(n.height, T), C = Lj(g, (w = Ij(t, s, n, d, x, c, l, f))[g], n[m], s, o), w[g] += C; var E = {}; return E[g] = t[g] - w[g] + t[m] / 2, { position: w, maxHeight: T, arrowOffsetLeft: E.left, arrowOffsetTop: E.top, placement: d.placement } }(t, v, g, y, m, o, a, b, "BODY" === s.tagName ? mj(f) : Cj(f, s), l, u, p, c) } var Nj = new WeakMap, zj = "undefined" != typeof window && window.visualViewport; function Bj(e) { var t = MI().direction, n = e.targetRef, r = e.overlayRef, i = e.scrollRef, o = void 0 === i ? r : i, a = e.placement, s = void 0 === a ? "bottom" : a, l = e.containerPadding, u = void 0 === l ? 12 : l, c = e.shouldFlip, f = void 0 === c || c, d = e.boundaryElement, p = void 0 === d ? "undefined" != typeof document ? document.body : null : d, v = e.offset, g = void 0 === v ? 0 : v, m = e.crossOffset, y = void 0 === m ? 0 : m, b = e.shouldUpdatePosition, w = void 0 === b || b, x = e.isOpen, S = void 0 === x || x, k = e.onClose, C = e.maxHeight, T = _(h.exports.useState({ position: {}, arrowOffsetLeft: void 0, arrowOffsetTop: void 0, maxHeight: void 0, placement: void 0 }), 2), E = T[0], O = T[1], P = [w, s, r.current, n.current, o.current, u, f, p, g, y, S, t, C], M = h.exports.useCallback((function () { !1 === w || !S || !r.current || !n.current || !o.current || !p || O(Fj({ placement: Vj(s, t), overlayNode: r.current, targetNode: n.current, scrollNode: o.current, padding: u, shouldFlip: f, boundaryElement: p, offset: g, crossOffset: y, maxHeight: C })) }), P); UT(M, P), function (e) { UT((function () { return window.addEventListener("resize", e, !1), function () { window.removeEventListener("resize", e, !1) } }), [e]) }(M); var A = h.exports.useRef(!1); UT((function () { var e, t = function () { A.current = !0, clearTimeout(e), e = setTimeout((function () { A.current = !1 }), 500), M() }; return null == zj || zj.addEventListener("resize", t), function () { null == zj || zj.removeEventListener("resize", t) } }), [M]); var D = h.exports.useCallback((function () { A.current || k() }), [k, A]); return function (e) { var t = e.triggerRef, n = e.isOpen, r = e.onClose; h.exports.useEffect((function () { if (n) { var e = function (e) { var n = e.target; if (!(!t.current || n instanceof Node && !n.contains(t.current))) { var i = r || Nj.get(t.current); i && i() } }; return window.addEventListener("scroll", e, !0), function () { window.removeEventListener("scroll", e, !0) } } }), [n, r, t]) }({ triggerRef: n, isOpen: S, onClose: k ? D : void 0 }), { overlayProps: { style: N(F({ position: "absolute", zIndex: 1e5 }, E.position), { maxHeight: E.maxHeight }) }, placement: E.placement, arrowProps: { style: { left: E.arrowOffsetLeft, top: E.arrowOffsetTop } }, updatePosition: M } } function Vj(e, t) { return "rtl" === t ? e.replace("start", "right").replace("end", "left") : e.replace("start", "left").replace("end", "right") } Tj({}, "useOverlay", (function () { return Hj })); var Uj = []; function Hj(e, t) { var n = e.onClose, r = e.shouldCloseOnBlur, i = e.isOpen, o = e.isDismissable, a = void 0 !== o && o, s = e.isKeyboardDismissDisabled, l = void 0 !== s && s, u = e.shouldCloseOnInteractOutside; h.exports.useEffect((function () { return i && Uj.push(t), function () { var e = Uj.indexOf(t); e >= 0 && Uj.splice(e, 1) } }), [i, t]); var c = function () { Uj[Uj.length - 1] === t && n && n() }; MO({ ref: t, onInteractOutside: a ? function (e) { (!u || u(e.target)) && (Uj[Uj.length - 1] === t && (e.stopPropagation(), e.preventDefault()), c()) } : null, onInteractOutsideStart: function (e) { (!u || u(e.target)) && Uj[Uj.length - 1] === t && (e.stopPropagation(), e.preventDefault()) } }); var f = SO({ isDisabled: !r, onBlurWithin: function (e) { (!u || u(e.relatedTarget)) && n() } }).focusWithinProps; return { overlayProps: F({ onKeyDown: function (e) { "Escape" === e.key && !l && (e.preventDefault(), c()) } }, f), underlayProps: { onPointerDown: function (e) { e.target === e.currentTarget && e.preventDefault() } } } } function Wj(e, t, n) { var r, i = e.type, o = t.isOpen; h.exports.useEffect((function () { n && n.current && Nj.set(n.current, t.close) })), "menu" === i ? r = !0 : "listbox" === i && (r = "listbox"); var a = WT(); return { triggerProps: { "aria-haspopup": r, "aria-expanded": o, "aria-controls": o ? a : null }, overlayProps: { id: a } } } Tj({}, "useOverlayTrigger", (function () { return Wj })), Tj({}, "usePreventScroll", (function () { return Xj })); var Kj = "undefined" != typeof window && window.visualViewport, Yj = new Set(["checkbox", "radio", "range", "color", "file", "image", "button", "submit", "reset"]); function Xj() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = e.isDisabled; UT((function () { if (!t) return PE() ? qj() : Gj() }), [t]) } function Gj() { return XT(Jj(document.documentElement, "paddingRight", "".concat(window.innerWidth - document.documentElement.clientWidth, "px")), Jj(document.documentElement, "overflow", "hidden")) } function qj() { var e, t = 0, n = window.pageXOffset, r = window.pageYOffset, i = XT(Jj(document.documentElement, "paddingRight", "".concat(window.innerWidth - document.documentElement.clientWidth, "px")), Jj(document.documentElement, "overflow", "hidden"), Jj(document.body, "marginTop", "-".concat(r, "px"))); window.scrollTo(0, 0); var o = XT(Zj(document, "touchstart", (function (n) { ((e = vE(n.target)) !== document.documentElement || e !== document.body) && (t = n.changedTouches[0].pageY) }), { passive: !1, capture: !0 }), Zj(document, "touchmove", (function (n) { if (e !== document.documentElement && e !== document.body) { var r = n.changedTouches[0].pageY, i = e.scrollTop, o = e.scrollHeight - e.clientHeight; (i <= 0 && r > t || i >= o && r < t) && n.preventDefault(), t = r } else n.preventDefault() }), { passive: !1, capture: !0 }), Zj(document, "touchend", (function (e) { var t = e.target; t instanceof HTMLInputElement && !Yj.has(t.type) && (e.preventDefault(), t.style.transform = "translateY(-2000px)", t.focus(), requestAnimationFrame((function () { t.style.transform = "" }))) }), { passive: !1, capture: !0 }), Zj(document, "focus", (function (e) { var t = e.target; t instanceof HTMLInputElement && !Yj.has(t.type) && (t.style.transform = "translateY(-2000px)", requestAnimationFrame((function () { t.style.transform = "", Kj && (Kj.height < window.innerHeight ? requestAnimationFrame((function () { $j(t) })) : Kj.addEventListener("resize", (function () { return $j(t) }), { once: !0 })) }))) }), !0), Zj(window, "scroll", (function () { window.scrollTo(0, 0) }))); return function () { i(), o(), window.scrollTo(n, r) } } function Jj(e, t, n) { var r = e.style[t]; return e.style[t] = n, function () { e.style[t] = r } } function Zj(e, t, n, r) { return e.addEventListener(t, n, r), function () { e.removeEventListener(t, n, r) } } function $j(e) { var t = vE(e); if (t !== document.documentElement && t !== document.body) { var n = t.getBoundingClientRect().top, r = e.getBoundingClientRect().top; r > n + e.clientHeight && (t.scrollTop += r - n) } } var Qj = {}; Tj(Qj, "ModalProvider", (function () { return jF })), Tj(Qj, "useModalProvider", (function () { return FF })), Tj(Qj, "OverlayProvider", (function () { return zF })), Tj(Qj, "OverlayContainer", (function () { return BF })), Tj(Qj, "useModal", (function () { return VF })); var eF, tF, nF, rF, iF, oF, aF, sF, lF, uF, cF, fF, hF, dF, pF, vF, gF, mF, yF, bF, wF, xF, _F, SF, kF, CF, TF, EF, OF, PF, MF, AF, DF, LF, RF, IF = ce.createContext(null); function jF(e) { var t = e.children, n = h.exports.useContext(IF), r = _(h.exports.useState(0), 2), i = r[0], o = r[1], a = h.exports.useMemo((function () { return { parent: n, modalCount: i, addModal: function () { o((function (e) { return e + 1 })), n && n.addModal() }, removeModal: function () { o((function (e) { return e - 1 })), n && n.removeModal() } } }), [n, i]); return ce.createElement(IF.Provider, { value: a }, t) } function FF() { var e = h.exports.useContext(IF); return { modalProviderProps: { "aria-hidden": !!(e && e.modalCount > 0) || null } } } function NF(e) { var t = FF().modalProviderProps; return ce.createElement("div", F(F({ "data-overlay-container": !0 }, e), t)) } function zF(e) { return ce.createElement(jF, null, ce.createElement(NF, e)) } function BF(e) { var t = e, n = t.portalContainer, r = void 0 === n ? document.body : n, i = z(t, ["portalContainer"]); ce.useEffect((function () { if (r.closest("[data-overlay-container]")) throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.") }), [r]); var o = ce.createElement(zF, i); return wc.createPortal(o, r) } function VF(e) { var t = h.exports.useContext(IF); if (!t) throw new Error("Modal is not contained within a provider"); return h.exports.useEffect((function () { if (!(null == e ? void 0 : e.isDisabled) && t && t.parent) return t.parent.addModal(), function () { t && t.parent && t.parent.removeModal() } }), [t, t.parent, null == e ? void 0 : e.isDisabled]), { modalProps: { "data-ismodal": !(null == e ? void 0 : e.isDisabled) } } } function UF(e) { var t = e, n = t.onDismiss, r = z(t, ["onDismiss"]), i = DI(function (e) { return e && e.__esModule ? e.default : e }(eF)), o = cE(r, i("dismiss")); return ce.createElement(VO, null, ce.createElement("button", N(F({}, o), { tabIndex: -1, onClick: function () { n && n() } }))) } Tj({}, "DismissButton", (function () { return UF })), tF = JSON.parse('{"dismiss":"تجاهل"}'), nF = JSON.parse('{"dismiss":"Отхвърляне"}'), rF = JSON.parse('{"dismiss":"Odstranit"}'), iF = JSON.parse('{"dismiss":"Luk"}'), oF = JSON.parse('{"dismiss":"Schließen"}'), aF = JSON.parse('{"dismiss":"Απόρριψη"}'), sF = JSON.parse('{"dismiss":"Dismiss"}'), lF = JSON.parse('{"dismiss":"Descartar"}'), uF = JSON.parse('{"dismiss":"Lõpeta"}'), cF = JSON.parse('{"dismiss":"Hylkää"}'), fF = JSON.parse('{"dismiss":"Rejeter"}'), hF = JSON.parse('{"dismiss":"התעלם"}'), dF = JSON.parse('{"dismiss":"Odbaci"}'), pF = JSON.parse('{"dismiss":"Elutasítás"}'), vF = JSON.parse('{"dismiss":"Ignora"}'), gF = JSON.parse('{"dismiss":"閉じる"}'), mF = JSON.parse('{"dismiss":"무시"}'), yF = JSON.parse('{"dismiss":"Atmesti"}'), bF = JSON.parse('{"dismiss":"Nerādīt"}'), wF = JSON.parse('{"dismiss":"Lukk"}'), xF = JSON.parse('{"dismiss":"Negeren"}'), _F = JSON.parse('{"dismiss":"Zignoruj"}'), SF = JSON.parse('{"dismiss":"Descartar"}'), kF = JSON.parse('{"dismiss":"Dispensar"}'), CF = JSON.parse('{"dismiss":"Revocare"}'), TF = JSON.parse('{"dismiss":"Пропустить"}'), EF = JSON.parse('{"dismiss":"Zrušiť"}'), OF = JSON.parse('{"dismiss":"Opusti"}'), PF = JSON.parse('{"dismiss":"Odbaci"}'), MF = JSON.parse('{"dismiss":"Avvisa"}'), AF = JSON.parse('{"dismiss":"Kapat"}'), DF = JSON.parse('{"dismiss":"Скасувати"}'), LF = JSON.parse('{"dismiss":"取消"}'), RF = JSON.parse('{"dismiss":"關閉"}'), eF = { "ar-AE": tF, "bg-BG": nF, "cs-CZ": rF, "da-DK": iF, "de-DE": oF, "el-GR": aF, "en-US": sF, "es-ES": lF, "et-EE": uF, "fi-FI": cF, "fr-FR": fF, "he-IL": hF, "hr-HR": dF, "hu-HU": pF, "it-IT": vF, "ja-JP": gF, "ko-KR": mF, "lt-LT": yF, "lv-LV": bF, "nb-NO": wF, "nl-NL": xF, "pl-PL": _F, "pt-BR": SF, "pt-PT": kF, "ro-RO": CF, "ru-RU": TF, "sk-SK": EF, "sl-SI": OF, "sr-SP": PF, "sv-SE": MF, "tr-TR": AF, "uk-UA": DF, "zh-CN": LF, "zh-TW": RF }, Tj({}, "ariaHideOutside", (function () { return WF })); var HF = new WeakMap; function WF(e) { for (var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : document.body, n = new Set(e), r = new Set, i = document.createTreeWalker(t, NodeFilter.SHOW_ELEMENT, { acceptNode: function (t) { return t instanceof HTMLElement && "true" === t.dataset.liveAnnouncer && n.add(t), n.has(t) || r.has(t.parentElement) ? NodeFilter.FILTER_REJECT : t instanceof HTMLElement && "row" === t.getAttribute("role") || e.some((function (e) { return t.contains(e) })) ? NodeFilter.FILTER_SKIP : NodeFilter.FILTER_ACCEPT } }), o = function (e) { var t, n = null !== (t = HF.get(e)) && void 0 !== t ? t : 0; "true" === e.getAttribute("aria-hidden") && 0 === n || (0 === n && e.setAttribute("aria-hidden", "true"), r.add(e), HF.set(e, n + 1)) }, a = i.nextNode(); null != a;)o(a), a = i.nextNode(); var s = new MutationObserver((function (e) { var t, i = T(e); try { var a = function () { var e = t.value; if ("childList" === e.type && 0 !== e.addedNodes.length && ![].concat(S(n), S(r)).some((function (t) { return t.contains(e.target) }))) { var i, a = T(e.addedNodes); try { for (a.s(); !(i = a.n()).done;) { var s = i.value; s instanceof HTMLElement && "true" === s.dataset.liveAnnouncer ? n.add(s) : s instanceof Element && o(s) } } catch (e) { a.e(e) } finally { a.f() } } }; for (i.s(); !(t = i.n()).done;)a() } catch (e) { i.e(e) } finally { i.f() } })); return s.observe(t, { childList: !0, subtree: !0 }), function () { s.disconnect(); var e, t = T(r); try { for (t.s(); !(e = t.n()).done;) { var n = e.value, i = HF.get(n); 1 === i ? (n.removeAttribute("aria-hidden"), HF.delete(n)) : HF.set(n, i - 1) } } catch (e) { t.e(e) } finally { t.f() } } } function KF(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } function YF(e) { return ME() ? e.altKey : e.ctrlKey } function XF(e) { return TE() ? e.metaKey : e.ctrlKey } function GF(e) { var t = e.keyboardDelegate, n = e.selectionManager, r = e.onTypeSelect, i = h.exports.useRef({ search: "", timeout: null }).current; return { typeSelectProps: { onKeyDownCapture: t.getKeyForSearch ? function (e) { var o = function (e) { return 1 !== e.length && /^[A-Z]/i.test(e) ? "" : e }(e.key); if (o && !e.ctrlKey && !e.metaKey) { " " === o && i.search.trim().length > 0 && (e.preventDefault(), "continuePropagation" in e || e.stopPropagation()), i.search += o; var a = t.getKeyForSearch(i.search, n.focusedKey); null == a && (a = t.getKeyForSearch(i.search)), null != a && (n.setFocusedKey(a), r && r(a)), clearTimeout(i.timeout), i.timeout = setTimeout((function () { i.search = "" }), 500) } } : null } } } function qF(e) { var t = e.selectionManager, n = e.keyboardDelegate, r = e.ref, i = e.autoFocus, o = void 0 !== i && i, a = e.shouldFocusWrap, s = void 0 !== a && a, l = e.disallowEmptySelection, u = void 0 !== l && l, c = e.disallowSelectAll, f = void 0 !== c && c, d = e.selectOnFocus, p = void 0 === d ? "replace" === t.selectionBehavior : d, v = e.disallowTypeAhead, g = void 0 !== v && v, m = e.shouldUseVirtualFocus, y = e.allowsTabNavigation, b = void 0 !== y && y, w = e.isVirtualized, x = e.scrollRef, _ = void 0 === x ? r : x, S = MI().direction, k = h.exports.useRef({ top: 0, left: 0 }); RE(_, "scroll", w ? null : function () { k.current = { top: _.current.scrollTop, left: _.current.scrollLeft } }); var C = h.exports.useRef(o); h.exports.useEffect((function () { if (C.current) { var e = null; "first" === o && (e = n.getFirstKey()), "last" === o && (e = n.getLastKey()); var i = t.selectedKeys; i.size && (e = i.values().next().value), t.setFocused(!0), t.setFocusedKey(e), null == e && !m && GA(r.current) } C.current = !1 }), []), h.exports.useEffect((function () { if (!w && t.focusedKey && (null == _ ? void 0 : _.current)) { var e = _.current.querySelector('[data-key="'.concat(t.focusedKey, '"]')); e && jE(_.current, e) } }), [w, _, t.focusedKey]); var T, E = { onKeyDown: function (e) { if (e.altKey && "Tab" === e.key && e.preventDefault(), r.current.contains(e.target)) { var i = function (n, r) { null != n && (t.setFocusedKey(n, r), e.shiftKey && "multiple" === t.selectionMode ? t.extendSelection(n) : p && !YF(e) && t.replaceSelection(n)) }; switch (e.key) { case "ArrowDown": if (n.getKeyBelow) { var o, a; e.preventDefault(); var l = null != t.focusedKey ? n.getKeyBelow(t.focusedKey) : null === (o = n.getFirstKey) || void 0 === o ? void 0 : o.call(n); null == l && s && (l = null === (a = n.getFirstKey) || void 0 === a ? void 0 : a.call(n, t.focusedKey)), i(l) } break; case "ArrowUp": if (n.getKeyAbove) { var c, h; e.preventDefault(); var d = null != t.focusedKey ? n.getKeyAbove(t.focusedKey) : null === (c = n.getLastKey) || void 0 === c ? void 0 : c.call(n); null == d && s && (d = null === (h = n.getLastKey) || void 0 === h ? void 0 : h.call(n, t.focusedKey)), i(d) } break; case "ArrowLeft": n.getKeyLeftOf && (e.preventDefault(), i(n.getKeyLeftOf(t.focusedKey), "rtl" === S ? "first" : "last")); break; case "ArrowRight": n.getKeyRightOf && (e.preventDefault(), i(n.getKeyRightOf(t.focusedKey), "rtl" === S ? "last" : "first")); break; case "Home": if (n.getFirstKey) { e.preventDefault(); var v = n.getFirstKey(t.focusedKey, XF(e)); t.setFocusedKey(v), XF(e) && e.shiftKey && "multiple" === t.selectionMode ? t.extendSelection(v) : p && t.replaceSelection(v) } break; case "End": if (n.getLastKey) { e.preventDefault(); var g = n.getLastKey(t.focusedKey, XF(e)); t.setFocusedKey(g), XF(e) && e.shiftKey && "multiple" === t.selectionMode ? t.extendSelection(g) : p && t.replaceSelection(g) } break; case "PageDown": n.getKeyPageBelow && (e.preventDefault(), i(n.getKeyPageBelow(t.focusedKey))); break; case "PageUp": n.getKeyPageAbove && (e.preventDefault(), i(n.getKeyPageAbove(t.focusedKey))); break; case "a": XF(e) && "multiple" === t.selectionMode && !0 !== f && (e.preventDefault(), t.selectAll()); break; case "Escape": e.preventDefault(), u || t.clearSelection(); break; case "Tab": if (!b) { if (e.shiftKey) r.current.focus(); else { var m, y, w = cD(r.current, { tabbable: !0 }); do { (y = w.lastChild()) && (m = y) } while (y); m && !m.contains(document.activeElement) && QT(m) } break } } } }, onFocus: function (e) { if (t.isFocused) e.currentTarget.contains(e.target) || t.setFocused(!1); else if (e.currentTarget.contains(e.target)) if (t.setFocused(!0), null == t.focusedKey) { var r, i, o = function (e) { null != e && (t.setFocusedKey(e), p && t.replaceSelection(e)) }, a = e.relatedTarget; a && e.currentTarget.compareDocumentPosition(a) & Node.DOCUMENT_POSITION_FOLLOWING ? o(null !== (r = t.lastSelectedKey) && void 0 !== r ? r : n.getLastKey()) : o(null !== (i = t.firstSelectedKey) && void 0 !== i ? i : n.getFirstKey()) } else if (!w) { _.current.scrollTop = k.current.top, _.current.scrollLeft = k.current.left; var s = _.current.querySelector('[data-key="'.concat(t.focusedKey, '"]')); s && (QT(s), jE(_.current, s)) } }, onBlur: function (e) { e.currentTarget.contains(e.relatedTarget) || t.setFocused(!1) }, onMouseDown: function (e) { e.currentTarget.contains(e.target) && e.preventDefault() } }, O = GF({ keyboardDelegate: n, selectionManager: t }).typeSelectProps; return g || (E = GT(O, E)), m || (T = null == t.focusedKey ? 0 : -1), { collectionProps: N(F({}, E), { tabIndex: T }) } } function JF(e) { var t = e.selectionManager, n = e.key, r = e.ref, i = e.shouldSelectOnPressUp, o = e.isVirtualized, a = e.shouldUseVirtualFocus, s = e.focus, l = e.isDisabled, u = e.onAction, c = function (e) { if ("keyboard" === e.pointerType && YF(e)) t.toggleSelection(n); else { if ("none" === t.selectionMode) return; "single" === t.selectionMode ? t.isSelected(n) && !t.disallowEmptySelection ? t.toggleSelection(n) : t.replaceSelection(n) : e && e.shiftKey ? t.extendSelection(n) : "toggle" === t.selectionBehavior || e && (XF(e) || "touch" === e.pointerType || "virtual" === e.pointerType) ? t.toggleSelection(n) : t.replaceSelection(n) } }, f = n === t.focusedKey; h.exports.useEffect((function () { f && t.isFocused && !a && document.activeElement !== r.current && (s ? s() : GA(r.current)) }), [r, f, t.focusedKey, t.childFocusStrategy, t.isFocused, a]); var d = {}; a || (d = { tabIndex: f ? 0 : -1, onFocus: function (e) { e.target === r.current && t.setFocusedKey(n) } }); var p = h.exports.useRef(null), v = u && "none" === t.selectionMode, g = u && "none" !== t.selectionMode && "replace" === t.selectionBehavior, m = !l && t.canSelectItem(n), y = {}; i ? (y.onPressStart = function (e) { p.current = e.pointerType, "keyboard" === e.pointerType && c(e) }, y.onPressUp = function (e) { "keyboard" !== e.pointerType && c(e) }, y.onPress = v ? function () { return u() } : null) : (y.onPressStart = function (e) { p.current = e.pointerType, "touch" !== e.pointerType && "virtual" !== e.pointerType && c(e) }, y.onPress = function (e) { ("touch" === e.pointerType || "virtual" === e.pointerType || v) && (v || g ? u() : c(e)) }), o || (d["data-key"] = n), y.preventFocusOnPress = a; var b = YE(y), w = b.pressProps, x = b.isPressed, _ = g ? function (e) { "mouse" === p.current && (e.stopPropagation(), e.preventDefault(), u()) } : void 0, S = jO({ isDisabled: !g, onLongPress: function (e) { "touch" === e.pointerType && (c(e), t.setSelectionBehavior("toggle")) } }).longPressProps; return { itemProps: GT(d, m || v ? w : {}, g ? S : {}, { onKeyUp: g ? function (e) { "Enter" === e.key && u() } : void 0, onDoubleClick: _ }), isPressed: x } } KF({}, "useSelectableCollection", (function () { return qF })), KF({}, "useTypeSelect", (function () { return GF })), KF({}, "useSelectableItem", (function () { return JF })), KF({}, "useSelectableList", (function () { return LN })), KF({}, "ListKeyboardDelegate", (function () { return DN })); var ZF, $F, QF, eN, tN, nN, rN, iN, oN, aN, sN, lN, uN, cN, fN, hN, dN, pN, vN, gN, mN, yN, bN, wN, xN, _N, SN, kN, CN, TN, EN, ON, PN, MN, AN, DN = function () { function e(t, n, r, i) { g(this, e), this.collection = t, this.disabledKeys = n, this.ref = r, this.collator = i } return y(e, [{ key: "getKeyBelow", value: function (e) { for (e = this.collection.getKeyAfter(e); null != e;) { if ("item" === this.collection.getItem(e).type && !this.disabledKeys.has(e)) return e; e = this.collection.getKeyAfter(e) } } }, { key: "getKeyAbove", value: function (e) { for (e = this.collection.getKeyBefore(e); null != e;) { if ("item" === this.collection.getItem(e).type && !this.disabledKeys.has(e)) return e; e = this.collection.getKeyBefore(e) } } }, { key: "getFirstKey", value: function () { for (var e = this.collection.getFirstKey(); null != e;) { if ("item" === this.collection.getItem(e).type && !this.disabledKeys.has(e)) return e; e = this.collection.getKeyAfter(e) } } }, { key: "getLastKey", value: function () { for (var e = this.collection.getLastKey(); null != e;) { if ("item" === this.collection.getItem(e).type && !this.disabledKeys.has(e)) return e; e = this.collection.getKeyBefore(e) } } }, { key: "getItem", value: function (e) { return this.ref.current.querySelector('[data-key="'.concat(e, '"]')) } }, { key: "getKeyPageAbove", value: function (e) { var t = this.ref.current, n = this.getItem(e); if (!n) return null; for (var r = Math.max(0, n.offsetTop + n.offsetHeight - t.offsetHeight); n && n.offsetTop > r;)e = this.getKeyAbove(e), n = this.getItem(e); return e } }, { key: "getKeyPageBelow", value: function (e) { var t = this.ref.current, n = this.getItem(e); if (!n) return null; for (var r = Math.min(t.scrollHeight, n.offsetTop - n.offsetHeight + t.offsetHeight); n && n.offsetTop < r;)e = this.getKeyBelow(e), n = this.getItem(e); return e } }, { key: "getKeyForSearch", value: function (e, t) { if (!this.collator) return null; for (var n = this.collection, r = t || this.getFirstKey(); null != r;) { var i = n.getItem(r), o = i.textValue.slice(0, e.length); if (i.textValue && 0 === this.collator.compare(o, e)) return r; r = this.getKeyBelow(r) } return null } }]), e }(); function LN(e) { var t = e.selectionManager, n = e.collection, r = e.disabledKeys, i = e.ref, o = e.keyboardDelegate, a = e.autoFocus, s = e.shouldFocusWrap, l = e.isVirtualized, u = e.disallowEmptySelection, c = e.selectOnFocus, f = void 0 !== c && c, d = e.disallowTypeAhead, p = e.shouldUseVirtualFocus, v = e.allowsTabNavigation, g = jI({ usage: "search", sensitivity: "base" }), m = h.exports.useMemo((function () { return o || new DN(n, r, i, g) }), [o, n, r, i, g]); return { listProps: qF({ ref: i, selectionManager: t, keyboardDelegate: m, autoFocus: a, shouldFocusWrap: s, disallowEmptySelection: u, selectOnFocus: f, disallowTypeAhead: d, shouldUseVirtualFocus: p, allowsTabNavigation: v, isVirtualized: l, scrollRef: i }).collectionProps } } function RN(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } function IN(e, t, n) { var r = e.type, i = void 0 === r ? "menu" : r, o = e.isDisabled, a = e.trigger, s = void 0 === a ? "press" : a, l = WT(), u = Wj({ type: i }, t, n), c = u.triggerProps, f = u.overlayProps, h = DI(function (e) { return e && e.__esModule ? e.default : e }(ZF)), d = jO({ accessibilityDescription: h("longPressMessage"), onLongPressStart: function () { t.close() }, onLongPress: function () { t.open("first") } }).longPressProps; return c = GT(c, "press" === s ? { onPressStart: function (e) { "touch" !== e.pointerType && "keyboard" !== e.pointerType && !o && t.toggle("virtual" === e.pointerType ? "first" : null) }, onPress: function (e) { "touch" === e.pointerType && !o && t.toggle() } } : d), { menuTriggerProps: N(F({}, c), { id: l, onKeyDown: function (e) { if (!o && ("longPress" !== s || e.altKey) && n && n.current) switch (e.key) { case "Enter": case " ": if ("longPress" === s) return; case "ArrowDown": "continuePropagation" in e || e.stopPropagation(), e.preventDefault(), t.toggle("first"); break; case "ArrowUp": "continuePropagation" in e || e.stopPropagation(), e.preventDefault(), t.toggle("last") } } }), menuProps: N(F({}, f), { "aria-labelledby": l }) } } function jN(e, t, n) { var r = e, i = r.shouldFocusWrap, o = void 0 === i || i, a = z(r, ["shouldFocusWrap"]); !e["aria-label"] && !e["aria-labelledby"] && console.warn("An aria-label or aria-labelledby prop is required for accessibility."); var s = $T(e, { labelable: !0 }), l = LN(N(F({}, a), { ref: n, selectionManager: t.selectionManager, collection: t.collection, disabledKeys: t.disabledKeys, shouldFocusWrap: o })).listProps; return { menuProps: GT(s, F({ role: "menu" }, l)) } } function FN(e, t, n) { var r = e.isSelected, i = e.isDisabled, o = e.key, a = e.onClose, s = e.closeOnSelect, l = e.isVirtualized, u = e.onAction, c = "menuitem"; "single" === t.selectionManager.selectionMode ? c = "menuitemradio" : "multiple" === t.selectionManager.selectionMode && (c = "menuitemcheckbox"); var f = YT(), h = YT(), d = YT(), p = { "aria-disabled": i, role: c, "aria-label": e["aria-label"], "aria-labelledby": f, "aria-describedby": [h, d].filter(Boolean).join(" ") || void 0 }; "none" !== t.selectionManager.selectionMode && (p["aria-checked"] = r), l && (p["aria-posinset"] = t.collection.getItem(o).index, p["aria-setsize"] = ND(t.collection)); var v = JF({ selectionManager: t.selectionManager, key: o, ref: n, shouldSelectOnPressUp: !0 }).itemProps, g = YE({ onPressStart: function (e) { "keyboard" === e.pointerType && u && u(o) }, onPressUp: function (e) { "keyboard" !== e.pointerType && (u && u(o), a && (null != s ? s : "multiple" !== t.selectionManager.selectionMode) && a()) }, isDisabled: i }).pressProps, m = PO({ isDisabled: i, onHoverStart: function () { mO() || (t.selectionManager.setFocused(!0), t.selectionManager.setFocusedKey(o)) } }).hoverProps; return { menuItemProps: F(F({}, p), GT(v, g, m, { onKeyDown: function (e) { if (!e.repeat) switch (e.key) { case " ": !i && "none" === t.selectionManager.selectionMode && !1 !== s && a && a(); break; case "Enter": !i && !1 !== s && a && a() } } })), labelProps: { id: f }, descriptionProps: { id: h }, keyboardShortcutProps: { id: d } } } function NN(e) { var t = e.heading, n = e["aria-label"], r = WT(); return { itemProps: { role: "presentation" }, headingProps: t ? { id: r, "aria-hidden": !0 } : {}, groupProps: { role: "group", "aria-label": n, "aria-labelledby": t ? r : void 0 } } } function zN() { return !LT() && "undefined" != typeof window && window.screen.width <= 700 } RN({}, "useMenuTrigger", (function () { return IN })), $F = JSON.parse('{"longPressMessage":"اضغط مطولاً أو اضغط على Alt + السهم لأسفل لفتح القائمة"}'), QF = JSON.parse('{"longPressMessage":"Натиснете продължително или натиснете Alt+ стрелка надолу, за да отворите менюто"}'), eN = JSON.parse('{"longPressMessage":"Dlouhým stiskem nebo stisknutím kláves Alt + šipka dolů otevřete nabídku"}'), tN = JSON.parse('{"longPressMessage":"Langt tryk eller tryk på Alt + pil ned for at åbne menuen"}'), nN = JSON.parse('{"longPressMessage":"Drücken Sie lange oder drücken Sie Alt + Nach-unten, um das Menü zu öffnen"}'), rN = JSON.parse('{"longPressMessage":"Πιέστε παρατεταμένα ή πατήστε Alt + κάτω βέλος για να ανοίξετε το μενού"}'), iN = JSON.parse('{"longPressMessage":"Long press or press Alt + ArrowDown to open menu"}'), oN = JSON.parse('{"longPressMessage":"Mantenga pulsado o pulse Alt + flecha abajo para abrir el menú"}'), aN = JSON.parse('{"longPressMessage":"Menüü avamiseks vajutage pikalt või vajutage klahve Alt + allanool"}'), sN = JSON.parse('{"longPressMessage":"Avaa valikko painamalla pohjassa tai näppäinyhdistelmällä Alt + Alanuoli"}'), lN = JSON.parse('{"longPressMessage":"Appuyez de manière prolongée ou appuyez sur Alt + Flèche vers le bas pour ouvrir le menu."}'), uN = JSON.parse('{"longPressMessage":"לחץ לחיצה ארוכה או הקש Alt + ArrowDown כדי לפתוח את התפריט"}'), cN = JSON.parse('{"longPressMessage":"Dugo pritisnite ili pritisnite Alt + strelicu prema dolje za otvaranje izbornika"}'), fN = JSON.parse('{"longPressMessage":"Nyomja meg hosszan, vagy nyomja meg az Alt + lefele nyíl gombot a menü megnyitásához"}'), hN = JSON.parse('{"longPressMessage":"Premere a lungo o premere Alt + Freccia giù per aprire il menu"}'), dN = JSON.parse('{"longPressMessage":"長押しまたは Alt+下矢印キーでメニューを開く"}'), pN = JSON.parse('{"longPressMessage":"길게 누르거나 Alt + 아래쪽 화살표를 눌러 메뉴 열기"}'), vN = JSON.parse('{"longPressMessage":"Norėdami atidaryti meniu, nuspaudę palaikykite arba paspauskite „Alt + ArrowDown“."}'), gN = JSON.parse('{"longPressMessage":"Lai atvērtu izvēlni, turiet nospiestu vai nospiediet taustiņu kombināciju Alt + lejupvērstā bultiņa"}'), mN = JSON.parse('{"longPressMessage":"Langt trykk eller trykk Alt + PilNed for å åpne menyen"}'), yN = JSON.parse('{"longPressMessage":"Druk lang op Alt + pijl-omlaag of druk op Alt om het menu te openen"}'), bN = JSON.parse('{"longPressMessage":"Naciśnij i przytrzymaj lub naciśnij klawisze Alt + Strzałka w dół, aby otworzyć menu"}'), wN = JSON.parse('{"longPressMessage":"Pressione e segure ou pressione Alt + Seta para baixo para abrir o menu"}'), xN = JSON.parse('{"longPressMessage":"Prima continuamente ou prima Alt + Seta Para Baixo para abrir o menu"}'), _N = JSON.parse('{"longPressMessage":"Apăsați lung sau apăsați pe Alt + săgeată în jos pentru a deschide meniul"}'), SN = JSON.parse('{"longPressMessage":"Нажмите и удерживайте или нажмите Alt + Стрелка вниз, чтобы открыть меню"}'), kN = JSON.parse('{"longPressMessage":"Ponuku otvoríte dlhým stlačením alebo stlačením klávesu Alt + klávesu so šípkou nadol"}'), CN = JSON.parse('{"longPressMessage":"Za odprtje menija pritisnite in držite gumb ali pritisnite Alt+puščica navzdol"}'), TN = JSON.parse('{"longPressMessage":"Dugo pritisnite ili pritisnite Alt + strelicu prema dole da otvorite meni"}'), EN = JSON.parse('{"longPressMessage":"Håll nedtryckt eller tryck på Alt + pil nedåt för att öppna menyn"}'), ON = JSON.parse('{"longPressMessage":"Menüyü açmak için uzun basın veya Alt + Aşağı Ok tuşuna basın"}'), PN = JSON.parse('{"longPressMessage":"Довго або звичайно натисніть комбінацію клавіш Alt і стрілка вниз, щоб відкрити меню"}'), MN = JSON.parse('{"longPressMessage":"长按或按 Alt + 向下方向键以打开菜单"}'), AN = JSON.parse('{"longPressMessage":"長按或按 Alt+向下鍵以開啟功能表"}'), ZF = { "ar-AE": $F, "bg-BG": QF, "cs-CZ": eN, "da-DK": tN, "de-DE": nN, "el-GR": rN, "en-US": iN, "es-ES": oN, "et-EE": aN, "fi-FI": sN, "fr-FR": lN, "he-IL": uN, "hr-HR": cN, "hu-HU": fN, "it-IT": hN, "ja-JP": dN, "ko-KR": pN, "lt-LT": vN, "lv-LV": gN, "nb-NO": mN, "nl-NL": yN, "pl-PL": bN, "pt-BR": wN, "pt-PT": xN, "ro-RO": _N, "ru-RU": SN, "sk-SK": kN, "sl-SI": CN, "sr-SP": TN, "sv-SE": EN, "tr-TR": ON, "uk-UA": PN, "zh-CN": MN, "zh-TW": AN }, RN({}, "useMenu", (function () { return jN })), RN({}, "useMenuItem", (function () { return FN })), RN({}, "useMenuSection", (function () { return NN })); var BN = "bg-paper shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none rounded overflow-hidden", VN = { initial: { opacity: 0, y: 5 }, animate: { opacity: 1, y: 0 }, exit: { opacity: 0, y: 5 }, transition: { type: "tween", duration: .125 } }; function UN(e) { var t, n = e, r = n.children, i = n.className, o = n.type, a = z(n, ["children", "className", "type"]), s = h.exports.useContext(VA); return ky(BF, N(F({ className: CT("isolate absolute top-0 left-0", "popover" !== o && "w-full h-full", "modal" === o ? "z-modal" : "popover" === o ? "z-popover" : "z-tray", i), portalContainer: null == (t = null == s ? void 0 : s.portalContainer) ? void 0 : t.current }, a), { children: r })) } var HN = ce.forwardRef((function (e, t) { var n = e, r = n.children, i = n.onClose, o = n.isOpen, a = n.shouldCloseOnBlur, s = n.hideArrow, l = n.isKeyboardDismissDisabled, u = n.isNonModal, c = n.isDismissable, f = void 0 === c || c, h = n.preventScroll, d = void 0 === h || h, p = z(n, ["children", "onClose", "isOpen", "shouldCloseOnBlur", "hideArrow", "isKeyboardDismissDisabled", "isNonModal", "isDismissable", "preventScroll"]); return Xj({ isDisabled: !d }), ky(UN, { type: "popover", children: ky(WN, N(F({}, p), { ref: t, shouldCloseOnBlur: a, isKeyboardDismissDisabled: l, hideArrow: s, isNonModal: u, isDismissable: f, isOpen: o, onClose: i, children: r })) }) })), WN = ce.forwardRef((function (e, t) { var n = e, r = n.children, i = n.isOpen, o = (n.onClose, n.hideArrow), a = (n.shouldCloseOnBlur, n.isKeyboardDismissDisabled, n.isNonModal), s = n.isDismissable, l = z(n, ["children", "isOpen", "onClose", "hideArrow", "shouldCloseOnBlur", "isKeyboardDismissDisabled", "isNonModal", "isDismissable"]), u = fE(t), c = Hj(N(F({}, e), { isDismissable: s && i }), u).overlayProps, f = VF({ isDisabled: a }).modalProps; return Cy(uC.div, N(F(F({ ref: u }, VN), GT(l, c, f)), { className: BN, role: "presentation", children: [r, o ? null : ky(KN, { popoverPlacement: "bottom" })] })) })); function KN(e) { var t = e.popoverPlacement, n = CT("absolute fill-background", "top" === t && "-translate-x-1/2 left-1/2", "bottom" === t && "-translate-x-1/2 left-1/2 rotate-180", "left" === t && "-translate-y-1/2 top-1/2 rotate-90", "right" === t && "-translate-y-1/2 top-1/2 -rotate-90"); return ky("svg", { className: n, width: "16", height: "8", viewBox: "0 0 30 10", preserveAspectRatio: "none", children: ky("polygon", { points: "0,0 30,0 15,10" }) }) } var YN = ce.createContext(null); function XN(e) { var t = e.disableInitialTransition, n = e.position; return ky(uC.div, { className: "w-full h-full bg-black/30 ".concat(n || "absolute", " top-0 left-0 z-10"), "aria-hidden": !0, initial: { opacity: t ? 1 : 0 }, animate: { opacity: 1 }, exit: { opacity: 0 }, transition: { duration: .3 } }) } function GN(e) { var t = e, n = t.children, r = (t.isOpen, t.onClose), i = t.isFixedHeight, o = t.isNonModal, a = z(t, ["children", "isOpen", "onClose", "isFixedHeight", "isNonModal"]), s = h.exports.useRef(null), l = Hj(N(F({}, e), { isDismissable: !0 }), s), u = l.overlayProps, c = l.underlayProps; return Cy(UN, N(F({ type: "tray" }, a), { children: [ky(XN, F({}, c)), ky(qN, { onClose: r, ref: s, overlayProps: u, isFixedHeight: i, isNonModal: o, children: n })] })) } var qN = h.exports.forwardRef((function (e, t) { var n = e, r = n.children, i = (n.isOpen, n.isFixedHeight, n.isNonModal), o = n.overlayProps, a = z(n, ["children", "isOpen", "isFixedHeight", "isNonModal", "overlayProps"]); Xj(); var s = VF({ isDisabled: i }).modalProps, l = yE(), u = _(h.exports.useState(l.height), 2), c = u[0], f = u[1], d = h.exports.useRef(); h.exports.useEffect((function () { clearTimeout(d.current), l.height < c && l.height < window.innerHeight ? d.current = setTimeout((function () { f(l.height) }), 500) : f(l.height) }), [c, l.height]); var p = GT(a, o, { style: { maxHeight: "".concat(l.height - 64, "px") } }); return ky(uC.div, { initial: { opacity: 0, y: "100%" }, animate: { opacity: 1, y: 0 }, exit: { opacity: 0, y: "100%" }, transition: { type: "tween", duration: .2 }, className: "absolute bottom-0 left-0 w-full z-20", children: ky("div", N(F(F({}, p), s), { className: "max-w-375 w-full pb-safe-area mx-auto bg-paper rounded shadow-lg", ref: t, children: r })) }) })); function JN(e) { return e.split("-")[0] } function ZN(e) { return e.split("-")[1] } function $N(e) { return ["top", "bottom"].includes(JN(e)) ? "x" : "y" } function QN(e) { return "y" === e ? "height" : "width" } function ez(e, t, n) { var r, i = e.reference, o = e.floating, a = i.x + i.width / 2 - o.width / 2, s = i.y + i.height / 2 - o.height / 2, l = $N(t), u = QN(l), c = i[u] / 2 - o[u] / 2, f = "x" === l; switch (JN(t)) { case "top": r = { x: a, y: i.y - o.height }; break; case "bottom": r = { x: a, y: i.y + i.height }; break; case "right": r = { x: i.x + i.width, y: s }; break; case "left": r = { x: i.x - o.width, y: s }; break; default: r = { x: i.x, y: i.y } }switch (ZN(t)) { case "start": r[l] -= c * (n && f ? -1 : 1); break; case "end": r[l] += c * (n && f ? -1 : 1) }return r } var tz = function () { var e = x(b().mark((function e(t, n, r) { var i, o, a, s, l, u, c, f, h, d, p, v, g, m, y, w, x, _, S, T, E, O, P, M; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return i = r.placement, o = void 0 === i ? "bottom" : i, a = r.strategy, s = void 0 === a ? "absolute" : a, l = r.middleware, u = void 0 === l ? [] : l, c = r.platform, e.next = 9, null == c.isRTL ? void 0 : c.isRTL(n); case 9: return f = e.sent, e.next = 12, c.getElementRects({ reference: t, floating: n, strategy: s }); case 12: h = e.sent, d = ez(h, o, f), p = d.x, v = d.y, g = o, m = {}, y = 0; case 19: if (!(y < u.length)) { e.next = 53; break } return x = u[y], _ = x.name, S = x.fn, e.next = 25, S({ x: p, y: v, initialPlacement: o, placement: g, strategy: s, middlewareData: m, rects: h, platform: c, elements: { reference: t, floating: n } }); case 25: if (T = e.sent, E = T.x, O = T.y, P = T.data, M = T.reset, p = null != E ? E : p, v = null != O ? O : v, m = N(F({}, m), k({}, _, F(F({}, m[_]), P))), e.t0 = M, !e.t0) { e.next = 50; break } if (e.t1 = "object" == C(M), !e.t1) { e.next = 49; break } if (M.placement && (g = M.placement), e.t2 = M.rects, !e.t2) { e.next = 48; break } if (!0 !== M.rects) { e.next = 46; break } return e.next = 43, c.getElementRects({ reference: t, floating: n, strategy: s }); case 43: e.t3 = e.sent, e.next = 47; break; case 46: e.t3 = M.rects; case 47: h = e.t3; case 48: w = ez(h, g, f), p = w.x, v = w.y; case 49: y = -1; case 50: y++, e.next = 19; break; case 53: return e.abrupt("return", { x: p, y: v, placement: g, strategy: s, middlewareData: m }); case 54: case "end": return e.stop() } }), e) }))); return function (t, n, r) { return e.apply(this, arguments) } }(); function nz(e) { return "number" != typeof e ? function (e) { return F({ top: 0, right: 0, bottom: 0, left: 0 }, e) }(e) : { top: e, right: e, bottom: e, left: e } } function rz(e) { return N(F({}, e), { top: e.y, left: e.x, right: e.x + e.width, bottom: e.y + e.height }) } function iz(e, t) { return oz.apply(this, arguments) } function oz() { return oz = x(b().mark((function e(t, n) { var r, i, o, a, s, l, u, c, f, h, d, p, v, g, m, y, w, x, _, S, k; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return void 0 === n && (n = {}), i = t.x, o = t.y, a = t.platform, s = t.rects, l = t.elements, u = t.strategy, f = (c = n).boundary, h = void 0 === f ? "clippingAncestors" : f, d = c.rootBoundary, p = void 0 === d ? "viewport" : d, v = c.elementContext, g = void 0 === v ? "floating" : v, m = c.altBoundary, y = void 0 !== m && m, w = c.padding, x = nz(void 0 === w ? 0 : w), _ = l[y ? "floating" === g ? "reference" : "floating" : g], e.t0 = rz, e.t1 = a, e.next = 24, null == a.isElement ? void 0 : a.isElement(_); case 24: if (e.t3 = r = e.sent, e.t2 = null == e.t3, e.t2) { e.next = 28; break } e.t2 = r; case 28: if (!e.t2) { e.next = 32; break } e.t4 = _, e.next = 38; break; case 32: if (e.t5 = _.contextElement, e.t5) { e.next = 37; break } return e.next = 36, null == a.getDocumentElement ? void 0 : a.getDocumentElement(l.floating); case 36: e.t5 = e.sent; case 37: e.t4 = e.t5; case 38: return e.t6 = e.t4, e.t7 = h, e.t8 = p, e.t9 = { element: e.t6, boundary: e.t7, rootBoundary: e.t8 }, e.next = 44, e.t1.getClippingRect.call(e.t1, e.t9); case 44: if (e.t10 = e.sent, S = (0, e.t0)(e.t10), e.t11 = rz, !a.convertOffsetParentRelativeRectToViewportRelativeRect) { e.next = 60; break } return e.t13 = a, e.t14 = "floating" === g ? N(F({}, s.floating), { x: i, y: o }) : s.reference, e.next = 52, null == a.getOffsetParent ? void 0 : a.getOffsetParent(l.floating); case 52: return e.t15 = e.sent, e.t16 = u, e.t17 = { rect: e.t14, offsetParent: e.t15, strategy: e.t16 }, e.next = 57, e.t13.convertOffsetParentRelativeRectToViewportRelativeRect.call(e.t13, e.t17); case 57: e.t12 = e.sent, e.next = 61; break; case 60: e.t12 = s[g]; case 61: return e.t18 = e.t12, k = (0, e.t11)(e.t18), e.abrupt("return", { top: S.top - k.top + x.top, bottom: k.bottom - S.bottom + x.bottom, left: S.left - k.left + x.left, right: k.right - S.right + x.right }); case 64: case "end": return e.stop() } }), e) }))), oz.apply(this, arguments) } var az = Math.min, sz = Math.max; function lz(e, t, n) { return sz(e, az(t, n)) } var uz = { left: "right", right: "left", bottom: "top", top: "bottom" }; function cz(e) { return e.replace(/left|right|bottom|top/g, (function (e) { return uz[e] })) } function fz(e, t, n) { void 0 === n && (n = !1); var r = ZN(e), i = $N(e), o = QN(i), a = "x" === i ? r === (n ? "end" : "start") ? "right" : "left" : "start" === r ? "bottom" : "top"; return t.reference[o] > t.floating[o] && (a = cz(a)), { main: a, cross: cz(a) } } var hz = { start: "end", end: "start" }; function dz(e) { return e.replace(/start|end/g, (function (e) { return hz[e] })) } ["top", "right", "bottom", "left"].reduce((function (e, t) { return e.concat(t, t + "-start", t + "-end") }), []); var pz = function (e) { return void 0 === e && (e = {}), { name: "flip", options: e, fn: function (t) { return x(b().mark((function n() { var r, i, o, a, s, l, u, c, f, h, d, p, v, g, m, y, w, x, _, k, C, T, E, O, P, M, A, D, L, R, I, j, F, N; return b().wrap((function (n) { for (; ;)switch (n.prev = n.next) { case 0: return i = t.placement, o = t.middlewareData, a = t.rects, s = t.initialPlacement, l = t.platform, u = t.elements, f = (c = e).mainAxis, h = void 0 === f || f, d = c.crossAxis, p = void 0 === d || d, v = c.fallbackPlacements, g = c.fallbackStrategy, m = void 0 === g ? "bestFit" : g, y = c.flipAlignment, w = void 0 === y || y, x = z(c, ["mainAxis", "crossAxis", "fallbackPlacements", "fallbackStrategy", "flipAlignment"]), _ = JN(i), k = v || (_ !== s && w ? function (e) { var t = cz(e); return [dz(e), t, dz(t)] }(s) : [cz(s)]), C = [s].concat(S(k)), n.next = 22, iz(t, x); case 22: if (T = n.sent, E = [], O = (null == (r = o.flip) ? void 0 : r.overflows) || [], h && E.push(T[_]), !p) { n.next = 36; break } return n.t0 = fz, n.t1 = i, n.t2 = a, n.next = 31, null == l.isRTL ? void 0 : l.isRTL(u.floating); case 31: n.t3 = n.sent, P = (0, n.t0)(n.t1, n.t2, n.t3), M = P.main, A = P.cross, E.push(T[M], T[A]); case 36: if (O = [].concat(S(O), [{ placement: i, overflows: E }]), E.every((function (e) { return e <= 0 }))) { n.next = 50; break } if (R = (null != (D = null == (L = o.flip) ? void 0 : L.index) ? D : 0) + 1, !(I = C[R])) { n.next = 40; break } return n.abrupt("return", { data: { index: R, overflows: O }, reset: { placement: I } }); case 40: j = "bottom", n.t4 = m, n.next = "bestFit" === n.t4 ? 44 : "initialPlacement" === n.t4 ? 47 : 48; break; case 44: return (N = null == (F = O.slice().sort((function (e, t) { return e.overflows.filter((function (e) { return e > 0 })).reduce((function (e, t) { return e + t }), 0) - t.overflows.filter((function (e) { return e > 0 })).reduce((function (e, t) { return e + t }), 0) }))[0]) ? void 0 : F.placement) && (j = N), n.abrupt("break", 48); case 47: j = s; case 48: if (i === j) { n.next = 50; break } return n.abrupt("return", { reset: { placement: j } }); case 50: return n.abrupt("return", {}); case 51: case "end": return n.stop() } }), n) })))() } } }, vz = function (e) { return void 0 === e && (e = 0), { name: "offset", options: e, fn: function (t) { return x(b().mark((function n() { var r, i, o, a, s, l, u; return b().wrap((function (n) { for (; ;)switch (n.prev = n.next) { case 0: return r = t.x, i = t.y, o = t.placement, a = t.rects, s = t.platform, l = t.elements, n.t0 = function (e, t, n, r) { void 0 === r && (r = !1); var i = JN(e), o = ZN(e), a = "x" === $N(e), s = ["left", "top"].includes(i) ? -1 : 1, l = r && a ? -1 : 1, u = "function" == typeof n ? n(N(F({}, t), { placement: e })) : n, c = "number" == typeof u ? { mainAxis: u, crossAxis: 0, alignmentAxis: null } : F({ mainAxis: 0, crossAxis: 0, alignmentAxis: null }, u), f = c.mainAxis, h = c.crossAxis, d = c.alignmentAxis; return o && "number" == typeof d && (h = "end" === o ? -1 * d : d), a ? { x: h * l, y: f * s } : { x: f * s, y: h * l } }, n.t1 = o, n.t2 = a, n.t3 = e, n.next = 12, null == s.isRTL ? void 0 : s.isRTL(l.floating); case 12: return n.t4 = n.sent, u = (0, n.t0)(n.t1, n.t2, n.t3, n.t4), n.abrupt("return", { x: r + u.x, y: i + u.y, data: u }); case 15: case "end": return n.stop() } }), n) })))() } } }; function gz(e) { return "x" === e ? "y" : "x" } var mz = function (e) { return void 0 === e && (e = {}), { name: "shift", options: e, fn: function (t) { return x(b().mark((function n() { var r, i, o, a, s, l, u, c, f, h, d, p, v, g, m, y, w, x, _, S, C; return b().wrap((function (n) { for (; ;)switch (n.prev = n.next) { case 0: return i = t.x, o = t.y, a = t.placement, l = (s = e).mainAxis, u = void 0 === l || l, c = s.crossAxis, f = void 0 !== c && c, h = s.limiter, d = void 0 === h ? { fn: function (e) { return { x: e.x, y: e.y } } } : h, p = z(s, ["mainAxis", "crossAxis", "limiter"]), v = { x: i, y: o }, n.next = 14, iz(t, p); case 14: return g = n.sent, m = $N(JN(a)), y = gz(m), w = v[m], x = v[y], u && (_ = "y" === m ? "bottom" : "right", w = lz(w + g["y" === m ? "top" : "left"], w, w - g[_])), f && (S = "y" === y ? "bottom" : "right", x = lz(x + g["y" === y ? "top" : "left"], x, x - g[S])), C = d.fn(N(F({}, t), (k(r = {}, m, w), k(r, y, x), r))), n.abrupt("return", N(F({}, C), { data: { x: C.x - i, y: C.y - o } })); case 22: case "end": return n.stop() } }), n) })))() } } }; function yz(e) { return "[object Window]" === (null == e ? void 0 : e.toString()) } function bz(e) { if (null == e) return window; if (!yz(e)) { var t = e.ownerDocument; return t && t.defaultView || window } return e } function wz(e) { return bz(e).getComputedStyle(e) } function xz(e) { return yz(e) ? "" : e ? (e.nodeName || "").toLowerCase() : "" } function _z(e) { return e instanceof bz(e).HTMLElement } function Sz(e) { return e instanceof bz(e).Element } function kz(e) { return e instanceof bz(e).ShadowRoot || e instanceof ShadowRoot } function Cz(e) { var t = wz(e), n = t.overflow, r = t.overflowX, i = t.overflowY; return /auto|scroll|overlay|hidden/.test(n + i + r) } function Tz(e) { return ["table", "td", "th"].includes(xz(e)) } function Ez(e) { var t = navigator.userAgent.toLowerCase().includes("firefox"), n = wz(e); return "none" !== n.transform || "none" !== n.perspective || "paint" === n.contain || ["transform", "perspective"].includes(n.willChange) || t && "filter" === n.willChange || t && !!n.filter && "none" !== n.filter } var Oz = Math.min, Pz = Math.max, Mz = Math.round; function Az(e, t) { void 0 === t && (t = !1); var n = e.getBoundingClientRect(), r = 1, i = 1; return t && _z(e) && (r = e.offsetWidth > 0 && Mz(n.width) / e.offsetWidth || 1, i = e.offsetHeight > 0 && Mz(n.height) / e.offsetHeight || 1), { width: n.width / r, height: n.height / i, top: n.top / i, right: n.right / r, bottom: n.bottom / i, left: n.left / r, x: n.left / r, y: n.top / i } } function Dz(e) { return (t = e, (t instanceof bz(t).Node ? e.ownerDocument : e.document) || window.document).documentElement; var t } function Lz(e) { return yz(e) ? { scrollLeft: e.pageXOffset, scrollTop: e.pageYOffset } : { scrollLeft: e.scrollLeft, scrollTop: e.scrollTop } } function Rz(e) { return Az(Dz(e)).left + Lz(e).scrollLeft } function Iz(e, t, n) { var r = _z(t), i = Dz(t), o = Az(e, r && function (e) { var t = Az(e); return Mz(t.width) !== e.offsetWidth || Mz(t.height) !== e.offsetHeight }(t)), a = { scrollLeft: 0, scrollTop: 0 }, s = { x: 0, y: 0 }; if (r || !r && "fixed" !== n) if (("body" !== xz(t) || Cz(i)) && (a = Lz(t)), _z(t)) { var l = Az(t, !0); s.x = l.x + t.clientLeft, s.y = l.y + t.clientTop } else i && (s.x = Rz(i)); return { x: o.left + a.scrollLeft - s.x, y: o.top + a.scrollTop - s.y, width: o.width, height: o.height } } function jz(e) { return "html" === xz(e) ? e : e.assignedSlot || e.parentNode || (kz(e) ? e.host : null) || Dz(e) } function Fz(e) { return _z(e) && "fixed" !== getComputedStyle(e).position ? e.offsetParent : null } function Nz(e) { for (var t = bz(e), n = Fz(e); n && Tz(n) && "static" === getComputedStyle(n).position;)n = Fz(n); return n && ("html" === xz(n) || "body" === xz(n) && "static" === getComputedStyle(n).position && !Ez(n)) ? t : n || function (e) { var t = jz(e); for (kz(t) && (t = t.host); _z(t) && !["html", "body"].includes(xz(t));) { if (Ez(t)) return t; t = t.parentNode } return null }(e) || t } function zz(e) { if (_z(e)) return { width: e.offsetWidth, height: e.offsetHeight }; var t = Az(e); return { width: t.width, height: t.height } } function Bz(e) { var t = jz(e); return ["html", "body", "#document"].includes(xz(t)) ? e.ownerDocument.body : _z(t) && Cz(t) ? t : Bz(t) } function Vz(e, t) { var n; void 0 === t && (t = []); var r = Bz(e), i = r === (null == (n = e.ownerDocument) ? void 0 : n.body), o = bz(r), a = i ? [o].concat(o.visualViewport || [], Cz(r) ? r : []) : r, s = t.concat(a); return i ? s : s.concat(Vz(jz(a))) } function Uz(e, t) { return "viewport" === t ? rz(function (e) { var t = bz(e), n = Dz(e), r = t.visualViewport, i = n.clientWidth, o = n.clientHeight, a = 0, s = 0; return r && (i = r.width, o = r.height, Math.abs(t.innerWidth / r.scale - r.width) < .01 && (a = r.offsetLeft, s = r.offsetTop)), { width: i, height: o, x: a, y: s } }(e)) : Sz(t) ? function (e) { var t = Az(e), n = t.top + e.clientTop, r = t.left + e.clientLeft; return { top: n, left: r, x: r, y: n, right: r + e.clientWidth, bottom: n + e.clientHeight, width: e.clientWidth, height: e.clientHeight } }(t) : rz(function (e) { var t, n = Dz(e), r = Lz(e), i = null == (t = e.ownerDocument) ? void 0 : t.body, o = Pz(n.scrollWidth, n.clientWidth, i ? i.scrollWidth : 0, i ? i.clientWidth : 0), a = Pz(n.scrollHeight, n.clientHeight, i ? i.scrollHeight : 0, i ? i.clientHeight : 0), s = -r.scrollLeft + Rz(e), l = -r.scrollTop; return "rtl" === wz(i || n).direction && (s += Pz(n.clientWidth, i ? i.clientWidth : 0) - o), { width: o, height: a, x: s, y: l } }(Dz(e))) } var Hz = { getClippingRect: function (e) { var t = e.element, n = e.boundary, r = e.rootBoundary, i = [].concat(S("clippingAncestors" === n ? function (e) { var t = Vz(e), n = ["absolute", "fixed"].includes(wz(e).position) && _z(e) ? Nz(e) : e; return Sz(n) ? t.filter((function (e) { return Sz(e) && function (e, t) { var n = null == t.getRootNode ? void 0 : t.getRootNode(); if (e.contains(t)) return !0; if (n && kz(n)) { var r = t; do { if (r && e === r) return !0; r = r.parentNode || r.host } while (r) } return !1 }(e, n) && "body" !== xz(e) })) : [] }(t) : [].concat(n)), [r]), o = i[0], a = i.reduce((function (e, n) { var r = Uz(t, n); return e.top = Pz(r.top, e.top), e.right = Oz(r.right, e.right), e.bottom = Oz(r.bottom, e.bottom), e.left = Pz(r.left, e.left), e }), Uz(t, o)); return { width: a.right - a.left, height: a.bottom - a.top, x: a.left, y: a.top } }, convertOffsetParentRelativeRectToViewportRelativeRect: function (e) { var t = e.rect, n = e.offsetParent, r = e.strategy, i = _z(n), o = Dz(n); if (n === o) return t; var a = { scrollLeft: 0, scrollTop: 0 }, s = { x: 0, y: 0 }; if ((i || !i && "fixed" !== r) && (("body" !== xz(n) || Cz(o)) && (a = Lz(n)), _z(n))) { var l = Az(n, !0); s.x = l.x + n.clientLeft, s.y = l.y + n.clientTop } return N(F({}, t), { x: t.x - a.scrollLeft + s.x, y: t.y - a.scrollTop + s.y }) }, isElement: Sz, getDimensions: zz, getOffsetParent: Nz, getDocumentElement: Dz, getElementRects: function (e) { var t = e.reference, n = e.floating, r = e.strategy; return { reference: Iz(t, Nz(n), r), floating: N(F({}, zz(n)), { x: 0, y: 0 }) } }, getClientRects: function (e) { return Array.from(e.getClientRects()) }, isRTL: function (e) { return "rtl" === wz(e).direction } }, Wz = "undefined" != typeof document ? h.exports.useLayoutEffect : h.exports.useEffect; function Kz(e, t) { if (e === t) return !0; if (C(e) != C(t)) return !1; if ("function" == typeof e && e.toString() === t.toString()) return !0; var n, r, i; if (e && t && "object" == C(e)) { if (Array.isArray(e)) { if ((n = e.length) != t.length) return !1; for (r = n; 0 != r--;)if (!Kz(e[r], t[r])) return !1; return !0 } if ((n = (i = Object.keys(e)).length) !== Object.keys(t).length) return !1; for (r = n; 0 != r--;)if (!Object.prototype.hasOwnProperty.call(t, i[r])) return !1; for (r = n; 0 != r--;) { var o = i[r]; if (!("_owner" === o && e.$$typeof || Kz(e[o], t[o]))) return !1 } return !0 } return e != e && t != t } function Yz(e) { var t = void 0 === e ? {} : e, n = t.middleware, r = t.placement, i = void 0 === r ? "bottom" : r, o = t.strategy, a = void 0 === o ? "absolute" : o, s = h.exports.useRef(null), l = h.exports.useRef(null), u = _(h.exports.useState({ x: null, y: null, strategy: a, placement: i, middlewareData: {} }), 2), c = u[0], f = u[1], d = _(h.exports.useState(n), 2), p = d[0], v = d[1]; Kz(null == p ? void 0 : p.map((function (e) { return e.options })), null == n ? void 0 : n.map((function (e) { return e.options }))) || v(n); var g = h.exports.useRef(!0); Wz((function () { return g.current = !0, function () { g.current = !1 } }), []); var m = h.exports.useCallback((function () { !s.current || !l.current || function (e, t, n) { return tz(e, t, F({ platform: Hz }, n)) }(s.current, l.current, { middleware: p, placement: i, strategy: a }).then((function (e) { g.current && f(e) })) }), [p, i, a]); Wz(m, [m]); var y = h.exports.useCallback((function (e) { s.current = e, m() }), [m]), b = h.exports.useCallback((function (e) { l.current = e, m() }), [m]), w = h.exports.useMemo((function () { return { reference: s, floating: l } }), []); return h.exports.useMemo((function () { return N(F({}, c), { update: m, refs: w, reference: y, floating: b }) }), [c, m, w, y, b]) } function Xz(e) { var t = e.shouldFlip, n = void 0 === t || t, r = e.offset, i = void 0 === r ? 5 : r, o = e.containerPadding, a = void 0 === o ? 16 : o, s = Yz({ placement: "bottom", middleware: [vz(i), pz({ padding: a, crossAxis: n, mainAxis: n }), mz({ padding: a })] }), l = s.x, u = s.y, c = s.reference, f = s.floating, h = s.strategy, d = s.refs; return { triggerRef: c, triggerObjRef: d.reference, overlayRef: f, overlayObjRef: d.floating, objRefs: d, positionStyle: { position: h, top: null != u ? u : "", left: null != l ? l : "" } } } function Gz(e) { var t, n = e.children, r = e.closeOnSelect, i = e.shouldFlip, o = void 0 === i || i, a = _(ce.Children.toArray(n), 2), s = a[0], l = a[1], u = BD(e), c = Xz({ shouldFlip: o }), f = c.triggerRef, h = c.overlayRef, d = c.positionStyle, p = IN({}, u, c.triggerObjRef), v = p.menuTriggerProps, g = p.menuProps, m = zN(), y = N(F({}, g), { onClose: u.close, closeOnSelect: r, autoFocus: u.focusStrategy || !0 }), b = Cy(QA, { restoreFocus: !0, contain: m, children: [ky(UF, { onDismiss: u.close }), l, ky(UF, { onDismiss: u.close })] }); return t = m ? ky(GN, { isOpen: u.isOpen, onClose: u.close, children: b }) : ky(HN, { isOpen: u.isOpen, style: d, ref: h, hideArrow: !0, onClose: u.close, shouldCloseOnBlur: !0, children: b }), Cy(Ty, { children: [s && ce.cloneElement(s, N(F({}, v), { ref: f, isPressed: u.isOpen })), ky(vC, { children: u.isOpen && ky(YN.Provider, { value: y, children: t }) })] }) } function qz(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } qz({}, "useMultipleSelectionState", (function () { return Zz })); var Jz = function (e) { u(n, e); var t = f(n); function n(e, r, i) { var o; return g(this, n), o = t.call(this, e), e instanceof n ? (o.anchorKey = r || e.anchorKey, o.currentKey = i || e.currentKey) : (o.anchorKey = r, o.currentKey = i), o } return y(n) }(s(Set)); function Zz(e) { var t = e.selectionMode, n = void 0 === t ? "none" : t, r = e.disallowEmptySelection, i = e.allowDuplicateSelectionEvents, o = h.exports.useRef(!1), a = _(h.exports.useState(!1), 2)[1], s = h.exports.useRef(null), l = h.exports.useRef(null), u = _(h.exports.useState(null), 2)[1], c = _(IT(h.exports.useMemo((function () { return $z(e.selectedKeys) }), [e.selectedKeys]), h.exports.useMemo((function () { return $z(e.defaultSelectedKeys, new Jz) }), [e.defaultSelectedKeys]), e.onSelectionChange), 2), f = c[0], d = c[1], p = h.exports.useMemo((function () { return e.disabledKeys ? new Set(e.disabledKeys) : new Set }), [e.disabledKeys]), v = _(h.exports.useState(e.selectionBehavior || "toggle"), 2), g = v[0], m = v[1]; return "replace" === e.selectionBehavior && "toggle" === g && "object" == C(f) && 0 === f.size && m("replace"), { selectionMode: n, disallowEmptySelection: r, selectionBehavior: g, setSelectionBehavior: m, get isFocused() { return o.current }, setFocused: function (e) { o.current = e, a(e) }, get focusedKey() { return s.current }, get childFocusStrategy() { return l.current }, setFocusedKey: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "first"; s.current = e, l.current = t, u(e) }, selectedKeys: f, setSelectedKeys: function (e) { (i || !function (e, t) { if (e.size !== t.size) return !1; var n, r = T(e); try { for (r.s(); !(n = r.n()).done;) { var i = n.value; if (!t.has(i)) return !1 } } catch (e) { r.e(e) } finally { r.f() } return !0 }(e, f)) && d(e) }, disabledKeys: p } } function $z(e, t) { return e ? "all" === e ? "all" : new Jz(e) : t } qz({}, "SelectionManager", (function () { return Qz })); var Qz = function () { function e(t, n, r) { var i; g(this, e), this.collection = t, this.state = n, this.allowsCellSelection = null !== (i = null == r ? void 0 : r.allowsCellSelection) && void 0 !== i && i, this._isSelectAll = null } return y(e, [{ key: "selectionMode", get: function () { return this.state.selectionMode } }, { key: "disallowEmptySelection", get: function () { return this.state.disallowEmptySelection } }, { key: "selectionBehavior", get: function () { return this.state.selectionBehavior } }, { key: "setSelectionBehavior", value: function (e) { this.state.setSelectionBehavior(e) } }, { key: "isFocused", get: function () { return this.state.isFocused } }, { key: "setFocused", value: function (e) { this.state.setFocused(e) } }, { key: "focusedKey", get: function () { return this.state.focusedKey } }, { key: "childFocusStrategy", get: function () { return this.state.childFocusStrategy } }, { key: "setFocusedKey", value: function (e, t) { this.state.setFocusedKey(e, t) } }, { key: "selectedKeys", get: function () { return "all" === this.state.selectedKeys ? new Set(this.getSelectAllKeys()) : this.state.selectedKeys } }, { key: "rawSelection", get: function () { return this.state.selectedKeys } }, { key: "isSelected", value: function (e) { return "none" !== this.state.selectionMode && (e = this.getKey(e), "all" === this.state.selectedKeys ? !this.state.disabledKeys.has(e) : this.state.selectedKeys.has(e)) } }, { key: "isEmpty", get: function () { return "all" !== this.state.selectedKeys && 0 === this.state.selectedKeys.size } }, { key: "isSelectAll", get: function () { if (this.isEmpty) return !1; if ("all" === this.state.selectedKeys) return !0; if (null != this._isSelectAll) return this._isSelectAll; var e = this.getSelectAllKeys(), t = this.state.selectedKeys; return this._isSelectAll = e.every((function (e) { return t.has(e) })), this._isSelectAll } }, { key: "firstSelectedKey", get: function () { var e, t = null, n = T(this.state.selectedKeys); try { for (n.s(); !(e = n.n()).done;) { var r = e.value, i = this.collection.getItem(r); (!t || (null == i ? void 0 : i.index) < t.index) && (t = i) } } catch (e) { n.e(e) } finally { n.f() } return null == t ? void 0 : t.key } }, { key: "lastSelectedKey", get: function () { var e, t = null, n = T(this.state.selectedKeys); try { for (n.s(); !(e = n.n()).done;) { var r = e.value, i = this.collection.getItem(r); (!t || (null == i ? void 0 : i.index) > t.index) && (t = i) } } catch (e) { n.e(e) } finally { n.f() } return null == t ? void 0 : t.key } }, { key: "extendSelection", value: function (e) { if ("none" !== this.selectionMode) if ("single" !== this.selectionMode) { var t; if (e = this.getKey(e), "all" === this.state.selectedKeys) t = new Jz([e], e, e); else { var n = this.state.selectedKeys, r = n.anchorKey || e; t = new Jz(n, r, e); var i, o = T(this.getKeyRange(r, n.currentKey || e)); try { for (o.s(); !(i = o.n()).done;) { var a = i.value; t.delete(a) } } catch (e) { o.e(e) } finally { o.f() } var s, l = T(this.getKeyRange(e, r)); try { for (l.s(); !(s = l.n()).done;) { var u = s.value; this.state.disabledKeys.has(u) || t.add(u) } } catch (e) { l.e(e) } finally { l.f() } } this.state.setSelectedKeys(t) } else this.replaceSelection(e) } }, { key: "getKeyRange", value: function (e, t) { var n = this.collection.getItem(e), r = this.collection.getItem(t); return n && r ? n.index <= r.index ? this.getKeyRangeInternal(e, t) : this.getKeyRangeInternal(t, e) : [] } }, { key: "getKeyRangeInternal", value: function (e, t) { for (var n = [], r = e; r;) { var i = this.collection.getItem(r); if ((i && "item" === i.type || "cell" === i.type && this.allowsCellSelection) && n.push(r), r === t) return n; r = this.collection.getKeyAfter(r) } return [] } }, { key: "getKey", value: function (e) { var t = this.collection.getItem(e); if (!t || "cell" === t.type && this.allowsCellSelection) return e; for (; "item" !== t.type && null != t.parentKey;)t = this.collection.getItem(t.parentKey); return t && "item" === t.type ? t.key : null } }, { key: "toggleSelection", value: function (e) { if ("none" !== this.selectionMode) if ("single" !== this.selectionMode || this.isSelected(e)) { if (null != (e = this.getKey(e))) { var t = new Jz("all" === this.state.selectedKeys ? this.getSelectAllKeys() : this.state.selectedKeys); t.has(e) ? t.delete(e) : (t.add(e), t.anchorKey = e, t.currentKey = e), (!this.disallowEmptySelection || 0 !== t.size) && this.state.setSelectedKeys(t) } } else this.replaceSelection(e) } }, { key: "replaceSelection", value: function (e) { "none" !== this.selectionMode && null != (e = this.getKey(e)) && this.state.setSelectedKeys(new Jz([e], e, e)) } }, { key: "setSelectedKeys", value: function (e) { if ("none" !== this.selectionMode) { var t, n = new Jz, r = T(e); try { for (r.s(); !(t = r.n()).done;) { var i = t.value; if (null != (i = this.getKey(i)) && (n.add(i), "single" === this.selectionMode)) break } } catch (e) { r.e(e) } finally { r.f() } this.state.setSelectedKeys(n) } } }, { key: "getSelectAllKeys", value: function () { var e = this, t = []; return function n(r) { for (; r;) { if (!e.state.disabledKeys.has(r)) { var i = e.collection.getItem(r); "item" === i.type && t.push(r), i.hasChildNodes && (e.allowsCellSelection || "item" !== i.type) && n(S(i.childNodes)[0].key) } r = e.collection.getKeyAfter(r) } }(this.collection.getFirstKey()), t } }, { key: "selectAll", value: function () { "multiple" === this.selectionMode && this.state.setSelectedKeys("all") } }, { key: "clearSelection", value: function () { !this.disallowEmptySelection && ("all" === this.state.selectedKeys || this.state.selectedKeys.size > 0) && this.state.setSelectedKeys(new Jz) } }, { key: "toggleSelectAll", value: function () { this.isSelectAll ? this.clearSelection() : this.selectAll() } }, { key: "select", value: function (e, t) { "none" !== this.selectionMode && ("single" === this.selectionMode ? this.isSelected(e) && !this.disallowEmptySelection ? this.toggleSelection(e) : this.replaceSelection(e) : "toggle" === this.selectionBehavior || t && ("touch" === t.pointerType || "virtual" === t.pointerType) ? this.toggleSelection(e) : this.replaceSelection(e)) } }, { key: "isSelectionEqual", value: function (e) { if (e === this.state.selectedKeys) return !0; var t = this.selectedKeys; if (e.size !== t.size) return !1; var n, r = T(e); try { for (r.s(); !(n = r.n()).done;) { var i = n.value; if (!t.has(i)) return !1 } } catch (e) { r.e(e) } finally { r.f() } var o, a = T(t); try { for (a.s(); !(o = a.n()).done;) { var s = o.value; if (!e.has(s)) return !1 } } catch (e) { a.e(e) } finally { a.f() } return !0 } }, { key: "canSelectItem", value: function (e) { if ("none" === this.state.selectionMode || this.state.disabledKeys.has(e)) return !1; var t = this.collection.getItem(e); return !(!t || "cell" === t.type && !this.allowsCellSelection) } }]), e }(); Object.defineProperty({}, "useTreeState", { get: function () { return nB }, set: void 0, enumerable: !0, configurable: !0 }); var eB = Symbol.iterator, tB = function () { function e(t) { var n = this, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, i = r.expandedKeys; g(this, e), this.keyMap = new Map, this.iterable = t, i = i || new Set; var o, a = function e(t) { if (n.keyMap.set(t.key, t), t.childNodes && ("section" === t.type || i.has(t.key))) { var r, o = T(t.childNodes); try { for (o.s(); !(r = o.n()).done;)e(r.value) } catch (e) { o.e(e) } finally { o.f() } } }, s = T(t); try { for (s.s(); !(o = s.n()).done;) { var l = o.value; a(l) } } catch (e) { s.e(e) } finally { s.f() } var u, c, f = 0, h = T(this.keyMap); try { for (h.s(); !(c = h.n()).done;) { var d = _(c.value, 2), p = d[0], v = d[1]; u ? (u.nextKey = p, v.prevKey = u.key) : (this.firstKey = p, v.prevKey = void 0), "item" === v.type && (v.index = f++), (u = v).nextKey = void 0 } } catch (e) { h.e(e) } finally { h.f() } this.lastKey = null == u ? void 0 : u.key } return y(e, [{ key: eB, value: b().mark((function e() { return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.delegateYield(this.iterable, "t0", 1); case 1: case "end": return e.stop() } }), e, this) })) }, { key: "size", get: function () { return this.keyMap.size } }, { key: "getKeys", value: function () { return this.keyMap.keys() } }, { key: "getKeyBefore", value: function (e) { var t = this.keyMap.get(e); return t ? t.prevKey : null } }, { key: "getKeyAfter", value: function (e) { var t = this.keyMap.get(e); return t ? t.nextKey : null } }, { key: "getFirstKey", value: function () { return this.firstKey } }, { key: "getLastKey", value: function () { return this.lastKey } }, { key: "getItem", value: function (e) { return this.keyMap.get(e) } }, { key: "at", value: function (e) { var t = S(this.getKeys()); return this.getItem(t[e]) } }]), e }(); function nB(e) { var t = _(IT(e.expandedKeys ? new Set(e.expandedKeys) : void 0, e.defaultExpandedKeys ? new Set(e.defaultExpandedKeys) : new Set, e.onExpandedChange), 2), n = t[0], r = t[1], i = Zz(e), o = h.exports.useMemo((function () { return e.disabledKeys ? new Set(e.disabledKeys) : new Set }), [e.disabledKeys]), a = jD(e, (function (e) { return new tB(e, { expandedKeys: n }) }), null, [n]); return h.exports.useEffect((function () { null != i.focusedKey && !a.getItem(i.focusedKey) && i.setFocusedKey(null) }), [a, i.focusedKey]), { collection: a, expandedKeys: n, disabledKeys: o, toggleKey: function (e) { r(function (e, t) { var n = new Set(e); return n.has(t) ? n.delete(t) : n.add(t), n }(n, e)) }, selectionManager: new Qz(a, i) } } function rB(e) { return CT("p-4 overflow-y-auto text-base sm:text-sm outline-none max-h-inherit", e) } function iB(e) { var t = e.isFocused, n = e.isSelected, r = e.isDisabled, i = e.isHovered, o = ""; return r ? o = "text-disabled pointer-events-none" : n ? o = i || t ? "bg-primary/focus" : "bg-primary/selected" : t ? o = "bg-focus" : i && (o = "bg-hover"), CT("px-16 py-8 text-sm truncate select-none outline-none rounded cursor-pointer flex items-center gap-16", o) } function oB(e) { var t, n, r, i, o, a, s = e.item, l = e.state, u = e.onAction, c = h.exports.useContext(YN), f = c.onClose, d = c.closeOnSelect, p = s.rendered, v = s.key; Array.isArray(p) ? (i = void 0 === (n = (t = _(p, 3))[0]) ? null : n, a = t[1], o = void 0 === (r = t[2]) ? null : r) : a = p; var g = l.selectionManager.isSelected(v), m = l.disabledKeys.has(v), y = h.exports.useRef(null), b = FN({ isSelected: g, isDisabled: m, "aria-label": s["aria-label"], key: v, onClose: f, closeOnSelect: d, onAction: u }, l, y), w = b.menuItemProps, x = b.labelProps, S = (b.descriptionProps, b.keyboardShortcutProps, PO({ isDisabled: m })), k = S.hoverProps, C = S.isHovered, T = dD(), E = T.focusProps, O = iB({ isFocused: T.isFocusVisible, isSelected: g, isDisabled: m, isHovered: C }); return Cy("li", N(F({ className: O }, GT(w, k, E)), { ref: y, children: [i && ce.cloneElement(i, { className: "icon-md text-muted" }), ky("div", N(F({}, x), { children: a })), o] })) } function aB(e) { var t = rB(), n = h.exports.useContext(YN), r = h.exports.useRef(null), i = F({}, GT(n, e)), o = nB(i), a = jN(i, o, r).menuProps; return ky("ul", N(F({ ref: r, className: t }, a), { children: S(o.collection).map((function (e) { var t = ky(oB, { item: e, state: o, onAction: i.onAction }, e.key); return e.wrapper && (t = e.wrapper(t)), t })) })) } function sB(e) { var t = e.item, n = e.button, r = t.menuItems; return Cy(Gz, { children: [n, ky(aB, { onAction: function (e) { var t = r.find((function (t) { return t.label === e })); null == t || t.action() }, items: r, children: function (e) { return ky(PD, { children: e.label }, e.label) } })] }) } var lB = h.exports.forwardRef((function (e, t) { var n = e, r = n.children, i = n.size, o = n.variant, a = void 0 === o ? "text" : o, s = n.radius, l = void 0 === s ? "rounded-full" : s, u = n.className, c = n.padding, f = n.equalWidth, h = void 0 === f || f, d = z(n, ["children", "size", "variant", "radius", "className", "padding", "equalWidth"]), p = CT(WA(i, { padding: c, equalWidth: h }), u), v = CT(r.props.className, KA(i)); return ky(SD, N(F({}, d), { ref: t, radius: l, variant: a, className: p, children: ce.cloneElement(r, { className: v }) })) })), uB = ce.memo((function (e) { var t, n = e.icon, r = e.className; return t = ce.isValidElement(n) ? ce.cloneElement(n, { className: "svg-iconEl" }) : "string" == typeof n ? ky("img", { className: "w-font h-font", src: n, alt: "" }) : Array.isArray(n) ? ce.createElement(function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : ""; return Oy(Py(e), t) }(n)) : ce.createElement(n), ky("span", { className: CT(r, "leading-none"), children: t }) })); function cB(e) { var t = e.item, n = t.label ? ky(hB, { item: t }) : ky(fB, { item: t }); return t.menuItems ? ky(sB, { item: t, button: n }) : ce.cloneElement(n, { onPress: function () { var e; null == (e = t.action) || e.call(t, YO().editor) } }) } var fB = h.exports.forwardRef((function (e, t) { var n = e, r = n.item, i = z(n, ["item"]); return ky(lB, N(F({ ref: t, radius: "rounded-full", size: "sm" }, i), { children: ky(uB, { icon: r.icon }) })) })), hB = h.exports.forwardRef((function (e, t) { var n = e, r = n.item, i = z(n, ["item"]); return ky(kD, N(F({ ref: t, radius: "rounded-full", size: "xs", color: "primary", startIcon: ky(uB, { icon: r.icon }) }, i), { children: ky(dB, { item: r }) })) })); function dB(e) { var t = e.item; return t.label ? "string" == typeof t.label ? ky(Ty, { children: t.label }) : ky(ay, F({}, t.label)) : null } function pB(e) { var t = e.children, n = e.color, r = e.variant, i = e.radius, o = e.size, a = e.className, s = e.value, l = e.onChange, u = e.multiple, c = ce.Children.map(t, (function (e, a) { if (ce.isValidElement(e)) { var c = function (e) { return void 0 !== s && (u ? s.includes(e) : e === s) }(e.props.value), f = c ? "primary" : n; return ce.cloneElement(e, N(F({ color: c ? "primary" : n, variant: r, size: o, radius: null }, e.props), { onPress: function (t) { e.props.onPress && e.props.onPress(t), l && (u ? null == l || l(function (e) { var t = S(s), n = s.indexOf(e); return n > -1 ? t.splice(n, 1) : t.push(e), t }(e.props.value)) : null == l || l(e.props.value)) }, className: CT(e.props.className, c ? "z-20" : "z-10", vB(a, t, i, f)) })) } })); return ky("div", { className: CT(i, "inline-flex isolate", a), children: c }) } function vB(e, t, n, r) { return 0 === e ? CT(n, "rounded-tr-none rounded-br-none", !r && "border-r-transparent disabled:border-r-transparent") : e === t.length - 1 ? CT(n, "rounded-tl-none rounded-bl-none -ml-1") : CT("rounded-none -ml-1", !r && "border-r-transparent disabled:border-r-transparent") } var gB = Oy(ky("path", { d: "M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z" }), "UndoOutlined"), mB = Oy(ky("path", { d: "M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z" }), "RedoOutlined"); function yB() { var e = lw((function (e) { return e.history.canUndo })), t = lw((function (e) { return e.history.canRedo })); return Cy(pB, { variant: "outline", children: [ky(lB, { equalWidth: !1, size: "xs", padding: "pl-12 pr-10", radius: "rounded-full", isDisabled: !e, onPress: function () { XO().history.undo() }, children: ky(gB, {}) }), ky(lB, { equalWidth: !1, padding: "pl-10 pr-12", size: "xs", radius: "rounded-full", isDisabled: !t, onPress: function () { XO().history.redo() }, children: ky(mB, {}) })] }) } var bB = Oy(ky("path", { d: "M19 13H5v-2h14v2z" }), "RemoveOutlined"), wB = Oy(ky("path", { d: "M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" }), "AddOutlined"); function xB() { var e, t, n, r = lw((function (e) { return e.zoom })) || 1; return null == (e = lw((function (e) { var t, n; return null == (n = null == (t = e.config.tools) ? void 0 : t.zoom) ? void 0 : n.allowUserZoom }))) || e ? Cy("div", { className: "flex items-center select-none", children: [ky(lB, { size: "sm", isDisabled: !(null == (t = XO().zoom) ? void 0 : t.canZoomOut()), onPress: function () { XO().zoom.zoomOut(XO().zoom.step) }, children: ky(bB, {}) }), Cy("div", { className: "w-[4ch] text-sm text-center", children: [Math.round(100 * r), "%"] }), ky(lB, { size: "sm", isDisabled: !(null == (n = XO().zoom) ? void 0 : n.canZoomIn()), onPress: function () { XO().zoom.zoomIn(XO().zoom.step) }, children: ky(wB, {}) })] }) : null } function _B(e) { var t = e.item; switch (t.type) { case "undoWidget": return ky(yB, {}); case "zoomWidget": return ky(xB, {}); case "button": return ky(cB, { item: t }); case "image": return ky("img", { className: "h-30 object-cover", src: vP(t.src), alt: "" }); default: return null } } var SB = Oy(ky("path", { d: "M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z" }), "CloseOutlined"); function kB() { var e, t = lw((function (e) { var t; return (null == (t = e.config.ui) ? void 0 : t.mode) === sy.OVERLAY })), n = lw((function (e) { return e.stageSize })).width <= 700; return n && (null == (e = YO().config.ui) ? void 0 : e.forceOverlayModeOnMobile) && (t = !0), { isModal: t, isMobile: n } } function CB() { var e, t = kB(), n = t.isModal, r = t.isMobile, i = null == (e = lw((function (e) { var t; return null == (t = e.config.ui) ? void 0 : t.allowEditorClose }))) || e, o = lw((function (e) { var t, n; return null == (n = null == (t = e.config.ui) ? void 0 : t.menubar) ? void 0 : n.items })) || [], a = [], s = [], l = []; o.filter((function (e) { return !r && !e.mobileOnly || r && !e.desktopOnly })).forEach((function (e) { "left" === e.align ? a.push(e) : "right" === e.align ? l.push(e) : s.push(e) })); var u = n && r && i && ky(lB, { size: "sm", className: "ml-10", onPress: function () { YO().editor.close() }, children: ky(SB, {}) }); return Cy(uC.div, N(F({ className: UA }, HA), { children: [ky("div", { className: "mr-auto", children: a.map((function (e, t) { return ky(_B, { item: e }, t) })) }), ky("div", { className: "flex items-center gap-10", children: s.map((function (e, t) { return ky(_B, { item: e }, t) })) }), ky("div", { className: "ml-auto flex items-center gap-8", children: l.map((function (e, t) { return ky(_B, { item: e }, t) })) }), u] })) } var TB = function () { function e() { g(this, e), B(this, "callbackName", "onResize"), B(this, "resizeDir", null) } return y(e, [{ key: "matches", value: function (e) { var t = e.target; return !!t.dataset.position && (this.resizeDir = t.dataset.position, !0) } }, { key: "execute", value: function (e, t) { return t ? this.resizeUsingRect(e, t) : this.resizeUsingEvent(e) } }, { key: "onPointerUp", value: function () { this.resizeDir = null } }, { key: "resizeUsingEvent", value: function (e) { var t = F({}, e.currentRect), n = F({}, e.currentRect), r = e.aspectRatio; return "top-right" === this.resizeDir ? (n.width = Math.floor(n.width + e.deltaX), n.height = r ? Math.floor(n.width / r) : Math.floor(n.height - e.deltaY), n.top = Math.floor(n.top + (t.height - n.height))) : "bottom-right" === this.resizeDir ? (n.width = Math.floor(n.width + e.deltaX), n.height = r ? Math.floor(n.width / r) : Math.floor(n.height + e.deltaY)) : "top-left" === this.resizeDir ? (n.width = Math.floor(n.width - e.deltaX), n.height = r ? Math.floor(n.width / r) : Math.floor(n.height - e.deltaY), n.left = Math.floor(n.left + (t.width - n.width)), n.top = Math.floor(n.top + (t.height - n.height))) : "bottom-left" === this.resizeDir && (n.width = Math.floor(n.width - e.deltaX), n.height = r ? Math.floor(n.width / r) : Math.floor(n.height + e.deltaY), n.left = Math.floor(n.left + (t.width - n.width))), n } }, { key: "resizeUsingRect", value: function (e, t) { var n = F(F({}, e.currentRect), t); if (e.aspectRatio) { var r = AP(e.aspectRatio, n.width, n.height); n.width = r.width, n.height = r.height } return n } }]), e }(); function EB(e) { var t = e.minValue, n = e.maxValue, r = e.step, i = e.formatOptions, o = e.value, a = e.defaultValue, s = e.onChange, l = e.locale, u = e.isDisabled, c = e.isReadOnly, f = _(IT(o, isNaN(a) ? NaN : a, s), 2), d = f[0], p = f[1], v = _(h.exports.useState((function () { return isNaN(d) ? "" : new oI(l, i).format(d) })), 2), g = v[0], m = v[1], y = h.exports.useMemo((function () { return new uI(l, i) }), [l, i]), b = h.exports.useMemo((function () { return y.getNumberingSystem(g) }), [y, g]), w = h.exports.useMemo((function () { return new oI(l, N(F({}, i), { numberingSystem: b })) }), [l, i, b]), x = h.exports.useMemo((function () { return w.resolvedOptions() }), [w]), S = h.exports.useCallback((function (e) { return isNaN(e) ? "" : w.format(e) }), [w]), k = isNaN(r) ? 1 : r; "percent" === x.style && isNaN(r) && (k = .01), h.exports.useEffect((function () { m(S(d)) }), [d, l, i]); var C = h.exports.useMemo((function () { return y.parse(g) }), [y, g]), T = h.exports.useRef(0); T.current = C; var E = function (e, r) { var i = T.current; if (isNaN(i)) return NT(isNaN(r) ? 0 : r, t, n, k); var o = NT(i, t, n, k); return "+" === e && o > i || "-" === e && o < i ? o : NT(OB(e, i, k), t, n, k) }; return { validate: function (e) { return y.isValidPartialNumber(e, t, n) }, increment: function () { var e = E("+", t); e === d && m(S(e)), p(e) }, incrementToMax: function () { null != n && p(NT(n, t, n, k)) }, decrement: function () { var e = E("-", n); e === d && m(S(e)), p(e) }, decrementToMin: function () { null != t && p(t) }, canIncrement: h.exports.useMemo((function () { return !u && !c && (isNaN(C) || isNaN(n) || NT(C, t, n, k) > C || OB("+", C, k) <= n) }), [u, c, t, n, k, C]), canDecrement: h.exports.useMemo((function () { return !u && !c && (isNaN(C) || isNaN(t) || NT(C, t, n, k) < C || OB("-", C, k) >= t) }), [u, c, t, n, k, C]), minValue: t, maxValue: n, numberValue: C, setInputValue: m, inputValue: g, commit: function () { if (!g.length) return p(NaN), void m(void 0 === o ? "" : S(d)); var e; isNaN(T.current) ? m(S(d)) : (e = isNaN(r) ? FT(T.current, t, n) : NT(T.current, t, n, r), e = y.parse(S(e)), p(e), m(S(void 0 === o ? e : d))) } } } function OB(e, t, n) { var r = "+" === e ? t + n : t - n; if (t % 1 != 0 || n % 1 != 0) { var i = t.toString().split("."), o = n.toString().split("."), a = i[1] && i[1].length || 0, s = o[1] && o[1].length || 0, l = Math.pow(10, Math.max(a, s)); t = Math.round(t * l), n = Math.round(n * l), r = "+" === e ? t + n : t - n, r /= l } return r } function PB(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } function MB(e) { var t = e.id, n = e.label, r = e["aria-labelledby"], i = e["aria-label"], o = e.labelElementType, a = void 0 === o ? "label" : o; t = WT(t); var s = WT(), l = {}; return n ? (r = r ? "".concat(r, " ").concat(s) : s, l = { id: s, htmlFor: "label" === a ? t : void 0 }) : !r && !i && console.warn("If you do not provide a visible label, you must specify an aria-label or aria-labelledby attribute for accessibility"), { labelProps: l, fieldProps: cE({ id: t, "aria-label": i, "aria-labelledby": r }) } } function AB(e) { var t = e.description, n = e.errorMessage, r = e.validationState, i = MB(e), o = i.labelProps, a = i.fieldProps, s = YT([Boolean(t), Boolean(n), r]), l = YT([Boolean(t), Boolean(n), r]); return { labelProps: o, fieldProps: a = GT(a, { "aria-describedby": [s, l, e["aria-describedby"]].filter(Boolean).join(" ") || void 0 }), descriptionProps: { id: s }, errorMessageProps: { id: l } } } function DB(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } function LB(e, t) { var n = e.inputElementType, r = void 0 === n ? "input" : n, i = e.isDisabled, o = void 0 !== i && i, a = e.isRequired, s = void 0 !== a && a, l = e.isReadOnly, u = void 0 !== l && l, c = e.validationState, f = e.type, h = void 0 === f ? "text" : f, d = e.onChange, p = void 0 === d ? function () { } : d, v = yD(e, t).focusableProps, g = AB(e), m = g.labelProps, y = g.fieldProps, b = g.descriptionProps, w = g.errorMessageProps, x = $T(e, { labelable: !0 }), _ = { type: h, pattern: e.pattern }; return { labelProps: m, inputProps: GT(x, "input" === r && _, F(F({ disabled: o, readOnly: u, "aria-required": s || void 0, "aria-invalid": "invalid" === c || void 0, "aria-errormessage": e["aria-errormessage"], "aria-activedescendant": e["aria-activedescendant"], "aria-autocomplete": e["aria-autocomplete"], "aria-haspopup": e["aria-haspopup"], value: e.value, defaultValue: e.value ? void 0 : e.defaultValue, onChange: function (e) { return p(e.target.value) }, autoComplete: e.autoComplete, maxLength: e.maxLength, minLength: e.minLength, name: e.name, placeholder: e.placeholder, inputMode: e.inputMode, onCopy: e.onCopy, onCut: e.onCut, onPaste: e.onPaste, onCompositionEnd: e.onCompositionEnd, onCompositionStart: e.onCompositionStart, onCompositionUpdate: e.onCompositionUpdate, onSelect: e.onSelect, onBeforeInput: e.onBeforeInput, onInput: e.onInput }, v), y)), descriptionProps: b, errorMessageProps: w } } function RB() { return "undefined" != typeof window && window.InputEvent && "function" == typeof InputEvent.prototype.getTargetRanges } function IB(e, t, n) { var r = h.exports.useRef(t); r.current = t, h.exports.useEffect((function () { if (RB()) { var e = n.current, t = function (t) { var n, i = r.current; switch (t.inputType) { case "historyUndo": case "historyRedo": return; case "deleteContent": case "deleteByCut": case "deleteByDrag": n = e.value.slice(0, e.selectionStart) + e.value.slice(e.selectionEnd); break; case "deleteContentForward": n = e.selectionEnd === e.selectionStart ? e.value.slice(0, e.selectionStart) + e.value.slice(e.selectionEnd + 1) : e.value.slice(0, e.selectionStart) + e.value.slice(e.selectionEnd); break; case "deleteContentBackward": n = e.selectionEnd === e.selectionStart ? e.value.slice(0, e.selectionStart - 1) + e.value.slice(e.selectionStart) : e.value.slice(0, e.selectionStart) + e.value.slice(e.selectionEnd); break; case "deleteSoftLineBackward": case "deleteHardLineBackward": n = e.value.slice(e.selectionStart); break; default: null != t.data && (n = e.value.slice(0, e.selectionStart) + t.data + e.value.slice(e.selectionEnd)) }(null == n || !i.validate(n)) && t.preventDefault() }; return e.addEventListener("beforeinput", t, !1), function () { e.removeEventListener("beforeinput", t, !1) } } }), [n, r]); var i = RB() ? null : function (e) { var n = e.target.value.slice(0, e.target.selectionStart) + e.data + e.target.value.slice(e.target.selectionEnd); t.validate(n) || e.preventDefault() }, o = LB(e, n), a = o.labelProps, s = o.inputProps, l = o.descriptionProps, u = o.errorMessageProps, c = h.exports.useRef(null); return { inputProps: GT(s, { onBeforeInput: i, onCompositionStart: function () { var e = n.current, t = e.value, r = e.selectionStart, i = e.selectionEnd; c.current = { value: t, selectionStart: r, selectionEnd: i } }, onCompositionEnd: function () { if (!t.validate(n.current.value)) { var e = c.current, r = e.value, i = e.selectionStart, o = e.selectionEnd; n.current.value = r, n.current.setSelectionRange(i, o), t.setInputValue(r) } } }), labelProps: a, descriptionProps: l, errorMessageProps: u } } function jB(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } Object.defineProperty({}, "useNumberFieldState", { get: function () { return EB }, set: void 0, enumerable: !0, configurable: !0 }), PB({}, "useField", (function () { return AB })), PB({}, "useLabel", (function () { return MB })), DB({}, "useTextField", (function () { return LB })), DB({}, "useFormattedTextField", (function () { return IB })); var FB = {}; jB(FB, "announce", (function () { return UB })), jB(FB, "clearAnnouncer", (function () { return HB })), jB(FB, "destroyAnnouncer", (function () { return WB })); var NB = 7e3, zB = ce.createRef(), BB = null, VB = 0; function UB(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "assertive", n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : NB; KB((function (r) { return r.announce(e, t, n) })) } function HB(e) { KB((function (t) { return t.clear(e) })) } function WB() { zB.current && (wc.unmountComponentAtNode(BB), document.body.removeChild(BB), BB = null) } function KB(e) { zB.current ? e(zB.current) : ((BB = document.createElement("div")).dataset.liveAnnouncer = "true", document.body.prepend(BB), wc.render(ce.createElement(lU, { ref: zB }), BB, (function () { return e(zB.current) }))) } var YB, XB, GB, qB, JB, ZB, $B, QB, eV, tV, nV, rV, iV, oV, aV, sV, lV, uV, cV, fV, hV, dV, pV, vV, gV, mV, yV, bV, wV, xV, _V, SV, kV, CV, TV, EV, OV, PV, MV, AV, DV, LV, RV, IV, jV, FV, NV, zV, BV, VV, UV, HV, WV, KV, YV, XV, GV, qV, JV, ZV, $V, QV, eU, tU, nU, rU, iU, oU, aU, sU, lU = ce.forwardRef((function (e, t) { var n = _(h.exports.useState([]), 2), r = n[0], i = n[1], o = _(h.exports.useState([]), 2), a = o[0], s = o[1], l = function (e) { (!e || "assertive" === e) && i([]), (!e || "polite" === e) && s([]) }, u = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "assertive", n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : NB, r = VB++; "assertive" === t ? i((function (t) { return [].concat(S(t), [{ id: r, text: e }]) })) : s((function (t) { return [].concat(S(t), [{ id: r, text: e }]) })), "" !== e && setTimeout((function () { "assertive" === t ? i((function (e) { return e.filter((function (e) { return e.id !== r })) })) : s((function (e) { return e.filter((function (e) { return e.id !== r })) })) }), n) }; return h.exports.useImperativeHandle(t, (function () { return { announce: u, clear: l } })), ce.createElement(h.exports.Fragment, null, ce.createElement(uU, { "aria-live": "assertive" }, r.map((function (e) { return ce.createElement("div", { key: e.id }, e.text) }))), ce.createElement(uU, { "aria-live": "polite" }, a.map((function (e) { return ce.createElement("div", { key: e.id }, e.text) })))) })); function uU(e) { var t = e.children, n = e["aria-live"]; return ce.createElement(VO, { role: "log", "aria-live": n, "aria-relevant": "additions" }, t) } function cU(e) { var t = h.exports.useRef(), n = e.value, r = e.textValue, i = e.minValue, o = e.maxValue, a = e.isDisabled, s = e.isReadOnly, l = e.isRequired, u = e.onIncrement, c = e.onIncrementPage, f = e.onDecrement, d = e.onDecrementPage, p = e.onDecrementToMin, v = e.onIncrementToMax, g = DI(function (e) { return e && e.__esModule ? e.default : e }(YB)), m = h.exports.useRef(e); m.current = e; var y = function () { return clearTimeout(t.current) }; h.exports.useEffect((function () { return function () { return y() } }), []); var b = h.exports.useRef(!1), w = function () { b.current = !0 }, x = function () { b.current = !1 }; r = "" === r ? g("Empty") : (r || "".concat(n)).replace("-", "−"), h.exports.useEffect((function () { b.current && UB(r, "assertive") }), [r]); var _ = h.exports.useCallback((function (e) { y(), m.current.onIncrement(), t.current = window.setTimeout((function () { (isNaN(o) || isNaN(n) || n < o) && _(60) }), e) }), [u, o, n]), S = h.exports.useCallback((function (e) { y(), m.current.onDecrement(), t.current = window.setTimeout((function () { (isNaN(i) || isNaN(n) || n > i) && S(60) }), e) }), [f, i, n]), k = function (e) { e.preventDefault() }, C = uE(), T = C.addGlobalListener, E = C.removeAllGlobalListeners; return { spinButtonProps: { role: "spinbutton", "aria-valuenow": isNaN(n) ? null : n, "aria-valuetext": r, "aria-valuemin": i, "aria-valuemax": o, "aria-disabled": a || null, "aria-readonly": s || null, "aria-required": l || null, onKeyDown: function (e) { if (!(e.ctrlKey || e.metaKey || e.shiftKey || e.altKey || s)) switch (e.key) { case "PageUp": if (c) { e.preventDefault(), c(); break } case "ArrowUp": case "Up": u && (e.preventDefault(), u()); break; case "PageDown": if (d) { e.preventDefault(), d(); break } case "ArrowDown": case "Down": f && (e.preventDefault(), f()); break; case "Home": p && (e.preventDefault(), p()); break; case "End": v && (e.preventDefault(), v()) } }, onFocus: w, onBlur: x }, incrementButtonProps: { onPressStart: function () { _(400), T(window, "contextmenu", k) }, onPressEnd: function () { y(), E() }, onFocus: w, onBlur: x }, decrementButtonProps: { onPressStart: function () { S(400), T(window, "contextmenu", k) }, onPressEnd: function () { y(), E() }, onFocus: w, onBlur: x } } } function fU(e, t, n) { var r = e.id, i = e.decrementAriaLabel, o = e.incrementAriaLabel, a = e.isDisabled, s = e.isReadOnly, l = e.isRequired, u = e.minValue, c = e.maxValue, f = e.autoFocus, d = e.validationState, p = e.label, v = e.formatOptions, g = e.onBlur, m = e.onFocus, y = e.onFocusChange, b = e.onKeyDown, w = e.onKeyUp, x = e.description, S = e.errorMessage, k = t.increment, C = t.incrementToMax, T = t.decrement, E = t.decrementToMin, O = t.numberValue, P = t.commit, M = DI(function (e) { return e && e.__esModule ? e.default : e }(EV)), A = WT(r), D = nO({ onBlur: function () { P() } }).focusProps, L = cU({ isDisabled: a, isReadOnly: s, isRequired: l, maxValue: c, minValue: u, onIncrement: k, onIncrementToMax: C, onDecrement: T, onDecrementToMin: E, value: O, textValue: t.inputValue }), R = L.spinButtonProps, I = L.incrementButtonProps, j = L.decrementButtonProps, z = _(h.exports.useState(!1), 2), B = z[0], V = SO({ isDisabled: a, onFocusWithinChange: z[1] }).focusWithinProps; IO({ onScroll: h.exports.useCallback((function (e) { Math.abs(e.deltaY) <= Math.abs(e.deltaX) || (e.deltaY > 0 ? k() : e.deltaY < 0 && T()) }), [T, k]), isDisabled: a || s || !B }, n); var U = RI(v), H = h.exports.useMemo((function () { return U.resolvedOptions() }), [U]).maximumFractionDigits > 0, W = isNaN(t.minValue) || t.minValue < 0, K = "numeric"; EE() ? W ? K = "text" : H && (K = "decimal") : LE() && (W ? K = "numeric" : H && (K = "decimal")); var Y, X = $T(e), G = IB(N(F({}, X), { label: p, autoFocus: f, isDisabled: a, isReadOnly: s, isRequired: l, validationState: d, value: t.inputValue, autoComplete: "off", "aria-label": e["aria-label"] || null, "aria-labelledby": e["aria-labelledby"] || null, id: A, type: "text", inputMode: K, onChange: function (e) { t.setInputValue(e) }, onBlur: g, onFocus: m, onFocusChange: y, onKeyDown: b, onKeyUp: w, description: x, errorMessage: S }), t, n), q = G.labelProps, J = G.inputProps, Z = G.descriptionProps, $ = G.errorMessageProps, Q = GT(R, J, D, { role: null, "aria-roledescription": PE() ? null : M("numberField"), "aria-valuemax": null, "aria-valuemin": null, "aria-valuenow": null, "aria-valuetext": null, autoCorrect: "off", spellCheck: "false" }), ee = function (e) { document.activeElement !== n.current && ("mouse" === e.pointerType ? n.current.focus() : e.target.focus()) }, te = e["aria-label"] || ("string" == typeof e.label ? e.label : ""); te || (Y = null != e.label ? q.id : e["aria-labelledby"]); var ne = WT(), re = WT(), ie = GT(I, { "aria-label": o || M("increase", { fieldLabel: te }).trim(), id: Y && !o ? ne : null, "aria-labelledby": Y && !o ? "".concat(ne, " ").concat(Y) : null, "aria-controls": A, excludeFromTabOrder: !0, preventFocusOnPress: !0, allowFocusWhenDisabled: !0, isDisabled: !t.canIncrement, onPressStart: ee }), oe = GT(j, { "aria-label": i || M("decrease", { fieldLabel: te }).trim(), id: Y && !i ? re : null, "aria-labelledby": Y && !i ? "".concat(re, " ").concat(Y) : null, "aria-controls": A, excludeFromTabOrder: !0, preventFocusOnPress: !0, allowFocusWhenDisabled: !0, isDisabled: !t.canDecrement, onPressStart: ee }); return { groupProps: F({ role: "group", "aria-disabled": a, "aria-invalid": "invalid" === d ? "true" : void 0 }, V), labelProps: q, inputProps: Q, incrementButtonProps: ie, decrementButtonProps: oe, errorMessageProps: $, descriptionProps: Z } } function hU(e) { var t = F({}, e), n = t.size, r = void 0 === n ? "md" : n, i = t.startAdornment, o = t.endAdornment, a = t.className, s = t.inline, l = function (e) { switch (e) { case "xs": return { font: "text-xs", height: "h-30" }; case "sm": return { font: "text-sm", height: "h-36" }; case "lg": return { font: "text-lg", height: "h-50" }; case "xl": return { font: "text-xl", height: "h-60" }; default: return { font: dU, height: "h-42" } } }(r); return { label: CT("block capitalize text-left", l.font, s ? "mr-16" : "mb-4"), input: CT("text-left relative focus:ring focus:ring-primary/focus focus:border-primary/60 block w-full bg-transparent border rounded focus:outline-none shadow-sm appearance-none transition-shadow", l.font, l.height, i ? "pl-36" : "pl-12", o ? "pr-36" : "pr-12"), adornment: KA(r), wrapper: CT(a, l.font, { "flex items-center": s }), size: l } } Object.defineProperty({}, "useSpinButton", { get: function () { return cU }, set: void 0, enumerable: !0, configurable: !0 }), XB = JSON.parse('{"Empty":"فارغ"}'), GB = JSON.parse('{"Empty":"Изпразни"}'), qB = JSON.parse('{"Empty":"Prázdné"}'), JB = JSON.parse('{"Empty":"Tom"}'), ZB = JSON.parse('{"Empty":"Leer"}'), $B = JSON.parse('{"Empty":"Άδειο"}'), QB = JSON.parse('{"Empty":"Empty"}'), eV = JSON.parse('{"Empty":"Vacío"}'), tV = JSON.parse('{"Empty":"Tühjenda"}'), nV = JSON.parse('{"Empty":"Tyhjä"}'), rV = JSON.parse('{"Empty":"Vide"}'), iV = JSON.parse('{"Empty":"ריק"}'), oV = JSON.parse('{"Empty":"Prazno"}'), aV = JSON.parse('{"Empty":"Üres"}'), sV = JSON.parse('{"Empty":"Vuoto"}'), lV = JSON.parse('{"Empty":"空"}'), uV = JSON.parse('{"Empty":"비어 있음"}'), cV = JSON.parse('{"Empty":"Tuščias"}'), fV = JSON.parse('{"Empty":"Tukšs"}'), hV = JSON.parse('{"Empty":"Tom"}'), dV = JSON.parse('{"Empty":"Leeg"}'), pV = JSON.parse('{"Empty":"Pusty"}'), vV = JSON.parse('{"Empty":"Vazio"}'), gV = JSON.parse('{"Empty":"Vazio"}'), mV = JSON.parse('{"Empty":"Gol"}'), yV = JSON.parse('{"Empty":"Не заполнено"}'), bV = JSON.parse('{"Empty":"Prázdne"}'), wV = JSON.parse('{"Empty":"Prazen"}'), xV = JSON.parse('{"Empty":"Prazno"}'), _V = JSON.parse('{"Empty":"Tomt"}'), SV = JSON.parse('{"Empty":"Boş"}'), kV = JSON.parse('{"Empty":"Пусто"}'), CV = JSON.parse('{"Empty":"空"}'), TV = JSON.parse('{"Empty":"空白"}'), YB = { "ar-AE": XB, "bg-BG": GB, "cs-CZ": qB, "da-DK": JB, "de-DE": ZB, "el-GR": $B, "en-US": QB, "es-ES": eV, "et-EE": tV, "fi-FI": nV, "fr-FR": rV, "he-IL": iV, "hr-HR": oV, "hu-HU": aV, "it-IT": sV, "ja-JP": lV, "ko-KR": uV, "lt-LT": cV, "lv-LV": fV, "nb-NO": hV, "nl-NL": dV, "pl-PL": pV, "pt-BR": vV, "pt-PT": gV, "ro-RO": mV, "ru-RU": yV, "sk-SK": bV, "sl-SI": wV, "sr-SP": xV, "sv-SE": _V, "tr-TR": SV, "uk-UA": kV, "zh-CN": CV, "zh-TW": TV }, Object.defineProperty({}, "useNumberField", { get: function () { return fU }, set: void 0, enumerable: !0, configurable: !0 }), OV = JSON.parse('{"decrease":"خفض {fieldLabel}","increase":"زيادة {fieldLabel}","numberField":"حقل رقمي"}'), PV = JSON.parse('{"decrease":"Намаляване {fieldLabel}","increase":"Усилване {fieldLabel}","numberField":"Номер на полето"}'), MV = JSON.parse('{"decrease":"Snížit {fieldLabel}","increase":"Zvýšit {fieldLabel}","numberField":"Číselné pole"}'), AV = JSON.parse('{"decrease":"Reducer {fieldLabel}","increase":"Øg {fieldLabel}","numberField":"Talfelt"}'), DV = JSON.parse('{"decrease":"{fieldLabel} verringern","increase":"{fieldLabel} erhöhen","numberField":"Nummernfeld"}'), LV = JSON.parse('{"decrease":"Μείωση {fieldLabel}","increase":"Αύξηση {fieldLabel}","numberField":"Πεδίο αριθμού"}'), RV = JSON.parse('{"decrease":"Decrease {fieldLabel}","increase":"Increase {fieldLabel}","numberField":"Number field"}'), IV = JSON.parse('{"decrease":"Reducir {fieldLabel}","increase":"Aumentar {fieldLabel}","numberField":"Campo de número"}'), jV = JSON.parse('{"decrease":"Vähenda {fieldLabel}","increase":"Suurenda {fieldLabel}","numberField":"Numbri väli"}'), FV = JSON.parse('{"decrease":"Vähennä {fieldLabel}","increase":"Lisää {fieldLabel}","numberField":"Numerokenttä"}'), NV = JSON.parse('{"decrease":"Diminuer {fieldLabel}","increase":"Augmenter {fieldLabel}","numberField":"Champ de nombre"}'), zV = JSON.parse('{"decrease":"הקטן {fieldLabel}","increase":"הגדל {fieldLabel}","numberField":"שדה מספר"}'), BV = JSON.parse('{"decrease":"Smanji {fieldLabel}","increase":"Povećaj {fieldLabel}","numberField":"Polje broja"}'), VV = JSON.parse('{"decrease":"{fieldLabel} csökkentése","increase":"{fieldLabel} növelése","numberField":"Számmező"}'), UV = JSON.parse('{"decrease":"Riduci {fieldLabel}","increase":"Aumenta {fieldLabel}","numberField":"Campo numero"}'), HV = JSON.parse('{"decrease":"{fieldLabel}を縮小","increase":"{fieldLabel}を拡大","numberField":"数値フィールド"}'), WV = JSON.parse('{"decrease":"{fieldLabel} 감소","increase":"{fieldLabel} 증가","numberField":"번호 필드"}'), KV = JSON.parse('{"decrease":"Sumažinti {fieldLabel}","increase":"Padidinti {fieldLabel}","numberField":"Numerio laukas"}'), YV = JSON.parse('{"decrease":"Samazināšana {fieldLabel}","increase":"Palielināšana {fieldLabel}","numberField":"Skaitļu lauks"}'), XV = JSON.parse('{"decrease":"Reduser {fieldLabel}","increase":"Øk {fieldLabel}","numberField":"Tallfelt"}'), GV = JSON.parse('{"decrease":"{fieldLabel} verlagen","increase":"{fieldLabel} verhogen","numberField":"Getalveld"}'), qV = JSON.parse('{"decrease":"Zmniejsz {fieldLabel}","increase":"Zwiększ {fieldLabel}","numberField":"Pole numeru"}'), JV = JSON.parse('{"decrease":"Diminuir {fieldLabel}","increase":"Aumentar {fieldLabel}","numberField":"Campo de número"}'), ZV = JSON.parse('{"decrease":"Diminuir {fieldLabel}","increase":"Aumentar {fieldLabel}","numberField":"Campo numérico"}'), $V = JSON.parse('{"decrease":"Scădere {fieldLabel}","increase":"Creștere {fieldLabel}","numberField":"Câmp numeric"}'), QV = JSON.parse('{"decrease":"Уменьшение {fieldLabel}","increase":"Увеличение {fieldLabel}","numberField":"Числовое поле"}'), eU = JSON.parse('{"decrease":"Znížiť {fieldLabel}","increase":"Zvýšiť {fieldLabel}","numberField":"Číselné pole"}'), tU = JSON.parse('{"decrease":"Upadati {fieldLabel}","increase":"Povečajte {fieldLabel}","numberField":"Številčno polje"}'), nU = JSON.parse('{"decrease":"Decrease {fieldLabel}","increase":"Increase {fieldLabel}","numberField":"Number field"}'), rU = JSON.parse('{"decrease":"Minska {fieldLabel}","increase":"Öka {fieldLabel}","numberField":"Nummerfält"}'), iU = JSON.parse('{"decrease":"{fieldLabel} azalt","increase":"{fieldLabel} arttır","numberField":"Sayı alanı"}'), oU = JSON.parse('{"decrease":"Зменшити {fieldLabel}","increase":"Збільшити {fieldLabel}","numberField":"Поле номера"}'), aU = JSON.parse('{"decrease":"降低 {fieldLabel}","increase":"提高 {fieldLabel}","numberField":"数字字段"}'), sU = JSON.parse('{"decrease":"縮小 {fieldLabel}","increase":"放大 {fieldLabel}","numberField":"數字欄位"}'), EV = { "ar-AE": OV, "bg-BG": PV, "cs-CZ": MV, "da-DK": AV, "de-DE": DV, "el-GR": LV, "en-US": RV, "es-ES": IV, "et-EE": jV, "fi-FI": FV, "fr-FR": NV, "he-IL": zV, "hr-HR": BV, "hu-HU": VV, "it-IT": UV, "ja-JP": HV, "ko-KR": WV, "lt-LT": KV, "lv-LV": YV, "nb-NO": XV, "nl-NL": GV, "pl-PL": qV, "pt-BR": JV, "pt-PT": ZV, "ro-RO": $V, "ru-RU": QV, "sk-SK": eU, "sl-SI": tU, "sr-SP": nU, "sv-SE": rU, "tr-TR": iU, "uk-UA": oU, "zh-CN": aU, "zh-TW": sU }; var dU = "text-base", pU = Oy(ky("path", { d: "M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6 1.41 1.41z" }), "KeyboardArrowUpOutlined"), vU = Oy(ky("path", { d: "M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z" }), "KeyboardArrowDownOutlined"); function gU(e) { var t = e.label, n = MI().locale, r = hU(e), i = EB(N(F({}, e), { locale: n })), o = h.exports.useRef(null), a = fU(e, i, o), s = a.labelProps, l = a.groupProps, u = a.inputProps, c = a.incrementButtonProps, f = a.decrementButtonProps; return Cy("div", { className: r.wrapper, children: [t && ky("label", N(F({ className: r.label }, s), { children: t })), Cy("div", N(F({ className: "relative" }, l), { children: [ky("input", N(F({ className: r.input }, u), { ref: o })), Cy("div", { className: "absolute top-0 right-0 h-full flex flex-col items-center justify-center", children: [ky(mU, N(F({ className: "border-b" }, c), { children: ky(pU, {}) })), ky(mU, N(F({}, f), { children: ky(vU, {}) }))] })] }))] }) } function mU(e) { var t = e, n = t.children, r = t.className, i = z(t, ["children", "className"]), o = CT(r, "flex flex-auto items-center border-l px-2 disabled:text-disabled"); return ky(lB, N(F({ variant: null, radius: "rounded-none", className: o }, i), { children: n })) } function yU() { var e = lw((function (e) { var t; return null == (t = e.crop.zoneRect) ? void 0 : t.width })) || 1, t = lw((function (e) { var t; return null == (t = e.crop.zoneRect) ? void 0 : t.height })) || 1, n = _(h.exports.useState({ width: e, height: t }), 2), r = n[0], i = n[1]; h.exports.useEffect((function () { var n = Math.round(e / YO().zoom), r = Math.round(t / YO().zoom); i({ width: n, height: r }) }), [e, t]); var o = function (e, t) { var n = N(F({}, r), k({}, t, e)); i(n), a(n) }, a = function (e) { var t = e || r; !function (e, t) { var n = XO().crop.zone; if (YO().crop.zoneRect && n) { var r = N(F({}, YO().crop.zoneRect), { width: Math.round(Math.min(YO().original.width, e) * YO().zoom), height: Math.round(Math.min(YO().original.height, t) * YO().zoom) }), i = n.config.actions.find((function (e) { return e instanceof TB })); (i && r.width !== n.currentRect.width || r.height !== n.currentRect.height) && n.executeAction(i, {}, r) } }(t.width, t.height) }; return Cy("form", { className: "flex items-center gap-12", onSubmit: function (e) { e.preventDefault(), a() }, children: [ky(gU, { size: "xs", "aria-label": "Crop width", endAdornment: ky("div", { className: "text-muted font-bold text-xs", children: ky(ay, { id: "zRkzP5", defaultMessage: [{ type: 0, value: "W" }] }) }), minValue: 1, className: "w-80", value: r.width, formatOptions: { useGrouping: !1 }, onChange: function (e) { o(e, "width") } }), ky(gU, { size: "xs", "aria-label": "Crop height", endAdornment: ky("div", { className: "text-muted font-bold text-xs", children: ky(ay, { id: "wFvZzh", defaultMessage: [{ type: 0, value: "H" }] }) }), minValue: 1, className: "w-80", value: r.height, formatOptions: { useGrouping: !1 }, onChange: function (e) { o(e, "height") } }), ky("button", { type: "submit", className: "hidden", children: ky(ay, { id: "4dL9o7", defaultMessage: [{ type: 0, value: "Resize" }] }) })] }) } var bU = Oy(ky("path", { d: "M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z" }), "CheckOutlined"); function wU() { var e = lw((function (e) { return e.activeTool })); return Cy(uC.div, N(F({ className: UA }, HA), { children: [ky(xU, {}), _U(e), ky(SU, {})] })) } function xU() { var e = kB().isMobile, t = lw((function (e) { return e.dirty })); return e ? ky(lB, { size: "sm", onPress: function () { YO().cancelChanges() }, children: ky(SB, {}) }) : ky(kD, { variant: "outline", size: "xs", startIcon: ky(SB, {}), radius: "rounded-full", onPress: function () { YO().cancelChanges() }, children: ky(ay, t ? { id: "47FYwb", defaultMessage: [{ type: 0, value: "Cancel" }] } : { id: "rbrahO", defaultMessage: [{ type: 0, value: "Close" }] }) }) } function _U(e) { var t, n, r, i = ky("div", { className: "capitalize text-sm", children: e }); return e !== py.CROP || null != (r = null == (n = null == (t = YO().config.tools) ? void 0 : t.crop) ? void 0 : n.allowCustomRatio) && !r ? i : ky(yU, {}) } function SU() { var e = kB().isMobile, t = lw((function (e) { return e.dirty })); return e ? ky(lB, { size: "sm", isDisabled: !t, onPress: function () { YO().applyChanges() }, children: ky(bU, {}) }) : ky(kD, { variant: "flat", color: "primary", size: "xs", isDisabled: !t, startIcon: ky(bU, {}), radius: "rounded-full", onPress: function () { YO().applyChanges() }, children: ky(ay, { id: "EWw/tK", defaultMessage: [{ type: 0, value: "Apply" }] }) }) } function kU() { var e = lw((function (e) { return e.activeTool })); return ky(vC, { initial: !1, children: e ? ky(wU, {}, "activeToolbar") : ky(CB, {}, "mainToolbar") }) } var CU = { newCanvas: { id: "34ELdR", defaultMessage: [{ type: 0, value: "Loading Canvas" }] }, mainImage: { id: "ymTE9v", defaultMessage: [{ type: 0, value: "Loading Image" }] }, state: { id: "AmIZUR", defaultMessage: [{ type: 0, value: "Loading State" }] }, merge: { id: "zP9AYY", defaultMessage: [{ type: 0, value: "Processing Image" }] } }; function TU() { var e = _(h.exports.useState(!1), 2), t = e[0], n = e[1]; return h.exports.useEffect((function () { lw.subscribe((function (e) { return e.loading }), (function (e) { e && n(e) })) }), []), ky(vC, { children: t && ky(uC.div, { initial: { y: "60%", opacity: 0 }, animate: { y: 0, opacity: 1 }, exit: { y: "-60%", opacity: 0 }, transition: { type: "tween", duration: .3 }, onAnimationComplete: function () { setTimeout((function () { n(!1) }), 400) }, className: "absolute z-loading-indicator inset-0 m-auto p-6 w-144 h-32 text-center text-sm bg-paper rounded-full shadow-lg", children: ky(ay, F({}, CU[t])) }) }) } function EU(e, t, n) { return Math.max(t, Math.min(e, n)) } var OU = function (e, t) { return void 0 === e && (e = t), Array.isArray(e) ? e : [e, e] }, PU = function (e, t) { return [e[0] + t[0], e[1] + t[1]] }, MU = function (e, t) { return [e[0] - t[0], e[1] - t[1]] }, AU = function (e, t) { e[0] += t[0], e[1] += t[1] }; function DU(e, t, n) { return 0 === t || Math.abs(t) === 1 / 0 ? Math.pow(e, 5 * n) : e * t * n / (t + n * e) } function LU(e, t, n) { var r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : .15; return 0 === r ? EU(e, t, n) : e < t ? -DU(t - e, n - t, r) + t : e > n ? +DU(e - n, n - t, r) + n : e } function RU(e, t, n) { return t in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e } function IU(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); t && (r = r.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), n.push.apply(n, r) } return n } function jU(e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}; t % 2 ? IU(Object(n), !0).forEach((function (t) { RU(e, t, n[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : IU(Object(n)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) })) } return e } var FU = { pointer: { start: "down", change: "move", end: "up" }, mouse: { start: "down", change: "move", end: "up" }, touch: { start: "start", change: "move", end: "end" }, gesture: { start: "start", change: "change", end: "end" } }; function NU(e) { return e ? e[0].toUpperCase() + e.slice(1) : "" } function zU(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "", n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2], r = FU[e], i = r && r[t] || t; return "on" + NU(e) + NU(i) + (n ? "Capture" : "") } var BU = ["gotpointercapture", "lostpointercapture"]; function VU(e) { var t = e.substring(2).toLowerCase(), n = !!~t.indexOf("passive"); n && (t = t.replace("passive", "")); var r = BU.includes(t) ? "capturecapture" : "capture", i = !!~t.indexOf(r); return i && (t = t.replace("capture", "")), { device: t, capture: i, passive: n } } function UU(e) { return "touches" in e } function HU(e) { return UU(e) ? function (e) { return "touchend" === e.type || "touchcancel" === e.type ? e.changedTouches : e.targetTouches }(e)[0] : e } function WU(e, t) { var n = t.clientX - e.clientX, r = t.clientY - e.clientY, i = (t.clientX + e.clientX) / 2, o = (t.clientY + e.clientY) / 2, a = Math.hypot(n, r); return { angle: -180 * Math.atan2(n, r) / Math.PI, distance: a, origin: [i, o] } } function KU(e, t) { var n = _(Array.from(e.touches).filter((function (e) { return t.includes(e.identifier) })), 2); return WU(n[0], n[1]) } function YU(e) { var t = HU(e); return UU(e) ? t.identifier : t.pointerId } function XU(e) { var t = HU(e); return [t.clientX, t.clientY] } function GU(e) { var t = e.deltaX, n = e.deltaY, r = e.deltaMode; return 1 === r ? (t *= 40, n *= 40) : 2 === r && (t *= 800, n *= 800), [t, n] } function qU(e) { for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), r = 1; r < t; r++)n[r - 1] = arguments[r]; return "function" == typeof e ? e.apply(void 0, n) : e } function JU() { } function ZU() { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; return 0 === t.length ? JU : 1 === t.length ? t[0] : function () { var e, n, r = T(t); try { for (r.s(); !(n = r.n()).done;) { var i = n.value; e = i.apply(this, arguments) || e } } catch (e) { r.e(e) } finally { r.f() } return e } } function $U(e, t) { return Object.assign({}, t, e || {}) } var QU = function () { function e(t, n, r) { g(this, e), this.ctrl = t, this.args = n, this.key = r, this.state || (this.state = {}, this.computeValues([0, 0]), this.computeInitial(), this.init && this.init(), this.reset()) } return y(e, [{ key: "state", get: function () { return this.ctrl.state[this.key] }, set: function (e) { this.ctrl.state[this.key] = e } }, { key: "shared", get: function () { return this.ctrl.state.shared } }, { key: "eventStore", get: function () { return this.ctrl.gestureEventStores[this.key] } }, { key: "timeoutStore", get: function () { return this.ctrl.gestureTimeoutStores[this.key] } }, { key: "config", get: function () { return this.ctrl.config[this.key] } }, { key: "sharedConfig", get: function () { return this.ctrl.config.shared } }, { key: "handler", get: function () { return this.ctrl.handlers[this.key] } }, { key: "reset", value: function () { var e = this.state, t = this.shared, n = this.ingKey, r = this.args; t[n] = e._active = e.active = e._blocked = e._force = !1, e._step = [!1, !1], e.intentional = !1, e._movement = [0, 0], e._distance = [0, 0], e._direction = [0, 0], e._delta = [0, 0], e._bounds = [[-1 / 0, 1 / 0], [-1 / 0, 1 / 0]], e.args = r, e.axis = void 0, e.memo = void 0, e.elapsedTime = 0, e.direction = [0, 0], e.distance = [0, 0], e.overflow = [0, 0], e._movementBound = [!1, !1], e.velocity = [0, 0], e.movement = [0, 0], e.delta = [0, 0], e.timeStamp = 0 } }, { key: "start", value: function (e) { var t = this.state, n = this.config; t._active || (this.reset(), this.computeInitial(), t._active = !0, t.target = e.target, t.currentTarget = e.currentTarget, t.lastOffset = n.from ? qU(n.from, t) : t.offset, t.offset = t.lastOffset), t.startTime = t.timeStamp = e.timeStamp } }, { key: "computeValues", value: function (e) { var t = this.state; t._values = e, t.values = this.config.transform(e) } }, { key: "computeInitial", value: function () { var e = this.state; e._initial = e._values, e.initial = e.values } }, { key: "compute", value: function (e) { var t = this.state, n = this.config, r = this.shared; t.args = this.args; var i = 0; if (e && (t.event = e, n.preventDefault && e.cancelable && t.event.preventDefault(), t.type = e.type, r.touches = this.ctrl.pointerIds.size || this.ctrl.touchIds.size, r.locked = !!document.pointerLockElement, Object.assign(r, function (e) { var t = {}; if ("buttons" in e && (t.buttons = e.buttons), "shiftKey" in e) { var n = e.shiftKey, r = e.altKey, i = e.metaKey, o = e.ctrlKey; Object.assign(t, { shiftKey: n, altKey: r, metaKey: i, ctrlKey: o }) } return t }(e)), r.down = r.pressed = r.buttons % 2 == 1 || r.touches > 0, i = e.timeStamp - t.timeStamp, t.timeStamp = e.timeStamp, t.elapsedTime = t.timeStamp - t.startTime), t._active) { var o = t._delta.map(Math.abs); AU(t._distance, o) } var a = _(t._movement, 2), s = a[0], l = a[1], u = _(n.threshold, 2), c = u[0], f = u[1], h = t._step, d = t.values; if (n.hasCustomTransform ? (!1 === h[0] && (h[0] = Math.abs(s) >= c && d[0]), !1 === h[1] && (h[1] = Math.abs(l) >= f && d[1])) : (!1 === h[0] && (h[0] = Math.abs(s) >= c && Math.sign(s) * c), !1 === h[1] && (h[1] = Math.abs(l) >= f && Math.sign(l) * f)), t.intentional = !1 !== h[0] || !1 !== h[1], t.intentional) { var p = [0, 0]; if (n.hasCustomTransform) { var v = _(d, 2), g = (o = v[0], v[1]); p[0] = !1 !== h[0] ? o - h[0] : 0, p[1] = !1 !== h[1] ? g - h[1] : 0 } else p[0] = !1 !== h[0] ? s - h[0] : 0, p[1] = !1 !== h[1] ? l - h[1] : 0; if (this.intent && this.intent(p), (t._active && !t._blocked || t.active) && (t.first = t._active && !t.active, t.last = !t._active && t.active, t.active = r[this.ingKey] = t._active, e)) { t.first && ("bounds" in n && (t._bounds = qU(n.bounds, t)), this.setup && this.setup()), t.movement = p; var m = t.offset; if (this.computeOffset(), !t.last || i > 32) { t.delta = MU(t.offset, m); var y = t.delta.map(Math.abs); AU(t.distance, y), t.direction = t.delta.map(Math.sign), t._direction = t._delta.map(Math.sign), !t.first && i > 0 && (t.velocity = [y[0] / i, y[1] / i]) } } var b = _(t.offset, 2), w = b[0], x = b[1], S = _(t._bounds, 2), k = _(S[0], 2), C = k[0], T = k[1], E = _(S[1], 2), O = E[0], P = E[1]; t.overflow = [w < C ? -1 : w > T ? 1 : 0, x < O ? -1 : x > P ? 1 : 0], t._movementBound[0] = !!t.overflow[0] && (!1 === t._movementBound[0] ? t._movement[0] : t._movementBound[0]), t._movementBound[1] = !!t.overflow[1] && (!1 === t._movementBound[1] ? t._movement[1] : t._movementBound[1]); var M = t._active && n.rubberband || [0, 0]; t.offset = function (e, t, n) { var r = _(t, 2), i = r[0], o = r[1], a = _(n, 2), s = a[0], l = a[1], u = _(e, 2), c = _(u[0], 2), f = c[0], h = c[1], d = _(u[1], 2), p = d[0], v = d[1]; return [LU(i, f, h, s), LU(o, p, v, l)] }(t._bounds, t.offset, M), this.computeMovement() } } }, { key: "emit", value: function () { var e = this.state, t = this.shared, n = this.config; if (e._active || this.clean(), !e._blocked && e.intentional || e._force || n.triggerAllEvents) { var r = this.handler(jU(jU(jU({}, t), e), {}, k({}, this.aliasKey, e.values))); void 0 !== r && (e.memo = r) } } }, { key: "clean", value: function () { this.eventStore.clean(), this.timeoutStore.clean() } }]), e }(), eH = function (e) { u(n, e); var t = f(n); function n() { var e; g(this, n); for (var r = arguments.length, i = new Array(r), o = 0; o < r; o++)i[o] = arguments[o]; return RU(d(e = t.call.apply(t, [this].concat(i))), "aliasKey", "xy"), e } return y(n, [{ key: "reset", value: function () { o(v(n.prototype), "reset", this).call(this), this.state.axis = void 0 } }, { key: "init", value: function () { this.state.offset = [0, 0], this.state.lastOffset = [0, 0] } }, { key: "computeOffset", value: function () { this.state.offset = PU(this.state.lastOffset, this.state.movement) } }, { key: "computeMovement", value: function () { this.state.movement = MU(this.state.offset, this.state.lastOffset) } }, { key: "intent", value: function (e) { this.state.axis = this.state.axis || function (e) { var t = _(e, 2), n = t[0], r = t[1], i = Math.abs(n) - Math.abs(r); return i > 0 ? "x" : i < 0 ? "y" : void 0 }(e), this.state._blocked = (this.config.lockDirection || !!this.config.axis) && !this.state.axis || !!this.config.axis && this.config.axis !== this.state.axis, !this.state._blocked && (this.config.axis || this.config.lockDirection) && function (e, t) { switch (t) { case "x": e[1] = 0; break; case "y": e[0] = 0 } }(e, this.state.axis) } }]), n }(QU), tH = function (e) { return e }, nH = .15, rH = { enabled: function () { var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0]; return e }, preventDefault: function () { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]; return e }, triggerAllEvents: function () { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]; return e }, rubberband: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0; switch (e) { case !0: return [nH, nH]; case !1: return [0, 0]; default: return OU(e) } }, from: function (e) { return "function" == typeof e ? e : null != e ? OU(e) : void 0 }, transform: function (e, t, n) { var r = e || n.shared.transform; return this.hasCustomTransform = !!r, r || tH }, threshold: function (e) { return OU(e, 0) } }, iH = jU(jU({}, rH), {}, { axis: function (e, t, n) { var r = n.axis; if (this.lockDirection = "lock" === r, !this.lockDirection) return r }, bounds: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; if ("function" == typeof e) return function (t) { return iH.bounds(e(t)) }; if ("current" in e) return function () { return e.current }; if ("function" == typeof HTMLElement && e instanceof HTMLElement) return e; var t = e.left, n = void 0 === t ? -1 / 0 : t, r = e.right, i = void 0 === r ? 1 / 0 : r, o = e.top, a = void 0 === o ? -1 / 0 : o, s = e.bottom, l = void 0 === s ? 1 / 0 : s; return [[n, i], [a, l]] } }), oH = { ArrowRight: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1; return [10 * e, 0] }, ArrowLeft: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1; return [-10 * e, 0] }, ArrowUp: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1; return [0, -10 * e] }, ArrowDown: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1; return [0, 10 * e] } }, aH = function (e) { u(n, e); var t = f(n); function n() { var e; g(this, n); for (var r = arguments.length, i = new Array(r), o = 0; o < r; o++)i[o] = arguments[o]; return RU(d(e = t.call.apply(t, [this].concat(i))), "ingKey", "dragging"), e } return y(n, [{ key: "reset", value: function () { o(v(n.prototype), "reset", this).call(this); var e = this.state; e._pointerId = void 0, e._pointerActive = !1, e._keyboardActive = !1, e._preventScroll = !1, e._delayed = !1, e.swipe = [0, 0], e.tap = !1, e.canceled = !1, e.cancel = this.cancel.bind(this) } }, { key: "setup", value: function () { var e = this.state; if (e._bounds instanceof HTMLElement) { var t = e._bounds.getBoundingClientRect(), n = e.currentTarget.getBoundingClientRect(), r = { left: t.left - n.left + e.offset[0], right: t.right - n.right + e.offset[0], top: t.top - n.top + e.offset[1], bottom: t.bottom - n.bottom + e.offset[1] }; e._bounds = iH.bounds(r) } } }, { key: "cancel", value: function () { var e = this, t = this.state; t.canceled || (t.canceled = !0, t._active = !1, setTimeout((function () { e.compute(), e.emit() }), 0)) } }, { key: "setActive", value: function () { this.state._active = this.state._pointerActive || this.state._keyboardActive } }, { key: "clean", value: function () { this.pointerClean(), this.state._pointerActive = !1, this.state._keyboardActive = !1, o(v(n.prototype), "clean", this).call(this) } }, { key: "pointerDown", value: function (e) { var t = this.config, n = this.state; null != e.buttons && (Array.isArray(t.pointerButtons) ? !t.pointerButtons.includes(e.buttons) : -1 !== t.pointerButtons && t.pointerButtons !== e.buttons) || (this.ctrl.setEventIds(e), t.pointerCapture && e.target.setPointerCapture(e.pointerId), !n._pointerActive && (this.start(e), this.setupPointer(e), n._pointerId = YU(e), n._pointerActive = !0, this.computeValues(XU(e)), this.computeInitial(), t.preventScroll ? this.setupScrollPrevention(e) : t.delay > 0 ? this.setupDelayTrigger(e) : this.startPointerDrag(e))) } }, { key: "startPointerDrag", value: function (e) { var t = this.state; t._active = !0, t._preventScroll = !0, t._delayed = !1, this.compute(e), this.emit() } }, { key: "pointerMove", value: function (e) { var t = this.state, n = this.config; if (t._pointerActive && (t.type !== e.type || e.timeStamp !== t.timeStamp)) { var r = YU(e); if (!t._pointerId || r === t._pointerId) { var i = XU(e); return document.pointerLockElement === e.target ? t._delta = [e.movementX, e.movementY] : (t._delta = MU(i, t._values), this.computeValues(i)), AU(t._movement, t._delta), this.compute(e), t._delayed ? (this.timeoutStore.remove("dragDelay"), t.active = !1, void this.startPointerDrag(e)) : n.preventScroll && !t._preventScroll ? t.axis ? t.axis === n.preventScrollAxis || "xy" === n.preventScrollAxis ? (t._active = !1, void this.clean()) : (this.timeoutStore.remove("startPointerDrag"), void this.startPointerDrag(e)) : void 0 : void this.emit() } } } }, { key: "pointerUp", value: function (e) { this.ctrl.setEventIds(e); try { this.config.pointerCapture && e.target.hasPointerCapture(e.pointerId) && e.target.releasePointerCapture(e.pointerId) } catch (e) { } var t = this.state, n = this.config; if (t._pointerActive) { var r = YU(e); if (!t._pointerId || r === t._pointerId) { this.state._pointerActive = !1, this.setActive(), this.compute(e); var i = _(t._distance, 2), o = i[0], a = i[1]; if (t.tap = o <= n.tapsThreshold && a <= n.tapsThreshold, t.tap && n.filterTaps) t._force = !0; else { var s = _(t.direction, 2), l = s[0], u = s[1], c = _(t.velocity, 2), f = c[0], h = c[1], d = _(t.movement, 2), p = d[0], v = d[1], g = _(n.swipe.velocity, 2), m = g[0], y = g[1], b = _(n.swipe.distance, 2), w = b[0], x = b[1], S = n.swipe.duration; t.elapsedTime < S && (Math.abs(f) > m && Math.abs(p) > w && (t.swipe[0] = l), Math.abs(h) > y && Math.abs(v) > x && (t.swipe[1] = u)) } this.emit() } } } }, { key: "pointerClick", value: function (e) { this.state.tap || (e.preventDefault(), e.stopPropagation()) } }, { key: "setupPointer", value: function (e) { var t = this.config, n = t.device; t.pointerLock && e.currentTarget.requestPointerLock(), t.pointerCapture || (this.eventStore.add(this.sharedConfig.window, n, "change", this.pointerMove.bind(this)), this.eventStore.add(this.sharedConfig.window, n, "end", this.pointerUp.bind(this)), this.eventStore.add(this.sharedConfig.window, n, "cancel", this.pointerUp.bind(this))) } }, { key: "pointerClean", value: function () { this.config.pointerLock && document.pointerLockElement === this.state.currentTarget && document.exitPointerLock() } }, { key: "preventScroll", value: function (e) { this.state._preventScroll && e.cancelable && e.preventDefault() } }, { key: "setupScrollPrevention", value: function (e) { (function (e) { "persist" in e && "function" == typeof e.persist && e.persist() })(e), this.eventStore.add(this.sharedConfig.window, "touch", "change", this.preventScroll.bind(this), { passive: !1 }), this.eventStore.add(this.sharedConfig.window, "touch", "end", this.clean.bind(this), { passive: !1 }), this.eventStore.add(this.sharedConfig.window, "touch", "cancel", this.clean.bind(this), { passive: !1 }), this.timeoutStore.add("startPointerDrag", this.startPointerDrag.bind(this), this.config.preventScroll, e) } }, { key: "setupDelayTrigger", value: function (e) { this.state._delayed = !0, this.timeoutStore.add("dragDelay", this.startPointerDrag.bind(this), this.config.delay, e) } }, { key: "keyDown", value: function (e) { var t = oH[e.key]; if (t) { var n = this.state, r = e.shiftKey ? 10 : e.altKey ? .1 : 1; n._delta = t(r), this.start(e), n._keyboardActive = !0, AU(n._movement, n._delta), this.compute(e), this.emit() } } }, { key: "keyUp", value: function (e) { e.key in oH && (this.state._keyboardActive = !1, this.setActive(), this.compute(e), this.emit()) } }, { key: "bind", value: function (e) { var t = this.config.device; e(t, "start", this.pointerDown.bind(this)), this.config.pointerCapture && (e(t, "change", this.pointerMove.bind(this)), e(t, "end", this.pointerUp.bind(this)), e(t, "cancel", this.pointerUp.bind(this)), e("lostPointerCapture", "", this.pointerUp.bind(this))), e("key", "down", this.keyDown.bind(this)), e("key", "up", this.keyUp.bind(this)), this.config.filterTaps && e("click", "", this.pointerClick.bind(this), { capture: !0, passive: !1 }) } }]), n }(eH), sH = "undefined" != typeof window && window.document && window.document.createElement; function lH() { return sH && "ontouchstart" in window || sH && window.navigator.maxTouchPoints > 1 } var uH = { isBrowser: sH, gesture: function () { try { return "constructor" in GestureEvent } catch (e) { return !1 } }(), touch: lH(), touchscreen: lH(), pointer: sH && "onpointerdown" in window, pointerLock: sH && "exitPointerLock" in window.document }, cH = jU(jU({}, iH), {}, { pointerLock: function (e, t, n) { var r = n.pointer, i = (r = void 0 === r ? {} : r).lock, o = void 0 !== i && i, a = r.touch, s = void 0 !== a && a; return this.useTouch = s && uH.touch, o && uH.pointerLock }, device: function (e, t) { return this.useTouch ? "touch" : this.pointerLock ? "mouse" : uH.pointer ? "pointer" : uH.touch ? "touch" : "mouse" }, preventScroll: function () { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0], t = arguments.length > 2 ? arguments[2] : void 0, n = t.preventScrollAxis, r = void 0 === n ? "y" : n; return r && (this.preventScrollAxis = r), !!uH.touchscreen && ("number" == typeof e ? e : !!e && 250) }, pointerCapture: function (e, t, n) { var r = n.pointer, i = (r = void 0 === r ? {} : r).capture, o = void 0 === i || i, a = r.buttons, s = void 0 === a ? 1 : a; return this.pointerButtons = s, !this.pointerLock && "pointer" === this.device && o }, threshold: function (e, t, n) { var r = n.filterTaps, i = void 0 !== r && r, o = n.tapsThreshold, a = void 0 === o ? 3 : o, s = n.axis, l = OU(e, i ? a : (void 0 === s ? void 0 : s) ? 1 : 0); return this.filterTaps = i, this.tapsThreshold = a, l }, swipe: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = e.velocity, n = void 0 === t ? .5 : t, r = e.distance, i = void 0 === r ? 50 : r, o = e.duration, a = void 0 === o ? 250 : o; return { velocity: this.transform(OU(n)), distance: this.transform(OU(i)), duration: a } }, delay: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0; switch (e) { case !0: return 180; case !1: return 0; default: return e } } }), fH = function (e) { u(n, e); var t = f(n); function n() { var e; g(this, n); for (var r = arguments.length, i = new Array(r), o = 0; o < r; o++)i[o] = arguments[o]; return RU(d(e = t.call.apply(t, [this].concat(i))), "ingKey", "pinching"), RU(d(e), "aliasKey", "da"), e } return y(n, [{ key: "init", value: function () { this.state.offset = [1, 0], this.state.lastOffset = [1, 0], this.state._pointerEvents = new Map } }, { key: "reset", value: function () { o(v(n.prototype), "reset", this).call(this); var e = this.state; e._touchIds = [], e.canceled = !1, e.cancel = this.cancel.bind(this), e.turns = 0 } }, { key: "computeOffset", value: function () { var e = this.state, t = e.type, n = e.movement, r = e.lastOffset; this.state.offset = "wheel" === t ? PU(n, r) : [(1 + n[0]) * r[0], n[1] + r[1]] } }, { key: "computeMovement", value: function () { var e = this.state, t = e.offset, n = e.lastOffset; this.state.movement = [t[0] / n[0], t[1] - n[1]] } }, { key: "intent", value: function (e) { var t = this.state; if (!t.axis) { var n = 30 * Math.abs(e[0]) - Math.abs(e[1]); n < 0 ? t.axis = "angle" : n > 0 && (t.axis = "scale") } this.config.lockDirection && ("scale" === t.axis ? e[1] = 0 : "angle" === t.axis && (e[0] = 0)) } }, { key: "cancel", value: function () { var e = this, t = this.state; t.canceled || setTimeout((function () { t.canceled = !0, t._active = !1, e.compute(), e.emit() }), 0) } }, { key: "touchStart", value: function (e) { this.ctrl.setEventIds(e); var t = this.state, n = this.ctrl.touchIds; if (!(t._active && t._touchIds.every((function (e) { return n.has(e) })) || n.size < 2)) { this.start(e), t._touchIds = Array.from(n).slice(0, 2); var r = KU(e, t._touchIds); this.pinchStart(e, r) } } }, { key: "pointerStart", value: function (e) { if (null == e.buttons || e.buttons % 2 == 1) { this.ctrl.setEventIds(e), e.target.setPointerCapture(e.pointerId); var t = this.state, n = t._pointerEvents, r = this.ctrl.pointerIds; if (!(t._active && Array.from(n.keys()).every((function (e) { return r.has(e) })) || (n.size < 2 && n.set(e.pointerId, e), t._pointerEvents.size < 2))) { this.start(e); var i = WU.apply(void 0, S(Array.from(n.values()))); this.pinchStart(e, i) } } } }, { key: "pinchStart", value: function (e, t) { this.state.origin = t.origin, this.computeValues([t.distance, t.angle]), this.computeInitial(), this.compute(e), this.emit() } }, { key: "touchMove", value: function (e) { if (this.state._active) { var t = KU(e, this.state._touchIds); this.pinchMove(e, t) } } }, { key: "pointerMove", value: function (e) { var t = this.state._pointerEvents; if (t.has(e.pointerId) && t.set(e.pointerId, e), this.state._active) { var n = WU.apply(void 0, S(Array.from(t.values()))); this.pinchMove(e, n) } } }, { key: "pinchMove", value: function (e, t) { var n = this.state, r = n._values[1], i = t.angle - r, o = 0; Math.abs(i) > 270 && (o += Math.sign(i)), this.computeValues([t.distance, t.angle - 360 * o]), n.origin = t.origin, n.turns = o, n._movement = [n._values[0] / n._initial[0] - 1, n._values[1] - n._initial[1]], this.compute(e), this.emit() } }, { key: "touchEnd", value: function (e) { var t = this; this.ctrl.setEventIds(e), this.state._active && this.state._touchIds.some((function (e) { return !t.ctrl.touchIds.has(e) })) && (this.state._active = !1, this.compute(e), this.emit()) } }, { key: "pointerEnd", value: function (e) { var t = this.state; this.ctrl.setEventIds(e); try { e.target.releasePointerCapture(e.pointerId) } catch (e) { } t._pointerEvents.has(e.pointerId) && t._pointerEvents.delete(e.pointerId), t._active && t._pointerEvents.size < 2 && (t._active = !1, this.compute(e), this.emit()) } }, { key: "gestureStart", value: function (e) { e.cancelable && e.preventDefault(); var t = this.state; t._active || (this.start(e), this.computeValues([e.scale, e.rotation]), t.origin = [e.clientX, e.clientY], this.compute(e), this.emit()) } }, { key: "gestureMove", value: function (e) { if (e.cancelable && e.preventDefault(), this.state._active) { var t = this.state; this.computeValues([e.scale, e.rotation]), t.origin = [e.clientX, e.clientY]; var n = t._movement; t._movement = [e.scale - 1, e.rotation], t._delta = MU(t._movement, n), this.compute(e), this.emit() } } }, { key: "gestureEnd", value: function (e) { !this.state._active || (this.state._active = !1, this.compute(e), this.emit()) } }, { key: "wheel", value: function (e) { !e.ctrlKey || (this.state._active ? this.wheelChange(e) : this.wheelStart(e), this.timeoutStore.add("wheelEnd", this.wheelEnd.bind(this))) } }, { key: "wheelStart", value: function (e) { this.start(e), this.wheelChange(e) } }, { key: "wheelChange", value: function (e) { "uv" in e || e.cancelable && e.preventDefault(); var t = this.state; t._delta = [-GU(e)[1] / 36 * t.offset[0], 0], AU(t._movement, t._delta), this.state.origin = [e.clientX, e.clientY], this.compute(e), this.emit() } }, { key: "wheelEnd", value: function () { !this.state._active || (this.state._active = !1, this.compute(), this.emit()) } }, { key: "bind", value: function (e) { var t = this.config.device; t ? (e(t, "start", this[t + "Start"].bind(this)), e(t, "change", this[t + "Move"].bind(this)), e(t, "end", this[t + "End"].bind(this)), e(t, "cancel", this[t + "End"].bind(this))) : e("wheel", "", this.wheel.bind(this), { passive: !1 }) } }]), n }(QU), hH = jU(jU({}, rH), {}, { useTouch: function (e, t, n) { var r = n.pointer, i = (r = void 0 === r ? {} : r).touch; return void 0 !== i && i && uH.touch }, device: function (e, t, n) { if (n.shared.target && !uH.touch && uH.gesture) return "gesture"; if (this.useTouch) return "touch"; if (uH.touchscreen) { if (uH.pointer) return "pointer"; if (uH.touch) return "touch" } }, bounds: function (e, t, n) { var r = n.scaleBounds, i = void 0 === r ? {} : r, o = n.angleBounds, a = void 0 === o ? {} : o, s = function (e) { var t = $U(qU(i, e), { min: -1 / 0, max: 1 / 0 }); return [t.min, t.max] }, l = function (e) { var t = $U(qU(a, e), { min: -1 / 0, max: 1 / 0 }); return [t.min, t.max] }; return "function" != typeof i && "function" != typeof a ? [s(), l()] : function (e) { return [s(e), l(e)] } }, threshold: function (e, t, n) { return this.lockDirection = "lock" === n.axis, OU(e, this.lockDirection ? [.1, 3] : 0) } }); jU(jU({}, iH), {}, { mouseOnly: function () { var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0]; return e } }), jU(jU({}, iH), {}, { mouseOnly: function () { var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0]; return e } }); var dH = new Map, pH = new Map; function vH(e) { dH.set(e.key, e.engine), pH.set(e.key, e.resolver) } var gH = { key: "drag", engine: aH, resolver: cH }, mH = { key: "pinch", engine: fH, resolver: hH }; var yH = { target: function (e) { if (e) return function () { return "current" in e ? e.current : e } }, enabled: function () { var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0]; return e }, window: function (e) { function t() { return e.apply(this, arguments) } return t.toString = function () { return e.toString() }, t }((function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : uH.isBrowser ? window : void 0; return e })), eventOptions: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = e.passive, n = void 0 === t || t, r = e.capture, i = void 0 !== r && r; return { passive: n, capture: i } }, transform: function (e) { return e } }, bH = ["target", "eventOptions", "window", "enabled", "transform"]; function wH() { for (var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = arguments.length > 1 ? arguments[1] : void 0, n = {}, r = 0, i = Object.entries(t); r < i.length; r++) { var o = _(i[r], 2), a = o[0], s = o[1]; switch (C(s)) { case "function": n[a] = s.call(n, e[a], a, e); break; case "object": n[a] = wH(e[a], s); break; case "boolean": s && (n[a] = e[a]) } } return n } var xH = function () { function e(t) { g(this, e), RU(this, "_listeners", []), this._ctrl = t } return y(e, [{ key: "add", value: function (e, t, n, r, i) { var o = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "", n = FU[e], r = n && n[t] || t; return e + r }(t, n), a = jU(jU({}, this._ctrl.config.shared.eventOptions), i); e.addEventListener(o, r, a), this._listeners.push((function () { return e.removeEventListener(o, r, a) })) } }, { key: "clean", value: function () { this._listeners.forEach((function (e) { return e() })), this._listeners = [] } }]), e }(), _H = function () { function e() { g(this, e), RU(this, "_timeouts", new Map) } return y(e, [{ key: "add", value: function (e, t) { for (var n, r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 140, i = arguments.length, o = new Array(i > 3 ? i - 3 : 0), a = 3; a < i; a++)o[a - 3] = arguments[a]; this.remove(e), this._timeouts.set(e, (n = window).setTimeout.apply(n, [t, r].concat(o))) } }, { key: "remove", value: function (e) { var t = this._timeouts.get(e); t && window.clearTimeout(t) } }, { key: "clean", value: function () { this._timeouts.forEach((function (e) { window.clearTimeout(e) })), this._timeouts.clear() } }]), e }(), SH = function () { function e(t) { g(this, e), RU(this, "gestures", new Set), RU(this, "_targetEventStore", new xH(this)), RU(this, "gestureEventStores", {}), RU(this, "gestureTimeoutStores", {}), RU(this, "handlers", {}), RU(this, "config", {}), RU(this, "pointerIds", new Set), RU(this, "touchIds", new Set), RU(this, "state", { shared: { shiftKey: !1, metaKey: !1, ctrlKey: !1, altKey: !1 } }), function (e, t) { t.drag && kH(e, "drag"), t.wheel && kH(e, "wheel"), t.scroll && kH(e, "scroll"), t.move && kH(e, "move"), t.pinch && kH(e, "pinch"), t.hover && kH(e, "hover") }(this, t) } return y(e, [{ key: "setEventIds", value: function (e) { UU(e) ? this.touchIds = new Set(function (e) { return function (e) { return Array.from(e.touches).filter((function (t) { var n, r; return t.target === e.currentTarget || (null === (n = e.currentTarget) || void 0 === n || null === (r = n.contains) || void 0 === r ? void 0 : r.call(n, t.target)) })) }(e).map((function (e) { return e.identifier })) }(e)) : "pointerId" in e && ("pointerup" === e.type || "pointercancel" === e.type ? this.pointerIds.delete(e.pointerId) : "pointerdown" === e.type && this.pointerIds.add(e.pointerId)) } }, { key: "applyHandlers", value: function (e, t) { this.handlers = e, this.nativeHandlers = t } }, { key: "applyConfig", value: function (e, t) { this.config = function (e, t) { var n = e, r = n.target, i = n.eventOptions, o = n.window, a = n.enabled, s = n.transform, l = function (e, t) { if (null == e) return {}; var n, r, i = function (e, t) { if (null == e) return {}; var n, r, i = {}, o = Object.keys(e); for (r = 0; r < o.length; r++)n = o[r], !(t.indexOf(n) >= 0) && (i[n] = e[n]); return i }(e, t); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); for (r = 0; r < o.length; r++)n = o[r], !(t.indexOf(n) >= 0) && (!Object.prototype.propertyIsEnumerable.call(e, n) || (i[n] = e[n])) } return i }(n, bH), u = { shared: wH({ target: r, eventOptions: i, window: o, enabled: a, transform: s }, yH) }; if (t) { var c = pH.get(t); u[t] = wH(jU({ shared: u.shared }, l), c) } else for (var f in l) { var h = pH.get(f); h && (u[f] = wH(jU({ shared: u.shared }, l[f]), h)) } return u }(e, t) } }, { key: "clean", value: function () { this._targetEventStore.clean(); var e, t = T(this.gestures); try { for (t.s(); !(e = t.n()).done;) { var n = e.value; this.gestureEventStores[n].clean(), this.gestureTimeoutStores[n].clean() } } catch (e) { t.e(e) } finally { t.f() } } }, { key: "effect", value: function () { var e = this; return this.config.shared.target && this.bind(), function () { return e._targetEventStore.clean() } } }, { key: "bind", value: function () { for (var e = this, t = arguments.length, n = new Array(t), r = 0; r < t; r++)n[r] = arguments[r]; var i, o = this.config.shared, a = o.eventOptions, s = {}; if (!o.target || (i = o.target())) { var l = CH(s, a, !!i); if (o.enabled) { var u, c = T(this.gestures); try { for (c.s(); !(u = c.n()).done;) { var f = u.value; if (this.config[f].enabled) { var h = dH.get(f); new h(this, n, f).bind(l) } } } catch (e) { c.e(e) } finally { c.f() } var d = function (t) { l(t, "", (function (r) { return e.nativeHandlers[t](jU(jU({}, e.state.shared), {}, { event: r, args: n })) }), void 0, !0) }; for (var p in this.nativeHandlers) d(p) } for (var v in s) s[v] = ZU.apply(void 0, S(s[v])); if (!i) return s; for (var g in s) { var m = VU(g), y = m.device, b = m.capture, w = m.passive; this._targetEventStore.add(i, y, "", s[g], { capture: b, passive: w }) } } } }]), e }(); function kH(e, t) { e.gestures.add(t), e.gestureEventStores[t] = new xH(e), e.gestureTimeoutStores[t] = new _H } var CH = function (e, t, n) { return function (r, i, o) { var a, s, l = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {}, u = arguments.length > 4 && void 0 !== arguments[4] && arguments[4], c = null !== (a = l.capture) && void 0 !== a ? a : t.capture, f = null !== (s = l.passive) && void 0 !== s ? s : t.passive, h = u ? r : zU(r, i, c); n && f && (h += "Passive"), e[h] = e[h] || [], e[h].push(o) } }, TH = /^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/; function EH(e, t, n, r, i, o) { if (e.has(n) && dH.has(r)) { var a = n + "Start", s = n + "End"; i[r] = function (e) { var r; return e.first && a in t && t[a](e), n in t && (r = t[n](e)), e.last && s in t && t[s](e), r }, o[r] = o[r] || {} } } function OH(e, t) { var n = function (e) { var t = {}, n = {}, r = new Set; for (var i in e) TH.test(i) ? (r.add(RegExp.lastMatch), n[i] = e[i]) : t[i] = e[i]; return [n, t, r] }(e), r = _(n, 3), i = r[0], o = r[1], a = r[2], s = {}; return EH(a, i, "onDrag", "drag", s, t), EH(a, i, "onWheel", "wheel", s, t), EH(a, i, "onScroll", "scroll", s, t), EH(a, i, "onPinch", "pinch", s, t), EH(a, i, "onMove", "move", s, t), EH(a, i, "onHover", "hover", s, t), { handlers: s, config: t, nativeHandlers: o } } function PH(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, n = arguments.length > 2 ? arguments[2] : void 0, r = arguments.length > 3 ? arguments[3] : void 0, i = ce.useMemo((function () { return new SH(e) }), []); if (i.applyHandlers(e, r), i.applyConfig(t, n), ce.useEffect(i.effect.bind(i)), ce.useEffect((function () { return i.clean.bind(i) }), []), void 0 === t.target) return i.bind.bind(i) } function MH(e) { var t = e.position, n = e.inset, r = function (e, t) { var n = t ? "left-0" : "-left-5", r = t ? "top-0" : "-top-5", i = t ? "bottom-0" : "-bottom-5", o = t ? "right-0" : "-right-5"; switch (e) { case "top-left": return "".concat(n, " ").concat(r, " border-l-4 border-t-4 cursor-nwse-resize"); case "top-right": return "".concat(o, " ").concat(r, " border-r-4 border-t-4 cursor-nesw-resize"); case "bottom-right": return "".concat(o, " ").concat(i, " border-r-4 border-b-4 cursor-se-resize"); case "bottom-left": return "".concat(n, " ").concat(i, " border-l-4 border-b-4 cursor-sw-resize"); default: return "" } }(t, void 0 !== n && n); return ky("div", { "data-position": t, className: "border-white absolute w-20 h-20 ".concat(r) }) } var AH = function (e) { return e.top = "maskTop", e.right = "maskRight", e.bottom = "maskBottom", e.left = "maskLeft", e }(AH || {}); function DH(e) { var t = e.position, n = e.refs, r = function (e) { switch (e) { case "maskTop": return "left-0 top-0"; case "maskBottom": return "bottom-0 left-0"; default: return "" } }(t); return ky("div", { className: "cropzone-transition bg-black/50 bottom absolute ".concat(r), ref: function (e) { return n.current[t] = e } }) } function LH(e) { var t = e.name, n = e.refs, r = CT("cropzone-transition pointer-events-none absolute left-0 top-0 bg-white/50", t.startsWith("lineHor") ? "h-px" : "w-px"); return ky("div", { className: r, ref: function (e) { n.current[t] = e } }) } var RH = function () { function e(t, n) { g(this, e), B(this, "doubleTapTimer", null), B(this, "boundOnPointerDown"), B(this, "boundOnPointerUp"), B(this, "currentRect", { width: 0, height: 0, left: 0, top: 0, angle: 0 }), B(this, "currentAction"), B(this, "initialAspectRatio", 0), B(this, "lastPosition", { pageX: 0, pageY: 0 }), this.el = t, this.config = n, this.boundOnPointerDown = this.onPointerDown.bind(this), this.boundOnPointerUp = this.onPointerUp.bind(this), t.addEventListener("pointerdown", this.boundOnPointerDown), t.addEventListener("pointerup", this.boundOnPointerUp) } return y(e, [{ key: "aspectRatio", get: function () { return this.config.maintainInitialAspectRatio ? this.initialAspectRatio : this.config.aspectRatio ? this.config.aspectRatio : null } }, { key: "setConfig", value: function (e) { this.config = F(F({}, this.config), e) } }, { key: "destroy", value: function () { this.el.removeEventListener("pointerdown", this.boundOnPointerDown), this.el.removeEventListener("pointerup", this.boundOnPointerUp) } }, { key: "onPointerDown", value: function (e) { var t, n, r, i; e.stopPropagation(), e.preventDefault(), this.lastPosition = { pageX: e.pageX, pageY: e.pageY }, this.el.style.touchAction = "none", this.el.style.userSelect = "none", this.syncCurrentRectWithEl(this.el), this.currentAction = this.config.actions.find((function (t) { return t.matches(e) })), this.currentAction && (this.currentRect = F(F({}, this.currentRect), null == (n = (t = this.currentAction).onPointerDown) ? void 0 : n.call(t, e))), null == (i = (r = this.config.listeners).onPointerDown) || i.call(r, { rect: this.currentRect }), this.el.onpointermove = this.onPointerMove.bind(this), this.el.setPointerCapture(e.pointerId) } }, { key: "onPointerMove", value: function (e) { e.stopPropagation(), e.preventDefault(), this.currentAction && this.executeAction(this.currentAction, e), this.lastPosition = { pageX: e.pageX, pageY: e.pageY } } }, { key: "executeAction", value: function (e, t, n) { var r = this, i = F({}, this.currentRect); this.currentRect = e.execute({ deltaX: t.pageX - this.lastPosition.pageX, deltaY: t.pageY - this.lastPosition.pageY, pageX: t.pageX, pageY: t.pageY, aspectRatio: this.aspectRatio, currentRect: this.currentRect }, n), this.config.modifiers && (this.currentRect = this.config.modifiers.reduce((function (e, t) { return t({ currentRect: r.currentRect, prevRect: i }, r.config) }), this.currentRect)); var o = this.config.listeners[e.callbackName], a = { rect: F({}, this.currentRect), prevRect: i }; null == o || o(a) } }, { key: "syncCurrentRectWithEl", value: function (e) { var t, n = _(((null == (t = e.style.transform.match(/translate\((.+?)\)/)) ? void 0 : t[1]) || "").split(","), 2), r = n[0], i = void 0 === r ? "0" : r, o = n[1], a = void 0 === o ? "0" : o; this.currentRect = { width: e.offsetWidth, height: e.offsetHeight, left: parseInt(i, 10), top: parseInt(a, 10), angle: 0 }, this.initialAspectRatio = this.currentRect.width / this.currentRect.height } }, { key: "onPointerUp", value: function (e) { var t, n; e.stopPropagation(), e.preventDefault(); var r = e.currentTarget; this.currentAction = null, r.onpointermove = null, r.releasePointerCapture(e.pointerId), this.config.actions.forEach((function (t) { var n; return null == (n = t.onPointerUp) ? void 0 : n.call(t, e) })), null == (n = (t = this.config.listeners).onPointerUp) || n.call(t, { rect: this.currentRect }), this.handleDoubleTap(e) } }, { key: "handleDoubleTap", value: function (e) { var t, n, r = this; this.doubleTapTimer ? (clearTimeout(this.doubleTapTimer), this.doubleTapTimer = null, null == (n = (t = this.config.listeners).onDoubleTap) || n.call(t, e)) : this.doubleTapTimer = setTimeout((function () { r.doubleTapTimer = null }), 300) } }]), e }(), IH = function () { function e() { g(this, e), B(this, "callbackName", "onMove"), B(this, "lockMovement", !1) } return y(e, [{ key: "matches", value: function (e) { return !!e.target && !!e.currentTarget && e.target === e.currentTarget } }, { key: "execute", value: function (e) { if (this.lockMovement) return e.currentRect; var t = e.currentRect; return t.left += e.deltaX, t.top += e.deltaY, t } }]), e }(); function jH(e, t) { var n, r = e.currentRect, i = e.prevRect, o = t.boundaryRect, a = t.minWidth, s = t.minHeight, l = t.aspectRatio, u = F({}, r), c = F({}, i); return o && (u.left < 0 && (u = c), u.top < 0 && (u = c), u.left + u.width > o.width && (u = c), u.top + u.height > o.height && (u = c)), (a || s) && ((n = l ? AP(l, a, s) : { width: a, height: s }).width && u.width < n.width && (u.left = c.left, u.width = n.width), n.height && u.height < n.height && (u.top = c.top, u.height = n.height)), u } function FH() { var e = h.exports.useRef({}), t = _(h.exports.useState(!0), 2), n = t[0], r = t[1], i = lw((function (e) { return e.canvasSize })), o = lw((function (e) { var t, n; return null == (n = null == (t = e.config.tools) ? void 0 : t.crop) ? void 0 : n.cropzone })), a = lw((function (e) { var t, n; return null == (n = null == (t = e.config.tools) ? void 0 : t.crop) ? void 0 : n.defaultRatio })) || null; h.exports.useEffect((function () { return XO().crop && (XO().crop.zone = new RH(e.current.innerZone, { actions: [new IH, new TB], modifiers: [jH], listeners: { onPointerDown: function () { r(!0) }, onMove: function (e) { XO().crop.drawZone(e.rect) }, onResize: function (e) { XO().crop.drawZone(e.rect) }, onPointerUp: function () { r(!1) } }, minHeight: 50, minWidth: 50, boundaryRect: i, aspectRatio: DP(a) })), function () { var e; null == (e = XO().crop.zone) || e.destroy() } }), []), h.exports.useLayoutEffect((function () { XO().crop.registerRefs(e), XO().crop.resetCropzone(a) }), [a, i]); var s = CT("cropzone absolute z-cropzone isolate left-0 top-0 w-full h-full overflow-hidden", { moving: n }); return Cy("div", { className: s, onPointerDown: function (e) { e.stopPropagation(), e.preventDefault() }, children: [Cy("div", { className: "cropzone-transition border-white/50 absolute z-10 left-0 top-0 border", ref: function (t) { e.current.innerZone = t }, children: [!(null == o ? void 0 : o.hideTopLeft) && ky(MH, { position: "top-left", inset: !0 }), !(null == o ? void 0 : o.hideTopRight) && ky(MH, { position: "top-right", inset: !0 }), !(null == o ? void 0 : o.hideBottomLeft) && ky(MH, { position: "bottom-left", inset: !0 }), !(null == o ? void 0 : o.hideBottomRight) && ky(MH, { position: "bottom-right", inset: !0 }), ky(LH, { name: "lineVer1", refs: e }), ky(LH, { name: "lineVer2", refs: e }), ky(LH, { name: "lineHor1", refs: e }), ky(LH, { name: "lineHor2", refs: e })] }), ky(DH, { refs: e, position: AH.top }), ky(DH, { refs: e, position: AH.left }), ky(DH, { refs: e, position: AH.right }), ky(DH, { refs: e, position: AH.bottom })] }) } var NH = "rotation-handle", zH = function () { function e() { g(this, e), B(this, "callbackName", "onRotate"), B(this, "centerX", 0), B(this, "centerY", 0), B(this, "startAngle", 0) } return y(e, [{ key: "matches", value: function (e) { return e.target.classList.contains(NH) } }, { key: "onPointerDown", value: function (e) { var t, n = e.currentTarget, r = n.getBoundingClientRect(); this.centerX = r.left + r.width / 2, this.centerY = r.top + r.height / 2; var i = null == (t = n.style.transform.match(/rotate\((.+?)\)/)) ? void 0 : t[1], o = _(i ? i.split(",") : [], 1)[0], a = void 0 === o ? "0" : o; return this.startAngle = parseFloat(a), this.startAngle = this.getDragAngle(e), { angle: this.startAngle } } }, { key: "onPointerUp", value: function () { this.centerX = 0, this.centerY = 0, this.startAngle = 0 } }, { key: "execute", value: function (e) { var t = F({}, e.currentRect); return t.angle = this.getDragAngle(e), t.left += e.deltaX, t.top += e.deltaY, t } }, { key: "getDragAngle", value: function (e) { var t = this.centerX || 0, n = this.centerY || 0; return Math.atan2(n - e.pageY, t - e.pageX) - (this.startAngle || 0) } }]), e }(), BH = Oy(ky("path", { d: "M 7 2 C 6.448 2 6 2.448 6 3 C 6 3.552 6.448 4 7 4 L 20 4 L 20 17 C 20 17.552 20.448 18 21 18 C 21.552 18 22 17.552 22 17 L 22 4 C 22 2.895 21.105 2 20 2 L 7 2 z M 4 6 C 2.895 6 2 6.895 2 8 L 2 20 C 2 21.105 2.895 22 4 22 L 16 22 C 17.105 22 18 21.105 18 20 L 18 8 C 18 6.895 17.105 6 16 6 L 4 6 z M 10 10 C 10.552 10 11 10.448 11 11 L 11 13 L 13 13 C 13.552 13 14 13.448 14 14 C 14 14.552 13.552 15 13 15 L 11 15 L 11 17 C 11 17.552 10.552 18 10 18 C 9.448 18 9 17.552 9 17 L 9 15 L 7 15 C 6.448 15 6 14.552 6 14 C 6 13.448 6.448 13 7 13 L 9 13 L 9 11 C 9 10.448 9.448 10 10 10 z" })), VH = Oy(ky("path", { d: "M 11 3 L 2 21 L 11 21 L 11 3 z M 13 3 L 13 21 L 22 21 L 13 3 z M 9 11.472656 L 9 19 L 5.2363281 19 L 9 11.472656 z" })), UH = Oy(ky("path", { d: "M 16.476562 2.4511719 C 16.392047 2.4657656 16.308531 2.5061719 16.238281 2.5761719 L 14.130859 4.6835938 C 13.956859 4.8575938 13.956859 5.1394531 14.130859 5.3144531 L 16.238281 7.4238281 C 16.519281 7.7048281 17 7.5054219 17 7.1074219 L 17 6 L 20 6 L 20 9 A 1.0001 1.0001 0 1 0 22 9 L 22 6 C 22 4.9069372 21.093063 4 20 4 L 17 4 L 17 2.8925781 C 17 2.5940781 16.730109 2.4073906 16.476562 2.4511719 z M 4 5 C 2.9069372 5 2 5.9069372 2 7 L 2 14 C 2 15.093063 2.9069372 16 4 16 L 7 16 L 7 19 C 7 20.105 7.895 21 9 21 L 16 21 C 17.105 21 18 20.105 18 19 L 18 12 C 18 10.895 17.105 10 16 10 L 13 10 L 13 7 C 13 5.9069372 12.093063 5 11 5 L 4 5 z M 4 7 L 11 7 L 11 14 L 4 14 L 4 7 z" })), HH = Oy(ky("path", { d: "M 10 2 L 9 3 L 3 3 L 3 5 L 21 5 L 21 3 L 15 3 L 14 2 L 10 2 z M 4.3652344 7 L 5.8925781 20.263672 C 6.0245781 21.253672 6.877 22 7.875 22 L 16.123047 22 C 17.121047 22 17.974422 21.254859 18.107422 20.255859 L 19.634766 7 L 4.3652344 7 z" })), WH = { width: 120, height: 30 }, KH = [{ name: "Duplicate", icon: BH, onPress: function () { XO().objects.duplicate() } }, { name: "Flip", icon: VH, onPress: function () { XO().objects.flipHorizontally() } }, { name: "Bring to front", icon: UH, onPress: function () { XO().objects.bringToFront() } }, { name: "Delete", icon: HH, onPress: function () { XO().objects.delete() } }], YH = ce.forwardRef((function (e, t) { var n = lw((function (e) { return e.objects.active.isMoving })) ? "opacity-0" : "opacity-100"; return ky("div", { ref: t, className: "".concat(n, " absolute z-obj-box left-0 top-0 flex items-center text-white bg-controls rounded shadow transition-opacity overflow-hidden"), children: KH.map((function (e) { var t = e.icon; return ky(lB, { className: "w-30 h-30 hover:bg-white/hover", radius: "rounded-none", onPress: e.onPress, children: ky(t, { className: "icon-sm" }) }, e.name) })) }) })); function XH(e, t) { var n, r, i, o = XO().objects.getActive(); if (o && e.current) { var a = e.current, s = UO.fabric.util.degreesToRadians(null != (n = o.angle) ? n : 0), l = Math.round(o.getScaledWidth() * YO().zoom), u = Math.round(o.getScaledHeight() * YO().zoom), c = Math.round((null != (r = o.left) ? r : 0) * YO().zoom), f = Math.round((null != (i = o.top) ? i : 0) * YO().zoom), h = "center" === o.originX ? l / 2 : 0, d = "center" === o.originY ? u / 2 : 0; o.padding && (l += 2 * o.padding, u += 2 * o.padding, c -= o.padding, f -= o.padding), a.style.width = "".concat(l, "px"), a.style.height = "".concat(u, "px"), a.style.transform = "translate(".concat(c - h, "px, ").concat(f - d, "px) rotate(").concat(s, "rad)"), XO().canvas.render(), function (e, t) { if (t) { var n = e.angle || 0, r = n > 168 && n < 188 ? -30 : -15, i = YO().canvasSize, o = YO().stageSize, a = WH, s = i.top - o.top, l = i.left - o.left, u = o.width - (l + i.width), c = o.height - (s + i.height), f = -s, h = -(i.left - o.left), d = i.width - a.width + u, p = i.height - a.height + c, v = e.getBoundingRect(), g = v.top - a.height + r, m = v.left + v.width / 2 - a.width / 2; g = Math.min(p, Math.max(f, g)), m = Math.min(d, Math.max(h, m)), t.style.transform = "translate(".concat(m, "px, ").concat(g, "px) rotate(0deg)") } }(o, t.current) } } function GH() { return ky("div", { className: "absolute -bottom-20 left-1/2 w-2 h-20 bg-white cursor-default -translate-x-1/2", children: ky("div", { className: "".concat(NH, " w-18 h-18 absolute -bottom-10 -left-8 bg-white rounded-full cursor-move") }) }) } function qH() { var e = h.exports.useRef(null), t = h.exports.useRef(null), n = h.exports.useRef(null), r = lw((function (e) { return e.config.objectControls })), i = lw((function (e) { return e.objects.active.id })), o = lw((function (e) { return e.objects.isEditingText })), a = lw((function (e) { return e.zoom })), s = function () { var e = XO().objects.getActive(); if (!e || !e.name) return {}; var t = YO().config.objectControls || {}, n = e.name; return F(F({}, t.global), t[n]) }(); return h.exports.useEffect((function () { if (GO()) return YO().editor.on("object:modified", (function (t) { t.sizeOrPositionChanged && XH(e, n) })), t.current = new RH(e.current, { minWidth: 50, minHeight: 50, maintainInitialAspectRatio: !0, actions: [new IH, new TB, new zH], listeners: { onPointerUp: function () { YO().objects.setActiveIsMoving(!1) }, onDoubleTap: function () { !function () { var e, t = XO().objects.getActive(); Qb(t) && (t.enterEditing(), null == (e = t.hiddenTextarea) || e.focus()) }() }, onRotate: function (e) { YO().objects.setActiveIsMoving(!0), function (e) { var t = XO().objects.getActive(); if (t) { var n = UO.fabric.util.radiansToDegrees(e.rect.angle); n !== t.angle && XO().objects.setValues({ angle: n }) } }(e) }, onMove: function (e) { YO().objects.setActiveIsMoving(!0), function (e) { var t = e.rect.width / 2, n = e.rect.height / 2; XO().objects.setValues({ left: (e.rect.left + t) / YO().zoom, top: (e.rect.top + n) / YO().zoom }) }(e) }, onResize: function (e) { YO().objects.setActiveIsMoving(!0), function (e) { var t, n, r = XO().objects.getActive(); if (r) { var i = {}; if (Qb(r)) { var o = e.rect.width - (null != (n = null == (t = e.prevRect) ? void 0 : t.width) ? n : 0); (o > 0 || r.getScaledHeight() >= 20 && r.getScaledWidth() >= 20) && (i.fontSize = (r.fontSize || 1) + o) } else r.width && (i.scaleX = e.rect.width / YO().zoom / r.width), r.height && (i.scaleY = e.rect.height / YO().zoom / r.height); XO().objects.setValues(i) } }(e) } } }), function () { t.current.destroy() } }), []), h.exports.useEffect((function () { !function (e, t) { var n = e.config.actions.find((function (e) { return e instanceof IH })); n.lockMovement = !!t.lockMovement, e.setConfig({ maintainInitialAspectRatio: !t.unlockAspectRatio }) }(t.current, s) }), [r]), h.exports.useEffect((function () { XH(e, n) }), [i, a, o]), Cy("div", { className: i && !o ? "block" : "hidden", children: [Cy("div", { ref: e, className: "absolute z-obj-box border-2 border-white shadow-md cursor-move", children: [!s.hideTopLeft && ky(MH, { position: "top-left" }), !s.hideTopRight && ky(MH, { position: "top-right" }), !s.hideBottomLeft && ky(MH, { position: "bottom-left" }), !s.hideBottomRight && ky(MH, { position: "bottom-right" }), !s.hideRotatingPoint && ky(GH, {})] }), ky(YH, { ref: n })] }) } function JH() { var e = lw((function (e) { return e.activeTool === py.CROP })), t = lw((function (e) { return e.objects.active.id })); return Cy("div", { children: [e && ky(FH, {}), t && ky(qH, {})] }) } var ZH = function (e) { return e.forEach(vH), function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, n = OH(e, t), r = n.handlers, i = n.nativeHandlers, o = n.config; return PH(r, o, void 0, i) } }([gH, mH]), $H = ce.forwardRef((function (e, t) { var n = _(h.exports.useState(!1), 2), r = n[0], i = n[1]; return h.exports.useEffect((function () { return lw.subscribe((function (e) { return e.loading }), (function (e) { i(!e) })) }), []), ky(QH, { children: Cy(uC.div, { initial: { opacity: 0 }, variants: { visible: { opacity: 1, transition: { duration: .35, delay: .5 } }, hidden: { opacity: 0, transition: { duration: 0 } } }, animate: r ? "visible" : "hidden", className: "relative m-auto", style: { backgroundImage: "url(".concat(vP("images/empty-canvas-bg.png"), ")") }, children: [ky(JH, {}), ky("canvas", { ref: t })] }) }) })); function QH(e) { var t = e.children, n = h.exports.useRef(null), r = ZH({ onPinch: function (e) { if (!XO().zoom.allowUserZoom || !eW(e)) return e.cancel(); 1 === e.direction[0] ? XO().zoom.zoomIn(.01) : XO().zoom.zoomOut(.01), e.event.stopPropagation(), e.event.preventDefault() }, onDrag: function (e) { if (e.pinching || !eW(e)) return e.cancel(); n.current.scrollLeft -= e.delta[0], n.current.scrollTop -= e.delta[1] } }); return ky("div", N(F({ ref: n, className: "flex items-center justify-center w-full h-full overflow-hidden touch-none" }, r()), { children: t })) } function eW(e) { return !(GO().findTarget(e.event, !1) || GO().isDrawingMode) } function tW(e) { var t = e.actionBtn, n = e.children, r = e.className; return Cy("div", { className: CT(r, "flex gap-16 items-center h-full"), children: [t && ky("div", { className: "flex-shrink-0", children: t }), ky("div", { className: "w-full flex-auto", children: n }), t && ky("div", { className: "w-96" })] }) } function nW() { return (nW = Object.assign || function (e) { for (var t = 1; t < arguments.length; t++) { var n = arguments[t]; for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]) } return e }).apply(this, arguments) } function rW(e, t) { if (null == e) return {}; var n, r, i = {}, o = Object.keys(e); for (r = 0; r < o.length; r++)t.indexOf(n = o[r]) >= 0 || (i[n] = e[n]); return i } function iW(e) { var t = h.exports.useRef(e), n = h.exports.useRef((function (e) { t.current && t.current(e) })); return t.current = e, n.current } var oW = function (e, t, n) { return void 0 === t && (t = 0), void 0 === n && (n = 1), e > n ? n : e < t ? t : e }, aW = function (e) { return "touches" in e }, sW = function (e) { return e && e.ownerDocument.defaultView || self }, lW = function (e, t, n) { var r = e.getBoundingClientRect(), i = aW(t) ? function (e, t) { for (var n = 0; n < e.length; n++)if (e[n].identifier === t) return e[n]; return e[0] }(t.touches, n) : t; return { left: oW((i.pageX - (r.left + sW(e).pageXOffset)) / r.width), top: oW((i.pageY - (r.top + sW(e).pageYOffset)) / r.height) } }, uW = function (e) { !aW(e) && e.preventDefault() }, cW = ce.memo((function (e) { var t = e.onMove, n = e.onKey, r = rW(e, ["onMove", "onKey"]), i = h.exports.useRef(null), o = iW(t), a = iW(n), s = h.exports.useRef(null), l = h.exports.useRef(!1), u = h.exports.useMemo((function () { var e = function (e) { uW(e), (aW(e) ? e.touches.length > 0 : e.buttons > 0) && i.current ? o(lW(i.current, e, s.current)) : n(!1) }, t = function () { return n(!1) }; function n(n) { var r = l.current, o = sW(i.current), a = n ? o.addEventListener : o.removeEventListener; a(r ? "touchmove" : "mousemove", e), a(r ? "touchend" : "mouseup", t) } return [function (e) { var t, r = e.nativeEvent, a = i.current; if (a && (uW(r), t = r, (!l.current || aW(t)) && a)) { if (aW(r)) { l.current = !0; var u = r.changedTouches || []; u.length && (s.current = u[0].identifier) } a.focus(), o(lW(a, r, s.current)), n(!0) } }, function (e) { var t = e.which || e.keyCode; t < 37 || t > 40 || (e.preventDefault(), a({ left: 39 === t ? .05 : 37 === t ? -.05 : 0, top: 40 === t ? .05 : 38 === t ? -.05 : 0 })) }, n] }), [a, o]), c = u[0], f = u[1], d = u[2]; return h.exports.useEffect((function () { return d }), [d]), ce.createElement("div", nW({}, r, { onTouchStart: c, onMouseDown: c, className: "react-colorful__interactive", ref: i, onKeyDown: f, tabIndex: 0, role: "slider" })) })), fW = function (e) { return e.filter(Boolean).join(" ") }, hW = function (e) { var t = e.color, n = e.left, r = e.top, i = void 0 === r ? .5 : r, o = fW(["react-colorful__pointer", e.className]); return ce.createElement("div", { className: o, style: { top: 100 * i + "%", left: 100 * n + "%" } }, ce.createElement("div", { className: "react-colorful__pointer-fill", style: { backgroundColor: t } })) }, dW = function (e, t, n) { return void 0 === t && (t = 0), void 0 === n && (n = Math.pow(10, t)), Math.round(n * e) / n }, pW = function (e) { return "#" === e[0] && (e = e.substr(1)), e.length < 6 ? { r: parseInt(e[0] + e[0], 16), g: parseInt(e[1] + e[1], 16), b: parseInt(e[2] + e[2], 16), a: 1 } : { r: parseInt(e.substr(0, 2), 16), g: parseInt(e.substr(2, 2), 16), b: parseInt(e.substr(4, 2), 16), a: 1 } }, vW = function (e) { var t = function (e) { var t = e.s, n = e.v, r = e.a, i = (200 - t) * n / 100; return { h: dW(e.h), s: dW(i > 0 && i < 200 ? t * n / 100 / (i <= 100 ? i : 200 - i) * 100 : 0), l: dW(i / 2), a: dW(r, 2) } }(e); return "hsl(" + t.h + ", " + t.s + "%, " + t.l + "%)" }, gW = function (e) { var t = e.toString(16); return t.length < 2 ? "0" + t : t }, mW = ce.memo((function (e) { var t = e.hue, n = e.onChange, r = fW(["react-colorful__hue", e.className]); return ce.createElement("div", { className: r }, ce.createElement(cW, { onMove: function (e) { n({ h: 360 * e.left }) }, onKey: function (e) { n({ h: oW(t + 360 * e.left, 0, 360) }) }, "aria-label": "Hue", "aria-valuetext": dW(t) }, ce.createElement(hW, { className: "react-colorful__hue-pointer", left: t / 360, color: vW({ h: t, s: 100, v: 100, a: 1 }) }))) })), yW = ce.memo((function (e) { var t = e.hsva, n = e.onChange, r = { backgroundColor: vW({ h: t.h, s: 100, v: 100, a: 1 }) }; return ce.createElement("div", { className: "react-colorful__saturation", style: r }, ce.createElement(cW, { onMove: function (e) { n({ s: 100 * e.left, v: 100 - 100 * e.top }) }, onKey: function (e) { n({ s: oW(t.s + 100 * e.left, 0, 100), v: oW(t.v - 100 * e.top, 0, 100) }) }, "aria-label": "Color", "aria-valuetext": "Saturation " + dW(t.s) + "%, Brightness " + dW(t.v) + "%" }, ce.createElement(hW, { className: "react-colorful__saturation-pointer", top: 1 - t.v / 100, left: t.s / 100, color: vW(t) }))) })), bW = function (e, t) { if (e === t) return !0; for (var n in e) if (e[n] !== t[n]) return !1; return !0 }, wW = "undefined" != typeof window ? h.exports.useLayoutEffect : h.exports.useEffect, xW = new Map, _W = function (e) { var t = e.className, r = e.colorModel, i = e.color, o = void 0 === i ? r.defaultColor : i, a = e.onChange, s = rW(e, ["className", "colorModel", "color", "onChange"]), l = h.exports.useRef(null); !function (e) { wW((function () { var t = e.current ? e.current.ownerDocument : document; if (void 0 !== t && !xW.has(t)) { var r = t.createElement("style"); r.innerHTML = '.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}', xW.set(t, r); var i = n.nc; i && r.setAttribute("nonce", i), t.head.appendChild(r) } }), []) }(l); var u = function (e, t, n) { var r = iW(n), i = h.exports.useState((function () { return e.toHsva(t) })), o = i[0], a = i[1], s = h.exports.useRef({ color: t, hsva: o }); h.exports.useEffect((function () { if (!e.equal(t, s.current.color)) { var n = e.toHsva(t); s.current = { hsva: n, color: t }, a(n) } }), [t, e]), h.exports.useEffect((function () { var t; bW(o, s.current.hsva) || e.equal(t = e.fromHsva(o), s.current.color) || (s.current = { hsva: o, color: t }, r(t)) }), [o, e, r]); var l = h.exports.useCallback((function (e) { a((function (t) { return Object.assign({}, t, e) })) }), []); return [o, l] }(r, o, a), c = u[0], f = u[1], d = fW(["react-colorful", t]); return ce.createElement("div", nW({}, s, { ref: l, className: d }), ce.createElement(yW, { hsva: c, onChange: f }), ce.createElement(mW, { hue: c.h, onChange: f, className: "react-colorful__last-control" })) }, SW = { defaultColor: "000", toHsva: function (e) { return function (e) { var t = e.r, n = e.g, r = e.b, i = e.a, o = Math.max(t, n, r), a = o - Math.min(t, n, r), s = a ? o === t ? (n - r) / a : o === n ? 2 + (r - t) / a : 4 + (t - n) / a : 0; return { h: dW(60 * (s < 0 ? s + 6 : s)), s: dW(o ? a / o * 100 : 0), v: dW(o / 255 * 100), a: i } }(pW(e)) }, fromHsva: function (e) { return n = (t = function (e) { var t = e.h, n = e.s, r = e.v, i = e.a; t = t / 360 * 6, n /= 100, r /= 100; var o = Math.floor(t), a = r * (1 - n), s = r * (1 - (t - o) * n), l = r * (1 - (1 - t + o) * n), u = o % 6; return { r: dW(255 * [r, s, a, a, l, r][u]), g: dW(255 * [l, r, r, s, a, a][u]), b: dW(255 * [a, a, l, r, r, s][u]), a: dW(i, 2) } }(e)).g, r = t.b, "#" + gW(t.r) + gW(n) + gW(r); var t, n, r }, equal: function (e, t) { return e.toLowerCase() === t.toLowerCase() || bW(pW(e), pW(t)) } }, kW = function (e) { return ce.createElement(_W, nW({}, e, { colorModel: SW })) }; function CW(e) { var t = e.onChange, n = e.selectedColor, r = e.colors.map((function (e) { var r = n === e; return ky(SD, { onPress: function () { null == t || t(e) }, className: CT("relative block flex-shrink-0 w-26 h-26 border rounded", r && "shadow-md"), style: { backgroundColor: e }, children: r && ky("span", { className: "absolute inset-0 m-auto rounded-full w-8 h-8 bg-white" }) }, e) })); return ky("div", { className: "flex gap-6 p-12", children: r }) } function TW(e) { var t = e.onChange, n = e.selectedColor, r = e.colorPresets; return Cy("div", { className: "bg-paper rounded shadow-md", children: [ky(kW, { className: "!w-auto", onChange: t }), r && ky(CW, { colors: r, onChange: t, selectedColor: n })] }) } var EW = ce.createContext(null); function OW(e) { var t = e.state, n = e.triggerProps, r = e.type, i = e.isDismissable, o = e.overlay, a = e.overlayProps, s = void 0 === a ? {} : a, l = e.trigger, u = e.disableInitialTransition, c = F({ type: r, onClose: t.close, isDismissable: i, disableInitialTransition: u }, s); return Cy(Ty, { children: [l && ce.cloneElement(l, GT({ onPress: function () { return t.toggle() }, key: l.key || l.props.id }, n)), ky(vC, { children: t.isOpen && ky(EW.Provider, { value: c, children: o }) })] }) } function PW(e) { var t = e, n = t.state, r = (t.targetRef, t.trigger), i = t.hideArrow, o = t.children, a = Xz(z(t, ["state", "targetRef", "trigger", "hideArrow", "children"])), s = a.triggerRef, l = a.overlayRef, u = a.positionStyle, c = Wj({ type: "dialog" }, n, a.triggerObjRef), f = c.triggerProps, h = c.overlayProps, d = ky(HN, { style: u, isOpen: n.isOpen, ref: l, onClose: n.close, hideArrow: i, children: o }); return ky(OW, { type: "popover", state: n, triggerProps: N(F({}, f), { ref: s }), overlayProps: h, overlay: d, trigger: r }) } function MW(e) { var t = e, n = t.children, r = t.onClose, i = t.type, o = t.isOpen, a = (t.isDismissable, z(t, ["children", "onClose", "type", "isOpen", "isDismissable"])), s = h.exports.useRef(null), l = h.exports.useContext(EW).disableInitialTransition, u = Hj(e, s), c = u.overlayProps, f = u.underlayProps; return Cy(UN, N(F({ type: "modal" }, a), { className: "absolute inset-0 flex items-center justify-center", children: [ky(XN, F({ disableInitialTransition: l }, f), "modal-underlay"), ky(AW, { onClose: r, isOpen: o, type: i, ref: s, overlayProps: c, children: n }, "modal-wrapper")] })) } var AW = h.exports.forwardRef((function (e, t) { var n = e, r = n.children, i = (n.isOpen, n.type, n.overlayProps), o = z(n, ["children", "isOpen", "type", "overlayProps"]), a = h.exports.useContext(EW).disableInitialTransition; Xj(); var s = VF().modalProps, l = { opacity: 1, scale: 1 }; return ky(uC.div, { className: "z-20", initial: a ? l : { opacity: 0, scale: .7 }, animate: l, exit: { opacity: 0, scale: 1 }, children: ky("div", N(F({}, GT(o, i, s)), { ref: t, children: r })) }) })); function DW(e) { var t = e.state, n = e.trigger, r = e.children, i = e.type, o = e.isDismissable, a = e.disableInitialTransition, s = h.exports.useRef(null); return ky(OW, { type: i, state: t, disableInitialTransition: a, triggerProps: { ref: s }, isDismissable: o, overlay: "tray" === i ? ky(GN, { isOpen: t.isOpen, onClose: t.close, children: r }) : ky(MW, { isOpen: t.isOpen, isDismissable: o, onClose: t.close, type: i, children: r }), trigger: n }) } function LW() { return function (e) { var t = "undefined" != typeof window && "function" == typeof window.matchMedia, n = _(h.exports.useState((function () { return !!t && window.matchMedia(e).matches })), 2), r = n[0], i = n[1]; return h.exports.useEffect((function () { if (t) { var n = window.matchMedia(e), r = function (e) { i(e.matches) }; return n.addEventListener("change", r), function () { n.removeEventListener("change", r) } } }), [t, e]), !LT() && r }("(max-width: 700px)") } function RW(e) { var t = e.type, n = void 0 === t ? "modal" : t, r = e.isDismissable, i = void 0 === r || r, o = e.mobileType, a = void 0 === o ? "popover" === n ? "modal" : n : o, s = e.children, l = e.hideArrow, u = e.targetRef, c = e.disableInitialTransition, f = e.onClose; LW() && ("modal" !== n && "modal" === a && (i = !0), n = a); var h = zD(N(F({}, e), { onOpenChange: function (e) { !e && f && f() } })), d = function (e, t) { if (Array.isArray(e)) { var n = _(e, 2), r = n[0], i = n[1]; return { trigger: "function" == typeof r ? r(t) : r, content: "function" == typeof i ? i(t) : i } } return { content: e } }(s, h), p = d.trigger, v = d.content; return "popover" === n ? ky(PW, { state: h, targetRef: u, trigger: p, hideArrow: l, children: v }) : ky(DW, { state: h, trigger: p, type: n, isDismissable: i, disableInitialTransition: c, children: v }) } function IW(e, t) { var n = e.role, r = void 0 === n ? "dialog" : n, i = YT(); return i = e["aria-label"] ? void 0 : i, h.exports.useEffect((function () { if (t.current && !t.current.contains(document.activeElement)) { GA(t.current); var e = setTimeout((function () { document.activeElement === t.current && (t.current.blur(), GA(t.current)) }), 500); return function () { clearTimeout(e) } } }), [t]), { dialogProps: N(F({}, $T(e, { labelable: !0 })), { role: r, tabIndex: -1, "aria-labelledby": e["aria-labelledby"] || i }), titleProps: { id: i } } } function jW(e) { var t = e.children, n = e.className, r = e.titleProps; return ky("h3", N(F({}, r), { className: n, children: t })) } function FW(e) { var t = h.exports.useContext(EW), n = t.type, r = void 0 === n ? "modal" : n, i = z(t, ["type"]), o = h.exports.useRef(null), a = IW(GT(i, e), o), s = a.dialogProps, l = a.titleProps, u = e.children, c = e.className, f = null; ("popover" === r || "tray" === r) && (f = ky(UF, { onDismiss: i.onClose })); var d = !1, p = ce.Children.map(u, (function (e) { return ce.isValidElement(e) && e.type === jW ? (d = !0, ce.cloneElement(e, N(F({}, e.props), { titleProps: l }))) : e })), v = CT("bg-paper rounded shadow-lg max-h-inherit max-w-full focus:outline-none", c); return ky(QA, { contain: !0, restoreFocus: !0, children: Cy("section", N(F({}, s), { className: v, ref: o, children: [i.isDismissable && d && ky(lB, { "aria-label": "Dismiss", onPress: i.onClose, children: ky(SB, {}) }), p, f] })) }) } function NW(e) { var t = e.label, n = e.className, r = e.value, i = e.onChange, o = e.size, a = lw((function (e) { var t, n; return null == (n = null == (t = e.config.ui) ? void 0 : t.colorPresets) ? void 0 : n.items })) || [], s = hU({ size: o }), l = _(h.exports.useState(r), 2), u = l[0], c = l[1], f = AB(F({ labelElementType: "span" }, e)), d = f.labelProps, p = f.fieldProps; return Cy("div", { className: n, children: [t && ky("span", N(F({ className: s.label }, d), { children: t })), Cy(RW, { type: "popover", hideArrow: !0, children: [function (e) { return Cy(SD, N(F({ className: CT(s.input, "inline-flex items-center") }, p), { children: [ky("span", { className: "block flex-shrink-0 mr-5 border rounded h-2/4 aspect-square", style: { backgroundColor: u } }), ky(zW, { isActive: e.isOpen, className: s.adornment })] })) }, ky(FW, { children: ky(TW, { onChange: function (e) { c(e), null == i || i(e) }, selectedColor: u, colorPresets: a }) })] })] }) } function zW(e) { var t = e.isActive, n = e.className; return ky(vU, { className: "transition-transform ml-auto flex-shrink-0 ".concat(t ? "rotate-180" : "rotate-0", " ").concat(n) }) } function BW(e) { var t, n = e.isDisabled, r = e.minValue, i = void 0 === r ? 0 : r, o = e.maxValue, a = void 0 === o ? 100 : o, s = e.numberFormatter, l = e.step, u = void 0 === l ? 1 : l, c = _(IT(e.value, null !== (t = e.defaultValue) && void 0 !== t ? t : [i], e.onChange), 2), f = c[0], d = c[1], p = _(h.exports.useState(new Array(f.length).fill(!1)), 2), v = p[0], g = p[1], m = h.exports.useRef(new Array(f.length).fill(!0)), y = _(h.exports.useState(void 0), 2), b = y[0], w = y[1], x = h.exports.useRef(null); x.current = f; var S = h.exports.useRef(null); function k(e) { return (e - i) / (a - i) } function C(e) { return 0 === e ? i : f[e - 1] } function T(e) { return e === f.length - 1 ? a : f[e + 1] } function E(e) { return m.current[e] } function O(e, t) { !n && E(e) && (t = NT(t, C(e), T(e), u), x.current = VW(x.current, e, t), d(x.current)) } function P(e) { return s.format(e) } function M(e) { return FT(function (e) { return Math.round((e - i) / u) * u + i }(e * (a - i) + i), i, a) } return S.current = v, { values: f, getThumbValue: function (e) { return f[e] }, setThumbValue: O, setThumbPercent: function (e, t) { O(e, M(t)) }, isThumbDragging: function (e) { return v[e] }, setThumbDragging: function (t, r) { if (!n && E(t)) { var i = S.current[t]; S.current = VW(S.current, t, r), g(S.current), e.onChangeEnd && i && !S.current.some(Boolean) && e.onChangeEnd(x.current) } }, focusedThumb: b, setFocusedThumb: w, getThumbPercent: function (e) { return k(f[e]) }, getValuePercent: k, getThumbValueLabel: function (e) { return P(f[e]) }, getFormattedValue: P, getThumbMinValue: C, getThumbMaxValue: T, getPercentValue: M, isThumbEditable: E, setThumbEditable: function (e, t) { m.current[e] = t }, step: u } } function VW(e, t, n) { return e[t] === n ? e : [].concat(S(e.slice(0, t)), [n], S(e.slice(t + 1))) } function UW(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } Object.defineProperty({}, "useDialog", { get: function () { return IW }, set: void 0, enumerable: !0, configurable: !0 }), Object.defineProperty({}, "useSliderState", { get: function () { return BW }, set: void 0, enumerable: !0, configurable: !0 }), UW({}, "useSlider", (function () { return KW })); var HW = new WeakMap; function WW(e, t) { var n = HW.get(e); if (!n) throw new Error("Unknown slider state"); return "".concat(n, "-").concat(t) } function KW(e, t, n) { var r, i = MB(e), o = i.labelProps, a = i.fieldProps, s = "vertical" === e.orientation; HW.set(t, null !== (r = o.id) && void 0 !== r ? r : a.id); var l = MI().direction, u = uE(), c = u.addGlobalListener, f = u.removeGlobalListener, d = h.exports.useRef(null), p = h.exports.useRef(null); p.current = t; var v = "rtl" === l, g = h.exports.useRef(null), m = RO({ onMoveStart: function () { g.current = null }, onMove: function (e) { var t = e.deltaX, r = e.deltaY, i = s ? n.current.offsetHeight : n.current.offsetWidth; null == g.current && (g.current = p.current.getThumbPercent(d.current) * i); var o = s ? r : t; if ((s || v) && (o = -o), g.current += o, null != d.current && n.current) { var a = FT(g.current / i, 0, 1); p.current.setThumbPercent(d.current, a) } }, onMoveEnd: function () { null != d.current && (p.current.setThumbDragging(d.current, !1), d.current = null) } }).moveProps, y = h.exports.useRef(void 0), b = function (r, i, o, a) { if (n.current && !e.isDisabled && t.values.every((function (e, n) { return !t.isThumbDragging(n) }))) { var u = s ? n.current.offsetHeight : n.current.offsetWidth, f = n.current.getBoundingClientRect()[s ? "top" : "left"], h = ((s ? a : o) - f) / u; ("rtl" === l || s) && (h = 1 - h); var p, v = t.getPercentValue(h), g = t.values.findIndex((function (e) { return v - e < 0 })); if (0 === g) p = g; else if (-1 === g) p = t.values.length - 1; else { var m = t.values[g - 1], b = t.values[g]; p = Math.abs(m - v) < Math.abs(b - v) ? g - 1 : g } p >= 0 && t.isThumbEditable(p) ? (r.preventDefault(), d.current = p, t.setFocusedThumb(p), y.current = i, t.setThumbDragging(d.current, !0), t.setThumbValue(p, v), c(window, "mouseup", w, !1), c(window, "touchend", w, !1), c(window, "pointerup", w, !1)) : d.current = null } }, w = function e(n) { var r, i; (null !== (i = n.pointerId) && void 0 !== i ? i : null === (r = n.changedTouches) || void 0 === r ? void 0 : r[0].identifier) === y.current && (null != d.current && (t.setThumbDragging(d.current, !1), d.current = null), f(window, "mouseup", e, !1), f(window, "touchend", e, !1), f(window, "pointerup", e, !1)) }; return o.htmlFor && (delete o.htmlFor, o.onClick = function () { var e; null === (e = document.getElementById(WW(t, 0))) || void 0 === e || e.focus(), bO("keyboard") }), { labelProps: o, groupProps: F({ role: "group" }, a), trackProps: GT({ onMouseDown: function (e) { 0 !== e.button || e.altKey || e.ctrlKey || e.metaKey || b(e, void 0, e.clientX, e.clientY) }, onPointerDown: function (e) { "mouse" === e.pointerType && (0 !== e.button || e.altKey || e.ctrlKey || e.metaKey) || b(e, e.pointerId, e.clientX, e.clientY) }, onTouchStart: function (e) { b(e, e.changedTouches[0].identifier, e.changedTouches[0].clientX, e.changedTouches[0].clientY) } }, m), outputProps: { htmlFor: t.values.map((function (e, n) { return WW(t, n) })).join(" "), "aria-live": "off" } } } function YW(e, t) { var n, r = e.index, i = e.isRequired, o = e.isDisabled, a = e.validationState, s = e.trackRef, l = e.inputRef, u = "vertical" === e.orientation, c = MI().direction, f = uE(), d = f.addGlobalListener, p = f.removeGlobalListener, v = HW.get(t), g = MB(N(F({}, e), { id: WW(t, r), "aria-labelledby": "".concat(v, " ").concat(null !== (n = e["aria-labelledby"]) && void 0 !== n ? n : "").trim() })), m = g.labelProps, y = g.fieldProps, b = t.values[r], w = h.exports.useCallback((function () { l.current && QT(l.current) }), [l]), x = t.focusedThumb === r; h.exports.useEffect((function () { x && w() }), [x, w]); var _ = h.exports.useRef(null); _.current = t; var S = "rtl" === c, k = h.exports.useRef(null), C = RO({ onMoveStart: function () { k.current = null, t.setThumbDragging(r, !0) }, onMove: function (e) { var t = e.deltaX, n = e.deltaY, i = e.pointerType, o = u ? s.current.offsetHeight : s.current.offsetWidth; if (null == k.current && (k.current = _.current.getThumbPercent(r) * o), "keyboard" === i) { var a = ((S ? -t : t) + -n) * _.current.step; k.current += a * o, _.current.setThumbValue(r, _.current.getThumbValue(r) + a) } else { var l = u ? n : t; (u || S) && (l = -l), k.current += l, _.current.setThumbPercent(r, FT(k.current / o, 0, 1)) } }, onMoveEnd: function () { t.setThumbDragging(r, !1) } }).moveProps; t.setThumbEditable(r, !o); var T = yD(GT(e, { onFocus: function () { return t.setFocusedThumb(r) }, onBlur: function () { return t.setFocusedThumb(void 0) } }), l).focusableProps, E = h.exports.useRef(void 0), O = function (e) { w(), E.current = e, t.setThumbDragging(r, !0), d(window, "mouseup", P, !1), d(window, "touchend", P, !1), d(window, "pointerup", P, !1) }, P = function e(n) { var i, o; (null !== (o = n.pointerId) && void 0 !== o ? o : null === (i = n.changedTouches) || void 0 === i ? void 0 : i[0].identifier) === E.current && (w(), t.setThumbDragging(r, !1), p(window, "mouseup", e, !1), p(window, "touchend", e, !1), p(window, "pointerup", e, !1)) }; return { inputProps: GT(T, y, { type: "range", tabIndex: o ? void 0 : 0, min: t.getThumbMinValue(r), max: t.getThumbMaxValue(r), step: t.step, value: b, disabled: o, "aria-orientation": e.orientation, "aria-valuetext": t.getThumbValueLabel(r), "aria-required": i || void 0, "aria-invalid": "invalid" === a || void 0, "aria-errormessage": e["aria-errormessage"], onChange: function (e) { t.setThumbValue(r, parseFloat(e.target.value)) } }), thumbProps: o ? {} : GT(C, { onMouseDown: function (e) { 0 !== e.button || e.altKey || e.ctrlKey || e.metaKey || O() }, onPointerDown: function (e) { 0 !== e.button || e.altKey || e.ctrlKey || e.metaKey || O(e.pointerId) }, onTouchStart: function (e) { O(e.changedTouches[0].identifier) } }), labelProps: m } } function XW(e) { var t = e, n = t.size, r = void 0 === n ? "md" : n, i = t.onChange, o = t.onChangeEnd, a = t.value, s = t.defaultValue, l = t.formatOptions, u = t.inline, c = t.label, f = t.getValueLabel, d = t.showValueLabel, p = void 0 === d ? !!c : d, v = t.className, g = t.isDisabled, m = z(t, ["size", "onChange", "onChangeEnd", "value", "defaultValue", "formatOptions", "inline", "label", "getValueLabel", "showValueLabel", "className", "isDisabled"]), y = RI(l), b = hU({ size: r }), w = h.exports.useRef(null), x = N(F({}, m), { isDisabled: g, label: c, numberFormatter: y, value: null != a ? [a] : void 0, defaultValue: null != s ? [s] : void 0, onChange: function (e) { return null == i ? void 0 : i(e[0]) }, onChangeEnd: function (e) { return null == o ? void 0 : o(e[0]) } }), _ = BW(x), S = KW(x, _, w), k = S.groupProps, C = S.trackProps, T = S.labelProps, E = S.outputProps, O = CT("w-full flex-shrink-0 touch-none", v, { "flex items-center": u }); return Cy("div", N(F({}, k), { className: O, children: [Cy("div", { className: "flex", children: [c && ky("label", N(F({ className: b.label }, T), { children: c })), p && ky("output", N(F({}, E), { className: CT(b.label, "ml-auto"), children: f ? f(_.values[0]) : _.getThumbValueLabel(0) }))] }), Cy("div", N(F({}, C), { ref: w, className: "h-30 relative", children: [ky("div", { className: "absolute inset-0 m-auto h-4 rounded ".concat(g ? "bg-disabled" : "bg-primary-light") }), ky("div", { className: "absolute inset-0 my-auto h-4 rounded ".concat(g ? "bg-disabled-fg" : "bg-primary"), style: { width: "".concat(100 * _.getThumbPercent(0), "%") } }), ky(GW, { index: 0, state: _, trackRef: w, isDisabled: g })] }))] })) } function GW(e) { var t, n = e.state, r = e.trackRef, i = e.index, o = e.isDisabled, a = h.exports.useRef(null), s = YW({ index: i, trackRef: r, inputRef: a }, n), l = s.thumbProps, u = s.inputProps, c = n.isThumbDragging(i), f = dD(), d = f.focusProps, p = f.isFocusVisible, v = PO(N(F({}, e), { isDisabled: o })), g = v.hoverProps, m = CT("rounded-full w-20 h-20 top-1/2 -translate-y-1/2 -translate-x-1/2 absolute inset-0 transition-colors duration-200", { "outline outline-offset-2": p && !o, "shadow-md": !o }, (t = { isDisabled: o, isHovered: v.isHovered, isDragging: c }).isDisabled ? "bg-slider-disabled cursor-default" : t.isDragging ? "bg-primary-dark ring ring-primary-light ring-inset" : t.isHovered ? "bg-primary-dark" : "bg-primary"); return ky("div", N(F({}, GT(l, g)), { className: m, style: { left: "".concat(Math.max(100 * n.getThumbPercent(i), 0), "%") }, children: ky(VO, { children: ky("input", F({ ref: a }, GT(u, d))) }) })) } function qW(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } UW({}, "useSliderThumb", (function () { return YW })), qW({}, "useListState", (function () { return $W })), qW({}, "ListCollection", (function () { return ZW })); var JW = Symbol.iterator, ZW = function () { function e(t) { var n = this; g(this, e), this.keyMap = new Map, this.iterable = t; var r, i = function e(t) { if (n.keyMap.set(t.key, t), t.childNodes && "section" === t.type) { var r, i = T(t.childNodes); try { for (i.s(); !(r = i.n()).done;)e(r.value) } catch (e) { i.e(e) } finally { i.f() } } }, o = T(t); try { for (o.s(); !(r = o.n()).done;)i(r.value) } catch (e) { o.e(e) } finally { o.f() } var a, s, l = 0, u = T(this.keyMap); try { for (u.s(); !(s = u.n()).done;) { var c = _(s.value, 2), f = c[0], h = c[1]; a ? (a.nextKey = f, h.prevKey = a.key) : (this.firstKey = f, h.prevKey = void 0), "item" === h.type && (h.index = l++), (a = h).nextKey = void 0 } } catch (e) { u.e(e) } finally { u.f() } this.lastKey = null == a ? void 0 : a.key } return y(e, [{ key: JW, value: b().mark((function e() { return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.delegateYield(this.iterable, "t0", 1); case 1: case "end": return e.stop() } }), e, this) })) }, { key: "size", get: function () { return this.keyMap.size } }, { key: "getKeys", value: function () { return this.keyMap.keys() } }, { key: "getKeyBefore", value: function (e) { var t = this.keyMap.get(e); return t ? t.prevKey : null } }, { key: "getKeyAfter", value: function (e) { var t = this.keyMap.get(e); return t ? t.nextKey : null } }, { key: "getFirstKey", value: function () { return this.firstKey } }, { key: "getLastKey", value: function () { return this.lastKey } }, { key: "getItem", value: function (e) { return this.keyMap.get(e) } }, { key: "at", value: function (e) { var t = S(this.getKeys()); return this.getItem(t[e]) } }]), e }(); function $W(e) { var t = e.filter, n = Zz(e), r = h.exports.useMemo((function () { return e.disabledKeys ? new Set(e.disabledKeys) : new Set }), [e.disabledKeys]), i = h.exports.useMemo((function () { return { suppressTextValueWarning: e.suppressTextValueWarning } }), [e.suppressTextValueWarning]), o = jD(e, (function (e) { return new ZW(t ? t(e) : e) }), i, [t]); return h.exports.useEffect((function () { null != n.focusedKey && !o.getItem(n.focusedKey) && n.setFocusedKey(null) }), [o, n.focusedKey]), { collection: o, disabledKeys: r, selectionManager: new Qz(o, n) } } function QW(e) { var t, n = _(IT(e.selectedKey, null !== (t = e.defaultSelectedKey) && void 0 !== t ? t : null, e.onSelectionChange), 2), r = n[0], i = n[1], o = h.exports.useMemo((function () { return null != r ? [r] : [] }), [r]), a = $W(N(F({}, e), { selectionMode: "single", disallowEmptySelection: !0, allowDuplicateSelectionEvents: !0, selectedKeys: o, onSelectionChange: function (t) { var n = t.values().next().value; n === r && e.onSelectionChange && e.onSelectionChange(n), i(n) } })), s = a.collection, l = a.disabledKeys, u = a.selectionManager, c = null != r ? s.getItem(r) : null; return { collection: s, disabledKeys: l, selectionManager: u, selectedKey: r, setSelectedKey: i, selectedItem: c } } function eK(e) { var t = BD(e), n = QW(N(F({}, e), { onSelectionChange: function (n) { null != e.onSelectionChange && e.onSelectionChange(n), t.close() } })), r = _(h.exports.useState(!1), 2), i = r[0], o = r[1]; return N(F(F({}, n), t), { open: function () { 0 !== n.collection.size && t.open() }, toggle: function (e) { 0 !== n.collection.size && t.toggle(e) }, isFocused: i, setFocused: o }) } function tK(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } function nK(e, t, n) { var r = e.keyboardDelegate, i = e.isDisabled, o = jI({ usage: "search", sensitivity: "base" }), a = h.exports.useMemo((function () { return r || new DN(t.collection, t.disabledKeys, null, o) }), [r, t.collection, t.disabledKeys, o]), s = IN({ isDisabled: i, type: "listbox" }, t, n), l = s.menuTriggerProps, u = s.menuProps, c = GF({ keyboardDelegate: a, selectionManager: t.selectionManager, onTypeSelect: function (e) { t.setSelectedKey(e) } }).typeSelectProps, f = AB(N(F({}, e), { labelElementType: "span" })), d = f.labelProps, p = f.fieldProps, v = f.descriptionProps, g = f.errorMessageProps; c.onKeyDown = c.onKeyDownCapture, delete c.onKeyDownCapture; var m = $T(e, { labelable: !0 }), y = GT(c, l, p), b = WT(); return { labelProps: N(F({}, d), { onClick: function () { e.isDisabled || (n.current.focus(), bO("keyboard")) } }), triggerProps: GT(m, N(F({}, y), { onKeyDown: XT(y.onKeyDown, (function (e) { switch (e.key) { case "ArrowLeft": e.preventDefault(); var n = null != t.selectedKey ? a.getKeyAbove(t.selectedKey) : a.getFirstKey(); n && t.setSelectedKey(n); break; case "ArrowRight": e.preventDefault(); var r = null != t.selectedKey ? a.getKeyBelow(t.selectedKey) : a.getFirstKey(); r && t.setSelectedKey(r) } }), e.onKeyDown), onKeyUp: e.onKeyUp, "aria-labelledby": [y["aria-labelledby"], y["aria-label"] && !y["aria-labelledby"] ? y.id : null, b].filter(Boolean).join(" "), onFocus: function (n) { t.isFocused || (e.onFocus && e.onFocus(n), t.setFocused(!0)) }, onBlur: function (n) { t.isOpen || (e.onBlur && e.onBlur(n), t.setFocused(!1)) } })), valueProps: { id: b }, menuProps: N(F({}, u), { autoFocus: t.focusStrategy || !0, shouldSelectOnPressUp: !0, shouldFocusOnHover: !0, disallowEmptySelection: !0, onBlur: function (n) { n.currentTarget.contains(n.relatedTarget) || (e.onBlur && e.onBlur(n), t.setFocused(!1)) }, "aria-labelledby": [p["aria-labelledby"], y["aria-label"] && !p["aria-labelledby"] ? y.id : null].filter(Boolean).join(" ") }), descriptionProps: v, errorMessageProps: g } } qW({}, "useSingleSelectListState", (function () { return QW })), Object.defineProperty({}, "useSelectState", { get: function () { return eK }, set: void 0, enumerable: !0, configurable: !0 }), tK({}, "useSelect", (function () { return nK })); var rK = {}; function iK(e, t, n) { var r, i = e.autoComplete, o = e.name, a = e.isDisabled, s = wO(), l = BO().visuallyHiddenProps; return { containerProps: N(F({}, l), { "aria-hidden": !0 }), inputProps: { type: "text", tabIndex: null == s || t.isFocused || t.isOpen ? -1 : 0, style: { fontSize: 16 }, onFocus: function () { return n.current.focus() }, disabled: a }, selectProps: { tabIndex: -1, autoComplete: i, disabled: a, name: o, size: t.collection.size, value: null !== (r = t.selectedKey) && void 0 !== r ? r : "", onChange: function (e) { return t.setSelectedKey(e.target.value) } } } } function oK(e) { var t = e.state, n = e.triggerRef, r = e.label, i = e.name, o = e.isDisabled, a = iK(e, t, n), s = a.containerProps, l = a.inputProps, u = a.selectProps; return t.collection.size <= 300 ? ce.createElement("div", s, ce.createElement("input", l), ce.createElement("label", null, r, ce.createElement("select", u, ce.createElement("option", null), S(t.collection.getKeys()).map((function (e) { var n = t.collection.getItem(e); if ("item" === n.type) return ce.createElement("option", { key: n.key, value: n.key }, n.textValue) }))))) : i ? ce.createElement("input", { type: "hidden", autoComplete: u.autoComplete, name: i, disabled: o, value: t.selectedKey }) : null } function aK(e) { var t = e.children, n = e.direction; return t ? ky("div", { className: "absolute h-full flex items-center ".concat("start" === n ? "left-12" : "right-12", " top-0"), children: t }) : null } function sK(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } tK(rK, "useHiddenSelect", (function () { return iK })), tK(rK, "HiddenSelect", (function () { return oK })), sK({}, "useListBox", (function () { return fK })); var lK = {}; sK(lK, "listData", (function () { return uK })), sK(lK, "getItemId", (function () { return cK })); var uK = new WeakMap; function cK(e, t) { var n = uK.get(e); if (!n) throw new Error("Unknown list"); return "".concat(n.id, "-option-").concat(function (e) { return "string" == typeof e ? e.replace(/\s*/g, "") : "" + e }(t)) } function fK(e, t, n) { var r = $T(e, { labelable: !0 }), i = LN(N(F({}, e), { ref: n, selectionManager: t.selectionManager, collection: t.collection, disabledKeys: t.disabledKeys })).listProps, o = SO({ onFocusWithin: e.onFocus, onBlurWithin: e.onBlur, onFocusWithinChange: e.onFocusChange }).focusWithinProps, a = WT(e.id); uK.set(t, { id: a, shouldUseVirtualFocus: e.shouldUseVirtualFocus, shouldSelectOnPressUp: e.shouldSelectOnPressUp, shouldFocusOnHover: e.shouldFocusOnHover, isVirtualized: e.isVirtualized }); var s = MB(N(F({}, e), { id: a, labelElementType: "span" })), l = s.labelProps, u = s.fieldProps; return { labelProps: l, listBoxProps: GT(r, o, "multiple" === t.selectionManager.selectionMode ? { "aria-multiselectable": "true" } : {}, F({ role: "listbox" }, GT(u, i))) } } function hK(e, t, n) { var r, i, o, a, s, l, u = e.key, c = uK.get(t), f = null !== (r = e.isDisabled) && void 0 !== r ? r : t.disabledKeys.has(u), h = null !== (i = e.isSelected) && void 0 !== i ? i : t.selectionManager.isSelected(u), d = t.selectionManager.focusedKey === u, p = null !== (o = e.shouldSelectOnPressUp) && void 0 !== o ? o : c.shouldSelectOnPressUp, v = null !== (a = e.shouldFocusOnHover) && void 0 !== a ? a : c.shouldFocusOnHover, g = null !== (s = e.shouldUseVirtualFocus) && void 0 !== s ? s : c.shouldUseVirtualFocus, m = null !== (l = e.isVirtualized) && void 0 !== l ? l : c.isVirtualized, y = YT(), b = YT(), w = { role: "option", "aria-disabled": f, "aria-selected": "none" !== t.selectionManager.selectionMode ? h : void 0 }; TE() && AE() || (w["aria-label"] = e["aria-label"], w["aria-labelledby"] = y, w["aria-describedby"] = b), m && (w["aria-posinset"] = t.collection.getItem(u).index + 1, w["aria-setsize"] = ND(t.collection)); var x = JF({ selectionManager: t.selectionManager, key: u, ref: n, shouldSelectOnPressUp: p, isVirtualized: m, shouldUseVirtualFocus: g, isDisabled: f }), _ = x.itemProps, S = x.isPressed, k = PO({ isDisabled: f || !v, onHoverStart: function () { mO() || (t.selectionManager.setFocused(!0), t.selectionManager.setFocusedKey(u)) } }).hoverProps; return { optionProps: N(F(F({}, w), GT(_, k)), { id: cK(t, u) }), labelProps: { id: y }, descriptionProps: { id: b }, isFocused: d, isSelected: h, isDisabled: f, isPressed: S } } function dK(e) { var t = e.heading, n = e["aria-label"], r = WT(); return { itemProps: { role: "presentation" }, headingProps: t ? { id: r, "aria-hidden": !0 } : {}, groupProps: { role: "group", "aria-label": n, "aria-labelledby": t ? r : void 0 } } } function pK(e) { var t = e.item, n = e.state, r = h.exports.useRef(null), i = hK({ "aria-label": t["aria-label"], key: t.key }, n, r), o = i.optionProps, a = i.isDisabled, s = i.isSelected, l = i.isFocused, u = PO(N(F({}, e), { isDisabled: a })), c = u.hoverProps, f = u.isHovered, d = mO(), p = iB({ isFocused: l && d, isSelected: s, isDisabled: a, isHovered: f }); return ky("li", N(F({ className: p }, GT(o, c)), { ref: r, children: t.rendered })) } sK({}, "useOption", (function () { return hK })), sK({}, "useListBoxSection", (function () { return dK })); var vK = h.exports.forwardRef((function (e, t) { var n = e, r = n.className, i = n.style, o = z(n, ["className", "style"]), a = fE(t), s = o.state, l = fK(o, s, a).listBoxProps, u = rB(r); return ky("ul", N(F({ className: u, style: i }, l), { ref: a, children: S(s.collection).map((function (e) { return ky(pK, { item: e, state: s }, e.key) })) })) })); function gK(e) { var t, n, r = F({}, e), i = r.label, o = r.name, a = r.value, s = r.onChange, l = r.isDisabled, u = r.autoComplete, c = r.shouldFlip, f = hU(N(F({}, e), { endAdornment: !0 })), d = eK(N(F({}, e), { onSelectionChange: s, selectedKey: a })), p = h.exports.useRef(null), v = Xz({ shouldFlip: c }), g = v.triggerRef, m = v.overlayRef, y = v.positionStyle, b = v.triggerObjRef, w = nK(e, d, b), x = w.labelProps, S = w.triggerProps, k = w.valueProps, C = w.menuProps, T = (w.descriptionProps, w.errorMessageProps, zN()), E = wD(S, b).buttonProps, O = Cy(QA, { restoreFocus: !0, contain: T, children: [ky(UF, { onDismiss: function () { return d.close() } }), ky(vK, N(F({}, C), { ref: p, state: d, disallowEmptySelection: !0, autoFocus: d.focusStrategy || !0, shouldSelectOnPressUp: !0 })), ky(UF, { onDismiss: function () { return d.close() } })] }), P = _(h.exports.useState(null), 2), M = P[0], A = P[1], D = h.exports.useCallback((function () { if (!T && b.current) { var e = b.current.offsetWidth; A(e) } }), [A, T, b]); return dE({ ref: b, onResize: D }), UT(D, [d.selectedKey, D]), n = T ? ky(GN, { isOpen: d.isOpen, onClose: d.close, children: O }) : ky(HN, { isOpen: d.isOpen, ref: m, hideArrow: !0, onClose: d.close, shouldCloseOnBlur: !0, style: N(F({}, y), { width: "".concat(M, "px") }), children: O }), Cy("div", { className: f.wrapper, children: [ky("div", N(F({}, x), { className: f.label, children: i })), ky(oK, { state: d, autoComplete: u, isDisabled: l, triggerRef: b, label: i, name: o }), Cy("button", N(F({ type: "button", className: f.input, disabled: l }, E), { ref: g, children: [ky("span", N(F({}, k), { children: null == (t = d.selectedItem) ? void 0 : t.rendered })), ky(aK, { direction: "end", children: ky(vU, { className: "text-muted" }) })] })), ky(vC, { children: d.isOpen && n })] }) } function mK() { var e = lw((function (e) { return e.filter.selected })); if (!e) return null; var t = XO().filter.getByName(e).options, n = function (t, n) { var r; null == (r = XO().filter) || r.applyValue(e, t, n), YO().setDirty(!0) }, r = XO().canvas.getMainImage().filters, i = XO().filter.findFilterIndex(e, r), o = null == r ? void 0 : r[i]; if (t) { var a = Object.entries(t).map((function (e) { var t, r = _(e, 2), i = r[0], a = r[1], s = o ? o[i] : a.current; return "slider" === a.type ? t = ky(XW, { label: ky(ay, F({}, xP[i])), minValue: a.min, maxValue: a.max, step: a.step, defaultValue: s, formatOptions: { style: "percent" }, size: "sm", onChange: function (e) { n(i, e) } }) : "colorPicker" === a.type ? t = ky(NW, { label: ky(ay, F({}, xP[i])), size: "sm", className: "w-full", defaultValue: s, onChange: function (e) { n(i, e) } }) : "select" === a.type && (t = ky(gK, { size: "sm", label: ky(ay, F({}, xP[i])), defaultValue: s, onChange: function (e) { n(i, e) }, items: a.available, children: function (e) { return ky(PD, { textValue: e.key, children: ky("span", { className: "capitalize", children: e.key }) }) } })), ky("div", { className: "pb-10", children: t }, i) })); return ky(tW, { children: ky("div", { className: "max-w-240 pt-10 mx-auto", children: a }) }) } return null } function yK() { var e = lw((function (e) { return e.frame.active })), t = "basic" === (null == e ? void 0 : e.mode); return ky(tW, { className: "pb-18 pt-6", children: Cy("div", { className: "max-w-288 m-auto", children: [t && ky("div", { className: "mb-16", children: ky(NW, { size: "sm", label: ky(ay, { id: "uMhpKe", defaultMessage: [{ type: 0, value: "Color" }] }), value: XO().frame.builder.defaultColor, onChange: function (e) { XO().frame.active.changeColor(e) } }) }), ky(XW, { size: "sm", label: ky(ay, { id: "agOXPD", defaultMessage: [{ type: 0, value: "Size" }] }), step: 1, minValue: XO().frame.active.getMinSize(), maxValue: XO().frame.active.getMaxSize(), defaultValue: XO().frame.active.currentSizeInPercent, getValueLabel: function (e) { return "".concat(e, "%") }, onChange: function (e) { XO().frame.resize(e) } })] }) }) } function bK(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } bK({}, "useTab", (function () { return _K })); var wK = new WeakMap; function xK(e, t, n) { return "string" == typeof t && (t = t.replace(/\s+/g, "")), "".concat(wK.get(e), "-").concat(n, "-").concat(t) } function _K(e, t, n) { var r = e.key, i = e.isDisabled, o = t.selectionManager, a = r === t.selectedKey, s = i || t.disabledKeys.has(r), l = JF({ selectionManager: o, key: r, ref: n, isDisabled: s }).itemProps, u = xK(t, r, "tab"), c = xK(t, r, "tabpanel"), f = l.tabIndex; return { tabProps: N(F({}, l), { id: u, "aria-selected": a, "aria-disabled": s || void 0, "aria-controls": a ? c : void 0, tabIndex: s ? void 0 : f, role: "tab" }) } } function SK(e, t, n) { var r = _(h.exports.useState(0), 2), i = r[0], o = r[1]; UT((function () { if (null == n ? void 0 : n.current) { var e = function () { var e = cD(n.current, { tabbable: !0 }); o(e.nextNode() ? void 0 : 0) }; e(); var t = new MutationObserver(e); return t.observe(n.current, { subtree: !0, childList: !0, attributes: !0, attributeFilter: ["tabIndex", "disabled"] }), function () { t.disconnect() } } }), [n]); var a = xK(t, null == t ? void 0 : t.selectedKey, "tabpanel"); return { tabPanelProps: GT(cE(N(F({}, e), { id: a, "aria-labelledby": xK(t, null == t ? void 0 : t.selectedKey, "tab") })), { tabIndex: i, role: "tabpanel", "aria-describedby": e["aria-describedby"], "aria-details": e["aria-details"] }) } } bK({}, "useTabPanel", (function () { return SK })), bK({}, "useTabList", (function () { return CK })); var kK = function () { function e(t, n, r) { var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : new Set; g(this, e), this.collection = t, this.flipDirection = "rtl" === n && "horizontal" === r, this.orientation = r, this.disabledKeys = i } return y(e, [{ key: "getKeyLeftOf", value: function (e) { return this.flipDirection ? this.getNextKey(e) : "horizontal" === this.orientation ? this.getPreviousKey(e) : null } }, { key: "getKeyRightOf", value: function (e) { return this.flipDirection ? this.getPreviousKey(e) : "horizontal" === this.orientation ? this.getNextKey(e) : null } }, { key: "getKeyAbove", value: function (e) { return "vertical" === this.orientation ? this.getPreviousKey(e) : null } }, { key: "getKeyBelow", value: function (e) { return "vertical" === this.orientation ? this.getNextKey(e) : null } }, { key: "getFirstKey", value: function () { var e = this.collection.getFirstKey(); return this.disabledKeys.has(e) && (e = this.getNextKey(e)), e } }, { key: "getLastKey", value: function () { var e = this.collection.getLastKey(); return this.disabledKeys.has(e) && (e = this.getPreviousKey(e)), e } }, { key: "getNextKey", value: function (e) { do { null == (e = this.collection.getKeyAfter(e)) && (e = this.collection.getFirstKey()) } while (this.disabledKeys.has(e)); return e } }, { key: "getPreviousKey", value: function (e) { do { null == (e = this.collection.getKeyBefore(e)) && (e = this.collection.getLastKey()) } while (this.disabledKeys.has(e)); return e } }]), e }(); function CK(e, t, n) { var r = e.orientation, i = void 0 === r ? "horizontal" : r, o = e.keyboardActivation, a = void 0 === o ? "automatic" : o, s = t.collection, l = t.selectionManager, u = t.disabledKeys, c = MI().direction, f = qF({ ref: n, selectionManager: l, keyboardDelegate: h.exports.useMemo((function () { return new kK(s, c, i, u) }), [s, u, i, c]), selectOnFocus: "automatic" === a, disallowEmptySelection: !0, scrollRef: n }).collectionProps, d = WT(); wK.set(t, d); var p = cE(N(F({}, e), { id: d })); return { tabListProps: N(F({}, GT(f, p)), { role: "tablist", "aria-orientation": i, tabIndex: void 0 }) } } var TK = ce.createContext(null); function EK(e) { var t, n = h.exports.useContext(TK), r = e.item, i = e.state, o = e.className, a = r.key, s = r.rendered, l = i.disabledKeys.has(a), u = i.selectedKey === a, c = h.exports.useRef(null), f = _K({ key: a }, i, c).tabProps, d = PO(N(F({}, e), { isDisabled: l })), p = d.hoverProps, v = d.isHovered, g = n.tabProps.size, m = CT("tracking-wide overflow-hidden capitalize flex-shrink-0 flex items-center outline-none transition-colors", (t = { isDisabled: l, isHovered: v, isSelected: u }).isDisabled ? "text-disabled cursor-default" : t.isSelected ? "text-primary" : t.isHovered ? "text-main" : "text-muted", o, { "px-16 h-48": !g || "md" === g, "px-12 h-32": "sm" === g, "cursor-pointer": !l }); return ky(pD, { focusRingClass: "ring-2 ring-inset ring-primary-light rounded", children: ky("div", N(F({ className: m }, GT(f, p)), { ref: c, children: s })) }) } function OK(e) { var t = e.selectedTab, n = e.selectedKey, r = _(h.exports.useState({ width: void 0, transform: void 0 }), 2), i = r[0], o = r[1]; return UT((function () { t && o({ width: "".concat(t.offsetWidth, "px"), transform: "translateX(".concat(t.offsetLeft, "px)") }) }), [o, t, n]), ky("div", { className: "absolute bottom-0 left-0 h-2 bg-primary transition-all", role: "presentation", style: i }) } function PK(e) { var t = h.exports.useContext(TK), n = t.refs, r = t.tabState, i = t.tabProps, o = r.selectedTab, a = r.tabListState, s = n.tablistRef, l = CK(F(F({}, i), e), a, s).tabListProps; return Cy("div", N(F({ className: "flex relative max-w-full overflow-auto hide-scrollbar" }, l), { ref: s, children: [S(a.collection).map((function (e, t) { return ky(EK, { className: CT(0 === t && "ml-auto", t === a.collection.size - 1 && "mr-auto"), item: e, state: a }, e.key) })), ky(OK, { selectedTab: o })] })) } function MK(e) { var t = QW(N(F({}, e), { suppressTextValueWarning: !0 })); return h.exports.useEffect((function () { var e = t.selectedKey; (t.selectionManager.isEmpty || !t.collection.getItem(e)) && (e = t.collection.getFirstKey(), t.selectionManager.replaceSelection(e)), null == t.selectionManager.focusedKey && t.selectionManager.setFocusedKey(e) }), [t.selectionManager, t.selectedKey, t.collection]), t } function AK(e) { var t = e, n = t.size, r = void 0 === n ? "md" : n, i = t.children, o = t.className, a = z(t, ["size", "children", "className"]), s = h.exports.useRef(null), l = h.exports.useRef(null), u = _(h.exports.useState(null), 2), c = u[0], f = u[1], d = MK(N(F({}, e), { children: i[0].props.children })); return h.exports.useEffect((function () { if (l.current) { var e = l.current.querySelector('[data-key="'.concat(null == d ? void 0 : d.selectedKey, '"]')); null != e && f(e) } }), [i, null == d ? void 0 : d.selectedKey, l]), ky(TK.Provider, { value: { tabProps: N(F({}, e), { size: r }), tabState: { tabListState: d, selectedTab: c }, refs: { tablistRef: l } }, children: ky("div", N(F({ className: CT(o, "max-w-full overflow-hidden") }, $T(a)), { ref: s, children: i })) }) } Object.defineProperty({}, "useTabListState", { get: function () { return MK }, set: void 0, enumerable: !0, configurable: !0 }); var DK = Oy(ky("path", { d: "M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z" }), "FormatUnderlinedOutlined"), LK = Oy(ky("path", { d: "M10 19h4v-3h-4v3zM5 4v3h5v3h4V7h5V4H5zM3 14h18v-2H3v2z" }), "FormatStrikethroughOutlined"), RK = Oy(ky("path", { d: "M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4h-8z" }), "FormatItalicOutlined"), IK = Oy(ky("path", { d: "M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z" }), "FormatAlignRightOutlined"), jK = Oy(ky("path", { d: "M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z" }), "FormatAlignLeftOutlined"), FK = Oy(ky("path", { d: "M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z" }), "FormatAlignCenterOutlined"); function NK() { return Cy("div", { className: "flex gap-20 justify-center", children: [ky(zK, {}), ky(BK, {}), ky(VK, {})] }) } function zK() { var e, t = null != (e = lw((function (e) { return e.objects.active.editableProps.fontSize }))) ? e : 40, n = Zm().formatMessage; return ky(gU, { size: "xs", "aria-label": n({ id: "SqP3AR", defaultMessage: [{ type: 0, value: "Font Size" }] }), minValue: 1, maxValue: 300, className: "w-64 flex-shrink-0", value: t, onChange: function (e) { XO().objects.setValues({ fontSize: e }), YO().setDirty(!0) } }) } function BK() { var e = lw((function (e) { return e.objects.active.editableProps.fontStyle })), t = lw((function (e) { return e.objects.active.editableProps.underline })), n = lw((function (e) { return e.objects.active.editableProps.linethrough })), r = _(h.exports.useState([e, t && "underline", n && "linethrough"]), 2), i = r[0], o = r[1]; return Cy(pB, { size: "xs", variant: "outline", radius: "rounded", value: i, multiple: !0, onChange: function (e) { o(e), XO().objects.setValues({ underline: e.includes("underline"), linethrough: e.includes("linethrough"), fontStyle: e.includes("italic") ? "italic" : "" }), YO().setDirty(!0) }, children: [ky(lB, { value: "underline", children: ky(DK, {}) }), ky(lB, { value: "linethrough", children: ky(LK, {}) }), ky(lB, { value: "italic", children: ky(RK, {}) })] }) } function VK() { var e = lw((function (e) { return e.objects.active.editableProps.textAlign })); return Cy(pB, { size: "xs", variant: "outline", radius: "rounded", value: e, onChange: function (e) { XO().objects.setValues({ textAlign: e }), YO().setDirty(!0) }, children: [ky(lB, { value: "left", children: ky(jK, {}) }), ky(lB, { value: "center", children: ky(FK, {}) }), ky(lB, { value: "right", children: ky(IK, {}) })] }) } function UK(e) { var t = h.exports.useContext(TK), n = t.tabState, r = t.tabProps, i = n.tabListState, o = jD(F({ items: r.items }, e), (function (e) { return new ZW(e) }), { suppressTextValueWarning: !0 }), a = i ? o.getItem(i.selectedKey) : null; return h.exports.createElement(HK, N(F({}, e), { key: null == i ? void 0 : i.selectedKey }), a && a.props.children) } function HK(e) { var t = e.children, n = e.className, r = h.exports.useContext(TK).tabState, i = h.exports.useRef(null), o = SK(e, r.tabListState, i).tabPanelProps; return ky(pD, { focusRingClass: "outline-primary-light", children: ky("div", N(F({ className: n }, o), { ref: i, children: t })) }) } var WK = [{ type: "linear", coords: { x1: -80, y1: 0, x2: 80, y2: 0 }, colorStops: [{ color: "#ffe47b", offset: 0 }, { color: "rgb(111,154,211)", offset: 1 }] }, { type: "linear", coords: { x1: 0, y1: -120, x2: 0, y2: 120 }, colorStops: [{ color: "#ff4040", offset: 0 }, { color: "#e6399b", offset: 1 }] }, { type: "linear", coords: { x1: -90, y1: -90, x2: 90, y2: 90 }, colorStops: [{ offset: 0, color: "rgb(166,111,213)" }, { offset: .5, color: "rgba(106, 72, 215, 0.5)" }, { offset: 1, color: "#200772" }] }, { type: "radial", coords: { r1: 100, r2: 10, x1: 0, y1: 0, x2: 0, y2: 0 }, colorStops: [{ offset: 0, color: "#FF4F4F" }, { offset: 1, color: "rgb(255, 239, 64)" }] }, { type: "radial", coords: { r1: 100, r2: 10, x1: 0, y1: 0, x2: 20, y2: 20 }, colorStops: [{ offset: 0, color: "#ffe47b" }, { offset: .5, color: "rgb(111,154,211)" }, { offset: 1, color: "rgb(166,111,213)" }] }, { type: "radial", coords: { r1: 50, r2: 80, x1: 45, y1: 45, x2: 52, y2: 50 }, colorStops: [{ offset: 0, color: "rgb(155, 237, 0)" }, { offset: 1, color: "rgba(0, 164, 128,0.4)" }] }, { type: "linear", coords: { x1: -90, y1: -90, x2: 90, y2: 90 }, colorStops: [{ offset: 0, color: "#9ecb2d" }, { offset: .5, color: "#72aa00" }, { offset: 1, color: "#bfd255" }] }, { type: "radial", coords: { r1: 100, r2: 50, x1: 30, y1: 0, x2: 0, y2: 0 }, colorStops: [{ offset: 0, color: "#aebcbf" }, { offset: 1, color: "#0a0809" }] }, { type: "linear", coords: { x1: -80, y1: 0, x2: 80, y2: 0 }, colorStops: [{ offset: 0, color: "#ffffff" }, { offset: 1, color: "#f6f6f6" }] }, { type: "linear", coords: { x1: 0, y1: -120, x2: 0, y2: 120 }, colorStops: [{ offset: 0, color: "#fefcea" }, { offset: 1, color: "#f1da36" }] }, { type: "linear", coords: { x1: -90, y1: -90, x2: 90, y2: 90 }, colorStops: [{ offset: 0, color: "rgb(166,111,213)" }, { offset: .5, color: "rgba(106, 72, 215, 0.5)" }, { offset: 1, color: "#ff1a00" }] }, { type: "linear", coords: { x1: 0, y1: -120, x2: 0, y2: 120 }, colorStops: [{ offset: 0, color: "#b7deed" }, { offset: 1, color: "#21b4e2" }] }, { type: "linear", coords: { x1: -80, y1: 100, x2: 80, y2: -100 }, colorStops: [{ offset: 0, color: "#ffe47b" }, { offset: 1, color: "rgb(111,154,211)" }] }], KK = Oy(ky("path", { d: "M19.51 3.08 3.08 19.51c.09.34.27.65.51.9.25.24.56.42.9.51L20.93 4.49c-.19-.69-.73-1.23-1.42-1.41zM11.88 3 3 11.88v2.83L14.71 3h-2.83zM5 3c-1.1 0-2 .9-2 2v2l4-4H5zm14 18c.55 0 1.05-.22 1.41-.59.37-.36.59-.86.59-1.41v-2l-4 4h2zm-9.71 0h2.83L21 12.12V9.29L9.29 21z" }), "TextureOutlined"), YK = Oy(ky("path", { d: "M11 9h2v2h-2V9zm-2 2h2v2H9v-2zm4 0h2v2h-2v-2zm2-2h2v2h-2V9zM7 9h2v2H7V9zm12-6H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 18H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm2-7h-2v2h2v2h-2v-2h-2v2h-2v-2h-2v2H9v-2H7v2H5v-2h2v-2H5V5h14v6z" }), "GradientOutlined"), XK = Oy(ky("path", { d: "M18 20H4V6h9V4H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-9h-2v9zm-7.79-3.17-1.96-2.36L5.5 18h11l-3.54-4.71zM20 4V1h-2v3h-3c.01.01 0 2 0 2h3v2.99c.01.01 2 0 2 0V6h3V4h-3z" }), "AddPhotoAlternateOutlined"); function GK(e) { var t = e.property, n = Zm().formatMessage, r = lw((function (e) { return e.objects.active.editableProps[t] })); return Cy(Ty, { children: [ky(NW, { size: "xs", "aria-label": n({ id: "uMhpKe", defaultMessage: [{ type: 0, value: "Color" }] }), value: "string" == typeof r ? r : cy.fill, onChange: function (e) { XO().objects.setValues(k({}, t, e)), YO().setDirty(!0) } }), ky(qK, { type: "gradient", property: t }), ky(qK, { type: "texture", property: t })] }) } function qK(e) { var t = e.type, n = e.property, r = ky("texture" === t ? KK : YK, {}); return ky(Ty, { children: Cy(RW, { type: "popover", children: [ky(kD, { id: "".concat(t, "-panel-trigger"), variant: "outline", size: "xs", startIcon: r, endIcon: ky(vU, {}), children: ky("span", { className: "capitalize", children: ky(ay, "gradient" === t ? { id: "y/FCma", defaultMessage: [{ type: 0, value: "Gradient" }] } : { id: "ktqcD5", defaultMessage: [{ type: 0, value: "Texture" }] }) }) }), function (e) { return ky(FW, { children: ky("div", { className: "grid gap-8 grid-cols-5-min-content p-10 bg-paper rounded shadow-md", children: ky(JK, { property: n, closeOverlay: e.close, type: t }) }) }) }] }) }) } function JK(e) { var t = e.closeOverlay, n = e.type, r = e.property, i = Array.from(Array("gradient" === n ? WK.length : 28).keys()), o = "w-56 h-56 bg border shadow-sm hover:scale-110", a = i.map((function (e) { var i, a = vP("images/".concat(n, "s/").concat(e, ".png")); return ky(SD, { radius: "rounded", className: o, style: { backgroundImage: "url(".concat(a, ")") }, "aria-label": "Select ".concat(n, " #").concat(e), onPress: (i = x(b().mark((function i() { var o; return b().wrap((function (i) { for (; ;)switch (i.prev = i.next) { case 0: if (t(), "gradient" !== n) { i.next = 5; break } i.t0 = new UO.fabric.Gradient(WK[e]), i.next = 8; break; case 5: return i.next = 7, $K(a); case 7: i.t0 = i.sent; case 8: o = i.t0, XO().objects.setValues(k({}, r, o)), YO().setDirty(!0); case 10: case "end": return i.stop() } }), i) }))), function () { return i.apply(this, arguments) }) }, e) })); return "texture" === n && a.unshift(ky(ZK, { property: r, closeOverlay: t, className: o }, "upload-btn")), ky(Ty, { children: a }) } function ZK(e) { var t, n = e.className, r = e.closeOverlay, i = e.property; return ky(SD, { radius: "rounded", className: n, "aria-label": "Upload an image", onPress: (t = x(b().mark((function e() { var t, n; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, XO().import.openUploadWindow(); case 2: if (t = e.sent, r(), !t) { e.next = 12; break } return e.t0 = $K, e.next = 7, t.data; case 7: return e.t1 = e.sent, e.next = 10, (0, e.t0)(e.t1); case 10: n = e.sent, XO().objects.setValues(k({}, i, n)); case 12: case "end": return e.stop() } }), e) }))), function () { return t.apply(this, arguments) }), children: ky(XK, { className: "icon-md" }) }) } function $K(e) { return new Promise((function (t) { UO.fabric.util.loadImage(e, (function (e) { var n = new UO.fabric.Pattern({ source: e, repeat: "repeat" }); t(n) })) })) } function QK() { var e = lw((function (e) { return e.objects.active.editableProps.opacity })); return ky(XW, { className: "max-w-240", "aria-label": "Opacity", value: e, minValue: .1, step: .1, maxValue: 1, onChange: function (e) { XO().objects.setValues({ opacity: e }), YO().setDirty(!0) } }) } function eY() { var e = Zm().formatMessage, t = lw((function (e) { return e.objects.active.editableProps.stroke })), n = lw((function (e) { return e.objects.active.editableProps.strokeWidth })); return Cy(Ty, { children: [ky(NW, { size: "xs", value: t, "aria-label": e({ id: "k1rbG0", defaultMessage: [{ type: 0, value: "Outline Color" }] }), onChange: function (e) { XO().objects.setValues({ stroke: e }), YO().setDirty(!0) } }), ky(XW, { "aria-label": "Outline Width", className: "max-w-240", value: n, onChange: function (e) { XO().objects.setValues({ strokeWidth: e }), YO().setDirty(!0) } })] }) } var tY = Oy(ky("path", { d: "M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4.86 8.86-3 3.87L9 13.14 6 17h12l-3.86-5.14z" }), "ImageOutlined"); function nY() { return ky("div", { children: ky(kD, { type: "button", variant: "outline", size: "xs", startIcon: ky(tY, {}), radius: "rounded-full", onPress: (e = x(b().mark((function e() { var t, n, r; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, XO().import.openUploadWindow(); case 2: if (!(t = e.sent)) { e.next = 10; break } if (!(n = XO().objects.getActive()) || !("setSrc" in n)) { e.next = 10; break } return e.next = 8, t.data; case 8: r = e.sent, n.setSrc(r, (function () { rP({ src: r }), XO().canvas.render() })); case 10: case "end": return e.stop() } }), e) }))), function () { return e.apply(this, arguments) }), children: ky(ay, { id: "cYfRr+", defaultMessage: [{ type: 0, value: "Replace Image" }] }) }) }); var e } var rY = { color: "rgba(0, 0, 0, 0.6)", blur: 3, offsetX: -1, offsetY: 0 }; function iY() { var e = Zm().formatMessage, t = lw((function (e) { return e.objects.active.editableProps.shadow })) || rY; return Cy(Ty, { children: [ky(NW, { value: t.color, size: "xs", "aria-label": e({ id: "cPxU+s", defaultMessage: [{ type: 0, value: "Shadow Color" }] }), onChange: function (e) { XO().objects.setValues({ shadow: oY({ color: e }) }), YO().setDirty(!0) } }), ky(XW, { "aria-label": "Shadow Blur", className: "max-w-240", defaultValue: t.blur, onChange: function (e) { XO().objects.setValues({ shadow: oY({ blur: e }) }), YO().setDirty(!0) } })] }) } function oY(e) { var t, n = null == (t = XO().objects.getActive()) ? void 0 : t.shadow; return n ? (Object.entries(e).forEach((function (e) { var t = _(e, 2), r = t[0], i = t[1]; n[r] = i })), n) : new UO.fabric.Shadow(F(F({}, rY), e)) } function aY() { var e = lw((function (e) { return e.objects.active })); return Cy(AK, { size: "sm", className: "pb-18 pt-6", children: [Cy(PK, { children: [e.isText && ky(PD, { children: ky(ay, { id: "A3jj9z", defaultMessage: [{ type: 0, value: "Font" }] }) }, "font"), !e.isImage && ky(PD, { children: ky(ay, { id: "uMhpKe", defaultMessage: [{ type: 0, value: "Color" }] }) }, "fill"), !e.isImage && ky(PD, { children: ky(ay, { id: "XQZA8e", defaultMessage: [{ type: 0, value: "Background" }] }) }, "bgColor"), e.isImage && ky(PD, { children: ky(ay, { id: "+0zv6g", defaultMessage: [{ type: 0, value: "Image" }] }) }, "image"), ky(PD, { children: ky(ay, { id: "PHutSR", defaultMessage: [{ type: 0, value: "Opacity" }] }) }, "opacity"), ky(PD, { children: ky(ay, { id: "aEhjYg", defaultMessage: [{ type: 0, value: "Outline" }] }) }, "outline"), ky(PD, { children: ky(ay, { id: "u4jNiO", defaultMessage: [{ type: 0, value: "Shadow" }] }) }, "shadow")] }), Cy(UK, { className: "flex items-center justify-center gap-10 pt-16 h-50 w-full", children: [ky(PD, { children: ky(NK, {}) }, "font"), ky(PD, { children: ky(GK, { property: "fill" }) }, "fill"), ky(PD, { children: ky(GK, { property: "backgroundColor" }) }, "bgColor"), ky(PD, { children: ky(nY, {}) }, "image"), ky(PD, { children: ky(QK, {}) }, "opacity"), ky(PD, { children: ky(eY, {}) }, "outline"), ky(PD, { children: ky(iY, {}) }, "shadow")] })] }) } function sY() { var e = !LW() && ky(kD, { size: "sm", color: "primary", variant: "outline", onPress: function () { XO().text.add(), YO().setDirty(!0) }, children: ky(ay, { id: "kWzXGg", defaultMessage: [{ type: 0, value: "New Text" }] }) }); return ky(tW, { actionBtn: e, children: ky(aY, {}) }) } function lY() { var e = function (e, t) { switch (e) { case Jb.Filter: return ky(mK, {}); case Jb.Frame: return ky(yK, {}); case Jb.Text: return t && ky(sY, {}); case Jb.ActiveObject: return t && ky(aY, {}); default: return null } }(lw((function (e) { return e.activeToolOverlay })), lw((function (e) { return e.objects.active.id }))); return ky("div", { className: "relative z-tool-overlay text-sm", children: ky(vC, { children: e && ky(uC.div, { initial: { y: 0, opacity: 0 }, animate: { y: "-100%", opacity: 1 }, exit: { y: 0, opacity: 0 }, transition: { type: "tween", duration: .15 }, className: "absolute inset-x-0 gap-16 px-5vw bg bg-opacity-95 border-t", children: e }, "tool-controls-overlay") }) }) } var uY = Oy(ky("path", { d: "M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z" }), "CancelOutlined"); function cY(e) { var t = e.filter, n = lw((function (e) { return e.filter.applied.includes(t) })), r = XO().filter.hasOptions(t), i = CT("block flex-shrink-0 rounded", { "text-primary border-primary": n }), o = wP[t], a = Cy(Ty, { children: [Cy("div", { className: "relative", children: [ky(fY, { filter: t }), n && ky(hY, { filter: t, hasOptions: r })] }), ky("div", { className: "mt-4 text-center text-xs capitalize", children: o ? ky(ay, F({}, o)) : t })] }); return n && r ? ky("div", { className: i, children: a }) : ky(SD, { className: i, onPress: function () { n ? XO().filter.remove(t) : XO().filter.apply(t) }, children: a }) } function fY(e) { var t = e.filter, n = CT("m-auto w-96 h-56 border rounded object-cover", { shadow: lw((function (e) { return e.filter.selected === t })) }); return ky("img", { src: vP("images/filter/".concat(t, ".jpg")), className: n, alt: "" }) } function hY(e) { var t = e.filter, n = e.hasOptions; return Cy("div", { className: "flex items-center justify-center bg-background/70 absolute inset-0 border-2 border-primary rounded", children: [n ? ky(lB, { color: "primary", size: "md", onPress: function () { XO().filter.remove(t) }, children: ky(uY, {}) }) : ky(uY, { className: "svg-icon icon-md" }), n && ky(dY, { filter: t, hasOptions: n })] }) } function dY(e) { var t = e.filter, n = e.hasOptions; return ky(lB, { color: "primary", size: "md", onPress: function () { YO().activeToolOverlay === Jb.Filter && YO().filter.selected === t ? YO().setActiveTool(YO().activeTool, null) : YO().filter.select(t, n) }, children: ky(My, {}) }) } var pY = h.exports.forwardRef((function (e, t) { var n = e.children, r = e.className, i = e.gap, o = ce.Children.map(n, (function (e, t) { return ce.isValidElement(e) ? ce.cloneElement(e, { isFirst: 0 === t, isLast: ce.Children.count(n) === t + 1 }) : e })); return ky("div", { ref: t, className: "tiny-scrollbar pb-4 overflow-x-auto relative flex items-center ".concat(i || "gap-10", " ").concat(r), children: o }) })); function vY(e) { var t = e.isFirst, n = e.isLast, r = e.children, i = CT(e.className, "flex-shrink-0", { "ml-auto": t, "mr-auto": n }); return ky("div", { className: i, children: r }) } function gY() { var e = lw((function (e) { var t, n; return null == (n = null == (t = e.config.tools) ? void 0 : t.filter) ? void 0 : n.items })) || []; h.exports.useEffect((function () { XO().filter.syncState() }), []); var t = e.map((function (e) { return ky(vY, { children: ky(cY, { filter: e }) }, e) })); return ky(pY, { children: t }) } function mY() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = e.isReadOnly, n = IT(e.isSelected, e.defaultSelected || !1, e.onChange), r = _(n, 2), i = r[0], o = r[1]; function a(e) { t || o(e) } function s() { t || o(!i) } return { isSelected: i, setSelected: a, toggle: s } } function yY(e, t, n) { var r = e.isDisabled, i = void 0 !== r && r, o = e.isRequired, a = e.isReadOnly, s = e.value, l = e.name, u = e.children, c = e["aria-label"], f = e["aria-labelledby"], h = e.validationState, d = void 0 === h ? "valid" : h; null == u && null == c && null == f && console.warn("If you do not provide children, you must specify an aria-label for accessibility"); var p = GT(YE({ isDisabled: i }).pressProps, yD(e, n).focusableProps); return { inputProps: GT($T(e, { labelable: !0 }), F({ "aria-invalid": "invalid" === d || void 0, "aria-errormessage": e["aria-errormessage"], "aria-controls": e["aria-controls"], "aria-readonly": a || void 0, "aria-required": o || void 0, onChange: function (e) { e.stopPropagation(), t.setSelected(e.target.checked) }, disabled: i, value: s, name: l, type: "checkbox" }, p)) } } function bY(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } function wY(e, t, n) { var r = yY(e, t, n).inputProps, i = t.isSelected, o = e.isIndeterminate; return h.exports.useEffect((function () { n.current && (n.current.indeterminate = o) })), { inputProps: N(F({}, r), { checked: i, "aria-checked": o ? "mixed" : i }) } } Object.defineProperty({}, "useToggleState", { get: function () { return mY }, set: void 0, enumerable: !0, configurable: !0 }), Object.defineProperty({}, "useToggle", { get: function () { return yY }, set: void 0, enumerable: !0, configurable: !0 }), bY({}, "useCheckbox", (function () { return wY })), bY({}, "useCheckboxGroup", (function () { return _Y })); var xY = new WeakMap; function _Y(e, t) { var n = e.isDisabled, r = e.name, i = MB(N(F({}, e), { labelElementType: "span" })), o = i.labelProps, a = i.fieldProps, s = $T(e, { labelable: !0 }); return xY.set(t, r), { groupProps: GT(s, F({ role: "group", "aria-disabled": n || void 0 }, a)), labelProps: o } } function SY(e, t, n) { var r = mY({ isReadOnly: e.isReadOnly || t.isReadOnly, isSelected: t.isSelected(e.value), onChange: function (n) { n ? t.addValue(e.value) : t.removeValue(e.value), e.onChange && e.onChange(n) } }); return { inputProps: wY(N(F({}, e), { isReadOnly: e.isReadOnly || t.isReadOnly, isDisabled: e.isDisabled || t.isDisabled, name: e.name || xY.get(t) }), r, n).inputProps } } bY({}, "useCheckboxGroupItem", (function () { return SY })); var kY = Oy(ky("path", { d: "M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" }), "CheckBoxOutlineBlankOutlined"), CY = Oy(ky("path", { d: "M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" }), "CheckBox"), TY = ce.createContext(null); function EY(e) { var t = e.children, n = e.className, r = e.icon, i = e.checkedIcon, o = e.isDisabled, a = e.value, s = hU(N(F({}, e), { label: t })), l = r || kY, u = i || CY, c = h.exports.useRef(null), f = dD(), d = f.isFocusVisible, p = f.focusProps, v = h.exports.useContext(TY), g = (v ? SY(N(F({}, e), { value: a }), v, c) : wY(e, mY(e), c)).inputProps, m = CT("flex items-center rounded", n, { "outline outline-offset-2": d }), y = o && "text-disabled"; return Cy("label", { className: m, children: [ky(VO, { children: ky("input", N(F(F({}, g), p), { ref: c })) }), g.checked ? ky(u, { className: CT(y || "text-primary", s.adornment) }) : ky(l, { className: CT(y || "text-muted", s.adornment) }), t && ky("div", { className: CT("block capitalize ml-6", s.size.font), children: t })] }) } var OY = Oy(ky("path", { d: "M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z" }), "LockOutlined"), PY = Oy(ky("path", { d: "M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h2c0-1.66 1.34-3 3-3s3 1.34 3 3v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z" }), "LockOpenOutlined"); function MY() { var e = Zm().formatMessage, t = lw((function (e) { var t; return null == (t = e.config.tools) ? void 0 : t.resize })) || {}, n = t.minWidth, r = void 0 === n ? 50 : n, i = t.minHeight, o = void 0 === i ? 50 : i, a = t.maxHeight, s = void 0 === a ? 2400 : a, l = t.maxWidth, u = void 0 === l ? 2400 : l, c = lw((function (e) { return e.original })), f = lw((function (e) { return e.resize.formValue })); return h.exports.useEffect((function () { YO().resize.setFormValue(F({}, c)) }), [c]), h.exports.useEffect((function () { YO().setDirty(!0) }), []), Cy("form", { className: "flex items-center justify-center gap-16 w-full", onSubmit: function (e) { e.preventDefault(), YO().applyChanges() }, children: [ky(gU, { minValue: r, maxValue: u, size: "sm", className: "max-w-112", label: "Width", value: f.width, onChange: function (e) { var t = N(F({}, f), { width: e }); f.maintainAspect && (t.height = PP(e, f.usePercentages)), YO().resize.setFormValue(t) }, formatOptions: { useGrouping: !1 } }), ky("div", { className: "mt-24", children: ky(EY, { size: "md", isSelected: f.maintainAspect, onChange: function (e) { var t = N(F({}, f), { maintainAspect: e }); e && (t.height = PP(t.width, t.usePercentages)), YO().resize.setFormValue(t) }, "aria-label": e({ id: "qfw+KX", defaultMessage: [{ type: 0, value: "Maintain aspect ratio" }] }), checkedIcon: OY, icon: PY }) }), ky(gU, { minValue: o, maxValue: s, size: "sm", className: "max-w-112", label: "Height", value: f.height, onChange: function (e) { var t = N(F({}, f), { height: e }); e && f.maintainAspect && (t.width = OP(e, f.usePercentages)), YO().resize.setFormValue(t) }, formatOptions: { useGrouping: !1 } }), ky("button", { type: "submit", className: "hidden", children: ky(ay, { id: "4dL9o7", defaultMessage: [{ type: 0, value: "Resize" }] }) })] }) } function AY() { var e, t = lw((function (e) { var t, n; return null == (n = null == (t = e.config.tools) ? void 0 : t.crop) ? void 0 : n.presets })) || [], n = lw((function (e) { return e.crop.selectedAspectRatio })), r = null == (e = lw((function (e) { var t, n; return null == (n = null == (t = e.config.tools) ? void 0 : t.crop) ? void 0 : n.allowCustomRatio }))) || e, i = t.filter((function (e) { return e.ratio || !e.ratio && r })).map((function (e) { return ky(vY, { children: Cy(SD, { onPress: function () { return XO().crop.resetCropzone(e.ratio) }, className: "flex flex-col items-center justify-between cursor-pointer h-56", children: [ky(DY, { preset: e, selectedRatio: n }), ky(LY, { preset: e, selectedRatio: n })] }) }, e.ratio || e.name) })); return ky(pY, { gap: "gap-18", children: i }) } function DY(e) { var t = e.preset, n = e.selectedRatio, r = 40, i = 30; if (t.ratio) { var o = AP(DP(t.ratio), r, i); r = o.width, i = o.height } var a = CT("border-2", { "border-dotted": null === t.ratio, "border-primary": n === t.ratio }); return ky("div", { style: { width: "".concat(r, "px"), height: "".concat(i, "px") }, className: a }) } function LY(e) { var t = e.preset, n = CT("mt-4 text-center text-xs", { "text-primary": e.selectedRatio === t.ratio }); return ky("div", { className: n, children: t.name || t.ratio }) } var RY = Oy(ky("path", { d: "M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z" }), "FlipOutlined"); function IY() { return Cy("div", { children: [ky(lB, { size: "sm", onPress: function () { XO().transform.flip("vertical"), YO().setDirty(!0) }, children: ky(RY, {}) }), ky(lB, { size: "sm", onPress: function () { XO().transform.flip("horizontal"), YO().setDirty(!0) }, children: ky(RY, { className: "rotate-90" }) })] }) } var jY = Oy(ky("path", { d: "M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z" }), "RotateLeftOutlined"), FY = Oy(ky("path", { d: "M15.55 5.55 11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42 1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z" }), "RotateRightOutlined"); function NY() { return Cy("div", { children: [ky(lB, { size: "sm", onPress: function () { XO().transform.rotateLeft(), YO().setDirty(!0) }, children: ky(jY, {}) }), ky(lB, { size: "sm", onPress: function () { XO().transform.rotateRight(), YO().setDirty(!0) }, children: ky(FY, {}) })] }) } function zY() { return Cy("div", { className: "flex items-center justify-center gap-16", children: [ky(IY, {}), ky(BY, {}), ky(NY, {})] }) } function BY() { var e = RI(), t = h.exports.useRef(null), n = h.exports.useRef(null), r = { minValue: -45, maxValue: 45, step: 1, label: "Straighten", numberFormatter: e, defaultValue: [YO().crop.straightenAngle], onChange: function (e) { var t = e[0]; XO().transform.straighten(t), YO().crop.setTransformAngle(t), YO().setDirty(!0), n.current.style.transform = "translateX(".concat(t, "px)") } }, i = BW(r), o = KW(r, i, t), a = o.groupProps, s = o.trackProps, l = o.outputProps; return ky("div", N(F({}, a), { className: "flex-auto flex-shrink-0 max-w-320 touch-none isolate", children: Cy("div", N(F({}, s), { ref: t, className: "h-36 relative", children: [Cy("output", N(F({}, l), { className: "absolute left-1/2 top-1/2 w-40 text-center bg -translate-x-1/2 -translate-y-1/2 z-10", children: [i.getThumbValueLabel(0), "°"] })), ky(VY, { ref: n })] })) })) } var VY = ce.forwardRef((function (e, t) { var n = S(Array(80).keys()), r = n.map((function (e) { return ky("circle", { cx: 2 + 10 * e, cy: "20", r: e % 5 ? .75 : 2 }, e) })); return ky("div", { className: "relative h-full cursor-pointer overflow-hidden", children: ky("svg", { ref: t, style: { width: 10 * n.length }, className: "absolute -left-80 h-full fill-current", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": "true", focusable: "false", children: r }) }) })); function UY() { return h.exports.useEffect((function () { return YO().setDirty(!0), XO().frame.active.hide(), function () { XO().frame.active.show() } }), []), Cy("div", { className: "pb-16", children: [ky("div", { className: "mb-10", children: ky(zY, {}) }), ky(AY, {})] }) } var HY = Oy(ky("path", { d: "M 16 6 C 12.484375 6 9.273438 7.070313 6.90625 8.84375 C 4.539063 10.617188 3 13.15625 3 16 C 3 18.84375 4.539063 21.382813 6.90625 23.15625 C 9.273438 24.929688 12.484375 26 16 26 C 19.515625 26 22.726563 24.929688 25.09375 23.15625 C 27.460938 21.382813 29 18.84375 29 16 C 29 13.15625 27.460938 10.617188 25.09375 8.84375 C 22.726563 7.070313 19.515625 6 16 6 Z M 16 8 C 19.109375 8 21.898438 8.957031 23.875 10.4375 C 25.851563 11.917969 27 13.875 27 16 C 27 18.125 25.851563 20.082031 23.875 21.5625 C 21.898438 23.042969 19.109375 24 16 24 C 12.890625 24 10.101563 23.042969 8.125 21.5625 C 6.148438 20.082031 5 18.125 5 16 C 5 13.875 6.148438 11.917969 8.125 10.4375 C 10.101563 8.957031 12.890625 8 16 8 Z " })), WY = Oy(ky("path", { d: "M 16 4 C 9.382813 4 4 9.382813 4 16 C 4 22.617188 9.382813 28 16 28 C 22.617188 28 28 22.617188 28 16 C 28 9.382813 22.617188 4 16 4 Z M 16 6 C 21.535156 6 26 10.464844 26 16 C 26 21.535156 21.535156 26 16 26 C 10.464844 26 6 21.535156 6 16 C 6 10.464844 10.464844 6 16 6 Z " })), KY = Oy(ky("path", { d: "M 3 6 L 3 26 L 29 26 L 29 6 Z M 5 8 L 27 8 L 27 24 L 5 24 Z " })), YY = Oy(ky("path", { d: "M 16 4.90625 L 15.125 6.40625 L 4.71875 24.5 L 3.875 26 L 28.125 26 L 27.28125 24.5 L 16.875 6.40625 Z M 16 8.9375 L 24.65625 24 L 7.34375 24 Z " })); function XY() { var e = (lw((function (e) { var t, n; return null == (n = null == (t = e.config.tools) ? void 0 : t.shapes) ? void 0 : n.items })) || []).map((function (e) { return ky(vY, { children: ky(lB, { variant: "outline", radius: "rounded-2xl", size: "xl", onPress: function () { XO().shape.addBasicShape(e.name), YO().setDirty(!0) }, children: ky(GY, { shape: e }) }) }, e.name) })); return ky(pY, { children: e }) } function GY(e) { var t, n = e.shape; return "Path" === n.type ? ky("svg", { className: "m-auto w-36 h-36", xmlns: "http://www.w3.org/2000/svg", viewBox: "0 -100 512 700", children: ky("path", { className: "fill-transparent stroke-current", d: null == (t = n.options) ? void 0 : t.path, strokeWidth: 25 }) }) : ce.cloneElement(qY[n.name], { className: "w-30 h-30" }) } var qY = { circle: ky(WY, { viewBox: "0 0 32 32" }), square: ky(KY, { viewBox: "0 0 32 32" }), triangle: ky(YY, { viewBox: "0 0 32 32" }), ellipse: ky(HY, { viewBox: "0 0 32 32" }) }; function JY() { return JY = Object.assign || function (e) { for (var t = 1; t < arguments.length; t++) { var n = arguments[t]; for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]) } return e }, JY.apply(this, arguments) } var ZY, $Y = ["bottom", "height", "left", "right", "top", "width"], QY = new Map, eX = function e() { var t = []; QY.forEach((function (e, n) { var r = n.getBoundingClientRect(); (function (e, t) { return void 0 === e && (e = {}), void 0 === t && (t = {}), $Y.some((function (n) { return e[n] !== t[n] })) })(r, e.rect) && (e.rect = r, t.push(e)) })), t.forEach((function (e) { e.callbacks.forEach((function (t) { return t(e.rect) })) })), ZY = window.requestAnimationFrame(e) }, tX = "undefined" != typeof window ? ce.useLayoutEffect : ce.useEffect; function nX(e, t) { void 0 === t && (t = { width: 0, height: 0 }); var n = ce.useState(e.current), r = n[0], i = n[1], o = ce.useReducer(rX, t), a = o[0], s = o[1], l = ce.useRef(!1); return tX((function () { e.current !== r && i(e.current) })), tX((function () { if (r && !l.current) { l.current = !0; var e = r.getBoundingClientRect(); s({ rect: e }) } }), [r]), ce.useEffect((function () { if (r) { var e = function (e, t) { return { observe: function () { var n = 0 === QY.size; QY.has(e) ? QY.get(e).callbacks.push(t) : QY.set(e, { rect: void 0, hasRectChanged: !1, callbacks: [t] }), n && eX() }, unobserve: function () { var n = QY.get(e); if (n) { var r = n.callbacks.indexOf(t); r >= 0 && n.callbacks.splice(r, 1), n.callbacks.length || QY.delete(e), QY.size || cancelAnimationFrame(ZY) } } } }(r, (function (e) { s({ rect: e }) })); return e.observe(), function () { e.unobserve() } } }), [r]), a } function rX(e, t) { var n = t.rect; return e.height !== n.height || e.width !== n.width ? n : e } var iX = function () { return 50 }, oX = function (e) { return e }, aX = function (e, t) { return e[t ? "offsetWidth" : "offsetHeight"] }, sX = function (e) { for (var t = Math.max(e.start - e.overscan, 0), n = Math.min(e.end + e.overscan, e.size - 1), r = [], i = t; i <= n; i++)r.push(i); return r }; function lX(e) { var t = e.category, n = BA(), r = t.name, i = t.list ? t.list : Array.from(Array(t.items).keys()), o = h.exports.useRef(null), a = function (e) { var t, n = e.size, r = void 0 === n ? 0 : n, i = e.estimateSize, o = void 0 === i ? iX : i, a = e.overscan, s = void 0 === a ? 1 : a, l = e.paddingStart, u = void 0 === l ? 0 : l, c = e.paddingEnd, f = void 0 === c ? 0 : c, h = e.parentRef, d = e.horizontal, p = e.scrollToFn, v = e.useObserver, g = e.initialRect, m = e.onScrollElement, y = e.scrollOffsetFn, b = e.keyExtractor, w = void 0 === b ? oX : b, x = e.measureSize, _ = void 0 === x ? aX : x, S = e.rangeExtractor, k = void 0 === S ? sX : S, C = d ? "width" : "height", T = d ? "scrollLeft" : "scrollTop", E = ce.useRef({ scrollOffset: 0, measurements: [] }), O = ce.useState(0), P = O[0], M = O[1]; E.current.scrollOffset = P; var A = (v || nX)(h, g)[C]; E.current.outerSize = A; var D = ce.useCallback((function (e) { h.current && (h.current[T] = e) }), [h, T]), L = p || D; p = ce.useCallback((function (e) { L(e, D) }), [D, L]); var R = ce.useState({}), I = R[0], j = R[1], F = ce.useCallback((function () { return j({}) }), []), N = ce.useRef([]), z = ce.useMemo((function () { var e = N.current.length > 0 ? Math.min.apply(Math, N.current) : 0; N.current = []; for (var t = E.current.measurements.slice(0, e), n = e; n < r; n++) { var i = w(n), a = I[i], s = t[n - 1] ? t[n - 1].end : u, l = "number" == typeof a ? a : o(n), c = s + l; t[n] = { index: n, start: s, size: l, end: c, key: i } } return t }), [o, I, u, r, w]), B = ((null == (t = z[r - 1]) ? void 0 : t.end) || u) + f; E.current.measurements = z, E.current.totalSize = B; var V = m ? m.current : h.current, U = ce.useRef(y); U.current = y, tX((function () { if (V) { var e = function (e) { var t = U.current ? U.current(e) : V[T]; M(t) }; return e(), V.addEventListener("scroll", e, { capture: !1, passive: !0 }), function () { V.removeEventListener("scroll", e) } } M(0) }), [V, T]); var H = function (e) { for (var t = e.measurements, n = e.outerSize, r = e.scrollOffset, i = t.length - 1, o = function (e, t, n, r) { for (; e <= t;) { var i = (e + t) / 2 | 0, o = n(i); if (o < r) e = i + 1; else { if (!(o > r)) return i; t = i - 1 } } return e > 0 ? e - 1 : 0 }(0, i, (function (e) { return t[e].start }), r), a = o; a < i && t[a].end < r + n;)a++; return { start: o, end: a } }(E.current), W = H.start, K = H.end, Y = ce.useMemo((function () { return k({ start: W, end: K, overscan: s, size: z.length }) }), [W, K, s, z.length, k]), X = ce.useRef(_); X.current = _; var G = ce.useMemo((function () { for (var e = [], t = function (t, n) { var r = Y[t], i = JY(JY({}, z[r]), {}, { measureRef: function (e) { if (e) { var t = X.current(e, d); if (t !== i.size) { var n = E.current.scrollOffset; i.start < n && D(n + (t - i.size)), N.current.push(r), j((function (e) { var n; return JY(JY({}, e), {}, ((n = {})[i.key] = t, n)) })) } } } }); e.push(i) }, n = 0, r = Y.length; n < r; n++)t(n); return e }), [Y, D, d, z]), q = ce.useRef(!1); tX((function () { q.current && j({}), q.current = !0 }), [o]); var J = ce.useCallback((function (e, t) { var n = (void 0 === t ? {} : t).align, r = void 0 === n ? "start" : n, i = E.current, o = i.scrollOffset, a = i.outerSize; "auto" === r && (r = e <= o ? "start" : e >= o + a ? "end" : "start"), "start" === r ? p(e) : "end" === r ? p(e - a) : "center" === r && p(e - a / 2) }), [p]), Z = ce.useCallback((function (e, t) { var n = void 0 === t ? {} : t, i = n.align, o = void 0 === i ? "auto" : i, a = function (e, t) { if (null == e) return {}; var n, r, i = {}, o = Object.keys(e); for (r = 0; r < o.length; r++)n = o[r], !(t.indexOf(n) >= 0) && (i[n] = e[n]); return i }(n, ["align"]), s = E.current, l = s.measurements, u = s.scrollOffset, c = s.outerSize, f = l[Math.max(0, Math.min(e, r - 1))]; if (f) { if ("auto" === o) if (f.end >= u + c) o = "end"; else { if (!(f.start <= u)) return; o = "start" } var h = "center" === o ? f.start + f.size / 2 : "end" === o ? f.end : f.start; J(h, JY({ align: o }, a)) } }), [J, r]), $ = ce.useCallback((function () { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; Z.apply(void 0, t), requestAnimationFrame((function () { Z.apply(void 0, t) })) }), [Z]); return { virtualItems: G, totalSize: B, scrollToOffset: J, scrollToIndex: $, measure: F } }({ horizontal: !0, size: i.length, parentRef: o, estimateSize: h.exports.useCallback((function () { return 52 }), []), overscan: 5 }); return h.exports.useEffect((function () { a.scrollToIndex(0) }), [r]), ky(Ty, { children: ky("div", { ref: o, className: "tiny-scrollbar overflow-x-auto overflow-y-hidden", style: { height: "52px" }, children: ky("div", { className: "h-full relative mx-auto", style: { width: "".concat(a.totalSize, "px") }, children: a.virtualItems.map((function (e) { var r, o = "".concat(i[e.index]); return ky("div", { className: "absolute top-0 left-0 h-full", style: { width: "".concat(e.size, "px"), transform: "translateX(".concat(e.start, "px)") }, children: ky(kD, { variant: "outline", radius: "rounded-xl", size: "md", equalWidth: !0, onPress: (r = x(b().mark((function e() { return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, XO().shape.addSticker(t.name, o); case 2: YO().setDirty(!0); case 3: case "end": return e.stop() } }), e) }))), function () { return r.apply(this, arguments) }), children: ky("img", { className: CT("m-auto m-auto w-28 h-28", t.invertPreview && (null == n ? void 0 : n.isDark) && "invert"), src: IP(t, o), alt: o }) }) }, e.index) })) }) }) }) } function uX() { var e = lw((function (e) { var t, n; return null == (n = null == (t = e.config.tools) ? void 0 : t.stickers) ? void 0 : n.items })) || [], t = _(h.exports.useState(e[0]), 2), n = t[0], r = t[1], i = e.map((function (e) { var t = n === e, r = uy[e.name]; return ky(kD, { size: "xs", color: t ? "primary" : null, value: e, children: ky("span", { className: "capitalize", children: r ? ky(ay, F({}, r)) : e.name }) }, e.name) })); return Cy("div", { className: "h-92", children: [ky(pB, { value: n, onChange: function (e) { return r(e) }, className: "mb-10 w-full justify-center", variant: "outline", radius: "rounded-full", children: i }), n && ky(lX, { category: n })] }) } function cX() { var e = lw((function (e) { var t, n; return null == (n = null == (t = e.config.tools) ? void 0 : t.frame) ? void 0 : n.items })) || [], t = lw((function (e) { return e.frame.active })); h.exports.useEffect((function () { YO().frame.active && YO().frame.showOptionsPanel() }), []); var n = e.map((function (e) { var n = vP("images/frames/".concat(e.name, "/thumbnail.png")), r = (null == t ? void 0 : t.name) === e.name; return ky(vY, { children: Cy("button", { type: "button", className: "border-2 overflow-hidden relative rounded border cursor-pointer ".concat(r ? "border-primary" : ""), onClick: function () { YO().setDirty(!0), r ? XO().frame.remove() : XO().frame.add(e.name) }, children: [r && ky(fX, {}), ky("img", { draggable: "false", className: "w-64 h-64", src: n, alt: e.name })] }) }, e.name) })); return ky(pY, { children: n }) } function fX() { return ky("span", { className: "bg-background/70 absolute inset-0 text-primary", children: ky(uY, { className: "svg-icon icon-md absolute inset-0 block m-auto" }) }) } function hX() { var e = lw((function (e) { var t, n; return null == (n = null == (t = e.config.tools) ? void 0 : t.text) ? void 0 : n.items })); h.exports.useEffect((function () { e && gP(e) }), [e]), h.exports.useEffect((function () { YO().objects.active.isText || (XO().text.add(), YO().setDirty(!0)) }), []); var t = (e || []).map((function (e) { return ky(vY, { children: ky(dX, { fontConfig: e }) }, e.family) })); return ky(pY, { className: "pt-6", children: t }) } function dX(e) { var t, n, r = e.fontConfig, i = lw((function (e) { return e.objects.active.editableProps.fontFamily })), o = CT("block px-6 w-110 h-68 text-sm bg border rounded-2xl", { "border-primary": i === r.family, "text-primary": i === r.family }); return ky("button", { type: "button", className: o, style: { fontFamily: r.family, fontWeight: (null == (t = r.descriptors) ? void 0 : t.weight) || "normal" }, onClick: (n = x(b().mark((function e() { return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: YO().setDirty(!0), XO().objects.setValues({ fontFamily: r.family }); case 1: case "end": return e.stop() } }), e) }))), function () { return n.apply(this, arguments) }), children: r.family }) } function pX() { return h.exports.useEffect((function () { return XO().draw.enable(), function () { XO().draw.disable() } }), []), Cy(pY, { gap: "gap-16", className: "justify-center", children: [ky(vY, { children: ky(NW, { size: "sm", label: ky(ay, { id: "i/W1yW", defaultMessage: [{ type: 0, value: "Brush Color" }] }), value: XO().draw.currentBrush.color, onChange: function (e) { XO().draw.setBrushColor(e) } }) }), ky(vY, { children: ky(gX, {}) }), ky(vY, { children: ky(vX, {}) })] }) } function vX() { var e = lw((function (e) { var t, n; return null == (n = null == (t = e.config.tools) ? void 0 : t.draw) ? void 0 : n.brushSizes })) || [], t = _(h.exports.useState(XO().draw.currentBrush.width), 2), n = t[0], r = t[1], i = e.map((function (e) { return { key: e, value: e } })); return ky(gK, { items: i, value: n, onChange: function (e) { r(e), XO().draw.setBrushSize(e) }, size: "sm", label: "Brush Size", children: function (e) { return ky(PD, { textValue: "".concat(e.key), children: Cy("div", { className: "flex items-center", children: [ky("div", { className: "flex-shrink-0 mr-8 border-[3px] rounded-full", style: { width: "".concat(e.key, "px"), height: "".concat(e.key, "px") } }), e.key] }) }) } }) } function gX() { var e = lw((function (e) { var t, n; return null == (n = null == (t = e.config.tools) ? void 0 : t.draw) ? void 0 : n.brushTypes })) || [], t = BA(), n = _(h.exports.useState(XO().draw.currentBrush.type), 2), r = n[0], i = n[1]; return ky(gK, { value: r, onChange: function (e) { i(e), XO().draw.setBrushType(e) }, size: "sm", label: "Brush Type", children: e.map((function (e) { return ky(PD, { textValue: e, children: Cy("div", { className: "flex items-center", children: [ky("img", { className: "flex-shrink-0 mr-8 w-24 h-24", src: mX(e, null == t ? void 0 : t.isDark), alt: "" }), e] }) }, e) })) }) } function mX(e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], n = e.replace("Brush", "").toLowerCase(); return vP("images/brushes/".concat(t ? "white" : "black", "/").concat(n, ".png")) } function yX() { var e = Zm(), t = lw((function (e) { return e.corners.radius })); return h.exports.useEffect((function () { return YO().setDirty(!0), XO().corners.showPreview(), function () { return XO().corners.hidePreview() } }), []), ky("div", { className: "max-w-320 mx-auto", children: ky(XW, { minValue: 1, maxValue: 300, label: e.formatMessage({ id: "nDRMt4", defaultMessage: [{ type: 0, value: "Radius" }] }), getValueLabel: function (e) { return "".concat(e, "px") }, onChange: function (e) { XO().corners.updatePreview(e), YO().corners.setRadius(e) }, value: t }) }) } var bX = { initial: { y: "130%", opacity: 0 }, animate: { y: 0, opacity: 1 }, exit: { y: "130%", opacity: 0, left: "16px", position: "absolute", overflowY: "hidden" }, transition: { type: "tween", duration: .15 } }; function wX(e) { var t = function (e) { switch (e) { case py.FILTER: return ky(gY, {}); case py.RESIZE: return ky(MY, {}); case py.CROP: return ky(UY, {}); case py.DRAW: return ky(pX, {}); case py.TEXT: return ky(hX, {}); case py.SHAPES: return ky(XY, {}); case py.STICKERS: return ky(uX, {}); case py.FRAME: return ky(cX, {}); case py.CORNERS: return ky(yX, {}); default: return null } }(e.activeTool); return ky(uC.div, N(F({ className: "relative h-full w-full text-sm bg select-none overflow-hidden" }, bX), { children: t })) } function xX() { var e = lw((function (e) { return e.activeTool })); return ky("nav", { className: "z-navbar min-h-86 flex-shrink-0 px-16 relative overflow-hidden", children: ky(vC, { initial: !1, children: e ? ky(wX, { activeTool: e }, "tool-controls") : ky(_X, {}, "nav-items") }) }) } function _X() { var e = lw((function (e) { var t, n; return null == (n = null == (t = e.config.ui) ? void 0 : t.nav) ? void 0 : n.items })) || []; return ky(uC.div, N(F({ className: "w-full h-full" }, bX), { children: ky(pY, { children: e.map((function (e) { return ky(vY, { children: ky(SX, { item: e }) }, e.name) })) }) })) } function SX(e) { var t = e.item, n = Xy[t.name]; return Cy(SD, { variant: "outline", color: "paper", className: "flex-col flex-shrink-0 w-68 h-68", radius: "rounded-2xl", onPress: function () { "string" == typeof t.action ? aP(t.action) : "function" == typeof t.action && t.action(YO().editor) }, children: [ky("div", { className: "mb-1", children: ky(uB, { className: "icon-md", icon: t.icon }) }), ky("div", { className: "mt-6 text-xs capitalize", children: n ? ky(ay, F({}, n)) : t.name })] }) } function kX() { var e = lw((function (e) { return e.history.items })), t = lw((function (e) { return e.history.pointer })); return Cy(uC.div, N(F({}, VN), { className: "absolute bottom-20 right-20 w-224 max-w-[calc(100%-40px)] max-h-[calc(100%-40px)] ".concat(BN), children: [Cy("div", { className: "p-8 mb-4 bg-alt dark:bg-paper font-medium text-sm border-b flex items-center", children: [ky(ay, { id: "djJp6c", defaultMessage: [{ type: 0, value: "History" }] }), ky(lB, { className: "ml-auto flex-shrink-0", onPress: function () { YO().togglePanel("history", !1) }, children: ky(SB, {}) })] }), ky("div", { className: "p-8", children: e.map((function (n) { var r = n.id === e[t].id, i = Ky[n.name], o = i.icon && ce.createElement(i.icon, { className: "icon-sm" }); return ky(kD, { onPress: function () { r || XO().history.load(n) }, variant: "outline", color: r ? "primary" : null, size: "sm", className: CT("w-full mb-8", r && "pointer-events-none"), justify: "justify-start", startIcon: o, children: ky(ay, F({}, i.name)) }, n.id) })) })] })) } function CX(e) { var t = e.children, n = e.className; return ky("div", { className: n, children: t }) } function TX() { var e = lw((function (e) { return e.openPanels.newImage })); return ky(RW, { isOpen: e, disableInitialTransition: !0, type: "modal", isDismissable: !1, children: ky(EX, {}) }) } function EX() { var e = _(h.exports.useState("default"), 2), t = e[0], n = e[1]; return Cy(FW, { className: "p-20 text-center max-w-max", children: [ky(jW, { className: "pb-20", children: ky(ay, { id: "xdfcf6", defaultMessage: [{ type: 0, value: "Open a photo or design to get started" }] }) }), ky(CX, { children: ky("default" === t ? OX : MX, { setActivePanel: n }) })] }) } function OX(e) { var t = e.setActivePanel; return Cy(Ty, { children: [ky(kD, { className: "mr-20", size: "sm", variant: "raised", color: "primary", onPress: function () { XO().import.uploadAndReplaceMainImage() }, children: ky(ay, { id: "7M1lRT", defaultMessage: [{ type: 0, value: "Open Photo" }] }) }), ky(kD, { variant: "outline", size: "sm", color: "primary", onPress: function () { t("newCanvas") }, children: ky(ay, { id: "CVm3PB", defaultMessage: [{ type: 0, value: "Create New" }] }) }), ky(PX, {})] }) } function PX() { var e = lw((function (e) { var t, n; return null == (n = null == (t = e.config.ui) ? void 0 : t.openImageDialog) ? void 0 : n.sampleImages })); return (null == e ? void 0 : e.length) ? Cy(Ty, { children: [Cy("div", { className: "relative py-20", children: [ky("hr", { className: "absolute h-1 border-none bg-divider w-full top inset-0 m-auto" }), ky("span", { className: "text-sm bg-paper px-6 relative", children: ky(ay, { id: "LaQ6Iq", defaultMessage: [{ type: 0, value: "or use sample" }] }) })] }), ky("ul", { className: "flex items-center gap-16", children: e.map((function (e) { return ky("li", { className: "shrink-0", children: ky("button", { type: "button", onClick: (t = x(b().mark((function t() { return b().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if ("function" != typeof e.action) { t.next = 4; break } e.action(), t.next = 13; break; case 4: if (!e.url.endsWith(".json")) { t.next = 10; break } return t.next = 7, QO(vP(e.url)); case 7: YO().togglePanel("newImage", !1), t.next = 13; break; case 10: return t.next = 12, XO().import.openBackgroundImage(vP(e.url)); case 12: YO().togglePanel("newImage", !1); case 13: case "end": return t.stop() } }), t) }))), function () { return t.apply(this, arguments) }), children: ky("img", { className: "w-80 h-80 rounded overflow-hidden transition-shadow hover:shadow-md", src: vP(e.thumbnail), alt: "" }) }) }, e.url || e.thumbnail); var t })) })] }) : null } function MX(e) { var t = e.setActivePanel, n = _(h.exports.useState({ width: 800, height: 600, bgColor: "transparent" }), 2), r = n[0], i = n[1]; return Cy("form", { onSubmit: function (e) { e.preventDefault(); var t = r.width, n = r.height, i = r.bgColor; t && n && (YO().setConfig({ blankCanvasSize: { width: t, height: n } }), XO().canvas.openNew(t, n, i), YO().togglePanel("newImage", !1), XO().history.addInitial()) }, children: [ky(gU, { label: ky(ay, { id: "5IP7AP", defaultMessage: [{ type: 0, value: "Width" }] }), value: r.width, minValue: 1, isRequired: !0, className: "mb-16", onChange: function (e) { i(N(F({}, r), { width: e })) } }), ky(gU, { label: ky(ay, { id: "teLZyZ", defaultMessage: [{ type: 0, value: "Height" }] }), value: r.height, minValue: 1, isRequired: !0, className: "mb-16", onChange: function (e) { i(N(F({}, r), { height: e })) } }), ky(NW, { onChange: function (e) { i(N(F({}, r), { bgColor: e })) }, className: "mb-16", value: r.bgColor, label: ky(ay, { id: "CMansq", defaultMessage: [{ type: 0, value: "Background color" }] }) }), Cy("div", { className: "text-right", children: [ky(kD, { size: "sm", variant: "text", className: "mr-10", onPress: function () { t("default") }, children: ky(ay, { id: "47FYwb", defaultMessage: [{ type: 0, value: "Cancel" }] }) }), ky(kD, { size: "sm", type: "submit", variant: "raised", color: "primary", children: ky(ay, { id: "VzzYJk", defaultMessage: [{ type: 0, value: "Create" }] }) })] })] }) } var AX = h.exports.forwardRef((function (e, t) { var n = hU(e), r = LB(e, h.exports.useRef(null)), i = r.labelProps, o = r.inputProps, a = (r.descriptionProps, r.errorMessageProps, e.label), s = e.startAdornment, l = e.endAdornment; return Cy("div", { className: n.wrapper, ref: t, children: [a && ky("label", N(F({ className: n.label }, i), { children: a })), Cy("div", { className: "relative", children: [ky(aK, { direction: "start", children: s }), ky("input", F({ className: n.input }, o)), ky(aK, { direction: "end", children: l })] })] }) })); Object.defineProperty({}, "useRadioGroupState", { get: function () { return RX }, set: void 0, enumerable: !0, configurable: !0 }); var DX = Math.round(1e10 * Math.random()), LX = 0; function RX(e) { var t = h.exports.useMemo((function () { return e.name || "radio-group-".concat(DX, "-").concat(++LX) }), [e.name]), n = _(IT(e.value, e.defaultValue, e.onChange), 2), r = n[0], i = n[1], o = _(h.exports.useState(null), 2); return { name: t, selectedValue: r, setSelectedValue: function (t) { !e.isReadOnly && !e.isDisabled && i(t) }, lastFocusedValue: o[0], setLastFocusedValue: o[1], isDisabled: e.isDisabled || !1, isReadOnly: e.isReadOnly || !1 } } function IX(e, t, n, r) { Object.defineProperty(e, t, { get: n, set: r, enumerable: !0, configurable: !0 }) } IX({}, "useRadio", (function () { return FX })); var jX = new WeakMap; function FX(e, t, n) { var r = e.value, i = e.children, o = e["aria-label"], a = e["aria-labelledby"], s = e.isDisabled || t.isDisabled; null == i && null == o && null == a && console.warn("If you do not provide children, you must specify an aria-label for accessibility"); var l = t.selectedValue === r, u = YE({ isDisabled: s }).pressProps, c = yD(GT(e, { onFocus: function () { return t.setLastFocusedValue(r) } }), n), f = GT(u, c.focusableProps), h = $T(e, { labelable: !0 }), d = t.lastFocusedValue === r || null == t.lastFocusedValue ? 0 : -1; return s && (d = void 0), { inputProps: GT(h, N(F({}, f), { type: "radio", name: jX.get(t), tabIndex: d, disabled: s, checked: l, value: r, onChange: function (e) { e.stopPropagation(), t.setSelectedValue(r) } })) } } function NX(e, t) { var n = e.name, r = e.validationState, i = e.isReadOnly, o = e.isRequired, a = e.isDisabled, s = e.orientation, l = void 0 === s ? "vertical" : s, u = MI().direction, c = MB(N(F({}, e), { labelElementType: "span" })), f = c.labelProps, h = c.fieldProps, d = $T(e, { labelable: !0 }), p = SO({ onBlurWithin: function () { t.selectedValue || t.setLastFocusedValue(null) } }).focusWithinProps, v = WT(n); return jX.set(t, v), { radioGroupProps: GT(d, F(F({ role: "radiogroup", onKeyDown: function (e) { var n; switch (e.key) { case "ArrowRight": n = "rtl" === u && "vertical" !== l ? "prev" : "next"; break; case "ArrowLeft": n = "rtl" === u && "vertical" !== l ? "next" : "prev"; break; case "ArrowDown": n = "next"; break; case "ArrowUp": n = "prev"; break; default: return }e.preventDefault(); var r, i = cD(e.currentTarget, { from: e.target }); "next" === n ? (r = i.nextNode()) || (i.currentNode = e.currentTarget, r = i.firstChild()) : (r = i.previousNode()) || (i.currentNode = e.currentTarget, r = i.lastChild()), r && (r.focus(), t.setSelectedValue(r.value)) }, "aria-invalid": "invalid" === r || void 0, "aria-errormessage": e["aria-errormessage"], "aria-readonly": i || void 0, "aria-required": o || void 0, "aria-disabled": a || void 0, "aria-orientation": l }, h), p)), labelProps: f } } IX({}, "useRadioGroup", (function () { return NX })); var zX = ce.createContext(null), BX = h.exports.forwardRef((function (e, t) { var n = hU(e), r = e.label, i = e.children, o = e.size, a = e.className, s = e.orientation, l = void 0 === s ? "horizontal" : s, u = RX(e), c = NX(e, u), f = c.radioGroupProps, h = c.labelProps; return Cy("div", N(F({ className: CT("text-left", a) }, f), { ref: t, children: [r && ky("span", N(F({ className: n.label }, h), { children: r })), ky("div", { className: CT("flex", "vertical" === l ? "flex-col gap-10" : "flex-row gap-16"), children: ky(zX.Provider, { value: { state: u, size: o }, children: i }) })] })) })); function VX(e) { var t = e.isDisabled, n = e.children, r = (e.autoFocus, e.value), i = PO({ isDisabled: t }), o = i.hoverProps, a = i.isHovered, s = dD(e), l = s.isFocusVisible, u = s.focusProps, c = h.exports.useRef(null), f = h.exports.useContext(zX), d = f.state, p = f.size, v = d.selectedValue === r, g = FX(N(F(F({}, e), f), { isDisabled: t }), d, c).inputProps; return Cy("label", N(F({ className: CT("inline-flex gap-8 cursor-pointer select-none items-center whitespace-nowrap align-middle", t && "text-disabled pointer-events-none") }, o), { children: [ky(VO, { children: ky("input", N(F({}, GT(g, u)), { ref: c })) }), Cy("span", { className: CT("block relative shrink-0", UX(p), l && "outline outline-offset-2 rounded-full"), children: [ky("span", { className: CT("absolute left-0 top-o w-full h-full block transition-colors duration-200 border-2 rounded-full", HX(v, a, t)) }), ky(vC, { children: v && ky(uC.span, { className: CT("rounded-full w-full h-full block left-0 top-o absolute", a ? "bg-primary-dark" : "bg-primary"), initial: { scale: .01 }, animate: { scale: .5 }, exit: { scale: .01 }, transition: { type: "tween", duration: .2 } }, "radio-inner") })] }), n && ky("span", { children: n })] })) } function UX(e) { switch (e) { case "xs": return "h-12 w-12"; case "sm": return "h-16 w-16"; case "lg": return "h-24 w-24"; case "xl": return "h-36 w-36"; default: return "h-20 w-20" } } function HX(e, t, n) { return n ? "border-disabled-fg" : e ? t ? "border-primary-dark" : "border-primary" : t ? "border-text-main" : "border-text-muted " } function WX() { var e = lw((function (e) { return e.openPanels.export })); return ky(RW, { isOpen: e, onClose: function () { YO().togglePanel("export", !1) }, type: "modal", children: ky(KX, {}) }) } function KX() { var e = h.exports.useState((function () { var e, t, n, r, i, o; return { filename: (null == (t = null == (e = YO().config.tools) ? void 0 : e.export) ? void 0 : t.defaultName) || "image", format: (null == (r = null == (n = YO().config.tools) ? void 0 : n.export) ? void 0 : r.defaultFormat) || "jpeg", quality: (null == (o = null == (i = YO().config.tools) ? void 0 : i.export) ? void 0 : o.defaultQuality) || .8 } })), t = _(e, 2), n = t[0], r = t[1]; return ky(FW, { className: "p-20 text-center max-w-max", children: ky(CX, { children: Cy("form", { onSubmit: function (e) { e.preventDefault(), XO().export.save(n.filename, n.format, n.quality), YO().togglePanel("export", !1) }, children: [ky(AX, { isRequired: !0, size: "sm", label: ky(ay, { id: "/XPfp1", defaultMessage: [{ type: 0, value: "Save As" }] }), value: n.filename, onChange: function (e) { r(N(F({}, n), { filename: e })) } }), Cy(BX, { size: "sm", className: "my-20", "aria-label": "Image format", value: n.format, onChange: function (e) { r(N(F({}, n), { format: e })) }, children: [ky(VX, { value: "jpeg", children: "JPEG" }), ky(VX, { value: "png", children: "PNG" }), ky(VX, { value: "json", children: "JSON" })] }), ky(XW, { size: "sm", minValue: .1, step: .1, maxValue: 1, value: n.quality, onChange: function (e) { r(N(F({}, n), { quality: e })) }, formatOptions: { style: "percent" }, label: ky(ay, { id: "y+7ihJ", defaultMessage: [{ type: 0, value: "Quality" }] }) }), ky(kD, { variant: "raised", color: "primary", type: "submit", className: "mt-20 w-full", size: "sm", children: ky(ay, { id: "jvo0vs", defaultMessage: [{ type: 0, value: "Save" }] }) })] }) }) }) } function YX() { var e = lw((function (e) { return e.objects.all })), t = lw((function (e) { return e.objects.active.id })); return Cy(uC.div, N(F({}, VN), { className: "absolute bottom-20 right-20 w-224 max-w-[calc(100%-40px)] max-h-[calc(100%-40px)] ".concat(BN), children: [Cy("div", { className: "p-8 mb-4 bg-alt dark:bg-paper font-medium text-sm border-b flex items-center", children: [ky(ay, { id: "sWVioT", defaultMessage: [{ type: 0, value: "Objects" }] }), ky(lB, { className: "ml-auto flex-shrink-0", onPress: function () { YO().togglePanel("objects", !1) }, children: ky(SB, {}) })] }), ky("div", { className: "p-8", children: e.map((function (e) { var n = e.id === t, r = e.name, i = tw[r], o = i.icon && ce.createElement(i.icon, { className: "icon-sm" }); return ky(kD, { onPress: function () { n || !e.selectable || XO().objects.select(e.id) }, variant: "outline", color: n ? "primary" : null, size: "sm", className: CT("w-full mb-8", (n || !e.selectable) && "pointer-events-none"), justify: "justify-start", startIcon: o, children: ky(ay, F({}, i.name)) }, e.id) })) })] })) } function XX() { var e = lw((function (e) { return e.openPanels.history })), t = lw((function (e) { return e.openPanels.objects })); return Cy("div", { className: "z-modal", children: [Cy(vC, { children: [e && ky(kX, {}, "historyPanel"), t && ky(YX, {}, "objListPanel")] }), ky(TX, {}), ky(WX, {})] }) } var GX = Oy(ky("path", { d: "M11 15h2v2h-2v-2zm0-8h2v6h-2V7zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" }), "ErrorOutlineOutlined"); function qX() { var e = function (e) { var t = function (e) { void 0 === e && (e = {}); var t = h.exports.useState(pM), n = t[0], r = t[1]; h.exports.useEffect((function () { return dM.push(r), function () { var e = dM.indexOf(r); e > -1 && dM.splice(e, 1) } }), [n]); var i = n.toasts.map((function (t) { var n, r, i; return aM({}, e, e[t.type], t, { duration: t.duration || (null == (n = e[t.type]) ? void 0 : n.duration) || (null == (r = e) ? void 0 : r.duration) || gM[t.type], style: aM({}, e.style, null == (i = e[t.type]) ? void 0 : i.style, t.style) }) })); return aM({}, n, { toasts: i }) }(e), n = t.toasts, r = t.pausedAt; h.exports.useEffect((function () { if (!r) { var e = Date.now(), t = n.map((function (t) { if (t.duration !== 1 / 0) { var n = (t.duration || 0) + t.pauseDuration - (e - t.createdAt); return n < 0 ? void (t.visible && yM.dismiss(t.id)) : setTimeout((function () { return yM.dismiss(t.id) }), n) } })); return function () { t.forEach((function (e) { return e && clearTimeout(e) })) } } }), [n, r]); var i = h.exports.useMemo((function () { return { startPause: function () { vM({ type: sM.START_PAUSE, time: Date.now() }) }, endPause: function () { r && vM({ type: sM.END_PAUSE, time: Date.now() }) }, updateHeight: function (e, t) { return vM({ type: sM.UPDATE_TOAST, toast: { id: e, height: t } }) }, calculateOffset: function (e, t) { var r, i = t || {}, o = i.reverseOrder, a = void 0 !== o && o, s = i.gutter, l = void 0 === s ? 8 : s, u = i.defaultPosition, c = n.filter((function (t) { return (t.position || u) === (e.position || u) && t.height })), f = c.findIndex((function (t) { return t.id === e.id })), h = c.filter((function (e, t) { return t < f && e.visible })).length; return (r = c.filter((function (e) { return e.visible }))).slice.apply(r, a ? [h + 1] : [0, h]).reduce((function (e, t) { return e + (t.height || 0) + l }), 0) } } }), [n, r]); return { toasts: n, handlers: i } }({ position: "bottom-center" }), t = e.toasts, n = e.handlers, r = n.startPause, i = n.endPause; return ky("div", { className: "absolute bottom-10 left-0 right-0 z-toast m-auto px-10", onMouseEnter: r, onMouseLeave: i, children: ky(vC, { initial: !1, children: t.filter((function (e) { return e.visible })).map((function (e) { return Cy(uC.div, N(F({ initial: { opacity: 0, y: 50, scale: .3 }, animate: { opacity: 1, y: 0, scale: 1 }, exit: { opacity: 0, scale: .5, transition: { duration: .2 } }, className: "relative my-8 mx-auto h-[46px] flex items-center shadow-lg text-base w-min whitespace-nowrap bg-error text-on-error rounded-lg p-10" }, e.ariaProps), { children: ["error" === e.type && ky(GX, { className: "svg-icon mr-12 icon-md" }), "string" == typeof e.message ? e.message : ky(ay, F({}, e.message)), ky(lB, { onPress: function () { yM.dismiss(e.id) }, size: "sm", className: "ml-12", children: ky(SB, {}) })] }), e.id) })) }) }) } var JX = function (e) { return e.ENTER = "Enter", e.SPACE = "Space", e.ESCAPE = "Escape", e.DELETE = "Delete", e.ARROW_UP = "ArrowUp", e.ARROW_RIGHT = "ArrowRight", e.ARROW_DOWN = "ArrowDown", e.ARROW_LEFT = "ArrowLeft", e.PAGE_UP = "PageUp", e.PAGE_DOWN = "PageDown", e.HOME = "Home", e.END = "End", e.BACKSPACE = "Backspace", e.TAB = "Tab", e.S = "s", e.N = "n", e.A = "a", e.T = "t", e.B = "b", e.C = "c", e.O = "o", e.P = "p", e.R = "r", e.F = "f", e.Y = "y", e.Z = "z", e }(JX || {}); function ZX(e) { switch (e.key) { case JX.Z: (function (e) { return TE() ? e.metaKey : e.ctrlKey })(e) && (e.preventDefault(), e.stopPropagation(), e.shiftKey ? XO().history.redo() : XO().history.undo()); break; case JX.ARROW_UP: e.preventDefault(), e.stopPropagation(), XO().objects.move("up"); break; case JX.ARROW_RIGHT: e.preventDefault(), e.stopPropagation(), XO().objects.move("right"); break; case JX.ARROW_DOWN: e.preventDefault(), e.stopPropagation(), XO().objects.move("down"); break; case JX.ARROW_LEFT: e.preventDefault(), e.stopPropagation(), XO().objects.move("left"); break; case JX.DELETE: e.preventDefault(), e.stopPropagation(), XO().objects.delete() } } function $X() { var e, t, n, r, i = lw((function (e) { return e.config.activeLanguage })) || "en", o = lw((function (e) { return e.config.languages })), a = null == (e = lw((function (e) { var t; return null == (t = e.config.ui) ? void 0 : t.visible }))) || e, s = null != (t = lw((function (e) { var t, n; return null == (n = null == (t = e.config.ui) ? void 0 : t.nav) ? void 0 : n.position }))) ? t : "bottom", l = null != (n = lw((function (e) { var t, n; return null == (n = null == (t = e.config.ui) ? void 0 : t.menubar) ? void 0 : n.position }))) ? n : "top", u = null == (r = lw((function (e) { var t; return null == (t = e.config.ui) ? void 0 : t.allowEditorClose }))) || r, c = (null == o ? void 0 : o[i]) || {}, f = BA(), d = h.exports.useRef(null), p = h.exports.useRef(null), v = kB(), g = v.isModal, m = v.isMobile, y = xT({ onDrop: h.exports.useCallback((function (e) { var t, n, r; if (!YO().activeTool && !YO().dirty && e.length) { var i = new YP(e[0]); null != (r = null == (n = null == (t = YO().config.tools) ? void 0 : t.import) ? void 0 : n.openDroppedImageAsBackground) && r ? XO().import.openBackgroundImage(i) : XO().import.openUploadedFile(i) } }), []), accept: GP(F(F({}, AM()), DM)) }), b = y.getRootProps, w = y.getInputProps, x = y.rootRef; h.exports.useEffect((function () { var e, t; if (!YO().fabric) { (function (e) { var t = function (e) { var t, n = new UO.fabric.Canvas(e, { width: 1, height: 1 }); n.preserveObjectStacking = !0, n.selection = !1, n.renderOnAddRemove = !1; var r = YO().config.textureSize; r && (UO.fabric.textureSize = r); var i = null == (t = YO().config.objectDefaults) ? void 0 : t.global, o = F(F({}, i), WO); Object.keys(o).forEach((function (e) { UO.fabric.Object.prototype[e] = o[e] })), n.on("object:added", (function (e) { var t, n; e.target && !(null == (n = null == (t = e.target) ? void 0 : t.data) ? void 0 : n.id) && (e.target.data || (e.target.data = {}), e.target.data.id = KO(10)) })); var a = UO.fabric.Object.prototype.controls; return Object.keys(a).forEach((function (e) { delete a[e] })), n }(e); YO().editor.fabric = t, lw.setState({ fabric: t }), YO().editor.tools = { canvas: new tP, objects: new cP, zoom: new qO, history: new mP, filter: new SP, resize: new MP, crop: new LP, merge: new yP, shape: new RP, frame: new zP, text: new pP, draw: new WP, transform: new FM, import: new MM, watermark: new LM, export: new IM, corners: new jM } })(p.current), (null == (e = YO().config.ui) ? void 0 : e.defaultTool) && YO().setActiveTool(null == (t = YO().config.ui) ? void 0 : t.defaultTool, null), XO().canvas.loadInitialContent().then((function () { var e, t; null == (t = (e = YO().config).onLoad) || t.call(e, YO().editor) })); var n = NM(x.current, (function () { YO().setStageSize(zM(x.current)) })), r = NM(p.current, (function () { YO().setCanvasSize(zM(p.current)) })); return function () { n(), r() } } }), [x]), UT((function () { !function (e, t) { if (t) { var n = t.isDark ? dy.find((function (e) { return e.isDark })) : dy.find((function (e) { return !e.isDark })), r = N(F(F({}, n), t), { colors: F(F({}, n.colors), t.colors) }); Object.entries(r.colors).forEach((function (t) { var n = _(t, 2), r = n[0], i = n[1]; e.style.setProperty(r, function (e) { return e.endsWith("%") || 3 === e.split(" ").length ? e : zA(e).rgb().array().slice(0, 3).join(" ") }(i)) })), t.isDark ? e.classList.add("dark") : e.classList.remove("dark") } }(d.current, f) }), [f]); var S = CT("pixie-root flex flex-col overflow-hidden bg-background text-main no-tap-highlight w-full h-full", { relative: !g, "fixed inset-0 w-full h-full z-20": g, "shadow-lg border rounded-md m-auto max-h-[calc(100vh-90px)] max-w-[calc(100vw-90px)]": g && !m }); return Cy(gC, { features: yC, strict: !0, children: [g && a && !m && u && ky(lB, { className: "z-20 fixed right-2 top-2 text-white", size: "lg", onPress: function () { YO().editor.close() }, children: ky(SB, {}) }), g && a && ky(XN, { position: "fixed", disableInitialTransition: !0 }), ky(uC.div, { ref: d, initial: !1, variants: { visible: { opacity: 1, scale: 1, display: "flex" }, hidden: { opacity: 0, transitionEnd: { display: "none" } } }, animate: a ? "visible" : "hidden", className: S, children: ky(VA.Provider, { value: { boundary: d, portalContainer: d, shouldFlip: !1, placement: "bottom" === s ? "top" : "bottom", maxHeight: "400px" }, children: Cy(ry, { locale: i, defaultLocale: "en", messages: c, children: ["top" === l && ky(kU, {}), "top" === s && ky(xX, {}), Cy("main", N(F({ className: "relative flex-auto my-20 overflow-hidden outline-none" }, b({ onKeyDownCapture: ZX })), { children: [ky(VO, { children: ky("input", F({}, w)) }), ky(TU, {}), ky($H, { ref: p })] })), ky(lY, {}), "bottom" === s && ky(xX, {}), "bottom" === l && ky(kU, {}), ky(XX, {}), ky(qX, {})] }) }) })] }) } Nc(!1); var QX = function () { function e(t) { if (g(this, e), B(this, "tools", {}), B(this, "fabric", null), t.sentryDsn && function (e) { e._metadata = e._metadata || {}, e._metadata.sdk = e._metadata.sdk || { name: "sentry.javascript.react", packages: [{ name: "npm:@sentry/react", version: od }], version: od }, function (e) { if (void 0 === e && (e = {}), void 0 === e.defaultIntegrations && (e.defaultIntegrations = bp), void 0 === e.release) { var t = tf(); t.SENTRY_RELEASE && t.SENTRY_RELEASE.id && (e.release = t.SENTRY_RELEASE.id) } void 0 === e.autoSessionTracking && (e.autoSessionTracking = !0), void 0 === e.sendClientReports && (e.sendClientReports = !0), function (e, t) { !0 === t.debug && Af.enable(); var n = jh(), r = n.getScope(); r && r.update(t.initialScope); var i = new e(t); n.bindClient(i) }(yp, e), e.autoSessionTracking && function () { if (void 0 !== tf().document) { var e = jh(); !e.captureSession || (wp(e), ih("history", (function (e) { var t = e.from, n = e.to; void 0 === t || t === n || wp(jh()) }))) } else Zc() && Af.warn("Session tracking in non-browser environment with @sentry/browser is not supported.") }() }(e) }({ dsn: t.sentryDsn, integrations: [new Pv], tracesSampleRate: 1 }), this.setConfig(t), function (e, t) { void 0 === t && (t = {}); var n = t.insertAt; if ("undefined" != typeof document) { var r = document.head || document.getElementsByTagName("head")[0], i = document.createElement("style"); i.type = "text/css", "top" === n && r.firstChild ? r.insertBefore(i, r.firstChild) : r.appendChild(i), i.styleSheet ? i.styleSheet.cssText = e : i.appendChild(document.createTextNode(e)) } }('/*! tailwindcss v3.0.23 | MIT License | https://tailwindcss.com*/.pi *,.pi :after,.pi :before{border:0 solid rgb(var(--be-foreground-base)/var(--be-divider-opacity));box-sizing:border-box}.pi :after,.pi :before{--tw-content:""}.pi hr{border-top-width:1px;color:inherit;height:0}.pi abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}.pi h1,.pi h2,.pi h3,.pi h4,.pi h5,.pi h6{font-size:inherit;font-weight:inherit}.pi a{color:inherit;text-decoration:inherit}.pi b,.pi strong{font-weight:bolder}.pi code,.pi kbd,.pi pre,.pi samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}.pi small{font-size:80%}.pi sub,.pi sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}.pi sub{bottom:-.25em}.pi sup{top:-.5em}.pi table{border-collapse:collapse;border-color:inherit;text-indent:0}.pi button,.pi input,.pi optgroup,.pi select,.pi textarea{color:inherit;font-family:inherit;font-size:100%;line-height:inherit;margin:0;padding:0}.pi button,.pi select{text-transform:none}.pi [type=button],.pi [type=reset],.pi [type=submit],.pi button{-webkit-appearance:button;background-color:transparent;background-image:none}.pi :-moz-focusring{outline:auto}.pi :-moz-ui-invalid{box-shadow:none}.pi progress{vertical-align:baseline}.pi ::-webkit-inner-spin-button,.pi ::-webkit-outer-spin-button{height:auto}.pi [type=search]{-webkit-appearance:textfield;outline-offset:-2px}.pi ::-webkit-search-decoration{-webkit-appearance:none}.pi ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}.pi summary{display:list-item}.pi blockquote,.pi dd,.pi dl,.pi figure,.pi h1,.pi h2,.pi h3,.pi h4,.pi h5,.pi h6,.pi hr,.pi p,.pi pre{margin:0}.pi fieldset{margin:0;padding:0}.pi legend{padding:0}.pi menu,.pi ol,.pi ul{list-style:none;margin:0;padding:0}.pi textarea{resize:vertical}.pi input::-moz-placeholder,.pi textarea::-moz-placeholder{color:#9ca3af;opacity:1}.pi input:-ms-input-placeholder,.pi textarea:-ms-input-placeholder{color:#9ca3af;opacity:1}.pi input::placeholder,.pi textarea::placeholder{color:#9ca3af;opacity:1}.pi [role=button],.pi button{cursor:pointer}.pi :disabled{cursor:default}.pi audio,.pi canvas,.pi embed,.pi iframe,.pi img,.pi object,.pi svg,.pi video{display:block;vertical-align:middle}.pi img,.pi video{height:auto;max-width:100%}.pi [hidden]{display:none}.pi *,.pi :after,.pi :before{--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(147,197,253,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.pi .container{width:100%}.pi .\\!container{width:100%!important}@media (min-width:640px){.pi .container{max-width:640px}.pi .\\!container{max-width:640px!important}}@media (min-width:768px){.pi .container{max-width:768px}.pi .\\!container{max-width:768px!important}}@media (min-width:1024px){.pi .container{max-width:1024px}.pi .\\!container{max-width:1024px!important}}@media (min-width:1280px){.pi .container{max-width:1280px}.pi .\\!container{max-width:1280px!important}}@media (min-width:1536px){.pi .container{max-width:1536px}.pi .\\!container{max-width:1536px!important}}.pi .pointer-events-none{pointer-events:none}.pi .visible{visibility:visible}.pi .static{position:static}.pi .fixed{position:fixed}.pi .absolute{position:absolute}.pi .relative{position:relative}.pi .inset-0{bottom:0;top:0}.pi .inset-0,.pi .inset-x-0{left:0;right:0}.pi .right-2{right:2px}.pi .top-2{top:2px}.pi .left-0{left:0}.pi .-left-5{left:-5px}.pi .top-0{top:0}.pi .-top-5{top:-5px}.pi .bottom-0{bottom:0}.pi .-bottom-5{bottom:-5px}.pi .right-0{right:0}.pi .-right-5{right:-5px}.pi .bottom-20{bottom:20px}.pi .right-20{right:20px}.pi .bottom-10{bottom:10px}.pi .-bottom-20{bottom:-20px}.pi .left-1\\/2{left:50%}.pi .-bottom-10{bottom:-10px}.pi .-left-8{left:-8px}.pi .top-1\\/2{top:50%}.pi .-left-80{left:-80px}.pi .left-12{left:12px}.pi .right-12{right:12px}.pi .isolate{isolation:isolate}.pi .z-20{z-index:20}.pi .z-modal{z-index:120}.pi .z-obj-box{z-index:20}.pi .z-navbar{z-index:40}.pi .z-tool-overlay{z-index:30}.pi .z-loading-indicator{z-index:50}.pi .z-10{z-index:10}.pi .z-popover{z-index:140}.pi .z-tray{z-index:130}.pi .z-toast{z-index:150}.pi .z-cropzone{z-index:10}.pi .m-auto{margin:auto}.pi .my-20{margin-bottom:20px;margin-top:20px}.pi .mx-auto{margin-left:auto;margin-right:auto}.pi .my-8{margin-bottom:8px;margin-top:8px}.pi .my-auto{margin-bottom:auto;margin-top:auto}.pi .mr-5{margin-right:5px}.pi .ml-auto{margin-left:auto}.pi .mr-20{margin-right:20px}.pi .mb-16{margin-bottom:16px}.pi .mr-10{margin-right:10px}.pi .mb-4{margin-bottom:4px}.pi .mb-8{margin-bottom:8px}.pi .mt-20{margin-top:20px}.pi .mb-1{margin-bottom:1px}.pi .mt-6{margin-top:6px}.pi .mr-auto{margin-right:auto}.pi .ml-10{margin-left:10px}.pi .-ml-1{margin-left:-1px}.pi .-ml-4{margin-left:-4px}.pi .mr-8{margin-right:8px}.pi .-mr-4{margin-right:-4px}.pi .ml-8{margin-left:8px}.pi .mt-26{margin-top:26px}.pi .mr-12{margin-right:12px}.pi .ml-12{margin-left:12px}.pi .mt-4{margin-top:4px}.pi .mt-24{margin-top:24px}.pi .ml-6{margin-left:6px}.pi .mr-16{margin-right:16px}.pi .mb-10{margin-bottom:10px}.pi .block{display:block}.pi .inline-block{display:inline-block}.pi .inline{display:inline}.pi .flex{display:flex}.pi .inline-flex{display:inline-flex}.pi .grid{display:grid}.pi .contents{display:contents}.pi .hidden{display:none}.pi .aspect-square{aspect-ratio:1/1}.pi .h-2\\/4{height:50%}.pi .h-full{height:100%}.pi .h-font{height:1em}.pi .h-1{height:1px}.pi .h-80{height:80px}.pi .h-24{height:24px}.pi .h-20{height:20px}.pi .h-30{height:30px}.pi .h-84{height:84px}.pi .h-68{height:68px}.pi .h-32{height:32px}.pi .h-\\[54px\\]{height:54px}.pi .h-36{height:36px}.pi .h-50{height:50px}.pi .h-60{height:60px}.pi .h-42{height:42px}.pi .h-26{height:26px}.pi .h-8{height:8px}.pi .h-48{height:48px}.pi .h-5{height:5px}.pi .h-3{height:3px}.pi .h-64{height:64px}.pi .h-2{height:2px}.pi .h-\\[46px\\]{height:46px}.pi .h-56{height:56px}.pi .h-18{height:18px}.pi .h-12{height:12px}.pi .h-16{height:16px}.pi .h-4{height:4px}.pi .h-px{height:1px}.pi .h-28{height:28px}.pi .h-92{height:92px}.pi .max-h-\\[calc\\(100vh-90px\\)\\]{max-height:calc(100vh - 90px)}.pi .max-h-\\[calc\\(100\\%-40px\\)\\]{max-height:calc(100% - 40px)}.pi .max-h-inherit{max-height:inherit}.pi .min-h-86{min-height:86px}.pi .w-full{width:100%}.pi .w-font{width:1em}.pi .w-80{width:80px}.pi .w-24{width:24px}.pi .w-20{width:20px}.pi .w-30{width:30px}.pi .w-224{width:224px}.pi .w-68{width:68px}.pi .w-96{width:96px}.pi .w-144{width:144px}.pi .w-36{width:36px}.pi .w-50{width:50px}.pi .w-60{width:60px}.pi .w-42{width:42px}.pi .\\!w-auto{width:auto!important}.pi .w-26{width:26px}.pi .w-8{width:8px}.pi .w-1\\/2{width:50%}.pi .w-64{width:64px}.pi .w-32{width:32px}.pi .w-min{width:-webkit-min-content;width:-moz-min-content;width:min-content}.pi .w-56{width:56px}.pi .w-2{width:2px}.pi .w-18{width:18px}.pi .w-110{width:110px}.pi .w-40{width:40px}.pi .w-\\[4ch\\]{width:4ch}.pi .w-12{width:12px}.pi .w-16{width:16px}.pi .w-auto{width:auto}.pi .w-px{width:1px}.pi .w-28{width:28px}.pi .max-w-\\[calc\\(100vw-90px\\)\\]{max-width:calc(100vw - 90px)}.pi .max-w-max{max-width:-webkit-max-content;max-width:-moz-max-content;max-width:max-content}.pi .max-w-\\[calc\\(100\\%-40px\\)\\]{max-width:calc(100% - 40px)}.pi .max-w-384{max-width:384px}.pi .max-w-375{max-width:375px}.pi .max-w-full{max-width:100%}.pi .max-w-240{max-width:240px}.pi .max-w-320{max-width:320px}.pi .max-w-288{max-width:288px}.pi .max-w-112{max-width:112px}.pi .flex-auto{flex:1 1 auto}.pi .flex-shrink-0,.pi .shrink-0{flex-shrink:0}.pi .origin-\\[100\\%\\]{transform-origin:100%}.pi .translate-y-1{--tw-translate-y:1px}.pi .-translate-x-1\\/2,.pi .translate-y-1{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .-translate-x-1\\/2{--tw-translate-x:-50%}.pi .-translate-y-1\\/2{--tw-translate-y:-50%}.pi .-translate-y-1\\/2,.pi .rotate-180{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .rotate-180{--tw-rotate:180deg}.pi .rotate-0{--tw-rotate:0deg}.pi .rotate-0,.pi .rotate-90{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .rotate-90{--tw-rotate:90deg}.pi .-rotate-90{--tw-rotate:-90deg}.pi .-rotate-90,.pi .transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .cursor-nwse-resize{cursor:nwse-resize}.pi .cursor-nesw-resize{cursor:nesw-resize}.pi .cursor-se-resize{cursor:se-resize}.pi .cursor-sw-resize{cursor:sw-resize}.pi .cursor-pointer{cursor:pointer}.pi .cursor-default{cursor:default}.pi .cursor-move{cursor:move}.pi .touch-none{touch-action:none}.pi .select-none{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pi .resize{resize:both}.pi .appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.pi .grid-cols-5-min-content{grid-template-columns:repeat(5,-webkit-min-content);grid-template-columns:repeat(5,min-content)}.pi .flex-row{flex-direction:row}.pi .flex-col{flex-direction:column}.pi .flex-nowrap{flex-wrap:nowrap}.pi .items-center{align-items:center}.pi .justify-start{justify-content:flex-start}.pi .justify-center{justify-content:center}.pi .justify-between{justify-content:space-between}.pi .gap-16{gap:16px}.pi .gap-10{gap:10px}.pi .gap-8{gap:8px}.pi .gap-32{gap:32px}.pi .gap-6{gap:6px}.pi .gap-20{gap:20px}.pi .gap-12{gap:12px}.pi .gap-18{gap:18px}.pi .overflow-auto{overflow:auto}.pi .overflow-hidden{overflow:hidden}.pi .overflow-x-auto{overflow-x:auto}.pi .overflow-y-auto{overflow-y:auto}.pi .overflow-y-hidden{overflow-y:hidden}.pi .truncate{overflow:hidden;text-overflow:ellipsis}.pi .truncate,.pi .whitespace-nowrap{white-space:nowrap}.pi .rounded{border-radius:4px}.pi .rounded-md{border-radius:6px}.pi .rounded-none{border-radius:0}.pi .rounded-2xl{border-radius:16px}.pi .rounded-full{border-radius:9999px}.pi .rounded-sm{border-radius:2px}.pi .rounded-lg{border-radius:8px}.pi .rounded-xl{border-radius:12px}.pi .rounded-\\[16px\\]{border-radius:16px}.pi .rounded-\\[64px\\]{border-radius:64px}.pi .rounded-\\[32px\\]{border-radius:32px}.pi .rounded-tr-none{border-top-right-radius:0}.pi .rounded-br-none{border-bottom-right-radius:0}.pi .rounded-tl-none{border-top-left-radius:0}.pi .rounded-bl-none{border-bottom-left-radius:0}.pi .border{border-width:1px}.pi .border-4{border-width:4px}.pi .border-2{border-width:2px}.pi .border-\\[3px\\]{border-width:3px}.pi .border-l-4{border-left-width:4px}.pi .border-t-4{border-top-width:4px}.pi .border-r-4{border-right-width:4px}.pi .border-b-4{border-bottom-width:4px}.pi .border-b{border-bottom-width:1px}.pi .border-t{border-top-width:1px}.pi .border-l{border-left-width:1px}.pi .border-dotted{border-style:dotted}.pi .border-none{border-style:none}.pi .border-divider{border-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity))}.pi .border-white{--tw-border-opacity:1;border-color:rgb(255 255 255/var(--tw-border-opacity))}.pi .border-primary\\/50{border-color:rgb(var(--be-primary)/.5)}.pi .border-error\\/50{border-color:rgb(var(--be-error)/.5)}.pi .border-transparent{border-color:transparent}.pi .border-primary{--tw-border-opacity:1;border-color:rgb(var(--be-primary)/var(--tw-border-opacity))}.pi .border-error{--tw-border-opacity:1;border-color:rgb(var(--be-error)/var(--tw-border-opacity))}.pi .border-background{--tw-border-opacity:1;border-color:rgb(var(--be-background)/var(--tw-border-opacity))}.pi .border-disabled-fg{border-color:rgb(var(--be-foreground-base)/var(--be-disabled-fg-opacity))}.pi .border-primary-dark{--tw-border-opacity:1;border-color:rgb(var(--be-primary-dark)/var(--tw-border-opacity))}.pi .border-text-main{border-color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))}.pi .border-text-muted{border-color:rgb(var(--be-foreground-base)/var(--be-text-muted-opacity))}.pi .border-white\\/50{border-color:hsla(0,0%,100%,.5)}.pi .border-r-transparent{border-right-color:transparent}.pi .bg-background{--tw-bg-opacity:1;background-color:rgb(var(--be-background)/var(--tw-bg-opacity))}.pi .bg-divider{background-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity))}.pi .bg-paper{--tw-bg-opacity:1;background-color:rgb(var(--be-paper)/var(--tw-bg-opacity))}.pi .bg-controls{--tw-bg-opacity:1;background-color:rgb(50 50 50/var(--tw-bg-opacity))}.pi .bg-alt{--tw-bg-opacity:1;background-color:rgb(var(--be-background-alt)/var(--tw-bg-opacity))}.pi .bg{--tw-bg-opacity:1;background-color:rgb(var(--be-background)/var(--tw-bg-opacity))}.pi .bg-hover{background-color:rgb(var(--be-foreground-base)/var(--be-hover-opacity))}.pi .bg-transparent{background-color:transparent}.pi .bg-primary{--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity))}.pi .bg-error{--tw-bg-opacity:1;background-color:rgb(var(--be-error)/var(--tw-bg-opacity))}.pi .bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.pi .bg-primary-light{--tw-bg-opacity:1;background-color:rgb(var(--be-primary-light)/var(--tw-bg-opacity))}.pi .bg-background\\/70{background-color:rgb(var(--be-background)/.7)}.pi .bg-primary\\/focus{background-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .bg-primary\\/selected{background-color:rgb(var(--be-primary)/var(--be-selected-opacity))}.pi .bg-focus{background-color:rgb(var(--be-foreground-base)/var(--be-focus-opacity))}.pi .bg-primary-dark{--tw-bg-opacity:1;background-color:rgb(var(--be-primary-dark)/var(--tw-bg-opacity))}.pi .bg-disabled{background-color:rgb(var(--be-foreground-base)/var(--be-disabled-bg-opacity))}.pi .bg-disabled-fg{background-color:rgb(var(--be-foreground-base)/var(--be-disabled-fg-opacity))}.pi .bg-slider-disabled{--tw-bg-opacity:1;background-color:rgb(189 189 189/var(--tw-bg-opacity))}.pi .bg-black\\/30{background-color:rgba(0,0,0,.3)}.pi .bg-white\\/50{background-color:hsla(0,0%,100%,.5)}.pi .bg-black\\/50{background-color:rgba(0,0,0,.5)}.pi .bg-opacity-95{--tw-bg-opacity:0.95}.pi .fill-current{fill:currentColor}.pi .fill-transparent{fill:transparent}.pi .fill-background{fill:rgb(var(--be-background))}.pi .stroke-current{stroke:currentColor}.pi .object-cover{-o-object-fit:cover;object-fit:cover}.pi .p-20{padding:20px}.pi .p-8{padding:8px}.pi .p-6{padding:6px}.pi .p-44{padding:44px}.pi .p-12{padding:12px}.pi .p-10{padding:10px}.pi .p-4{padding:4px}.pi .py-20{padding-bottom:20px;padding-top:20px}.pi .px-6{padding-left:6px;padding-right:6px}.pi .px-16{padding-left:16px;padding-right:16px}.pi .px-5vw{padding-left:5vw;padding-right:5vw}.pi .px-12{padding-left:12px;padding-right:12px}.pi .py-\\[9px\\]{padding-bottom:9px;padding-top:9px}.pi .px-8{padding-left:8px;padding-right:8px}.pi .py-4{padding-bottom:4px;padding-top:4px}.pi .px-14{padding-left:14px;padding-right:14px}.pi .px-18{padding-left:18px;padding-right:18px}.pi .px-26{padding-left:26px;padding-right:26px}.pi .px-32{padding-left:32px;padding-right:32px}.pi .px-22{padding-left:22px;padding-right:22px}.pi .py-28{padding-bottom:28px;padding-top:28px}.pi .px-24{padding-left:24px;padding-right:24px}.pi .px-10{padding-left:10px;padding-right:10px}.pi .px-2{padding-left:2px;padding-right:2px}.pi .py-8{padding-bottom:8px;padding-top:8px}.pi .px-20{padding-left:20px;padding-right:20px}.pi .py-14{padding-bottom:14px;padding-top:14px}.pi .pb-20{padding-bottom:20px}.pi .pb-4{padding-bottom:4px}.pi .pb-safe-area{padding-bottom:env(safe-area-inset-bottom)}.pi .pb-18{padding-bottom:18px}.pi .pt-6{padding-top:6px}.pi .pt-16{padding-top:16px}.pi .pb-10{padding-bottom:10px}.pi .pt-10{padding-top:10px}.pi .pl-12{padding-left:12px}.pi .pr-10{padding-right:10px}.pi .pl-10{padding-left:10px}.pi .pr-12{padding-right:12px}.pi .pl-36{padding-left:36px}.pi .pr-36{padding-right:36px}.pi .pb-16{padding-bottom:16px}.pi .text-left{text-align:left}.pi .text-center{text-align:center}.pi .text-right{text-align:right}.pi .align-middle{vertical-align:middle}.pi .text-sm{font-size:14px;line-height:20px}.pi .text-xs{font-size:12px;line-height:16px}.pi .text-base{font-size:16px;line-height:24px}.pi .text-lg{font-size:18px;line-height:28px}.pi .text-xl{font-size:20px;line-height:28px}.pi .font-medium{font-weight:500}.pi .font-semibold{font-weight:600}.pi .font-bold{font-weight:700}.pi .uppercase{text-transform:uppercase}.pi .capitalize{text-transform:capitalize}.pi .italic{font-style:italic}.pi .leading-none{line-height:1}.pi .tracking-wide{letter-spacing:.025em}.pi .text,.pi .text-main{color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))}.pi .text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.pi .\\!text{color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))!important}.pi .text-disabled{color:rgb(var(--be-foreground-base)/var(--be-disabled-fg-opacity))}.pi .text-muted{color:rgb(var(--be-foreground-base)/var(--be-text-muted-opacity))}.pi .text-primary{--tw-text-opacity:1;color:rgb(var(--be-primary)/var(--tw-text-opacity))}.pi .text-error{--tw-text-opacity:1;color:rgb(var(--be-error)/var(--tw-text-opacity))}.pi .text-current{color:currentColor}.pi .text-on-primary{--tw-text-opacity:1;color:rgb(var(--be-on-primary)/var(--tw-text-opacity))}.pi .text-on-error{--tw-text-opacity:1;color:rgb(var(--be-on-error)/var(--tw-text-opacity))}.pi .underline{-webkit-text-decoration-line:underline;text-decoration-line:underline}.pi .no-underline{-webkit-text-decoration-line:none;text-decoration-line:none}.pi .opacity-0{opacity:0}.pi .opacity-100{opacity:1}.pi .shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px -1px rgba(0,0,0,.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color),0 1px 2px -1px var(--tw-shadow-color)}.pi .shadow,.pi .shadow-lg{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.pi .shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color)}.pi .shadow-md,.pi .shadow-sm{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .shadow-sm{--tw-shadow:0 1px 2px 0 rgba(0,0,0,.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color)}.pi .outline-none{outline:2px solid transparent;outline-offset:2px}.pi .outline{outline-style:solid;outline-width:2px}.pi .outline-offset-2{outline-offset:2px}.pi .outline,.pi .outline-primary-light{outline-color:rgb(var(--be-primary-light))}.pi .ring-2{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color)}.pi .ring,.pi .ring-2{box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .ring{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color)}.pi .ring-1{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .ring-inset{--tw-ring-inset:inset}.pi .ring-primary-light{--tw-ring-opacity:1;--tw-ring-color:rgb(var(--be-primary-light)/var(--tw-ring-opacity))}.pi .ring-black{--tw-ring-opacity:1;--tw-ring-color:rgb(0 0 0/var(--tw-ring-opacity))}.pi .ring-opacity-5{--tw-ring-opacity:0.05}.pi .blur{--tw-blur:blur(8px)}.pi .blur,.pi .grayscale{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.pi .grayscale{--tw-grayscale:grayscale(100%)}.pi .invert{--tw-invert:invert(100%)}.pi .invert,.pi .sepia{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.pi .sepia{--tw-sepia:sepia(100%)}.pi .filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.pi .transition-transform{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-shadow{transition-duration:.15s;transition-property:box-shadow;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-opacity{transition-duration:.15s;transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition{transition-duration:.15s;transition-property:color,background-color,border-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-text-decoration-color,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-text-decoration-color,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-button{transition-duration:.15s;transition-property:background-color,box-shadow,border-color,color;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-width{transition-duration:.15s;transition-property:width;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-colors{transition-duration:.15s;transition-property:color,background-color,border-color,fill,stroke,-webkit-text-decoration-color;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,-webkit-text-decoration-color;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .duration-200{transition-duration:.2s}.pi .duration-300{transition-duration:.3s}.pi .icon-xs{font-size:1rem}.pi .icon-sm{font-size:1.25rem}.pi .icon-md{font-size:1.5rem}.pi .icon-lg{font-size:2.1875rem}.pi .icon-xl{font-size:2.6875rem}.pi .no-tap-highlight{-webkit-tap-highlight-color:transparent}@media only screen and (min-device-width:768px){.pi .tiny-scrollbar{scrollbar-color:rgba(0,0,0,.2) transparent;scrollbar-width:thin}.pi .tiny-scrollbar::-webkit-scrollbar{background-color:transparent;height:6px;width:6px}.pi .tiny-scrollbar::-webkit-scrollbar-thumb{background-color:rgb(var(--be-foreground-base)/.2);border-radius:10px}.pi .tiny-scrollbar::-webkit-scrollbar-track-piece:start{background:transparent}.pi .tiny-scrollbar::-webkit-scrollbar-track-piece:end{background:transparent}}.pi .hide-scrollbar{scrollbar-width:none}.pi .hide-scrollbar::-webkit-scrollbar{background:transparent;height:0;width:0}.pi .svg-icon{fill:currentColor;display:inline-block;flex-shrink:0;transition-duration:.15s;transition-property:transform,fill;transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pi .cropzone:not(.moving) .cropzone-transition{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .hover\\:scale-110:hover{--tw-scale-x:1.1;--tw-scale-y:1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .hover\\:border-primary:hover{--tw-border-opacity:1;border-color:rgb(var(--be-primary)/var(--tw-border-opacity))}.pi .hover\\:border-error:hover{--tw-border-opacity:1;border-color:rgb(var(--be-error)/var(--tw-border-opacity))}.pi .hover\\:border-primary-dark:hover{--tw-border-opacity:1;border-color:rgb(var(--be-primary-dark)/var(--tw-border-opacity))}.pi .hover\\:border-error\\/90:hover{border-color:rgb(var(--be-error)/.9)}.pi .hover\\:bg-white\\/hover:hover{background-color:rgb(255 255 255/var(--be-hover-opacity))}.pi .hover\\:bg-primary\\/hover:hover{background-color:rgb(var(--be-primary)/var(--be-hover-opacity))}.pi .hover\\:bg-error\\/4:hover{background-color:rgb(var(--be-error)/4%)}.pi .hover\\:bg-hover:hover{background-color:rgb(var(--be-foreground-base)/var(--be-hover-opacity))}.pi .hover\\:bg-primary\\/4:hover{background-color:rgb(var(--be-primary)/4%)}.pi .hover\\:bg-primary-dark:hover{--tw-bg-opacity:1;background-color:rgb(var(--be-primary-dark)/var(--tw-bg-opacity))}.pi .hover\\:bg-error\\/90:hover{background-color:rgb(var(--be-error)/.9)}.pi .hover\\:shadow-md:hover{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .focus\\:border-primary\\/60:focus{border-color:rgb(var(--be-primary)/.6)}.pi .focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.pi .focus\\:ring:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .focus\\:ring-primary\\/focus:focus{--tw-ring-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .disabled\\:pointer-events-none:disabled{pointer-events:none}.pi .disabled\\:cursor-default:disabled{cursor:default}.pi .disabled\\:border-disabled-bg:disabled{border-color:rgb(var(--be-foreground-base)/var(--be-disabled-bg-opacity))}.pi .disabled\\:border-transparent:disabled{border-color:transparent}.pi .disabled\\:border-r-transparent:disabled{border-right-color:transparent}.pi .disabled\\:bg-transparent:disabled{background-color:transparent}.pi .disabled\\:bg-disabled:disabled{background-color:rgb(var(--be-foreground-base)/var(--be-disabled-bg-opacity))}.pi .disabled\\:text-disabled:disabled{color:rgb(var(--be-foreground-base)/var(--be-disabled-fg-opacity))}.pi .disabled\\:shadow-none:disabled{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .dark .dark\\:bg-paper{--tw-bg-opacity:1;background-color:rgb(var(--be-paper)/var(--tw-bg-opacity))}@media (min-width:640px){.pi .sm\\:text-sm{font-size:14px;line-height:20px}}'), !t.selector) throw new Error('Pixie required "selector" option.'); var n = document.querySelector(t.selector); !n || (n.classList.add("pi"), lw.setState({ editor: this }), wc.render(ky(ce.StrictMode, { children: ky($X, {}) }), n)) } var t, n; return y(e, [{ key: "state", get: function () { return YO() } }, { key: "version", get: function () { return "3.0.2" } }, { key: "defaultConfig", get: function () { return qy } }, { key: "open", value: function () { var e, t = this, n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; (null == (e = YO().config.ui) ? void 0 : e.visible) || (this.setConfig(Oc(n, { ui: { visible: !0 } })), requestAnimationFrame((function () { var e, n, r, i; XO().zoom.fitToScreen(), XO().history.addInitial(), $O() && (null == (n = null == (e = YO().config.ui) ? void 0 : e.openImageDialog) ? void 0 : n.show) && t.togglePanel("newImage", !0), null == (i = (r = YO().config).onOpen) || i.call(r) }))) } }, { key: "close", value: function () { var e, t, n; !(null == (e = YO().config.ui) ? void 0 : e.visible) || (this.setConfig({ ui: { visible: !1 } }), null == (n = (t = YO().config).onClose) || n.call(t)) } }, { key: "setConfig", value: function (e) { YO().setConfig(e) } }, { key: "uploadAndAddImage", value: function () { return XO().import.uploadAndAddImage() } }, { key: "uploadAndReplaceMainImage", value: function () { return XO().import.uploadAndReplaceMainImage() } }, { key: "uploadAndOpenStateFile", value: function () { return XO().import.uploadAndOpenStateFile() } }, { key: "newCanvas", value: function (e, t, n) { return XO().canvas.openNew(e, t, n) } }, { key: "getState", value: function (e) { return JSON.stringify(hP(e)) } }, { key: "setState", value: function (e) { return XO().import.loadState(e) } }, { key: "setStateFromUrl", value: (n = x(b().mark((function e(t) { var n; return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, QO(t); case 2: return n = e.sent, e.abrupt("return", XO().import.loadState(n)); case 4: case "end": return e.stop() } }), e) }))), function (e) { return n.apply(this, arguments) }) }, { key: "openTool", value: function (e) { aP(e) } }, { key: "applyChanges", value: function () { YO().applyChanges() } }, { key: "cancelChanges", value: function () { YO().cancelChanges() } }, { key: "resetEditor", value: (t = x(b().mark((function e(t) { return b().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, OM(t); case 2: return e.next = 4, XO().canvas.loadInitialContent(); case 4: case "end": return e.stop() } }), e) }))), function (e) { return t.apply(this, arguments) }) }, { key: "togglePanel", value: function (e, t) { YO().togglePanel(e, t) } }, { key: "on", value: function (e, t) { var n; null == (n = this.fabric) || n.on(e, t) } }, { key: "isDirty", value: function () { return YO().dirty } }, { key: "get", value: function (e) { return this.tools[e] } }, { key: "notify", value: function (e) { return bM(e) } }], [{ key: "init", value: function (e) { var t = this; return new Promise((function (n) { var r = e.onLoad; e.onLoad = function (e) { null == r || r(e), n(e) }, new t(e) })) } }]), e }(); return QX }, "object" == C(t) ? e.exports = P() : void 0 === (i = "function" == typeof (r = P) ? r.call(t, n, t, e) : r) || (e.exports = i) } }]);
